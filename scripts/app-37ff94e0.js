"use strict";function ThemingProvider(e){var n={};return{theme:function(e){if(void 0!==n[e])return n[e];var t=new Theme(e);return n[e]=t,n[e]},$get:function(){return{getTheme:function(e){return n[e]},getThemeHue:function(n,t,a){if(void 0!==e._THEMES[n]&&void 0!==e._THEMES[n].colors[t]){var s=e._THEMES[n].colors[t];if(void 0!==e._PALETTES[s.name]&&void 0!==e._PALETTES[s.name][s.hues[a]])return e._PALETTES[s.name][s.hues[a]]}},getPalette:function(n){return e._PALETTES[n]},getPaletteColor:function(n,t){return void 0!==e._PALETTES[n]&&void 0!==e._PALETTES[n][t]?e._PALETTES[n][t]:void 0},rgba:e._rgba,palettes:e._PALETTES,themes:e._THEMES,parseRules:e._parseRules}}}}function Theme(e){var n=["primary","accent","warn","background"],t=this;t.name=e,t.colors={},t.isDark=!1,n.forEach(function(e){t[e+"Palette"]=function(n,a){return t.colors[e]={name:n,hues:{}},void 0!==a&&(t.colors[e].hues=a),t}}),t.dark=function(e){t.isDark=void 0===e?!0:e}}function SkinsProvider(e,n,t){var a={},s=null,o=!1;return{skin:function(t,s){if(void 0!==a[t])return a[t];var o=new Skin(t,s,e,n);return a[t]=o,a[t]},setSkin:function(e){if(void 0===a[e])return void console.error("No such skin as "+e);if(s=a[e],o){var n;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){n=e}]);var i=n.get("triangular-skin");if(void 0!==i){var r=angular.fromJson(i);s=void 0!==a[r.skin]?a[r.skin]:a[t.defaultSkin]}}return s.loadThemes(),s},useSkinCookie:function(e){o=e},$get:function(){return{getCurrent:function(){return s},getSkins:function(){return a}}}}}function Skin(e,n,t,a){var s=["sidebar","logo","toolbar","content"],o=this;o.id=e,o.name=n,o.elements={},s.forEach(function(e){o[e+"Theme"]=function(n){return o.elements[e]=n,o}}),o.loadThemes=function(){for(var e in o.elements){var n=a.theme(o.elements[e]);t.theme(n.name).primaryPalette(n.colors.primary.name,n.colors.primary.hues).accentPalette(n.colors.accent.name,n.colors.accent.hues).warnPalette(n.colors.warn.name,n.colors.warn.hues).dark(n.isDark)}t.setDefaultTheme(o.elements.content)}}function addSkinToScope(e,n){e.triSkin=n.getCurrent()}function CrosswordCell(e){this.char=e,this.across=null,this.down=null}function CrosswordCellNode(e,n){this.is_start_of_word=e,this.index=n}function WordElement(e,n){this.word=e,this.index=n}function Crossword(e,n){var t,a=50,s=50,o={};this.getSquareGrid=function(e){for(var n=null,t=0,a=0;e>a;a++){var s=this.getGrid(1);if(null!=s){var o=1*Math.min(s.length,s[0].length)/Math.max(s.length,s[0].length);if(o>t&&(n=s,t=o),1==t)break}}return n},this.getGrid=function(e){for(var n=0;e>n;n++){u();var a=m(),s=Math.floor(g.length/2),o=Math.floor(g[0].length/2),r=_[0];if("across"==a?o-=Math.floor(r.word.length/2):s-=Math.floor(r.word.length/2),c(r.word,s,o,a)===!1)return t=[r],null;l(r.word,r.index,s,o,a);var d=[];d.push(_.slice(1));for(var f=0;f<d.length;f++){for(var h=!1,v=0;v<d[f].length;v++){var r=d[f][v],b=p(r.word);if(b){var s=b.row,o=b.col,y=b.direction;l(r.word,r.index,s,o,y),h=!0}else d.length-1==f&&d.push([]),d[f+1].push(r)}if(!h)break}if(h)return i()}return t=d[d.length-1],null},this.getBadWords=function(){return t},this.getLegend=function(t){for(var a={across:[],down:[]},s=1,o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++){var r=t[o][i],l=!1;for(var d in a)if(r&&r[d]&&r[d].is_start_of_word){var c=r[d].index;a[d].push({position:s,index:c,clue:n[c],word:e[c]}),l=!0}l&&s++}return a};var i=function(){for(var e=a-1,n=0,t=s-1,o=0,i=0;a>i;i++)for(var r=0;s>r;r++){var l=g[i][r];null!=l&&(e>i&&(e=i),i>n&&(n=i),t>r&&(t=r),r>o&&(o=r))}for(var d=n-e+1,c=o-t+1,m=new Array(d),i=0;d>i;i++)for(var r=0;c>r;r++)m[i]=new Array(c);for(var i=e,p=0;d>p;i++,p++)for(var r=t,u=0;c>u;r++,u++)m[p][u]=g[i][r];return m},r=function(e,n,t,a,s,i){var r=e.charAt(t);null==g[a][s]&&(g[a][s]=new CrosswordCell(r),o[r]||(o[r]=[]),o[r].push({row:a,col:s}));var l=0==t;g[a][s][i]=new CrosswordCellNode(l,n)},l=function(e,n,t,a,s){if("across"==s)for(var o=a,i=0;o<a+e.length;o++,i++)r(e,n,i,t,o,s);else{if("down"!=s)throw"Invalid Direction";for(var l=t,i=0;l<t+e.length;l++,i++)r(e,n,i,l,a,s)}},d=function(e,n,t){return null==g[n][t]?0:g[n][t]["char"]==e?1:!1},c=function(e,n,t,a){if(0>n||n>=g.length||0>t||t>=g[n].length)return!1;if("across"==a){if(t+e.length>g[n].length)return!1;if(t-1>=0&&null!=g[n][t-1])return!1;if(t+e.length<g[n].length&&null!=g[n][t+e.length])return!1;for(var s=n-1,o=t,i=0;s>=0&&o<t+e.length;o++,i++){var r=null==g[s][o],l=null!=g[n][o]&&g[n][o]["char"]==e.charAt(i),c=r||l;if(!c)return!1}for(var s=n+1,o=t,i=0;s<g.length&&o<t+e.length;o++,i++){var r=null==g[s][o],l=null!=g[n][o]&&g[n][o]["char"]==e.charAt(i),c=r||l;if(!c)return!1}for(var m=0,o=t,i=0;o<t+e.length;o++,i++){var p=d(e.charAt(i),n,o);if(p===!1)return!1;m+=p}}else{if("down"!=a)throw"Invalid Direction";if(n+e.length>g.length)return!1;if(n-1>=0&&null!=g[n-1][t])return!1;if(n+e.length<g.length&&null!=g[n+e.length][t])return!1;for(var o=t-1,s=n,i=0;o>=0&&s<n+e.length;s++,i++){var r=null==g[s][o],l=null!=g[s][t]&&g[s][t]["char"]==e.charAt(i),c=r||l;if(!c)return!1}for(var o=t+1,s=n,i=0;s<n+e.length&&o<g[s].length;s++,i++){var r=null==g[s][o],l=null!=g[s][t]&&g[s][t]["char"]==e.charAt(i),c=r||l;if(!c)return!1}for(var m=0,s=n,i=0;s<n+e.length;s++,i++){var p=d(e.charAt(i,1),s,t);if(p===!1)return!1;m+=p}}return m},m=function(){return Math.floor(2*Math.random())?"across":"down"},p=function(e){for(var n=[],t=0;t<e.length;t++){var a=o[e.charAt(t)];if(a)for(var s=0;s<a.length;s++){var i=a[s],r=i.row,l=i.col,d=c(e,r,l-t,"across"),m=c(e,r-t,l,"down");d!==!1&&n.push({intersections:d,row:r,col:l-t,direction:"across"}),m!==!1&&n.push({intersections:m,row:r-t,col:l,direction:"down"})}}if(0==n.length)return!1;var p=n[Math.floor(Math.random()*n.length)];return p},u=function(){for(var e=0;e<g.length;e++)for(var n=0;n<g[e].length;n++)g[e][n]=null;o={}};if(e.length<2)throw"A crossword must have at least 2 words";if(e.length!=n.length)throw"The number of words must equal the number of clues";for(var g=new Array(a),f=0;a>f;f++)g[f]=new Array(s);for(var _=[],f=0;f<e.length;f++)_.push(new WordElement(e[f],f));_.sort(function(e,n){return n.word.length-e.word.length})}ThemingProvider.$inject=["$mdThemingProvider"],SkinsProvider.$inject=["$mdThemingProvider","triThemingProvider","APP"],addSkinToScope.$inject=["$rootScope","triSkins"],angular.module("triWordModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/word-module"),n.state("admin-panel.default.word-page",{url:"/word/word-page/:lemma/:originlemma",templateUrl:"app/word-module/template/word-page.tmpl.html",controller:"WordPageController"}).state("admin-panel.default.upload",{url:"/image-upload/",templateUrl:"app/word-module/template/image-upload.tmpl.html",controller:"ImageUploadController"}).state("admin-panel.default.p2p_vote",{url:"/word/p2pvote/:id",templateUrl:"app/word-module/template/p2p_vote.tmpl.html",controller:"P2PVoteController"})}]),angular.module("triWordModule").factory("WordService",["$q","$state","WNService","$stateParams","$rootScope",function(e,n,t,a,s){var o=Parse.Object.extend("Fre60K"),i=(Parse.Object.extend("AddCategory"),{getCatWordsByCatId:function(n){var t=e.defer(),a=Parse.Object.extend("AddCategory"),s=new Parse.Query(a);return s.equalTo("parent_cat",n.id),s.find({success:function(e){t.resolve(e)}}),t.promise},getWordByLemmas:function(n){var t=e.defer(),a=Parse.Object.extend("Fre60K"),s=new Parse.Query(a);return s.containedIn("lemma",n),s.find({success:function(e){t.resolve(e)}}),t.promise},getPronByLemmas:function(n){var t=e.defer(),a=Parse.Object.extend("Fre60K"),s=new Parse.Query(a);return s.containedIn("lemma",n),s.find({success:function(e){t.resolve(e)}}),t.promise},getPronByDefines:function(n){for(var t=new Array,a=new Array,s=n.length-1;s>=0;s--)t.push(n[s].get("origin_obj_lemma")),a.push(n[s].get("define_id"));var o=e.defer(),i=Parse.Object.extend("Fre60K"),r=new Parse.Query(i);return r.containedIn("lemma",t),r.find({success:function(e){var n=Parse.Object.extend("Dict"),t=new Parse.Query(n);t.containedIn("objectId",a),t.find({success:function(n){for(var t=n.length-1;t>=0;t--)for(var a=e.length-1;a>=0;a--)n[t].get("lemma")==e[a].get("lemma")&&(n[t].set("uk_pron",e[a].get("uk_pron")),n[t].set("uk_change_pron",e[a].get("uk_change_pron")),n[t].set("us_pron",e[a].get("us_pron")),n[t].set("us_change_pron",e[a].get("us_change_pron")),n[t].get("uk_pron_ext")&&(n[t].uk_pron_ext=n[t].get("uk_pron_ext"),n[t].us_pron_ext=n[t].get("us_pron_ext"),n[t].uk_change_pron_ext=n[t].get("uk_change_pron_ext"),n[t].us_change_pron_ext=n[t].get("us_change_pron_ext")),n[t].worddata=e[a]);o.resolve(n)}})}}),o.promise},getDefinesByLemmas:function(n){var t=e.defer(),a=Parse.Object.extend("Dict"),s=new Parse.Query(a);return s.containedIn("lemma",n),s.find({success:function(e){t.resolve(e)}}),t.promise},getCect4Words:function(n,t){var a=this;1>t&&(t=1);var s=30,o=e.defer(),i=Parse.Object.extend("AddCategory"),r=new Parse.Query(i);return r.exists("cect4"),r.ascending("name"),r.equalTo("type","word"),"all"!=n&&r.matches("name",".*"+n+".*"),r.skip((t-1)*s),r.limit(s),r.find({success:function(e){for(var n=[],t=[],s=[],i=e.length-1;i>=0;i--){var r=e[i],l=r.get("name")+"@"+r.get("pos"),d=n.indexOf(l);0>d&&(n.push(l),t.push(r),s.push(r.get("name")))}var c=a.getWordByLemmas(s);c.then(function(e){for(var n=e.length-1;n>=0;n--)for(var a=t.length-1;a>=0;a--)t[a].get("name")==e[n].get("lemma")&&(t[a].worddata=e[n]);o.resolve(t)})}}),o.promise},getPetWords:function(n,t){var a=this;1>t&&(t=1);var s=30,o=e.defer(),i=Parse.Object.extend("AddCategory"),r=new Parse.Query(i);return r.exists("pet"),r.ascending("name"),r.equalTo("type","word"),"all"!=n&&r.matches("name",".*"+n+".*"),r.skip((t-1)*s),r.limit(s),r.find({success:function(e){for(var n=[],t=[],s=[],i=e.length-1;i>=0;i--){var r=e[i],l=r.get("name")+"@"+r.get("pos"),d=n.indexOf(l);0>d&&(n.push(l),t.push(r),s.push(r.get("name")))}var c=a.getWordByLemmas(s);c.then(function(e){for(var n=e.length-1;n>=0;n--)for(var a=t.length-1;a>=0;a--)t[a].get("name")==e[n].get("lemma")&&(t[a].worddata=e[n]);o.resolve(t)})}}),o.promise},getWordByLemma:function(n){var t=e.defer(),a=Parse.Object.extend("Fre60K"),s=new Parse.Query(a);return s.equalTo("lemma",n),s.first({success:function(e){t.resolve(e)}}),t.promise},getDictByid:function(n){var t=e.defer(),a=Parse.Object.extend("Dict"),s=new Parse.Query(a);return s.equalTo("objectId",n),s.find({success:function(e){var n=e[0];t.resolve(n)}}),t.promise},searchByString:function(n){var t=e.defer(),a=Parse.Object.extend("Fre60K"),s=new Parse.Query(a);return s.startsWith("lowser_lemma",n.toLowerCase()),s.ascending("lemma"),s.find({success:function(e){for(var n=new Array,a=new Array,s=e.length-1;s>=0;s--){var o=n.indexOf(e[s].get("lemma"));0>o&&(n.push(e[s].get("lemma")),a.unshift(e[s]))}t.resolve(a)}}),t.promise},searchCatByString:function(n){var t=e.defer(),a=Parse.Object.extend("AddCategory"),s=new Parse.Query(a);s.equalTo("type","word"),s.matches("lowser_lemma",n.toLowerCase());var o=new Parse.Query(a);o.matchesKeyInQuery("objectId","parent_cat",s);var i=new Parse.Query(a);i.equalTo("type","category"),i.matches("lowser_lemma",n.toLowerCase());var r=Parse.Query.or(o,i);return r.limit(10),r.notEqualTo("level","No level"),r.find({success:function(e){t.resolve(e)}}),t.promise},searchCatByLemma:function(n){var t=e.defer(),a=Parse.Object.extend("AddCategory"),s=[],o=new Parse.Query(a);return o.equalTo("type","word"),o.equalTo("name",n),o.find({success:function(e){for(var n=e.length-1;n>=0;n--)s.push(e[n].get("parent_cat"));var o=new Parse.Query(a);o.equalTo("type","category"),o.containedIn("objectId",s),o.include("define_obj"),o.include("word_obj"),o.find({success:function(e){t.resolve(e)}})}}),t.promise},getWordsByLemma:function(n){var t=e.defer(),a=Parse.Object.extend("Fre60K"),s=new Parse.Query(a);return s.equalTo("lemma",n),s.first({success:function(e){if(e){for(var a=[],s=e.get("relate_words")?e.get("relate_words"):new Array,o=s.length-1;o>=0;o--){var i=s[o].indexOf(n+" ");if(i>-1)a.push(s[o]);else{var i=s[o].indexOf(" "+n);i>-1&&a.push(s[o])}}e.set("relate_words",a),t.resolve(e)}else t.resolve(e)}}),t.promise},getDefinesLemma:function(n){var t=e.defer(),a=Parse.Object.extend("Dict"),s=new Parse.Query(a);return s.equalTo("lemma",n),s.notEqualTo("remove",!0),s.descending("updatedAt"),s.find({success:function(e){t.resolve(e)}}),t.promise},getDefineById:function(n){var t=e.defer(),a=Parse.Object.extend("Dict"),s=new Parse.Query(a);return s.equalTo("objectId",n),s.first({success:function(e){t.resolve(e)}}),t.promise},initWordByLemma:function(e){s.lemma=e;var n=e.split(" "),a=new Parse.Query(o);a.equalTo("lemma",n[0]),a.ascending("rank"),a.limit(1),a.find({success:function(e){s.$apply(function(){if(e[0]){s.word=e[0];var n=s.lemma,a=s.word.get("PoS");s.pos=a,s.cant_edit_define_arr=s.word.get("cant_edit_define_arr"),t.get_type(a,n,function(e){s.types=e}),t.get_prefix(a,n,function(e){s.prefixs=e})}})}})}});return i}]),angular.module("triWordModule").service("UploadService",["Upload","$http","EmailService","WordService","HelperService","NoticeService","$q","$stateParams","$rootScope",function(e,n,t,a,s,o,i){var r={uploadFile:function(n,t,a){var o=i.defer(),r=this,l={};if(a){var d=s.getUNIString(),c=d+a.name,m=new Date,p=m.getFullYear(),u=m.getMonth(),g=n+"/"+p+"/"+u+"/"+c,f="https://s3-ap-northeast-1.amazonaws.com/wordiser/",_=f+g;l.image_link=_,l.succeed=!1,a.size>5810585?(l.message="File is too larget, please upload file under 5M",o.resolve(l)):a.$error?o.resolve(l):e.imageDimensions(a).then(function(n){if(n.width>1e3)l.message="Image should under 1000 * 1000!",o.resolve(l);else if(n.height>1e3)l.message="Image should under 1000 * 1000!",o.resolve(l);else{var t=r.getS3Sign(c);t.then(function(n){e.upload({url:"https://wordiser.s3.amazonaws.com/",method:"POST",data:{key:g,AWSAccessKeyId:"AKIAIV23V3ZSBOLEXDPQ",acl:"public-read",policy:n.policy,signature:n.signature,"Content-Type":""!=a.type?a.type:"application/octet-stream",file:a}}).then(function(){l.succeed=!0,o.resolve(l)},null,function(e){console.log(e)})})}})}return o.promise},getS3Sign:function(e){var t=i.defer(),a="https://wordiser.tsyz100.com/phpwordfetch/public/s3sign/"+e;return n({method:"GET",url:a}).then(function(e){var n=e.data.split("@@@@@@"),a={};a.signature=n[0],a.policy=n[1],t.resolve(a)}),t.promise}};return r}]),angular.module("triWordModule").service("VoteService",["EmailService","WordService","HelperService","NoticeService","$q","$stateParams","$rootScope",function(e,n,t,a,s,o,i){var r=Parse.Object.extend("P2PVote"),l={voteDefinition:function(e,n){var t=e.get("definition"),a=n.get("definition");t&&a?t==a&&(n.set("definition",n.get("definition_init")),n.save()):(n.set("definition",n.get("definition_init")),n.save()),e.set("remove",!0),e.save()},voteNoRelateWord:function(e,n){var t=n.get("synsetlemma_status"),a=n.get("synsetlemma"),s=e.get("relate_word"),o=a.indexOf(s);o>-1&&(t[o]="disable"),n.set("synsetlemma_status",t),n.save(),e.set("remove",!0),e.save()},voteNoSentence:function(e,n){var t=e.get("sentence"),a=n.get("sentence_list")?n.get("sentence_list"):new Array,s=n.get("sentence_list_status")?n.get("sentence_list_status"):new Array,o=a.indexOf(t);if(o>-1){s[o]="disable";for(var i=-1,r=0;r<=s.length-1;r++)"disable"!=s[r]&&(i=r);var l=n.get("sentence_main");l==a[o]&&(i>=0?n.set("sentence_main",a[i]):n.set("sentence_main","")),n.set("sentence_list_status",s),n.save()}e.set("remove",!0),e.save()},createDefineVote:function(n){if(!i.user.get("admin")){var t=i.user,a=new r,s=new Parse.ACL(Parse.User.current());s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),a.setACL(s),a.set("user_id",t.id),a.set("definition",n.get("definition")),a.set("username",t.get("username")),a.set("type","define"),a.set("definition",n.get("definition")),a.set("define",n),a.save().then(function(t){e.defineVoteEmail(n,t)})}},createRelativeWordVote:function(n,t){if(!i.user.get("admin")){var a=i.user,s=new r,o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),s.setACL(o),s.set("user_id",a.id),s.set("username",a.get("username")),s.set("type","define"),s.set("relate_word",n.get("synsetlemma")[0]),s.set("define",n),s.save().then(function(a){e.relateWordVoteEmail(n,a,t)})}},createSentenceVote:function(n,t){if(!i.user.get("admin")){var a=i.user,s=new r,o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),s.setACL(o),s.set("user_id",a.id),s.set("username",a.get("username")),s.set("type","sentence"),s.set("sentence",n.get("sentence_main")),s.set("define",n),s.set("word",t),s.save().then(function(a){e.sentenceVoteEmail(n,a,t)})}},getVoteDataByVoteId:function(e){var n={},t=s.defer(),a=new Parse.Query(r);return a.equalTo("objectId",e),a.notEqualTo("remove",!0),a.first({success:function(e){n.vote=e;var a=e.get("define");a.fetch({success:function(e){n.define=e,t.resolve(n)}})}}),t.promise}};return l}]),angular.module("triWordModule").controller("WordPageController",["RecordService","BuildDataService","$q","$http","EmailService","AddWordService","$cookies","$mdDialog","$mdToast","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f){if(g.lemma=f.lemma,g.originlemma=f.originlemma,g.cookies=i,u.highLightId){var _=u.highLightId;u.highLightId=""}var h=function(){var e=m.getWordsByLemma(g.lemma);e.then(function(e){e.get("SPOKEN")||(e.set("SPOKEN",33.33),e.set("FICTION",33.33),e.set("ACADEMIC",33.33)),g.wordChart={labels:["Spoken","Written","Academic"],data:[e.get("SPOKEN"),e.get("FICTION"),e.get("ACADEMIC")],colours:["#c8bfe7","#3f0180","#ec407a"]},g.all_word_data=e,g.hideedit=g.all_word_data.get("hideedit"),g.hideformedit=g.all_word_data.get("hideformedit")});var n=m.getDefinesLemma(g.lemma);n.then(function(e){u.worddefines=e})},v=function(e){var n=new Date((new Date).getTime()+3e5);g.cookies.put(e,!0,{expires:n})};h(),g.inStudyList=function(e){var n=o.getUserStudyListLemma();if(n){var t=n.indexOf(e);return t>-1?!0:!1}},g.checkDataClass=function(e,n){if(!e)return!1;var t=e.indexOf(n);return 0>t&&(u.user.get("admin")||u.user.get("author"))?"no_pron":void 0},g.highLightClass=function(e){return e.id==_?"hight-light":void 0},g.deleteWord=function(){var e=r.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");r.show(e).then(function(){g.all_word_data.destroy().then(function(){p.go("admin-panel.default.home")})})},g.changeDefineStatus=function(e){e.set("disable",!e.get("disable")),e.save()},g.addWordByDefine=function(e){var n=o.getAddWordBlock();n||(o.addWordByDefine(e),u.$broadcast("addWord",e),e.diabled_add_word=!0)},g.popDefines=function(e){g.all_word_data.get("uk_pron")?(u.lemma=e,r.show({controller:"AddWordDialogController",templateUrl:"components/addword/add-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})):l.show(l.simple().content("Sorry this cannot be added. There's no pronunciation!").position("bottom right").hideDelay(5e3))},g.expand=function(e){e.details_show=!e.details_show},g.correct=function(e){if(g.cookies.get(e+g.all_word_data.get("lemma")))alert("You will need to wait 5 minutes!");else{var n=g.all_word_data.get(e)?g.all_word_data.get(e):100;100!=n&&(n+=1),g.all_word_data.set(e,n),g.all_word_data.save(),v(e+g.all_word_data.get("lemma"))}},g.inCorrect=function(e){g.cookies.get(e+g.all_word_data.get("lemma"))?alert("You will need to wait 5 minutes!"):(s.sendDataMistakeEmailToAdmin(g.all_word_data.get("lemma")),l.show(l.simple().content("Data error report sent!").position("bottom right").hideDelay(5e3)),v(e+g.all_word_data.get("lemma")))},g.setInCorrect=function(e){if(g.cookies.get(e.get("sentence_main")+e.get("definition")+"vote_sentence_rate"))alert("You will need to wait 5 minutes!");else{var n=e.get("vote_sentence_rate")?e.get("vote_sentence_rate"):100;0!=n&&(n-=1),e.set("vote_sentence_rate",n),e.save(),v(e.get("sentence_main")+e.get("definition")+"vote_sentence_rate"),s.defineErrorReportEmail(e),l.show(l.simple().content("Data error report sent!").position("bottom right").hideDelay(5e3))}},g.popAddNewDefine=function(){r.show({controller:"popAddNewDefineController",templateUrl:"app/word-module/template/add-new-define-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{getFocus:!0,define:g.all_word_data},focusOnOpen:!1})},g.popAddNewWord=function(){r.show({controller:"popAddNewWordController",templateUrl:"app/word-module/template/add-new-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},g.popVoteEdit=function(){r.show({controller:"popVoteEditController",templateUrl:"app/word-module/template/vote-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},g.popImageEdit=function(e){r.show({controller:"popImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{define:e,getFocus:!0},focusOnOpen:!1})},g.popVotePronEdit=function(){r.show({controller:"popVoteEditPronController",templateUrl:"app/word-module/template/vote-edit-pron-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{all_word_data:g.all_word_data,getFocus:!0},focusOnOpen:!1})},g.popVotePhraseEdit=function(){r.show({controller:"popVoteEditPhraseController",templateUrl:"app/word-module/template/vote-edit-phrase-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{all_word_data:g.all_word_data,getFocus:!0},focusOnOpen:!1})},g.popVoteFormEdit=function(){r.show({controller:"popVoteEditFormController",templateUrl:"app/word-module/template/vote-edit-form-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{all_word_data:g.all_word_data,getFocus:!0},focusOnOpen:!1})},g.popVoteSentenceEdit=function(e){r.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:g.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})}}]),angular.module("triWordModule").controller("popVoteSentenceEditController",["EmailService","VoteService","HelperService","$window","define","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(n,t,a,s,o,i,r,l,d,c,m,p,u){console.log("popVoteSentenceEditController..");p.user;u.user=p.user,u.define=o,u.hide_add_for_normal_teacher=!1,u.lemma=o.get("lemma"),u.define_data={},u.define_data.definition=o.get("definition"),u.define_data.label=o.get("label"),u.synsetlemma=o.get("synsetlemma")?o.get("synsetlemma"):"",u.sentence_main=o.get("sentence_main")?o.get("sentence_main"):"",o.set("vote_sentence_rate",100),o.set("need_update_data",!0),u.sentence_list=o.get("sentence_list")?o.get("sentence_list"):new Array,u.sentence_approve_list=o.get("sentence_approve_list")?o.get("sentence_approve_list"):new Array,u.sentence_admin_list=o.get("sentence_admin_list")?o.get("sentence_admin_list"):new Array,u.sentence_list_status=o.get("sentence_list_status")?o.get("sentence_list_status"):new Array,u.synsetlemma=o.get("synsetlemma")?o.get("synsetlemma"):new Array,u.synsetlemma_status=o.get("synsetlemma_status")?o.get("synsetlemma_status"):new Array,u.synsetlemma_approve_list=o.get("synsetlemma_approve_list")?o.get("synsetlemma_approve_list"):new Array,u.synsetlemma_admin_list=o.get("synsetlemma_admin_list")?o.get("synsetlemma_admin_list"):new Array;for(var g=u.sentence_admin_list.length-1;g>=0;g--)if(u.sentence_admin_list[g]){u.hide_add_for_normal_teacher=!0;break}u.hide_edit_define=a.checkHideEditDefine(u.define)?!0:!1,u.sentence_type=["Title","Abbreviation","Formal","Informal","Archaic","Old-fashioned","Trendy","Idiomatic","Vulgar/Obscene","Literary/Poetic","Technical","Scientific","Medical","Corporate","Legal","Governmental","Academic","Journalistic","Regional","US","Canadian","South African","Australian","New Zealander","UK","Scottish","Welsh","Irish"],u.selection=o.get("sentence_type")?o.get("sentence_type"):new Array,u.toggleSelection=function(e){var n=u.selection.indexOf(e);n>-1?u.selection.splice(n,1):u.selection.push(e),o.set("sentence_type",u.selection),o.save().then(function(){i.show(i.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))},function(e){i.show(i.simple().content(e.message).position("bottom right").hideDelay(5e3))})},u.mistakeRelativeWord=function(e,t){var t=u.synsetlemma[e];n.sendRelateWordMistakeEmail(t,o);var a=u.synsetlemma_disable?u.synsetlemma_disable:[];a[e]=!0,u.synsetlemma_disable=a},u.addSyn=function(n){var a=p.user;if(""==n)return void i.show(i.simple().content(e.message).position("Don't add empty word!").hideDelay(5e3));if(n===n.toUpperCase())return alert("Don't add word in uppercase"),void i.show(i.simple().content(e.message).position("Don't add word in uppercase").hideDelay(5e3));var s=c.getWordsByLemma(n);s.then(function(e){if(!e)return void i.show(i.simple().content("Useless data!").position("bottom right").hideDelay(5e3));for(var s=!1,r=u.synsetlemma.length-1;r>=0;r--)u.synsetlemma[r]==n&&(s=!0);s?i.show(i.simple().content("Already exists!").position("bottom right").hideDelay(5e3)):(u.synsetlemma.unshift(n),u.synsetlemma_approve_list.unshift(p.user.id),u.synsetlemma_status.unshift("enable"),u.synsetlemma_admin_list.unshift(a.get("admin")?!0:!1),o.set("synsetlemma_admin_list",u.synsetlemma_admin_list),o.set("synsetlemma",u.synsetlemma),o.set("synsetlemma_approve_list",u.synsetlemma_approve_list),o.set("synsetlemma_status",u.synsetlemma_status),o.set("need_update_data",!0),o.set("update_user",p.user.get("username")),o.save().then(function(e){e.only_syn&&t.createRelativeWordVote(e,e.word),i.show(i.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))},function(e){i.show(i.simple().content(e.message).position("bottom right").hideDelay(5e3))}))})},u.deleteDefine=function(){var e=r.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");r.show(e).then(function(){o.set("remove",!0),o.save().then(function(){r.cancel(),s.location.reload()})})},u.deleteSyn=function(e){u.synsetlemma.splice(e,1),u.synsetlemma_approve_list.splice(e,1),u.synsetlemma_status.splice(e,1),u.synsetlemma_admin_list.splice(e,1),o.set("synsetlemma",u.synsetlemma),o.set("synsetlemma_approve_list",u.synsetlemma_approve_list),o.set("synsetlemma_admin_list",u.synsetlemma_admin_list),o.set("synsetlemma_status",u.synsetlemma_status),o.save()},u.disableSyn=function(e){u.synsetlemma_status[e]="disable",o.set("synsetlemma_status",u.synsetlemma_status),o.save()},u.enableSyn=function(e){u.synsetlemma_status[e]="enable",o.set("synsetlemma_status",u.synsetlemma_status),o.save()},u.deleteST=function(e){var n=u.sentence_list[e];u.sentence_list.splice(e,1),u.sentence_approve_list.splice(e,1),u.sentence_list_status.splice(e,1),u.sentence_admin_list.splice(e,1),o.set("sentence_list",u.sentence_list),o.set("sentence_approve_list",u.sentence_approve_list),o.set("sentence_list_status",u.sentence_list_status),o.set("sentence_admin_list",u.sentence_admin_list);for(var t=0,a=0;a<=u.sentence_list_status.length-1;a++)"disable"!=u.sentence_list_status[a]&&(t=a);var s=o.get("sentence_main");s==n&&(t>=0?o.set("sentence_main",u.sentence_list[t]):o.set("sentence_main","")),o.save()},u.disableST=function(e){u.sentence_list_status[e]="disable";for(var n=0,t=0;t<=u.sentence_list_status.length-1;t++)"disable"!=u.sentence_list_status[t]&&(n=t);var a=o.get("sentence_main");a==u.sentence_list[e]&&(n>=0?o.set("sentence_main",u.sentence_list[n]):o.set("sentence_main","")),o.set("sentence_list_status",u.sentence_list_status),o.save()},u.enableST=function(e){u.sentence_list_status[e]="enable",o.set("sentence_main",u.sentence_list[e]),o.set("sentence_list_status",u.sentence_list_status),o.save()},u.sentence_change=function(){u.sentence_change_message=""!=u.add_sentence?"This will be use by students. Please check it for any mistakes!":!1},u.addSentence=function(e){var n=p.user;u.sentence_change_message=!1;var t=p.all_word_data,s=(p.all_word_data,o.get("lemma")),t=c.getWordByLemma(s);t.then(function(t){var s=a.replace_lemma_form_sentence(e,t);if(s.include_lemma){e=e.trim().replace(e.substring(0,1),e.substring(0,1).toUpperCase());var r=e.trim().slice(-1);"!"!=r&&"?"!=r&&"."!=r&&(e+="."),u.add_sentence=e,u.sentence_list.unshift(e),u.sentence_list_status.unshift("enable"),u.sentence_approve_list.unshift(p.user.id),o.set("sentence_list",u.sentence_list),o.set("sentence_approve_list",u.sentence_approve_list),o.set("sentence_main",e),u.sentence_admin_list.unshift(n.get("admin")?!0:!1),o.set("sentence_admin_list",u.sentence_admin_list),o.save()}else i.show(i.simple().content("Always include the test word/phrase in your example sentence!").position("bottom right").hideDelay(5e3))})},u.changeDefineLabel=function(){if(u.define_data.label){var e=o.get("label");u.define_data.definition=u.define_data.definition.replace(e+" ",""),o.set("label",u.define_data.label)}u.define_data.definition=u.define_data.label+" "+u.define_data.definition,u.define.set("definition",u.define_data.definition),u.define.update_define_btn=!0,o.save()},u.defineChange=function(){u.define_change=!0},u.saveDefine=function(){o.set("need_update_data",!0),o.set("lemma",u.lemma),o.set("definition",u.define_data.definition),o.save().then(function(){u.define_change=!1},function(e){i.show(i.simple().content(e.message).position("bottom right").hideDelay(5e3))})},u.save=function(){o.set("lemma",u.lemma),o.set("definition",u.define_data.definition),o.save()},u.cancel=function(){r.cancel()},u.closeDialog=function(){r.cancel()}}]),angular.module("triWordModule").controller("popVoteEditPronController",["all_word_data","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l){l.spelling=e.get("spelling"),l.uk_change_pron=e.get("uk_change_pron"),l.uk_pron=e.get("uk_pron"),l.us_pron=e.get("us_pron"),l.us_change_pron=e.get("us_change_pron"),l.lemma=e.get("lemma"),l.user=r.user,l.clearUK=function(){l.uk_change_pron="",l.uk_pron=""},l.addUK=function(){if(l.uk_pron=l.uk_pron?l.uk_pron:"",l.uk_change_pron=l.uk_change_pron?l.uk_change_pron:"","undefined"!=typeof l.uk_pron_con&&""!=l.uk_pron_con){var e=l.uk_pron_con.split(" ");e[1]?(l.uk_pron=(l.uk_pron+" "+e[0]).trim(),l.uk_change_pron=(l.uk_change_pron+" "+e[1].replace("[","").replace("]","")).trim()):(l.uk_pron=(l.uk_pron+" "+e[0]).trim(),l.uk_change_pron=(l.uk_change_pron+" "+e[0]).trim())}if("undefined"!=typeof l.uk_pron_sound&&""!=l.uk_pron_sound){var e=l.uk_pron_sound.split(" ");l.uk_pron=(l.uk_pron+" "+e[0]).trim(),l.uk_change_pron=(l.uk_change_pron+" "+e[1].replace("[","").replace("]","")).trim()}l.uk_pron_sound="",l.uk_pron_con=""},l.lemmaChange=function(n){l.show_save_lemma_btn=n!=e.get("lemma")?!0:!1},l.updateLemma=function(n){e.set("lemma",n),e.save().then(function(){i.go("admin-panel.default.word-page",{lemma:n,originlemma:n})})},l.clearUS=function(){l.us_change_pron="",l.us_pron=""},l.addUS=function(){if(l.us_pron=l.us_pron?l.us_pron:"",l.us_change_pron=l.us_change_pron?l.us_change_pron:"","undefined"!=typeof l.us_pron_con&&""!=l.us_pron_con){var e=l.us_pron_con.split(" ");e[1]?(l.us_pron=(l.us_pron+" "+e[0]).trim(),l.us_change_pron=(l.us_change_pron+" "+e[1].replace("[","").replace("]","")).trim()):(l.us_pron=(l.us_pron+" "+e[0]).trim(),l.us_change_pron=(l.us_change_pron+" "+e[0]).trim())}if("undefined"!=typeof l.us_pron_sound&&""!=l.us_pron_sound){var e=l.us_pron_sound.split(" ");l.us_pron=(l.us_pron+" "+e[0]).trim(),l.us_change_pron=(l.us_change_pron+" "+e[1].replace("[","").replace("]","")).trim()}l.us_pron_sound="",l.us_pron_con=""},l.save=function(){e.set("spelling",l.spelling),e.set("uk_change_pron",l.uk_change_pron),e.set("uk_pron",l.uk_pron),e.set("us_pron",l.us_pron),e.set("us_change_pron",l.us_change_pron),e.set("vote_pron_rate",100),e.set("need_update_data",!0),e.save().then(function(e){r.$broadcast("pron_update",e)
})},l.cancel=function(){t.cancel()},l.closeDialog=function(){t.cancel()}}]),angular.module("triWordModule").controller("popVoteEditPhraseController",["all_word_data","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l){l.user=r.user,l.lemma=e.get("lemma"),l.relate_words=e.get("relate_words")?e.get("relate_words"):[],l.relate_words_approve_list=e.get("relate_words_approve_list")?e.get("relate_words_approve_list"):[],l.relate_words_admin_list=e.get("relate_words_admin_list")?e.get("relate_words_admin_list"):[],l.relate_words_status=e.get("relate_words_status")?e.get("relate_words_status"):[],l.addPh=function(n){for(var t=!1,a=e.get("lemma").split(" "),s=n.split(" "),o=!1,i=0,r=0;i<a.length;){for(;r<s.length;){var d=s[r].indexOf(a[i]);if(d>-1){o=!0;break}r++}i++}for(var i=l.relate_words.length-1;i>=0;i--)l.relate_words[i]==n&&(t=!0);!t&&o?(l.relate_words.unshift(n),l.relate_words_approve_list.unshift(l.user.id),l.relate_words_status.unshift("enable"),l.relate_words_admin_list.unshift(l.user.get("admin")?!0:!1),e.set("relate_words",l.relate_words),e.set("relate_words_approve_list",l.relate_words_approve_list),e.set("relate_words_status",l.relate_words_status),e.set("relate_words_admin_list",l.relate_words_admin_list),e.save()):t?alert("Word already include! "):o||alert("Only add related words/phrases that are connected e.g. 'go' and 'go out'. Related words are not synonyms! ")},l.disablePhrase=function(n){l.relate_words_status[n]="disable",e.set("relate_words_status",l.relate_words_status),e.save()},l.enablePhrase=function(n){l.relate_words_status[n]="enable",e.set("relate_words_status",l.synsetlemma_status),e.save()},l.DeletePhrase=function(n){l.relate_words.splice(n,1),l.relate_words_approve_list.splice(n,1),l.relate_words_status.splice(n,1),l.relate_words_admin_list.splice(n,1),e.set("relate_words",l.relate_words),e.set("relate_words_approve_list",l.relate_words_approve_list),e.set("relate_words_admin_list",l.relate_words_admin_list),e.set("relate_words_status",l.relate_words_status),e.save()},l.cancel=function(){t.cancel()},l.closeDialog=function(){t.cancel()}}]),angular.module("triWordModule").controller("popVoteEditFormController",["all_word_data","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l){l.form_data={},l.form_data.form_v=e.get("form_v"),l.form_data.form_v_a=e.get("form_v_a")?e.get("form_v_a"):"",l.form_data.form_v_b=e.get("form_v_b")?e.get("form_v_b"):"",l.form_data.form_v_c=e.get("form_v_c")?e.get("form_v_c"):"",l.form_data.form_v_d=e.get("form_v_d")?e.get("form_v_d"):"",l.form_data.form_v_e=e.get("form_v_e")?e.get("form_v_e"):"",l.form_data.form_n=e.get("form_n"),l.form_data.form_n_a=e.get("form_n_a")?e.get("form_n_a"):"",l.form_data.form_n_b=e.get("form_n_b")?e.get("form_n_b"):"",l.form_data.form_j=e.get("form_j"),l.form_data.form_j_a=e.get("form_j_a")?e.get("form_j_a"):"",l.form_data.form_j_b=e.get("form_j_b")?e.get("form_j_b"):"",l.form_data.form_j_c=e.get("form_j_c")?e.get("form_j_c"):"",l.form_data.form_r=e.get("form_r"),l.form_data.form_r_a=e.get("form_r_a")?e.get("form_r_a"):"",l.form_data.form_ph=e.get("form_ph"),l.form_data.form_ph_a=e.get("form_ph_a")?e.get("form_ph_a"):"",l.form_data.form_ph_b=e.get("form_ph_b")?e.get("form_ph_b"):"",l.form_data.form_pre=e.get("form_pre"),l.form_data.form_pre_a=e.get("form_pre_a")?e.get("form_pre_a"):"",l.form_data.form_pre_b=e.get("form_pre_b")?e.get("form_pre_b"):"",l.form_data.form_abb=e.get("form_abb"),l.form_data.form_abb_a=e.get("form_abb_a")?e.get("form_abb_a"):"",l.form_data.form_abb_b=e.get("form_abb_b")?e.get("form_abb_b"):"",l.form_data.form_ext=e.get("form_ext"),l.form_data.form_ext_type=e.get("form_ext_type"),l.form_data.form_ext_a=e.get("form_ext_a")?e.get("form_ext_a"):"",l.form_data.form_ext_b=e.get("form_ext_b")?e.get("form_ext_b"):"",l.form_data.form_ext_c=e.get("form_ext_c")?e.get("form_ext_c"):"",l.form_data.form_ext_d=e.get("form_ext_d")?e.get("form_ext_d"):"",l.form_data.form_ext_e=e.get("form_ext_e")?e.get("form_ext_e"):"",l.save=function(){e.set("form_v",l.form_data.form_v),e.set("form_v_a",l.form_data.form_v_a.trim()),e.set("form_v_b",l.form_data.form_v_b.trim()),e.set("form_v_c",l.form_data.form_v_c.trim()),e.set("form_v_d",l.form_data.form_v_d.trim()),e.set("form_v_e",l.form_data.form_v_e.trim()),e.set("form_n",l.form_data.form_n),e.set("form_n_a",l.form_data.form_n_a.trim()),e.set("form_n_b",l.form_data.form_n_b.trim()),e.set("form_j",l.form_data.form_j),e.set("form_j_a",l.form_data.form_j_a.trim()),e.set("form_j_b",l.form_data.form_j_b.trim()),e.set("form_j_c",l.form_data.form_j_c.trim()),e.set("form_r",l.form_data.form_r),e.set("form_r_a",l.form_data.form_r_a.trim()),e.set("form_ph",l.form_data.form_ph),e.set("form_ph_a",l.form_data.form_ph_a.trim()),e.set("form_ph_b",l.form_data.form_ph_b.trim()),e.set("form_pre",l.form_data.form_pre),e.set("form_pre_a",l.form_data.form_pre_a.trim()),e.set("form_pre_b",l.form_data.form_pre_b.trim()),e.set("form_abb",l.form_data.form_abb),e.set("form_abb_a",l.form_data.form_abb_a.trim()),e.set("form_abb_b",l.form_data.form_abb_b.trim()),e.set("form_ext",l.form_data.form_ext),e.set("form_ext_a",l.form_data.form_ext_a.trim()),e.set("form_ext_b",l.form_data.form_ext_b.trim()),e.set("form_ext_c",l.form_data.form_ext_c.trim()),e.set("form_ext_d",l.form_data.form_ext_d.trim()),e.set("form_ext_e",l.form_data.form_ext_e.trim()),e.set("form_ext_type",l.form_data.form_ext_type),e.set("vote_form_type_rate",100),e.set("need_update_data",!0),e.save()},l.formTypeChange=function(){l.form_data.form_n?(l.form_data.form_n_a=e.get("lemma"),e.set("form_n_a",l.form_data.form_n_a)):e.set("form_n_a",""),l.form_data.form_v?(l.form_data.form_v_a=e.get("lemma"),e.set("form_v_a",l.form_data.form_v_a)):e.set("form_v_a",""),l.form_data.form_j?(l.form_data.form_j_a=e.get("lemma"),e.set("form_j_a",l.form_data.form_j_a)):e.set("form_j_a",""),l.form_data.form_r?(l.form_data.form_r_a=e.get("lemma"),e.set("form_r_a",l.form_data.form_r_a)):e.set("form_r_a",""),l.form_data.form_ph?(l.form_data.form_ph_a=e.get("lemma"),e.set("form_ph_a",l.form_data.form_ph_a)):e.set("form_ph_a",""),l.form_data.form_tit?(l.form_data.form_tit_a=e.get("lemma"),e.set("form_tit_a",l.form_data.form_tit_a)):e.set("form_tit_a",""),l.form_data.form_ext?(l.form_data.form_ext_a=e.get("lemma"),e.set("form_ext_a",l.form_data.form_ext_a)):e.set("form_ext_a",""),e.save()},l.cancel=function(){t.cancel()},l.closeDialog=function(){t.cancel()}}]),angular.module("triWordModule").controller("popImageController",["HelperService","$timeout","Upload","UploadService","define","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p){p.view=s.view,p.user=m.user,p.word=s,p.imagesList=s.get("imagesource"),p.imagesmain=p.word.get("imagesmain"),p.search_word_list=[],p.image_link="",p.data={},p.data.image_link="",p.$watch("data.files",function(){p.upload(p.data.files)}),p.$watch("data.file",function(){null!=p.data.file&&(p.data.files=[p.data.file])}),p.upload=function(e){if(e&&e[0]){p.upload_obj={};var n=a.uploadFile("reference","reference",e[0]);p.uploading=!0,n.then(function(e){p.upload_obj=e;var n=e.image_link;e.succeed?(p.changeImage(n),p.uploading=!1):p.uploading=!1})}},p.searchImages=function(e){var n=e.split(" "),t=d.getWordByLemmas(n);t.then(function(e){for(var n=[],t=0;t<e.length;t++)for(var a=e[t].get("imagesource")?e[t].get("imagesource"):[],s=0;s<a.length;s++){var o=a[s],i=n.indexOf(o);0>i&&n.push(o)}p.imagesList=n,p.search_word_list=e})},p.saveImageLink=function(){var e=p.data.image_link;if(""!=e){var n=p.search_word_list[0];p.imagesList.unshift(e);var t=n.get("imagesource")?n.get("imagesource"):[];t.push(e),n.set("imagesource",t),n.save(),p.data.image_link=""}},p.changeImage=function(e){s.set("imagesmain",e),p.imagesmain=s.get("imagesmain"),s.save().then(function(){i.cancel()})},p.hideImages=function(){p.imagesmain=!1,s.set("imagesmain",""),s.save().then(function(){i.cancel()})},p.cancel=function(){i.cancel()},p.closeDialog=function(){i.cancel()}}]),angular.module("triWordModule").controller("popAddNewWordController",["$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r){r.saveNewWord=function(){var e=r.lemma,n=s.getWordByLemma(e);n.then(function(e){if(e)r.word_exits=!0;else{r.word_exits=!1;var n=Parse.Object.extend("Fre60K"),e=new n;e.set("lemma",r.lemma),e.set("user_id",i.user.id),e.set("lowser_lemma",r.lemma.toLowerCase()),e.save().then(function(){o.go("admin-panel.default.word-page",{lemma:r.lemma,originlemma:r.lemma}),r.show_edit_lemma_page_link=!0})}})},r.goToDetailPage=function(){o.go("admin-panel.default.word-page",{lemma:r.lemma,originlemma:r.lemma}),n.cancel()},r.cancel=function(){n.cancel()},r.closeDialog=function(){n.cancel()}}]),angular.module("triWordModule").controller("popAddNewDefineController",["define","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l){l.newDefineType={},l.lemma=e.get(e.get("lemma")?"lemma":"name"),l.popVoteSentenceEdit=function(e){t.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:l.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})},l.saveNewDefine=function(){var e=Parse.Object.extend("Dict"),n=new e;n.set("lemma",l.lemma),n.set("definition",l.definition),n.set("user_id",r.user.id),n.set("type","user_add_define"),n.set("synsetid",l.definition),l.newDefineType.v&&n.set("pos","v"),l.newDefineType.n&&n.set("pos","n"),l.newDefineType.j&&n.set("pos","j"),l.newDefineType.r&&n.set("pos","r"),l.newDefineType.phr&&n.set("pos","phr"),n.save().then(function(e){l.popVoteSentenceEdit(e)})},l.cancel=function(){t.cancel()},l.closeDialog=function(){t.cancel()}}]),angular.module("triWordModule").controller("P2PVoteController",["VoteService","HelperService","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c){var m=c.id,p=e.getVoteDataByVoteId(m);p.then(function(e){d.vote=e.vote,d.define=e.define}),d.no=function(e){var n=e.get("no_user_list")?e.get("no_user_list"):[],t=l.user,a=n.indexOf(t.get("username"));if(a=-1,0>a&&n.push(t.get("username")),e.set("no_user_list",n),n.length>=10){var s=d.vote.get("sentence"),o=d.define,i=o.get("sentence_list")?o.get("sentence_list"):new Array,r=o.get("sentence_list_status")?o.get("sentence_list_status"):new Array,a=i.indexOf(s);if(a>-1){r[a]="disable";for(var c=-1,m=0;m<=r.length-1;m++)"disable"!=r[m]&&(c=m);var p=o.get("sentence_main");p==i[a]&&(c>=0?o.set("sentence_main",i[c]):o.set("sentence_main","")),o.set("sentence_list_status",r),o.save()}e.set("remove",!0)}e.save()}}]),angular.module("triWordModule").controller("ImageUploadController",["UploadService","$scope","Upload","$timeout",function(e,n,t,a){n.$watch("files",function(){n.upload(n.files)}),n.$watch("file",function(){null!=n.file&&(n.files=[n.file])}),n.log="",n.upload=function(s){if(s&&s.length)for(var o=0;o<s.length;o++){var i=s[o],r=i.name;if(!i.$error){var l=e.getS3Sign(r);l.then(function(e){t.upload({url:"https://wordiser.s3.amazonaws.com/",method:"POST",data:{key:"upload/"+i.name,AWSAccessKeyId:"AKIAIV23V3ZSBOLEXDPQ",acl:"public-read",policy:e.policy,signature:e.signature,"Content-Type":""!=i.type?i.type:"application/octet-stream",file:i}}).then(function(e){console.log(e),a(function(){n.log="file: "+e.config.data.file.name+", Response: "+JSON.stringify(e.data)+"\n"+n.log})},null,function(e){console.log(e);var t=parseInt(100*e.loaded/e.total);n.log="progress: "+t+"% "+e.config.data.file.name+"\n"+n.log})})}}}}]),angular.module("triStudyNotesModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/study-notes"),n.state("admin-panel.default.study-notes",{url:"/study-notes/page/:parent_cat_name/:parent_cat/:page",templateUrl:"app/study-notes/template/study-notes-page.tmpl.html",controller:"StudyNotesController"}).state("admin-panel.default.course-home",{url:"/study-notes/course-home",templateUrl:"app/study-notes/template/course-home.tmpl.html",controller:"courseHomeController"}).state("admin-panel.default.study-notes-homework",{url:"/study-notes/homework/:homework_id",templateUrl:"app/study-notes/template/homework.tmpl.html"}).state("admin-panel.default.study-notes-my-gap-fill",{url:"/study-notes/my-gap-fill",templateUrl:"app/study-notes/template/my-gap-fill.tmpl.html",controller:"myGapFillController"}).state("admin-panel.default.study-notes-my-quiz",{url:"/study-notes/my-quiz",templateUrl:"app/study-notes/template/my-quiz.tmpl.html",controller:"myQuizController"}).state("admin-panel.default.study-notes-my-correction",{url:"/study-notes/my-correction",templateUrl:"app/study-notes/template/my-correction.tmpl.html",controller:"myCorrectionController"}).state("admin-panel.default.study-notes-my-writting",{url:"/study-notes/my-writting",templateUrl:"app/study-notes/template/my-writting.tmpl.html",controller:"myWrittingController"}).state("admin-panel.default.study-notes-quiz",{url:"/study-notes/quiz/:quiz_ids/:parent_id",templateUrl:"app/study-notes/template/quiz.tmpl.html"}).state("admin-panel.default.matchgame",{url:"/study-notes/matchgame/:words",templateUrl:"app/review-module/finalgame.tmpl.html"}).state("admin-panel.default.study-notes-quiz-old",{url:"/study-notes/quiz/:quiz_ids",templateUrl:"app/study-notes/template/quiz.tmpl.html"}).state("admin-panel.default.study-notes-gap-fill-quiz",{url:"/study-notes/gap-fill-quiz/:quiz_ids/:parent_id",templateUrl:"app/study-notes/template/gap-fill-quiz.tmpl.html"}).state("admin-panel.default.study-notes-correction",{url:"/study-notes/correction/:correction_id",templateUrl:"app/study-notes/template/correction.tmpl.html"}).state("admin-panel.default.study-notes-edit",{url:"/study-notes/edit/:note_id",templateUrl:"app/study-notes/template/study-notes-edit.tmpl.html",controller:"StudyNotesEditController"}).state("admin-panel.default.study-notes-view",{url:"/study-notes/view/:note_id",templateUrl:"app/study-notes/template/study-notes-view-page.tmpl.html",controller:"StudyNotesViewPageController"}).state("admin-panel.default.study-notes-slide-show",{url:"/study-notes/slideshow/:id",templateUrl:"app/study-notes/template/slideshow.tmpl.html"}).state("admin-panel.default.youtube",{url:"/study-notes/youtube/:id",templateUrl:"app/study-notes/template/youtubeview.tmpl.html",controller:"youtubeViewController"})}]),angular.module("triStudyNotesModule").controller("addHomeworkPopController",["$timeout","EmailService","ClassService","parentscope","$stateParams","$rootScope","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l){var d=Parse.Object.extend("GrammarACTData"),c=Parse.Object.extend("HomeWork");l.user=o.user,l.instructions="";var c=Parse.Object.extend("HomeWork"),m=new Parse.Query(c);m.equalTo("user",l.user.id),m.notEqualTo("remove",!0),m.exists("instructions"),m.find({success:function(e){if(!e)var e=[];l.$apply(function(){l.homeworks=e})}});var m=new Parse.Query(d);m.ascending("outline_order"),m.notEqualTo("remove",!0),m.notEqualTo("teacher_grammar",!0),m.notEqualTo("reading_grammar",!0),m.equalTo("type","outline"),m.find({success:function(e){l.$apply(function(){l.outlines=e})}}),l.changeFilter=function(e){l.items=[],l.show_system_grammar=!0;var n=new Parse.Query(d);n.notEqualTo("type","outline"),n.notEqualTo("hide_note",!0),n.notEqualTo("remove",!0),n.notEqualTo("teacher_grammar",!0),n.notEqualTo("reading_grammar",!0),"all"!=e&&n.equalTo("outline",e),n.ascending("outline_order"),n.find({success:function(e){l.$apply(function(){l.items=e})}})},l.back=function(){l.show_create_homework=!1,l.show_system_grammar=!1},l.removeASK=function(e){if(e.remove_show)e.remove_show=!1,l.tem_remove_homework=!1;else{for(var n=l.homeworks.length-1;n>=0;n--)l.homeworks[n].remove_show=!1;e.remove_show=!0,l.tem_remove_homework=e}},l.removeASKHide=function(e){l.tem_remove_homework=!1,e.remove_show=!1},l.removeHomework=function(){for(var e=l.tem_remove_homework,n=l.homeworks.length-1;n>=0;n--)l.homeworks[n].id==e.id&&l.homeworks.splice(n,1);e.set("remove",!0),e.save(),l.tem_remove_homework=!1},l.editHomeWork=function(e){l.homework=e,l.show_create_homework=!0,l.instructions=e.get("instructions")},l.selectSystemGrammar=function(e){l.select_grammar=e,l.select_grammar.name=e.get("name")},l.useSystemGrammar=function(e){if(a.note.content||(a.note.content=""),!a.cat.get("is_course")){var n='<a href = "#/grammar-module/course-writing/'+e.id+' ">CLICK FOR WRITING EXERCISE</a>';a.note.content+=n}var t=r.addQuizToCourse("grammar_writing",e,a);a.test_objs=t,l.select_grammar=!1,i.cancel()},l.showSystemGrammar=function(){var e=Parse.Object.extend("GrammarACTData");l.items=[],l.show_system_grammar=!0;var n=new Parse.Query(e);n.notEqualTo("type","outline"),n.notEqualTo("hide_note",!0),n.notEqualTo("remove",!0),n.notEqualTo("teacher_grammar",!0),n.notEqualTo("reading_grammar",!0),n.notEqualTo("dialog",!0),n.exists("writing_objs"),n.ascending("outline_order"),n.find({success:function(e){l.$apply(function(){l.items=e})}})},l.creatWriting=function(){l.show_create_homework=!0,l.instructions=""},l.saveInstructions=function(e){var n=Parse.Object.extend("HomeWork");if(l.homework)var t=l.homework;else{var t=new n;t.set("user",o.user.id);var a=new Parse.ACL(Parse.User.current());a.setPublicReadAccess(!0),t.setACL(a)}t.set("instructions",e),t.set("emails_send",!1),t.save().then(function(e){l.homework||l.homeworks.push(e),l.homework=e})},l.showClassSelect=function(){var e=t.getBelongToClass();e.then(function(e){l.myClasses=e})},l.send=function(t){if(l.homework){t.disable=!0;var s=l.homework.id;n.sendHomeWorkEmail(t,s),l.homework.set("emails_send",!0),l.homework.save()}l.send_email_message=t.get("name")+" class students have been notified! Dialog will auto close in 3 seconds.",a.note.content||(a.note.content="");var o='<a href = "#/study-notes/homework/'+l.homework.id+' ">CLICK FOR WRITING TASK</a>';a.note.content+=o,e(function(){i.cancel()},3e3)},l.save=function(){a.note.content||(a.note.content="");var e='<a href = "#/study-notes/homework/'+l.homework.id+' ">CLICK FOR WRITING TASK</a>';a.note.content+=e,i.cancel()},l.userHomeWork=function(e){if(a.note.content||(a.note.content=""),!a.cat.get("is_course")){var n='<a href = "#/study-notes/homework/'+e.id+' ">CLICK FOR WRITING TASK</a>';a.note.content+=n}var t=r.addQuizToCourse("homework",e,a);a.test_objs=t,i.cancel()},l.cancel=function(){i.cancel()},l.close=function(){i.cancel()}}]),angular.module("triStudyNotesModule").controller("popSlideShowImage",["UploadService","parentscope","WNService","WordService","note","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m){var p=Parse.Object.extend("SlideShow");m.data={},m.user=d.user;var u=new Parse.Query(p);u.equalTo("user_id",d.user.id),u.equalTo("type","category"),u.notEqualTo("remove",!0),u.find({success:function(e){m.$apply(function(){e||(e=[]),m.categorys=e})}}),m.$watch("data.files",function(){m.upload(m.data.files)}),m.$watch("data.file",function(){null!=m.data.file&&(m.data.files=[m.data.file])}),m.upload=function(n){if(n&&n[0]){m.upload_obj={};var t=e.uploadFile("reference","reference",n[0]);m.uploading=!0,t.then(function(e){m.upload_obj=e;var n=e.image_link;e.succeed?(m.useImage(n),m.uploading=!1):m.uploading=!1})}},m.slideUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},m.slideDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},m.back=function(){m.category=!1,m.slideshows=[],m.summary=!1,m.show_create_form=!1,m.data={},m.categorys=[];var e=new Parse.Query(p);e.equalTo("user_id",d.user.id),e.equalTo("type","category"),e.notEqualTo("remove",!0),e.find({success:function(e){m.$apply(function(){e||(e=[]),m.categorys=e})}})},m.removeASKHide=function(e){m.tem_remove_slideshow=!1,e.remove_show=!1},m.showDeleteCategory=function(e){if(e.remove_show)e.remove_show=!1,m.tem_remove_slideshow=!1;else{for(var n=m.categorys.length-1;n>=0;n--)m.categorys[n].remove_show=!1;e.remove_show=!0,m.tem_remove_slideshow=e}},m.deleteCategory=function(e){m.tem_remove_slideshow=!1;var n=m.categorys.indexOf(e);n>-1&&m.categorys.splice(n,1),e.set("remove",!0),e.save()},m.removeSlideShow=function(e){var n=m.slideshows.indexOf(e);n>-1&&m.slideshows.splice(n,1),e.set("remove",!0),e.save()},m.useLink=function(){m.link=m.data.image_link},m.saveOrder=function(e){var n=Number(e.the_order);e.set("the_order",n),e.save()},m.createSlideShows=function(e){m.disable_create_btn=!0,m.slideshows||(m.slideshows=[]);for(var n=[],t=0;t<e.length;t++)if(e[t].check){var a=e[t].get("define_obj");if(m.slideshows[m.slideshows.length-1])var s=m.slideshows[m.slideshows.length-1].get("the_order");else var s=0;var o=s+t+1,i=a.get("definition")+"</br>"+a.get("sentence_main"),r=new p,l=new Parse.ACL(Parse.User.current());l.setPublicReadAccess(!0),r.setACL(l),r.set("type","item"),r.set("the_order",o),r.set("link",a.get("imagesmain")),r.set("summary",a.get("lemma")),r.set("content",i),r.set("parent_cat",m.category.id),n.the_order=o,n.push(r)}Parse.Object.saveAll(n).then(function(e){m.disable_create_btn=!1,m.$apply(function(){for(var n=0;n<e.length;n++)m.slideshows.push(e[n]);m.link="",m.summary="",m.data.image_link="",m.create_disable=!1,m.select_words=!1,m.searchWordList=!1})})},m.SelectAddCat=function(e){e.disable=!0,m.exercise_cat=e;var n=c.getWordsByCatId(e.id);n.then(function(e){m.searchWordList=!1,m.select_words=e,m.search_word=""})},m.searchCategoryImages=function(){m.data.disabled_search=!0,m.select_words=!1,m.imagesList=!1;var e=a.searchCatByString(m.data.lemma_search);e.then(function(e){m.searchWordList=e,m.data.disabled_search=!1})},m.searchImages=function(){m.data.disabled_search=!0;var e=m.data.lemma_search,n=e.split(" "),t=a.getWordByLemmas(n);m.link="",t.then(function(e){var n=[];if(e)for(var t=0;t<e.length;t++)for(var a=e[t].get("imagesource")?e[t].get("imagesource"):[],s=0;s<a.length;s++){var o=n.indexOf(a[s]);0>o&&n.push(a[s])}m.data.disabled_search=!1,m.imagesList=n})},m.editSlideShow=function(e){m.edit_slideshow=e,m.link=e.get("link"),m.summary=e.get("summary"),m.content=e.get("content")?e.get("content"):""},m.saveEditSlideShow=function(){m.edit_slideshow.set("link",m.link),m.edit_slideshow.set("summary",m.summary),m.edit_slideshow.set("content",m.content),m.link="",m.summary="",m.content="",m.edit_slideshow.save().then(function(){m.edit_slideshow=!1})},m.slideshow=function(e){m.category=e;var n=new Parse.Query(p);n.equalTo("type","item"),n.equalTo("parent_cat",e.id),n.notEqualTo("remove",!0),n.ascending("the_order"),n.find({success:function(e){for(var n=e.length-1;n>=0;n--)e[n].the_order=e[n].get("the_order");m.$apply(function(){m.slideshows=e[0]?e:[]})}})},m.Select=function(e){s.content||(s.content=""),n.cat.get("is_course")||(s.content+='<p><a href = "#/study-notes/slideshow/'+e.id+'">CLICK FOR SLIDESHOW</a></p>');c.addQuizToCourse("slideshow",e,n);r.cancel()},m.saveEditCategory=function(){m.edit_cat.set("title",m.data.title),m.edit_cat.save()},m.editCategory=function(e){m.edit_cat=e,m.data.title=e.get("title"),m.category=e,m.slideshow(e)},m.showCreateForm=function(){m.slideshows=[],m.show_create_form=!0},m.createCategory=function(){if(m.category)var e=m.category;else{var e=new p,n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.set("user_id",d.user.id),e.set("type","category")}e.set("title",m.data.title),e.save().then(function(e){m.$apply(function(){m.categorys.unshift(e),m.category=e,m.create_disable=!1})})},m.saveSlideShow=function(){if(m.slideshows[0])var e=m.slideshows[m.slideshows.length-1].get("the_order"),n=e+1;else var n=1;m.create_disable=!0;var t=new p,a=new Parse.ACL(Parse.User.current());a.setPublicReadAccess(!0),t.setACL(a),t.set("type","item"),t.set("the_order",n),t.set("link",m.link),t.set("summary",m.summary),t.set("content",m.content),t.set("parent_cat",m.category.id),t.save().then(function(e){m.slideshows||(m.slideshows=[]),m.$apply(function(){e.the_order=n,m.slideshows.push(e),m.link="",m.summary="",m.data.image_link="",m.create_disable=!1})})},m.useImage=function(e){m.imagesList=!1,m.google_images=!1,m.link=e},m.saveSummary=function(e){m.summary=e},m.saveContent=function(e){m.content=e},m.save=function(){s.content||(s.content="");var e=new p,n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.set("type","category"),e.save().then(function(e){s.content+='<p><a href = "#/study-notes/slideshow/'+e.id+'">CLICK FOR SLIDESHOW</a></p>',r.cancel()})},m.cancel=function(){r.cancel()},m.close=function(){r.cancel()},m.closeDialog=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("readingCoursePopController",["CourseExerciseService","HelperService","WNService","CourseReviewService","parentscope","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m){m.match_exercises=n.getCourseExerciseMatch();{var p=Parse.Object.extend("GrammarACTData");Parse.Object.extend("GrammarACTSTC")}m.question_objs=[],m.data={},m.obj={},m.obj.a="",m.user=Parse.User.current();var u=e.load_user_grammars("reading_grammar");u.then(function(e){m.items=e});var g=e.get_outlines();g.then(function(e){m.outlines=e}),m.notSelectExercises=function(e){var n=!0;for(var t in m.match_exercises)e.get(t)&&(n=!1);return n},m.createBySystemItem=function(e){e.btn_disable=!0;var n=new p,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.set("reading_grammar",!0),n.set("user_id",d.user.id),n.set("title",e.get("name")),n.set("listen",e.get("listen")),n.set("listen_arr",e.get("listen_arr")),n.set("reading_gapfill_objs",e.get("reading_gapfill_objs"));for(var a=10;a>=1;a--)n.set("act7_q_"+a,e.get("act7_q_"+a)),n.set("act7_a_"+a,e.get("act7_a_"+a)),n.set("act7_arr_"+a,e.get("act7_arr_"+a));n.save().then(function(){m.$apply(function(){m.editGrammar(n)})})},m.triggerSelect=function(e,n){var t=e.key;n.get(t)?n.set(t,!1):n.set(t,!0),n.save()},m.editSelectExercise=function(e){if(e.select_exercise_show)e.select_exercise_show=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].select_exercise_show=!1;e.select_exercise_show=!0}},m.changeFilter=function(n){m.items=[],m.show_system_grammar=!0;var t=e.load_user_grammars("reading_grammar",n);t.then(function(e){m.items=e})},m.readingDown=function(e,n){var t=n.indexOf(e);t<n.length-1&&(n.splice(t,1),n.splice(t+1,0,e),m.question_objs=n,m.save())},m.readingUp=function(e,n){var t=n.indexOf(e);t>0&&(n.splice(t,1),n.splice(t-1,0,e),m.question_objs=n,m.save())},m.removeQuestion=function(e){m.question_objs.splice(e,1),m.obj={},m.obj.a="",m.save()},m.editQuestion=function(e){e.is_edit=!0,m.obj=e},m.anwser=function(e,n,t){t.anwser_index_arr||(t.anwser_index_arr=[]);var a=!0;if(t.last_id&&t.last_id+1!=n&&(t.answer_message="Plese select word right after the previous word!",a=!1),a){e=e.trim();var s=e.slice(-1);("."==s||"!"==s||"?"==s||","==s||";"==s)&&(e=e.substring(0,e.length-1)),t.a+=" "+e,t.show=!0,t.last_id=n,t.answer_message=!1,t.anwser_index_arr.push(n)}m.save()},m.deleteAnwser=function(e){e.anwser_index_arr=[],e.last_id=!1,e.a="",e.q="",e.show=!1},m.clear=function(e){e.anwser_index_arr=[],e.last_id=!1,e.a="",m.save()},m.removeAnwser=function(e){e.a="",m.save()},m.updateListen=function(){var e=m.data.listen.replace(/\n/g," -breakline- ");m.listen_arr=e.split(" "),m.save()},m.checkDisable=function(){var e=!1,n=m.data;n.title&&n.listen||(e=!0);var t=m.question_objs[0];return t.a&&t.q||(e=!0),e},m.showSystemGrammar=function(){m.items=[],m.show_system_grammar=!0;var e=new Parse.Query(p);e.notEqualTo("type","outline"),e.notEqualTo("hide_note",!0),e.notEqualTo("remove",!0),e.notEqualTo("teacher_grammar",!0),e.notEqualTo("reading_grammar",!0),e.exists("writing_objs"),e.ascending("outline_order"),e.find({success:function(e){m.$apply(function(){m.items=e})}})},m.anwserGapFill=function(e,n){var t=m.inGapFill(n);if(t)var a=m.data.reading_gapfill_objs.indexOf(t);if(a>-1)m.data.reading_gapfill_objs.splice(a,1);else{var t={};e=e.trim();var s=e.slice(-1);if("."==s||"!"==s||"?"==s||","==s||";"==s)var o=e.substring(0,e.length-1);else o=e;t.lemma=e,t.index=n,t.fixed_lemma=o,t.fixed_leave=e.replace(o,""),m.data.reading_gapfill_objs.push(t)}m.data.reading_gapfill_objs.sort(function(e,n){return e.index<n.index?-1:e.index>n.index?1:0});for(var i=0;i<m.data.reading_gapfill_objs.length;i++)m.data.reading_gapfill_objs[i].anwser_index=i+1;console.log(m.data.reading_gapfill_objs),m.save()},m.inGapFill=function(e){for(var n=!1,t=0;t<m.data.reading_gapfill_objs.length;t++){var a=m.data.reading_gapfill_objs[t];if(a.index==e){n=a;break}}return n},m.editGrammar=function(e){m.data={},m.data.title=e.get("title"),m.data.listen=e.get("listen"),m.data.reading_gapfill_objs=e.get("reading_gapfill_objs")?e.get("reading_gapfill_objs"):[],m.listen_arr=e.get("listen_arr"),m.question_objs=[];for(var n=1;10>=n;n++){var t={};t.id=n,t.q=e.get("act7_q_"+n),t.a=e.get("act7_a_"+n),t.anwser_index_arr=e.get("act7_arr_"+n),m.question_objs.push(t)}m.grammar=e},m.removeASKHide=function(e){e.remove_show=!1,m.tmp_grammar=!1},m.showRemove=function(e){if(e.remove_show)e.remove_show=!1,m.tmp_grammar=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].remove_show=!1;e.remove_show=!0,m.tmp_grammar=e}},m.deleteGrammar=function(){var e=m.tmp_grammar,n=m.items.indexOf(e);n>-1&&m.items.splice(n,1),e.set("remove",!0),e.save(),m.tem_remove=!1,m.tmp_grammar=!1},m.selectSystemGrammar=function(e){m.select_grammar=e,m.select_grammar.name=e.get("name")},m.use=function(e){if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var n='<a href = "#/grammar-module/course-reading/'+e.id+' ">CLICK FOR READING EXERCISE</a>';s.note.content+=n}var t={};for(var a in m.match_exercises)e.get(a)&&(t[a]=!0);e.select_actions=t;var o=c.addQuizToCourse("reading",e,s);s.test_objs=o,r.cancel()},m.showCreateReading=function(){m.show_form=!0,m.data={},m.listen_arr=[],m.question_objs=[];for(var e=1;10>=e;e++){var n={};n.id=e,n.q="",n.a="",n.anwser_index_arr=[],(n.q||4>e)&&(n.show=!0),m.question_objs.push(n)}m.grammar={}},m.back=function(){m.items=[],m.show_form=!1,m.grammar=!1,m.show_system_grammar=!1;var n=e.load_user_grammars("reading_grammar");n.then(function(e){m.items=e})},m.saveTitle=function(){if(m.grammar.id)var e=m.grammar;else{var e=new p,n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n)}e.set("reading_grammar",!0),e.set("user_id",d.user.id),e.set("title",m.data.title),e.save().then(function(e){m.$apply(function(){m.items[0]||(m.items=[]),m.grammar||m.items.push(e),m.grammar=e})})},m.saveQuestion=function(){m.obj.is_edit||m.question_objs.push(m.obj),m.obj={},m.obj.a="",m.save()},m.save=function(){var e=m.grammar;e.set("listen",m.data.listen),e.set("listen_arr",m.listen_arr),e.set("reading_gapfill_objs",m.data.reading_gapfill_objs);for(var n=10;n>=1;n--)e.set("act7_q_"+n,""),e.set("act7_a_"+n,"");for(var t=1,n=0;n<=m.question_objs.length-1;n++){var a=m.question_objs[n];a.q&&a.a&&(e.set("act7_q_"+t,a.q),e.set("act7_a_"+t,a.a),e.set("act7_arr_"+t,a.anwser_index_arr),t++)}e.save().then(function(e){m.grammar=e})},m.cancel=function(){r.cancel()},m.close=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("addQuizPopController",["HelperService","WordService","$q","$stateParams","$rootScope","$mdDialog","parentscope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l){var d=Parse.Object.extend("StudyQuiz"),c=Parse.Object.extend("StudyQuizCat"),m=s.user;
l.question={},l.question.answers=[],l.question.select=[],l.error_message=!1,l.cat={},l.sub_quizs=[],i.note.content||(i.note.content="");var p=r.getUserQuizs(m.id);p.then(function(e){l.quizs=e}),l.quizUp=function(e,n){var t=n.indexOf(e);if(console.log(e.toJSON()),t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},l.quizDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},l.back=function(){l.edit_quiz_cat=!1,l.sub_quizs=[],l.creat_quiz=!1;var e=r.getUserQuizs(m.id);e.then(function(e){l.quizs=e})};var u=function(){l.save_enable=!1,l.sub_quizs||(l.sub_quizs=[]);var e=s.user;if(!l.error_message){if(l.edit_quiz_item)var n=l.edit_quiz_item;else{var n=new d,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.set("the_order",l.sub_quizs.length)}l.save_disable=!0,n.set("question",l.question.question),n.set("select",l.question.select),n.set("user_id",e.id),n.set("answers",l.question.answers),n.save().then(function(e){l.edit_quiz_item||l.sub_quizs.push(e);var n=g();n.then(function(){l.question={},l.question.answers=[],l.question.select=[],l.edit_quiz_item=!1,l.save_disable=!1})})}return l.error_message},g=function(){for(var e=[],n=l.sub_quizs.length-1;n>=0;n--)e.push(l.sub_quizs[n].id);var a=t.defer(),o=s.user;if(l.edit_quiz_cat)var i=l.edit_quiz_cat;else{var i=new c,r=new Parse.ACL(Parse.User.current());r.setPublicReadAccess(!0),i.setACL(r)}return i.set("question_ids",e),i.set("user_id",o.id),i.set("quiz_title",l.cat.quiz_title),i.set("type","normal"),i.save().then(function(e){l.$apply(function(){l.edit_quiz_cat=e}),a.resolve(e)}),a.promise};l.editSubQuiz=function(e){l.edit_quiz_item=e,l.question.question=e.get("question"),l.question.answers=e.get("answers"),l.question.select=e.get("select"),l.save_enable=!0},l.removeSubQuiz=function(e){var n=l.sub_quizs.indexOf(e);if(n>-1){var e=l.sub_quizs[n];e.set("remove",!0),e.save(),l.sub_quizs.splice(n,1)}},l.fixe_subquizs_order=function(e){for(var n=0;n<e.length;n++)e[n].set("the_order",n);Parse.Object.saveAll(e)},l.editQuiz=function(e){l.sub_quizs=[];var n=Parse.Object.extend("StudyQuiz");l.edit_quiz_cat=e,l.cat.quiz_title=e.get("quiz_title");var t=e.get("question_ids"),a=new Parse.Query(n);a.containedIn("objectId",t),a.notEqualTo("remove",!0),a.ascending("the_order"),a.find({success:function(e){l.fixe_subquizs_order(e),l.$apply(function(){l.sub_quizs=e})}})},l.showCreatForm=function(){l.creat_quiz=!0},l.Select=function(e){e.disable=!0,l.exercise_cat=e;var n=r.getWordsByCatId(e.id);n.then(function(e){l.select_words=e,l.search_word=""})},l.createCategoryQuiz=function(){l.disable_create_btn=!0;var e=(l.exercise_cat,r.buildExerciseByCat(l.exercise_cat,l.select_words));e.then(function(e){var n=e.cat,t=e.quizs;l.edit_quiz_cat=n,l.cat.quiz_title=n.get("quiz_title"),l.sub_quizs=t})},l.searchInputChange=function(e){l.search_word=e,l.select_words=!1,l.disable_create_btn=!1;var t=n.searchCatByString(e);t.then(function(e){l.searchWordList=e}),l.add_search_word=""},l.userQuiz=function(e){var n=e.get("question_ids");if(i.question_ids=n,i.parent_id=e.id,i.question_ids&&!i.cat.get("is_course")){for(var t="",a=i.question_ids.length-1;a>=0;a--)t+=","+i.question_ids[a];i.note.content+='<p><a href = "#/study-notes/quiz/'+t+"/"+i.parent_id+'">CLICK FOR QUIZ</a></p>'}r.addQuizToCourse("quiz",e,i);o.cancel()},l.removeASK=function(e){if(e.remove_show)e.remove_show=!1,l.tem_remove_quiz=!1;else{for(var n=l.quizs.length-1;n>=0;n--)l.quizs[n].remove_show=!1;e.remove_show=!0,l.tem_remove_quiz=e}},l.removeASKHide=function(e){l.tem_remove_quiz=!1,e.remove_show=!1},l.removeQuiz=function(){for(var e=l.tem_remove_quiz,n=l.quizs.length-1;n>=0;n--)l.quizs[n].id==e.id&&l.quizs.splice(n,1);e.set("remove",!0),e.save(),l.tem_remove_quiz=!1},l.showCreateQuiz=function(){l.cat={},l.creat_quiz=!l.creat_quiz},l.addQuestion=function(){u()},l.saveQuizTitle=function(){g()},l.save=function(){u()},l.changeSelect=function(e){l.question.select[0]=!1,l.question.select[1]=!1,l.question.select[2]=!1,l.question.select[3]=!1,l.question.select[e]=!0,l.save_enable=!0},l.cancel=function(){o.cancel()},l.close=function(){o.cancel()}}]),angular.module("triStudyNotesModule").controller("grammarProgressPopController",["CourseExerciseService","HelperService","WordService","$q","$stateParams","$rootScope","$mdDialog","parentscope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d){{var c=Parse.Object.extend("GrammarACTData");Parse.Object.extend("GrammarACTSTC")}d.match_exercises=n.getCourseExerciseMatch();var m=e.get_outlines();m.then(function(e){d.outlines=e});var p=function(){d.progress_items=[],d.items=[],d.input={},d.test_types={},d.grammars=[],d.action="",d.grammar=!1,d.type="my_progress";var n=e.load_user_grammars("progress_test");n.then(function(e){for(var n=e.length-1;n>=0;n--){var t=e[n];t.retake=t.get("retake")?!0:!1}d.grammars=e})};p(),d.back=function(){p()},d.triggerSelect=function(e,n){var t=e.key;n[t]=n[t]?!1:!0},d.changeFilter=function(e){var n=new Parse.Query(c);n.notEqualTo("type","outline"),n.notEqualTo("hide_note",!0),n.notEqualTo("remove",!0),n.notEqualTo("teacher_grammar",!0),n.notEqualTo("reading_grammar",!0),n.ascending("outline_order"),"all"!=e&&n.equalTo("outline",e),n.find({success:function(e){d.$apply(function(){d.items=e})}})},d.deleteItem=function(e){d.progress_items.splice(e,1),d.grammar.set("progress_items",d.progress_items),d.grammar.save()},d.addProgressItem=function(){var e=d.select_item.get("name"),n=d.select_item.id,t=d.test_types;t.id=n,t.name=e,d.progress_items||(d.progress_items=[]),d.progress_items.push(t),d.grammar.set("progress_items",d.progress_items),d.grammar.save(),d.action="load_bottons",d.test_types={},d.edit_item=!1},d.saveEditProgressItem=function(){d.grammar.set("progress_items",d.progress_items),d.grammar.save(),d.test_types={},d.edit_item=!1,d.action="load_bottons"},d.deleteGrammar=function(e){e.set("remove",!0),e.save();var n=d.grammars.indexOf(e);d.grammars.splice(n,1)},d.removeASKHide=function(e){e.remove_show=!1},d.removeASK=function(e){e.remove_show=!0},d.edit=function(e){d.grammar=e,d.progress_items=e.get("progress_items")?e.get("progress_items"):[],d.input={},d.input.title=e.get("name"),d.type="create_progress",d.action="load_bottons"},d.save=function(){if(d.grammar)d.grammar.set("name",d.input.title),d.grammar.save();else{var e=new c;e.set("name",d.input.title),e.set("user_id",o.user.id),e.set("teacher_grammar",!0),e.set("progress_test",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){d.$apply(function(){d.grammars.push(e),d.grammar=e})})}},d.showCreateProgress=function(){d.type="create_progress",d.action="load_bottons",d.items=[]},d.selectItem=function(e){d.select_item=e,d.test_types.name=e.get("name")},d.editItem=function(e){console.log(e),d.action="show_system_grammars",d.test_types=e,d.edit_item=e},d.load=function(n){console.log(n),d.action="show_system_grammars",d.grammar_type=n,d.test_types.grammar_type=n,d.test_types.free_practice="free_practice"==n?!0:!1;var t=e.load_user_grammars(n);t.then(function(e){d.items=e})},d.saveItemRetake=function(e){var n=e.retake?!0:!1;e.retake=!n,e.set("retake",e.retake),e.save()},d.use=function(e){console.log(e.toJSON());var n=e.retake?!0:!1;e.no_retake=!n;var t=l.addQuizToCourse("progress_test",e,r);r.test_objs=t,i.cancel()},d.cancel=function(){i.cancel()},d.close=function(){i.cancel()}}]),angular.module("triStudyNotesModule").controller("grammarCoursePopController",["CourseExerciseService","HelperService","WNService","CourseReviewService","parentscope","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m){var p=Parse.Object.extend("GrammarACTData"),u=Parse.Object.extend("GrammarACTSTC");m.user=Parse.User.current(),m.match_exercises=n.getCourseExerciseMatch();var g=a.get_grammar_tags(),f=10;m.sentence={},m.input={},m.sentence_list=[],m.my_grammars_show=!0;var _=e.load_user_grammars("target_language");_.then(function(e){m.items=e});var h=e.get_outlines();h.then(function(e){m.outlines=e}),m.sentence.check_item=g.stc_check_item,m.sentence.check_name=g.stc_check_name,m.sentence.check_simple=g.stc_check_simple,m.edit_grammar=!1,m.showAddSummary=function(){var e=a.get_grammar_tags();m.grammarACTData=m.grammar,m.data=a.set_grammar_data(m.grammar),m.data.check_item=e.data_check_item,m.data.check_name=e.data_check_name,m.data.check_model=a.getTypeObj(m.grammar,m.data.check_item),m.show_add_summary=!0},m.saveSummary=function(){m.grammar.set("summary",m.input.summary)},m.hideAddSummary=function(){m.show_add_summary=!1},m.saveTags=function(){m.grammar=a.saveTypesByObj(m.grammar,m.data.check_item,m.data.check_model),m.grammar.save()},m.notSelectExercises=function(e){var n=!0;for(var t in m.match_exercises)e.get(t)&&(n=!1);return n},m.fixe_subquizs_order=function(e){for(var n=0;n<e.length;n++)e[n].set("the_order",n);Parse.Object.saveAll(e)},m.sentenceUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},m.sentenceDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},m.clearSelect=function(){m.sentence.check_model={},m.sentence.check_model.written=!0,m.sentence.check_model.i=!0,m.sentence.check_model.plus=!0,m.select_label_obj={},m.select_label_obj.a=!0,m.select_label_obj.b=!0,m.select_label_obj.c=!0},m.clearSelect(),m.editGrammar=function(e){m.add_grammar_show=!0,m.input.title=e.get("name"),m.input.progress_name=e.get("progress_name"),m.input.summary=e.get("summary"),m.grammar=e;var n=new Parse.Query(u);n.equalTo("parent_id",e.id),n.ascending("the_order"),n.find({success:function(e){m.fixe_subquizs_order(e),m.$apply(function(){m.sentence_list=e})}}),m.show_create_course=!0,m.show_create_course_title=!0,m.add_grammar_show=!0},m.removeASKHide=function(e){e.remove_show=!1,m.tmp_grammar=!1},m.triggerSelect=function(e,n){var t=e.key;n.get(t)?n.set(t,!1):n.set(t,!0),n.save()},m.editSelectExercise=function(e){if(e.select_exercise_show)e.select_exercise_show=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].select_exercise_show=!1;e.select_exercise_show=!0}},m.showRemove=function(e){if(e.remove_show)e.remove_show=!1,m.tmp_grammar=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].remove_show=!1;e.remove_show=!0,m.tmp_grammar=e}},m.deleteGrammar=function(){var e=m.tmp_grammar,n=m.items.indexOf(e);n>-1&&m.items.splice(n,1),e.set("remove",!0),e.save(),m.tem_remove=!1,m.tmp_grammar=!1},m.editSentence=function(e){m.save_enable=!0,e.use_sentence_disable=!0,m.edit_sentence=e,m.sentence.check_model=a.getTypeObj(e,m.sentence.check_item);{var n=e.get("data_objs")?e.get("data_objs"):[];e.get("the_order")?e.get("the_order"):10}m.sample_obj=[],m.options_obj=[];for(var t=n.length-1;t>=0;t--){var s=JSON.parse(n[t]);m.sample_obj.unshift(s)}for(var t=m.sample_obj.length-1;t>=0;t--)m.sample_obj[t].is_option&&m.options_obj.unshift(m.sample_obj[t]);m.input.sample=e.get("sample"),m.select_label_obj={},m.select_label_obj.a=!0,m.select_label_obj.b=!0,m.select_label_obj.c=!0},m.removeSentence=function(e){var n=m.sentence_list.indexOf(e);n>-1&&m.sentence_list.splice(n,1),e.destroy()},m.selectModelChange=function(e,n,t){switch("written"!=e&&"spoken"!=e||!t[e]||(t.written=!1,t.spoken=!1,t[e]=!0,m.select_label_obj.a=!0),"i"!=e&&"you"!=e&&"we"!=e&&"they"!=e&&"he"!=e&&"she"!=e&&"it"!=e||!t[e]||(t.i=!1,t.you=!1,t.we=!1,t.they=!1,t.he=!1,t.she=!1,t.it=!1,t[e]=!0,m.select_label_obj.b=!0),"plus"!=e&&"min"!=e&&"plus_ask"!=e&&"min_ask"!=e||!t[e]||(t.plus=!1,t.min=!1,t.plus_ask=!1,t.min_ask=!1,t[e]=!0,m.select_label_obj.c=!0),e){case"plus":f=10;break;case"min":f=20;break;case"plus_ask":f=30;break;case"min_ask":f=40;break;default:f=10}t.spoken&&(f+=1),m.label_select=!0,m.checkCanAdd()},m.chekObjHaveAnwser=function(e){var n=!1;if(e)for(var t=0;t<e.length;t++)e[t].false_anwser||(n=!0);else n=!0;return n},m.addSentence=function(){m.add_sentence_disable=!0;var e=(m.sentence,m.grammar.id);if(m.edit_sentence){var n=m.edit_sentence;n.set("sample",m.input.sample),n.is_edit=!0}else{var n=new u,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.set("sample",m.input.sample),n.set("type","sentence"),n.set("parent_id",e),n.set("the_order",m.sentence_list.length+1)}for(var s=[],o=m.sample_obj.length-1;o>=0;o--){var i=m.sample_obj[o];if(i.false_anwser){for(var r=i.false_anwser.split(","),l=r.length-1;l>=0;l--)r[l]&&(r[l]=r[l].trim());i.false_arr=r}var d=JSON.stringify(i);s.unshift(d)}n.set("the_order",f),n.set("data_objs",s),n=a.saveTypesByObj(n,m.sentence.check_item,m.sentence.check_model),n.save().then(function(e){m.$apply(function(){n.the_order=f,n.is_edit||m.sentence_list.push(e),m.input.sample="",m.input.sample="",m.sample_obj=[],m.forms=!1,m.options_obj=[],m.edit_sentence=!1,m.add_sentence_disable=!1,m.clearSelect()})})},m.checkCanAdd=function(){var e=!0;m.options_obj||(m.options_obj=[]),m.options_obj[0]||(e=!1);for(var n=m.options_obj.length-1;n>=0;n--)m.options_obj[n].false_anwser||(e=!1);m.select_label_obj.a&&m.select_label_obj.b&&m.select_label_obj.c||(e=!1),m.save_enable=e},m.addForm=function(e){console.log(e),m.current_obj.false_anwser?m.current_obj.false_anwser+=", "+e:(m.current_obj.false_anwser="",m.current_obj.false_anwser+=e),m.checkCanAdd()},m.addOption=function(e,n){var a=e.tag.indexOf("VB");if(e.is_option){e.is_option=!1;var s=m.options_obj.indexOf(e);m.options_obj.splice(s,1),m.forms=!1}else if(m.current_obj=e,e.index=n,e.is_option=!0,m.options_obj.unshift(e),a>-1){var o=t.get_base_forms([e.lemma]);o.then(function(n){e.forms=n[0],m.forms=e.forms})}else m.forms=[];m.checkCanAdd()},m.saveEditSentence=function(){m.save_enable=!1,m.clearSelect();var e=t.get_grammar_tags_by_sentence(m.input.sample);e.then(function(e){m.sample_obj=e.tag_objs,m.options_obj=[],m.forms=!1,m.checkCanAdd()})},m.checkWordClass=function(e){var n=e.lemma,t=n.charAt(0),a=n.charAt(n.length-1),s="";return"'"==t&&(s+="back-margin-left-4 "),"."==n||"?"==n||"!"==n||","==n?s+="back-margin-left-4 margin-right-4 ":"'"!=a&&(s+="margin-right-4 "),s},m.createCourse=function(){if(m.input.progress_name||(m.input.progress_name=""),m.grammar)m.grammar.set("name",m.input.title),m.grammar.set("progress_name",m.input.progress_name),m.grammar.save();else{m.sentence_list=[],m.add_grammar_show=!0;var e=new p;e.set("name",m.input.title),e.set("progress_name",m.input.progress_name),e.set("user_id",d.user.id),e.set("teacher_grammar",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){m.$apply(function(){m.items.push(e),m.grammar=e})})}},m.showCreateCourse=function(){m.edit_form=!0,m.input={},m.grammar=!1,m.sentence_list=[]},m.back=function(){m.items=[],m.edit_form=!1,m.grammar=!1,m.show_system_grammar=!1,m.sample_obj={},m.options_obj=[],m.forms=!1;var n=e.load_user_grammars("target_language");n.then(function(e){m.items=e})},m.changeFilter=function(n){m.items=[],m.show_system_grammar=!0;var t=e.load_user_grammars("target_language",n);t.then(function(e){m.items=e})},m.showSystemGrammar=function(){m.items=[],m.show_system_grammar=!0;var e=new Parse.Query(p);e.notEqualTo("type","outline"),e.notEqualTo("hide_note",!0),e.notEqualTo("remove",!0),e.notEqualTo("teacher_grammar",!0),e.notEqualTo("reading_grammar",!0),e.exists("writing_objs"),e.limit(100),e.ascending("outline_order"),e.find({success:function(e){m.$apply(function(){m.items=e})}})},m.createBySystemItem=function(e){e.btn_disable=!0;var n=new p;n.set("name",e.get("name")),n.set("description",e.get("description")),n.set("summary",e.get("summary")),n.set("user_id",d.user.id),n.set("teacher_grammar",!0);var t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.save().then(function(n){console.log(n.toJSON());var t=new Parse.Query(u);t.equalTo("parent_id",e.id),t.equalTo("type","sentence"),t.find({success:function(t){for(var a=[],s=0;s<t.length;s++){var o=t[s].clone();o.set("parent_id",n.id),a.push(o)}Parse.Object.saveAll(a).then(function(){e.btn_disable=!1,m.editGrammar(n)})}})})},m.use=function(e){if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var n='<a href = "#/grammar-module/study-note-view/'+e.id+' ">CLICK FOR GRAMMAR EXERCISE</a>';s.note.content+=n}var t={};for(var a in m.match_exercises)e.get(a)&&(t[a]=!0);e.select_actions=t;var o=c.addQuizToCourse("grammar",e,s);s.test_objs=o,r.cancel()},m.cancel=function(){r.cancel()},m.close=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("gapFillPopController",["$q","WordService","HelperService","$rootScope","ClassService","parentscope","$stateParams","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d){var c=Parse.Object.extend("StudyQuiz"),m=Parse.Object.extend("StudyQuizCat"),p=a.user;d.quizs_gapfill=[],d.obj={},d.obj.sentence="",d.obj.enable_save=!1,d.obj.title="";var u=l.getUserGapFillQuizs(p.id);u.then(function(e){d.quizs=e}),o.note.content||(o.note.content=""),d.fixe_subquizs_order=function(e){for(var n=0;n<e.length;n++)e[n].set("the_order",n);Parse.Object.saveAll(e)},d.quizUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},d.quizDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}};var g=function(){for(var n=e.defer(),a=[],s=d.quizs_gapfill,o=s.length-1;o>=0;o--)s[o].quiz_obj.id&&a.push(s[o].quiz_obj.id);if(d.edit_cat)var i=d.edit_cat;else{var i=new m,r=new Parse.ACL(Parse.User.current());r.setPublicReadAccess(!0),i.setACL(r)}i.set("question_ids",a),i.set("user_id",p.id),i.set("quiz_title",d.obj.title),i.set("type","gapfill");for(var l=[],o=d.quizs_gapfill.length-1;o>=0;o--)for(var c=d.quizs_gapfill[o].words.length-1;c>=0;c--)d.quizs_gapfill[o].words[c].check||l.push(d.quizs_gapfill[o].words[c].bak_lemma);l=t.shuffle(l),d.obj.option_arr=l;var u=d.obj.show_answers?!0:!1,g=d.obj.enable_dictation?!0:!1;return i.set("show_answers",u),i.set("enable_dictation",g),i.set("option_arr",l),i.save().then(function(e){d.$apply(function(){d.edit_cat=e}),n.resolve(e)}),n.promise};d.saveTitle=function(){g()},d.back=function(){d.edit_cat=!1,d.creat_quiz=!1,d.quizs_gapfill=[],d.searchWordList=[],d.select_words=!1;var e=l.getUserGapFillQuizs(p.id);e.then(function(e){d.quizs=e})},d.Select=function(e){e.disable=!0,d.exercise_cat=e;var n=l.getWordsByCatId(e.id);n.then(function(e){d.select_words=e,d.search_word=""})},d.searchInputChange=function(e){d.search_word=e,d.select_words=!1,d.disable_create_btn=!1;var t=n.searchCatByString(e);t.then(function(e){d.searchWordList=e}),d.add_search_word=""},d.createCategoryGapFill=function(){d.disable_create_btn=!0;d.exercise_cat;if("form"==d.obj.type)var e=l.buildGapFillFormByCat(d.exercise_cat,d.select_words);else var e=l.buildGapFillByCat(d.exercise_cat,d.select_words);e.then(function(e){var n=e.cat,t=e.list;d.edit_cat=n,d.obj.title=n.get("quiz_title");var t=l.gapFillCreateData(t);d.quizs_gapfill=t})},d.userQuiz=function(e){var n=e.get("question_ids");if(o.question_ids=n,o.parent_id=e.id,o.note.content||(o.note.content=""),o.question_ids&&!o.cat.get("is_course")){for(var t="",a=o.question_ids.length-1;a>=0;a--)t+=","+o.question_ids[a];o.note.content+='<p><a href = "#/study-notes/gap-fill-quiz/'+t+"/"+o.parent_id+'">CLICK FOR GAP-FILL</a></p>'}var s=l.addQuizToCourse("gapfill",e,o);o.test_objs=s,r.cancel()},d.removeASK=function(e){if(e.remove_show)e.remove_show=!1,d.tem_remove_quiz=!1;else{for(var n=d.quizs.length-1;n>=0;n--)d.quizs[n].remove_show=!1;e.remove_show=!0,d.tem_remove_quiz=e}},d.removeASKHide=function(e){d.tem_remove_quiz=!1,e.remove_show=!1},d.showCreateQuiz=function(){d.creat_quiz=!d.creat_quiz,d.obj={},d.obj.enable_dictation=!0},d.removeQuiz=function(){for(var e=d.tem_remove_quiz,n=d.quizs.length-1;n>=0;n--)d.quizs[n].id==e.id&&d.quizs.splice(n,1);e.destroy(),d.tem_remove_quiz=!1},d.editGapfill=function(e){d.edit_cat=e,d.obj.title=e.get("quiz_title"),d.obj.option_arr=e.get("option_arr")?e.get("option_arr"):[],d.obj.show_answers=e.get("show_answers"),d.obj.enable_dictation=e.get("enable_dictation"),d.obj.enable_save=!0;var n=e.get("question_ids"),t=new Parse.Query(c);t.containedIn("objectId",n),t.ascending("the_order"),t.find({success:function(e){var e=l.gapFillCreateData(e);d.fixe_subquizs_order(e),d.$apply(function(){d.quizs_gapfill=e})}})},d.editGapfillItem=function(e){e.edit=!0,d.obj.edit_quiz=e.quiz_obj},d.saveEditSentence=function(e){d.obj.sentence=e.sentence.trim(),d.obj.edit_quiz=e.quiz_obj;var n=d.quizs_gapfill.indexOf(e);d.obj.edit_quiz_index=n,d.addSentence()},d.addSentence=function(){var e=a.user,n={};n.sentence=t.fixeSentenceSpace(d.obj.sentence),n.words=[];var s=[];s=n.sentence.split(" ");for(var o=s.length-1;o>=0;o--){var i={};i.check=!0,i.lemma=s[o],i.bak_lemma=s[o],n.words.unshift(i)}for(var s=[],r=[],l=n.words.length-1;l>=0;l--)s.unshift(n.words[l].lemma),r.unshift(n.words[l].bak_lemma);if(d.add_disable=!0,d.obj.edit_quiz)var m=d.obj.edit_quiz;else{var m=new c,p=new Parse.ACL(Parse.User.current());p.setPublicReadAccess(!0),m.setACL(p),m.set("user_id",e.id),m.set("type","gapfill"),m.set("parent_id",d.edit_cat.id),m.set("the_order",d.quizs_gapfill.length)}var u=m.show_first_letter?!0:!1;m.set("show_first_letter",u),m.set("lemma_arr",s),m.set("lemma_bak_arr",r),m.save().then(function(e){d.obj.edit_quiz?d.quizs_gapfill[d.obj.edit_quiz_index]=n:d.quizs_gapfill.push(n),n.quiz_obj=e,d.$apply(function(){d.obj.sentence="",d.add_disable=!1,d.obj.edit_quiz=!1});g()})},d.showAnswers=function(){g()},d.changeDictation=function(){var e=d.edit_cat,n=d.obj.enable_dictation?!0:!1;e.set("enable_dictation",n),e.save()},d.changeFirstLetter=function(e){var n=e.words;if(e.show_first_letter)for(var a=n.length-1;a>=0;a--){var s=n[a];if(!s.check){var o=s.bak_lemma.charAt(s.bak_lemma.length-1),i=t.getSymbols(),r=i.indexOf(o),l=s.bak_lemma.toLowerCase();if("a"==l||"an"==l||"is"==l||"am"==l||"are"==l||"the"==l)var d="";else var d=s.bak_lemma.charAt(0);s.lemma=r>-1?d+"______"+o:d+"______"}}else for(var a=n.length-1;a>=0;a--){var s=n[a];s.check||(s.lemma="______")}for(var c=[],m=[],p=e.words.length-1;p>=0;p--)c.unshift(e.words[p].lemma),m.unshift(e.words[p].bak_lemma);var u=e.quiz_obj,g=e.show_first_letter?!0:!1;u.set("show_first_letter",g),u.set("lemma_arr",c),u.set("lemma_bak_arr",m),u.save()},d.removeGapfill=function(e){var n=d.quizs_gapfill[e].quiz_obj;n.set("remove",!0),n.save(),d.quizs_gapfill.splice(e,1),g()},d.changeOption=function(e,n){var a=(e.words,e.quiz_obj);if(n.check)n.check=!0,n.lemma=n.bak_lemma;else{var s=n.bak_lemma.charAt(n.bak_lemma.length-1),o=t.getSymbols(),i=o.indexOf(s),r=n.bak_lemma.toLowerCase();if("a"==r||"an"==r||"is"==r||"am"==r||"are"==r||"the"==r)var l="";else var l=n.bak_lemma.charAt(0);n.lemma=e.show_first_letter?i>-1?l+"______"+s:l+"______":"______",d.hide_message=!0,n.check=!1}for(var c=[],m=[],p=e.words.length-1;p>=0;p--)c.unshift(e.words[p].lemma),m.unshift(e.words[p].bak_lemma);var u=e.show_first_letter?!0:!1;a.set("show_first_letter",u),a.set("lemma_arr",c),a.set("lemma_bak_arr",m),a.save(),g()},d.cancel=function(){r.cancel()},d.close=function(){r.cancel()},d.closeDialog=function(){r.cancel()}}]),angular.module("triStudyNotesModule"),angular.module("triStudyNotesModule").controller("dialogueCoursePopController",["CourseExerciseService","HelperService","WNService","CourseReviewService","parentscope","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m){var p=Parse.Object.extend("GrammarACTData"),u=Parse.Object.extend("GrammarACTSTC");m.user=Parse.User.current(),m.match_exercises=n.getCourseExerciseMatch();var g=a.get_grammar_tags(),f=10;m.sentence={},m.input={},m.sentence_list=[],m.my_grammars_show=!0;var _=e.load_user_grammars("dialog");_.then(function(e){m.items=e});var h=e.get_outlines();h.then(function(e){m.outlines=e}),m.sentence.check_item=g.stc_check_item,m.sentence.check_name=g.stc_check_name,m.sentence.check_simple=g.stc_check_simple,m.edit_grammar=!1,m.notSelectExercises=function(e){var n=!0;for(var t in m.match_exercises)e.get(t)&&(n=!1);return n},m.fixe_subquizs_order=function(e){for(var n=0;n<e.length;n++)e[n].set("the_order",n);Parse.Object.saveAll(e)},m.sentenceUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},m.sentenceDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},m.clearSelect=function(){m.sentence.check_model={},m.sentence.check_model.written=!0,m.sentence.check_model.i=!0,m.sentence.check_model.plus=!0,m.select_label_obj={},m.select_label_obj.a=!0,m.select_label_obj.b=!0,m.select_label_obj.c=!0},m.clearSelect(),m.editGrammar=function(e){m.add_grammar_show=!0,m.input.title=e.get("name"),m.grammar=e;var n=new Parse.Query(u);n.equalTo("parent_id",e.id),n.ascending("the_order"),n.find({success:function(e){m.fixe_subquizs_order(e),m.$apply(function(){m.sentence_list=e})}}),m.show_create_course=!0,m.show_create_course_title=!0,m.add_grammar_show=!0},m.removeASKHide=function(e){e.remove_show=!1,m.tmp_grammar=!1},m.triggerSelect=function(e,n){var t=e.key;n.get(t)?n.set(t,!1):n.set(t,!0),n.save()},m.editSelectExercise=function(e){if(e.select_exercise_show)e.select_exercise_show=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].select_exercise_show=!1;e.select_exercise_show=!0}},m.showRemove=function(e){if(e.remove_show)e.remove_show=!1,m.tmp_grammar=!1;else{for(var n=m.items.length-1;n>=0;n--)m.items[n].remove_show=!1;e.remove_show=!0,m.tmp_grammar=e}},m.deleteGrammar=function(){var e=m.tmp_grammar,n=m.items.indexOf(e);n>-1&&m.items.splice(n,1),e.set("remove",!0),e.save(),m.tem_remove=!1,m.tmp_grammar=!1},m.editSentence=function(e){m.save_enable=!0,e.use_sentence_disable=!0,m.edit_sentence=e,m.sentence.check_model=a.getTypeObj(e,m.sentence.check_item);{var n=e.get("data_objs")?e.get("data_objs"):[];e.get("the_order")?e.get("the_order"):10}m.sample_obj=[],m.options_obj=[];for(var t=n.length-1;t>=0;t--){var s=JSON.parse(n[t]);m.sample_obj.unshift(s)}for(var t=m.sample_obj.length-1;t>=0;t--)m.sample_obj[t].is_option&&m.options_obj.unshift(m.sample_obj[t]);m.input.sample=e.get("sample"),m.select_label_obj={},m.select_label_obj.a=!0,m.select_label_obj.b=!0,m.select_label_obj.c=!0},m.removeSentence=function(e){var n=m.sentence_list.indexOf(e);n>-1&&m.sentence_list.splice(n,1),e.destroy()},m.selectModelChange=function(e,n,t){switch("written"!=e&&"spoken"!=e||!t[e]||(t.written=!1,t.spoken=!1,t[e]=!0,m.select_label_obj.a=!0),"i"!=e&&"you"!=e&&"we"!=e&&"they"!=e&&"he"!=e&&"she"!=e&&"it"!=e||!t[e]||(t.i=!1,t.you=!1,t.we=!1,t.they=!1,t.he=!1,t.she=!1,t.it=!1,t[e]=!0,m.select_label_obj.b=!0),"plus"!=e&&"min"!=e&&"plus_ask"!=e&&"min_ask"!=e||!t[e]||(t.plus=!1,t.min=!1,t.plus_ask=!1,t.min_ask=!1,t[e]=!0,m.select_label_obj.c=!0),e){case"plus":f=10;break;case"min":f=20;break;case"plus_ask":f=30;break;case"min_ask":f=40;break;default:f=10}t.spoken&&(f+=1),m.label_select=!0,m.checkCanAdd()},m.addSentence=function(){m.add_sentence_disable=!0;var e=(m.sentence,m.grammar.id);if(m.edit_sentence){var n=m.edit_sentence;n.set("sample",m.input.sample),n.is_edit=!0}else{var n=new u,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.set("sample",m.input.sample),n.set("type","dig"),n.set("parent_id",e),n.set("the_order",m.sentence_list.length+1)}for(var s=[],o=m.sample_obj.length-1;o>=0;o--){var i=m.sample_obj[o];if(i.false_anwser){for(var r=i.false_anwser.split(","),l=r.length-1;l>=0;l--)r[l]&&(r[l]=r[l].trim());i.false_arr=r}var d=JSON.stringify(i);s.unshift(d)}n.set("the_order",f),n.set("data_objs",s),n=a.saveTypesByObj(n,m.sentence.check_item,m.sentence.check_model),n.save().then(function(e){m.$apply(function(){n.the_order=f,n.is_edit||m.sentence_list.push(e),m.input.sample="",m.input.sample="",m.sample_obj=[],m.forms=!1,m.options_obj=[],m.edit_sentence=!1,m.add_sentence_disable=!1,m.clearSelect()})})},m.checkCanAdd=function(){var e=!0;m.options_obj||(m.options_obj=[]),m.options_obj[0]||(e=!1);for(var n=m.options_obj.length-1;n>=0;n--)m.options_obj[n].false_anwser||(e=!1);m.select_label_obj.a&&m.select_label_obj.b&&m.select_label_obj.c||(e=!1),m.save_enable=e},m.addForm=function(e){m.current_obj.false_anwser?m.current_obj.false_anwser+=", "+e:(m.current_obj.false_anwser="",m.current_obj.false_anwser+=e),m.checkCanAdd()},m.addOption=function(e,n){var a=e.tag.indexOf("VB");if(e.is_option){e.is_option=!1;var s=m.options_obj.indexOf(e);m.options_obj.splice(s,1),m.forms=!1}else if(m.current_obj=e,e.index=n,e.is_option=!0,m.options_obj.unshift(e),a>-1){var o=t.get_base_forms([e.lemma]);o.then(function(n){e.forms=n[0],m.forms=e.forms})}else m.forms=[];m.checkCanAdd()},m.saveEditSentence=function(){m.save_enable=!1,m.clearSelect();var e=t.get_grammar_tags_by_sentence(m.input.sample);e.then(function(e){m.sample_obj=e.tag_objs,m.options_obj=[],m.forms=!1,m.checkCanAdd()})},m.checkWordClass=function(e){var n=e.lemma,t=n.charAt(0),a=n.charAt(n.length-1),s="";return"'"==t&&(s+="back-margin-left-4 "),"."==n||"?"==n||"!"==n||","==n?s+="back-margin-left-4 margin-right-4 ":"'"!=a&&(s+="margin-right-4 "),s},m.createCourse=function(){if(m.grammar)m.grammar.set("name",m.input.title),m.grammar.save();else{m.sentence_list=[],m.add_grammar_show=!0;var e=new p;e.set("name",m.input.title),e.set("user_id",d.user.id),e.set("teacher_grammar",!0),e.set("dialog",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){m.$apply(function(){m.items.push(e),m.grammar=e})})}},m.showCreateCourse=function(){m.edit_form=!0,m.input={},m.grammar=!1,m.sentence_list=[]},m.back=function(){m.items=[],m.edit_form=!1,m.grammar=!1,m.show_system_grammar=!1,m.sample_obj={},m.options_obj=[],m.forms=!1;var n=e.load_user_grammars("dialog");n.then(function(e){m.items=e})},m.changeFilter=function(n){m.items=[],m.show_system_grammar=!0;var t=e.load_user_grammars("dialog",n);t.then(function(e){m.items=e})},m.showSystemGrammar=function(){m.items=[],m.show_system_grammar=!0;var e=new Parse.Query(p);e.notEqualTo("type","outline"),e.notEqualTo("hide_note",!0),e.notEqualTo("remove",!0),e.notEqualTo("teacher_grammar",!0),e.notEqualTo("reading_grammar",!0),e.exists("writing_objs"),e.limit(100),e.ascending("outline_order"),e.find({success:function(e){m.$apply(function(){m.items=e})}})},m.createBySystemItem=function(e){e.btn_disable=!0;var n=new p;n.set("name",e.get("name")),n.set("description",e.get("description")),n.set("summary",e.get("summary")),n.set("user_id",d.user.id),n.set("dialog",!0);var t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.save().then(function(n){console.log(n.toJSON());var t=new Parse.Query(u);t.equalTo("parent_id",e.id),t.equalTo("type","dia"),t.find({success:function(t){for(var a=[],s=0;s<t.length;s++){var o=t[s].clone();o.set("parent_id",n.id),a.push(o)}Parse.Object.saveAll(a).then(function(){e.btn_disable=!1,m.editGrammar(n)})}})})},m.use=function(e){if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var n='<a href = "#/grammar-module/study-note-view/'+e.id+' ">CLICK FOR DIALOG</a>';s.note.content+=n
}var t={};for(var a in m.match_exercises)e.get(a)&&(t[a]=!0);e.select_actions=t;var o=c.addQuizToCourse("dialogue",e,s);s.test_objs=o,r.cancel()},m.cancel=function(){r.cancel()},m.close=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("addCorrectionPopController",["WNService","$timeout","EmailService","ClassService","parentscope","$stateParams","$rootScope","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d){d.data={},d.studentCorrections=[],d.user=Parse.User.current();var c=Parse.Object.extend("CorrectionST"),m=new Parse.Query(c);m.equalTo("user",i.user.id),m.notEqualTo("remove",!0),m.find({success:function(e){d.$apply(function(){d.corrections=e})}}),d.back=function(){d.show_create_correction=!1},d.addSentence=function(){d.studentCorrections||(d.studentCorrections=[]),d.data.disable=!0;var e=d.chart_corrections;e.first_sentence=e.first_sentence?e.first_sentence:"",e.first_sentence_mark=e.first_sentence_mark?e.first_sentence_mark:[],e.second_sentence=e.second_sentence?e.second_sentence:"",e.second_sentence_mark=e.second_sentence_mark?e.second_sentence_mark:[];var n=new c,t=d.correction.id,a=i.user;n.set("correction_id",t),n.set("user_id",a.id),n.set("username",a.get("username")),n.set("mistake_st",d.data.mistake_st),n.set("right_st",d.data.right_st),n.set("first_sentence",e.first_sentence),n.set("first_sentence_mark",e.first_sentence_mark),n.set("second_sentence",e.second_sentence),n.set("second_sentence_mark",e.second_sentence_mark),n.set("the_order",d.studentCorrections.length+1);var s=new Parse.ACL(Parse.User.current());s.setPublicReadAccess(!0),n.setACL(s),n.save().then(function(e){e.right_st=e.get("right_st"),e.mistake_st=e.get("mistake_st"),e.correction_st=e.get("mistake_st"),d.$apply(function(){d.data={},d.chart_corrections=!1,d.studentCorrections.unshift(e)})})},d.correctionDown=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},d.correctionUp=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},d.chartClass=function(e,n){return e?"undefined"==typeof e[n]?"correct":" "==e[n]?"correct":"-"==e[n]?"missing":"+"==e[n]?"extra":"^"==e[n]?"incorrect":""==e[n]?"correct":void 0:"correct"},d.copyMistakeST=function(){d.data.right_st=d.data.mistake_st},d.setRightSentence=function(){var n=d.data,t=n.mistake_st,a=n.right_st;if(t&&a){var s=e.get_correction(t,a);s.then(function(e){d.chart_corrections=e})}},d.removeASK=function(e){if(e.remove_show)e.remove_show=!1,d.tem_remove_correction=!1;else{for(var n=d.corrections.length-1;n>=0;n--)d.corrections[n].remove_show=!1;e.remove_show=!0,d.tem_remove_correction=e}},d.removeASKHide=function(e){d.tem_remove_correction=!1,e.remove_show=!1},d.removecorrection=function(){for(var e=d.tem_remove_correction,n=d.corrections.length-1;n>=0;n--)d.corrections[n].id==e.id&&d.corrections.splice(n,1);e.set("remove",!0),e.save(),d.tem_remove_correction=!1},d.creatCorrection=function(){d.show_create_correction=!0,d.instructions="",d.studentCorrections=[]},d.editCorrection=function(e){d.show_create_correction=!0,d.correction=e,d.instructions=e.get("instructions");var n=e.id,t=l.getUserCorrectionById(n);t.then(function(e){for(var n=!1,t=e.length-1;t>=0;t--)e[t].mistake_st=e[t].get("mistake_st"),e[t].right_st=e[t].get("right_st"),e[t].correction_st=e[t].get("mistake_st"),e[t].set("the_order",t+1),e[t].get("the_order")||(n=!0);Parse.Object.saveAll(e).then(function(){}),d.studentCorrections=e})},d.deleteCorrection=function(e){var n=d.studentCorrections.indexOf(e);n>-1&&(d.studentCorrections.splice(n,1),e.set("remove",!0),e.save())},d.setRightSentenceChange=function(n){var t=n,a=t.mistake_st,s=t.right_st;if(a&&s){var o=e.get_correction(a,s);o.then(function(e){n.set("first_sentence",e.first_sentence),n.set("first_sentence_mark",e.first_sentence_mark),n.set("second_sentence",e.second_sentence),n.set("second_sentence_mark",e.second_sentence_mark),n.save()})}},d.showEditCorrection=function(e){e.editing=!e.editing},d.saveInstructions=function(e){var n=Parse.Object.extend("CorrectionST");if(d.correction)var t=d.correction;else{var t=new n;t.set("user",i.user.id);var a=new Parse.ACL(Parse.User.current());a.setPublicReadAccess(!0),t.setACL(a),d.corrections.push(t)}t.set("instructions",e),t.set("emails_send",!1),t.save().then(function(e){d.$apply(function(){d.correction=e})})},d.showClassSelect=function(){var e=a.getBelongToClass();e.then(function(e){d.myClasses=e})},d.send=function(e){e.disable=!0;var a=d.correction.id;t.sendCorrectionEmail(e,a),d.correction.set("emails_send",!0),d.correction.save(),d.send_email_message=e.get("name")+" class students have been notified! Dialog will auto close in 3 seconds.",s.note.content||(s.note.content="");var o='<a href = "#/study-notes/correction/'+d.correction.id+' ">CLICK FOR ERROR EXERCISE</a>';s.note.content+=o,n(function(){r.cancel()},3e3)},d.userCorrection=function(e){if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var n='<a href = "#/study-notes/correction/'+e.id+' ">CLICK FOR ERROR EXERCISE</a>';s.note.content+=n}var t=l.addQuizToCourse("correction",e,s);s.test_objs=t,r.cancel()},d.cancel=function(){r.cancel()},d.close=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("addWritingAssignmentPopController",["$translate","CourseExerciseService","HelperService","WNService","CourseReviewService","parentscope","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m,p){var u=Parse.Object.extend("GrammarACTData"),g=Parse.Object.extend("GrammarACTSTC");p.user=Parse.User.current();var f=n.load_user_grammars("writing_assignment");f.then(function(e){p.items=e});var _=n.get_outlines();_.then(function(e){p.outlines=e}),p.use=function(e){if(o.note.content||(o.note.content=""),!o.cat.get("is_course")){var n='<a href = "#/grammar-module/study-note-view/'+e.id+' ">CLICK FOR WRitiNG ASSIGNMENT</a>';o.note.content+=n}var t={};t.free_practice=!0,e.select_actions=t;var a=m.addQuizToCourse("free_practice",e,o);o.test_objs=a,l.cancel()},p.triggerTestForm=function(e){p.data.select_test_forms||(p.data.select_test_forms=[]);var n=p.data.select_test_forms.indexOf(e.id);0>n?p.data.select_test_forms.push(e.id):p.data.select_test_forms.splice(n,1)},p.inSelectForms=function(e){p.data.select_test_forms||(p.data.select_test_forms=[]);var n=p.data.select_test_forms.indexOf(e.id);return 0>n?!1:!0},p.editWriting=function(e){p.edit_writing=e,p.data.writing_task=e.writing_task,p.data.select_test_forms=e.select_test_forms?e.select_test_forms:[]},p.editGrammar=function(e){p.data={},p.input={},p.data.writing_objs=[],p.add_grammar_show=!0,p.input.title=e.get("name"),p.grammar=e,p.show_create_course=!0,p.show_create_course_title=!0,p.add_grammar_show=!0,p.data.writing_objs=e.get("writing_objs")?e.get("writing_objs"):[];var n=new Parse.Query(g);n.equalTo("parent_id",p.grammar.id),n.equalTo("type","test_form"),n.ascending("the_order"),n.limit(100),n.find({success:function(e){p.$apply(function(){p.test_forms=e})}})},p.addTestTag=function(){if(p.add_test_tag_disable=!0,p.tag_edit_form)var e=p.tag_edit_form;else{var e=new g,n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n)}e.set("sample",p.input.test_form),e.set("type","test_form"),e.set("parent_id",p.grammar.id),e.set("user_id",c.user.id),e.set("tag",p.options_obj[0].show_tag),e.set("tag_type",p.options_obj[0].tag_type);for(var t=[],a=[],s="",o=0;o<=p.options_obj.length-1;o++){var i=p.options_obj[o];t.push(i.show_tag),a.push(i.tag_type),s=i.tag_lemma?s+" "+i.show_tag:s+" ["+i.show_tag+"]"}e.set("tag_arr",t),e.set("tag_type_arr",a),e.set("tag_str",s.trim()),e.save().then(function(e){p.$apply(function(){p.test_forms||(p.test_forms=[]),p.tag_edit_form||p.test_forms.push(e),p.input.test_form="",p.sample_obj=!1,p.add_test_tag_disable=!1})})},p.useTestForm=function(e){Parse.Object.extend("GrammarACTData"),Parse.Object.extend("GrammarACTSTC");p.options_obj=[],p.current_obj=!1;var n=a.get_grammar_tags_by_sentence(e);n.then(function(e){p.sample_obj=e.tag_objs})},p.addOption=function(e,n){console.log(e);var t=!0;p.current_obj&&p.current_obj.index+1!=n&&(t=!1),t?(p.current_obj=e,e.index=n,e.is_option=!0,e.show_tag=e.tag,p.options_obj.push(e),p.err_message=!1,e.tag_tag=!0,e.tag_type="tag_tag"):p.err_message="Please select word right after the last word!"},p.changeSample=function(e){p.options_obj=[],p.current_obj=!1,p.sample_obj=[];var n=a.get_grammar_tags_by_sentence(e);n.then(function(e){p.sample_obj=e.tag_objs,console.log(p.sample_obj)})},p.selectTagTypeAuto=function(e){e.tag_tag?p.selectTagType("tag_lemma",e):e.tag_lemma?p.selectTagType("tag_space",e):p.selectTagType("tag_tag",e)},p.selectTagType=function(e,n){n.tag_lemma=!1,n.tag_tag=!1,n.tag_space=!1,n[e]=!0,n.tag_type=e,"tag_lemma"==e&&(n.show_tag=n.lemma),"tag_tag"==e&&(n.show_tag=n.tag),"tag_space"==e&&(n.show_tag="*")},p.tagClass=function(e,n){return n[e]?void 0:"bg-grey"},p.addTagOption=function(e,n){var t=!0;p.current_obj&&p.current_obj.index+1!=n&&(t=!1),t?(p.current_obj=e,e.index=n,e.is_option=!0,e.show_tag=e.tag,p.options_obj.push(e),p.err_message=!1,e.tag_tag=!0,e.tag_type="tag_tag"):p.err_message="Please select word right after the last word!"},p.clear=function(){p.options_obj=[],p.current_obj=!1;for(var e=p.sample_obj.length-1;e>=0;e--)p.sample_obj[e].is_option=!1,p.sample_obj[e].show_tag=""},p.checkWordClass=function(e){var n=a.checkWordClass(e.lemma);return n},p.removeTestForm=function(e){var n=p.test_forms.indexOf(e);n>-1&&p.test_forms.splice(n,1),e.destroy()},p.saveWriting=function(){if(console.log(p.grammar),p.edit_writing)var e=p.edit_writing;else var e={};e.writing_task=p.data.writing_task,e.select_test_forms=p.data.select_test_forms,p.data.select_test_form&&(e.test_form_id=p.data.select_test_form.id),p.edit_writing||(p.data.writing_objs||(p.data.writing_objs=[]),p.data.writing_objs.push(e)),p.edit_writing=!1,p.data.writing_task="",p.grammar.set("writing_objs",p.data.writing_objs),p.grammar.save(),p.data.select_test_forms=[]},p.removeWriting=function(e){p.data.writing_objs.splice(e,1),p.grammar.set("writing_objs",p.data.writing_objs),p.grammar.save()},p.createCourse=function(){if(p.grammar)p.grammar.set("name",p.input.title),p.grammar.save();else{p.sentence_list=[],p.add_grammar_show=!0;var e=new u;e.set("name",p.input.title),e.set("user_id",c.user.id),e.set("teacher_grammar",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){p.$apply(function(){p.items.push(e),p.grammar=e})})}},p.removeASKHide=function(e){e.remove_show=!1,p.tmp_grammar=!1},p.showRemove=function(e){if(e.remove_show)e.remove_show=!1,p.tmp_grammar=!1;else{for(var n=p.items.length-1;n>=0;n--)p.items[n].remove_show=!1;e.remove_show=!0,p.tmp_grammar=e}},p.deleteGrammar=function(){var e=p.tmp_grammar,n=p.items.indexOf(e);n>-1&&p.items.splice(n,1),e.set("remove",!0),e.save(),p.tem_remove=!1,p.tmp_grammar=!1},p.addForm=function(e){p.current_obj.false_anwser?p.current_obj.false_anwser+=", "+e:(p.current_obj.false_anwser="",p.current_obj.false_anwser+=e),p.checkCanAdd()},p.addOption=function(e,n){var t=e.tag.indexOf("VB");if(e.is_option){e.is_option=!1;var s=p.options_obj.indexOf(e);p.options_obj.splice(s,1),p.forms=!1}else if(p.current_obj=e,e.index=n,e.is_option=!0,p.options_obj.unshift(e),t>-1){var o=a.get_base_forms([e.lemma]);o.then(function(n){e.forms=n[0],p.forms=e.forms})}else p.forms=[];p.checkCanAdd()},p.checkWordClass=function(e){var n=e.lemma,t=n.charAt(0),a=n.charAt(n.length-1),s="";return"'"==t&&(s+="back-margin-left-4 "),"."==n||"?"==n||"!"==n||","==n?s+="back-margin-left-4 margin-right-4 ":"'"!=a&&(s+="margin-right-4 "),s},p.createCourse=function(){if(p.grammar)p.grammar.set("name",p.input.title),p.grammar.save();else{p.sentence_list=[],p.add_grammar_show=!0;var e=new u;e.set("name",p.input.title),e.set("user_id",c.user.id),e.set("writing_assignment",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){p.$apply(function(){p.items.push(e),p.grammar=e})})}},p.showCreateCourse=function(){p.edit_form=!0,p.input={},p.data={},p.grammar=!1,p.sentence_list=[]},p.back=function(){p.items=[],p.edit_form=!1,p.grammar=!1,p.show_system_grammar=!1,p.sample_obj={},p.options_obj=[],p.forms=!1;var e=n.load_user_grammars("writing_assignment");e.then(function(e){p.items=e})},p.changeFilter=function(e){p.items=[],p.show_system_grammar=!0;var t=n.load_user_grammars("writing_assignment",e);t.then(function(e){p.items=e})},p.showSystemGrammar=function(){p.items=[],p.show_system_grammar=!0;var e=new Parse.Query(u);e.notEqualTo("type","outline"),e.notEqualTo("hide_note",!0),e.notEqualTo("remove",!0),e.notEqualTo("teacher_grammar",!0),e.notEqualTo("reading_grammar",!0),e.exists("writing_objs"),e.limit(100),e.ascending("outline_order"),e.find({success:function(e){p.$apply(function(){p.items=e})}})},p.cancel=function(){l.cancel()},p.close=function(){l.cancel()}}]),angular.module("triStudyNotesModule").controller("youtubePopController",["$sce","WNService","type","WordService","parentscope","$stateParams","$rootScope","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d){d.data={},d.data.lemma_search="",d.trustSrc=function(n){return e.trustAsResourceUrl(n)},d.searchYoutube=function(){var e=d.data.lemma_search,t=n.get_youtube_videow(e);t.then(function(e){d.videos=e.items})},d.searchYoutubeId=function(){var n=d.data.lemma_search;d.video_id=n;var t=e.trustAsResourceUrl("https://www.youtube.com/embed/"+n);d.youtubelink=t},d.searchYoutube(),d.userVideoLink=function(){var e=d.video_id,n=d.data.title;if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var t='<a href = "#/study-notes/youtube/'+e+' ">CLICK FOR ('+n+")</a>";s.note.content+=t}var a={};a.title=n,a.video_id=e;l.addQuizToCourse("youtube",a,s);r.cancel()},d.userVideo=function(e){var n=e.id.videoId,t=e.snippet.title;if(s.note.content||(s.note.content=""),!s.cat.get("is_course")){var a='<a href = "#/study-notes/youtube/'+n+' ">CLICK FOR ('+t+")</a>";s.note.content+=a}var o={};o.title=t,o.video_id=n;l.addQuizToCourse("youtube",o,s);r.cancel()},d.cancel=function(){r.cancel()},d.close=function(){r.cancel()}}]).controller("youtubeViewController",["$sce","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i){var r=a.id,l=e.trustAsResourceUrl("https://www.youtube.com/embed/"+r);i.link=l}]),angular.module("triStudyNotesModule").controller("StudyNotesViewPageController",["Socialshare","CourseExerciseService","$mdToast","HelperService","$location","$anchorScroll","$stateParams","$rootScope","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c){c.user=r.user;var m=(Parse.Object.extend("StudyNotes"),i.note_id);c.loader_show=!0;var p=a.getCurrentTutorial("curse100share");p.then(function(e){e&&(c.tutorial=e)});var u=d.getNoteById(m);u.then(function(e){e.get("is_course")&&r.$broadcast("hide_toturial");var n=e.get("parent_cat"),t=d.getCatById(n);t.then(function(e){e&&(c.parent_cat=e)});var a=e.get("cat_title");c.cat_title=a,c.cat=e;var s=d.getNotesByParent(m);s.then(function(n){c.loader_show=!1,c.notes=d.mergeExerciseToNotes(n,e);var t=d.getCourseRecord(e.id);t.then(function(n){var t=n.get("pass_course")?n.get("pass_course"):[],a=m,s=t.indexOf(a);c.cat.pass=s>-1?!0:!1;var o=d.checkAllPass(e.exercise_ids,n);n.all_pass=o,c.course_record=n;for(var i=n.get("pass_quiz_ids")?n.get("pass_quiz_ids"):[],r=e.exercise_ids,l=i.length-1;l>=0;l--){var s=r.indexOf(i[l]);0>s&&i.splice(l,1)}n.set("pass_quiz_ids",i),n.save();var p=i.length?i.length:0;c.progress=parseInt(p/r.length*100)})})}),c.socialShare=function(n,t){var a="https://www.wordiser.com",s="I am studying English in Wordiser, come and join!",o="Wordiser";t&&"twitter"!=t||e.share({provider:"twitter",attrs:{socialshareUrl:a,socialshareText:s,popupHeight:800,popupWidth:400,socialshareHashtags:"wordiser, study English, learn English for free, free English, free English course, free English"}}),"linkedin"==t&&e.share({provider:"linkedin",attrs:{socialshareUrl:a,socialshareText:o,socialshareDescription:s,socialshareDsource:"Wordiser",socialshareHashtags:"wordiser, study English, learn English for free, free English, free English course, free English"}}),"facebook"==t&&e.share({provider:"facebook",attrs:{socialshareUrl:a,socialshareQuote:s,socialshareHashtags:"wordiser, study English, learn English for free, free English, free English course, free English"}})},c.closeTutorial=function(){c.tutorial=!1},c.passNoExerciseCourse=function(){var e=c.course_record;e.set("all_pass",!0),d.passCourse(e,c.cat),t.show(t.simple().content("You have learn this lession, please study next lession!").position("bottom right").hideDelay(5e3))},c.passClass=function(e){var n=c.course_record;if(n){var t=n.get("pass_quiz_ids")?n.get("pass_quiz_ids"):[],a=t.indexOf(e.uni_id);if(a>-1)return"font-green"}},r.$on("porgress_test",function(e,n){var t=n.progress_point;t>0&&(c.test_quiz.progress_point=parseInt(t),c.passQuiz(c.test_quiz))}),r.$on("pass_grammar",function(){console.log(c.test_quiz),c.passQuiz(c.test_quiz)}),c.passQuiz=function(e){e.select_actions&&e.select_actions.been_test_acts&&(e.select_actions.been_test_acts=[]);var n=c.course_record,t=n.get("pass_quiz_ids")?n.get("pass_quiz_ids"):[],a=t.indexOf(e.uni_id);0>a&&(t.push(e.uni_id),n.set("pass_quiz_ids",t)),e.progress_point&&(n.set("progress_point",e.progress_point),e.progress_point=!1);var s=d.checkAllPass(c.cat.exercise_ids,n);n.all_pass=s;var o=t.length?t.length:0;c.progress=parseInt(o/c.cat.exercise_ids.length*100),s&&d.passCourse(n,c.cat)},c.testExercise=function(e){c.test_quiz=e,"youtube"==e.type||"game"==e.type||"quiz"==e.type||"gapfill"==e.type||"homework"==e.type||"correction"==e.type||"slideshow"==e.type?l.show({controller:"normalDialogController",templateUrl:"app/study-notes/Directive/normalDialog.tmpl.html",clickOutsideToClose:!0,targetEvent:c.menuClickEvent,locals:{data:e},focusOnOpen:!1}):"vocab"==e.type?c.test(e,"vocab1"):"free_practice"==e.type?c.test(e,"act13"):"grammar"==e.type?c.test(e,"act1"):"reading"==e.type?c.test(e,"act7"):"dialogue"==e.type?c.test(e,"act9"):"grammar_writing"==e.type?c.test(e,"act13"):"progress_test"==e.type?c.test(e,"progress_test"):d.openLink(e),"grammar"!=e.type&&"vocab"!=e.type&&"progress_test"!=e.type&&c.passQuiz(e)},c.test=function(e,n){e.view=n,l.show({controller:"CourseReviewController",templateUrl:"app/grammar-course/template/course-review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:c.menuClickEvent,locals:{grammar:e,getFocus:!0},focusOnOpen:!1})},c.openLink=function(e){d.openLink(e)},c.goToTop=function(){s.hash("top"),o()},c.gotoBottom=function(){s.hash("bottom"),o()}}]),angular.module("triStudyNotesModule").controller("grammarVocabCoursePopController",["WordService","WNService","CourseReviewService","parentscope","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c){c.vocas=[];{var m=Parse.Object.extend("GrammarACTData"),p=Parse.Object.extend("GrammarACTSTC");t.get_grammar_tags()}c.sentence={},c.input={},c.sentence_list=[],c.my_grammars_show=!0;var u=new Parse.Query(m);u.equalTo("user_id",l.user.id),u.notEqualTo("remove",!0),u.equalTo("teacher_grammar",!0),u.equalTo("vocab",!0),u.find({success:function(e){c.$apply(function(){c.items=e})}}),c.fixe_subquizs_order=function(e){for(var n=0;n<e.length;n++)e[n].set("the_order",n);Parse.Object.saveAll(e)},c.vocaUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},c.vocaDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},c.showCreateCourse=function(){c.edit_form=!1,c.show_system_grammar=!1,c.view_words=!1,c.vocas=!1,c.edit_form=!0,c.input={},c.grammar=!1,c.sentence_list=[]},c.createCourse=function(){if(c.grammar)c.grammar.set("name",c.input.title),c.grammar.save();else{c.sentence_list=[],c.add_grammar_show=!0;var e=new m;e.set("onload_summary",!0),e.set("onload_act_1",!0),e.set("onload_act_2",!0),e.set("onload_act_3",!0),e.set("onload_act_4",!0),e.set("onload_act_5",!0),e.set("onload_act_6",!0),e.set("onload_act_7",!0),e.set("onload_act_8",!0),e.set("onload_act_9",!0),e.set("onload_act_10",!0),e.set("onload_act_11",!0),e.set("onload_act_12",!0),e.set("onload_act_13",!0),e.set("name",c.input.title),e.set("user_id",l.user.id),e.set("teacher_grammar",!0),e.set("vocab",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){c.$apply(function(){c.items[0]||(c.items=[]),c.items.push(e),c.grammar=e})})}},c.back=function(){c.edit_form=!1,c.grammar=!1,c.show_system_grammar=!1,c.view_words=!1,c.vocas=!1,c.items=[];var e=new Parse.Query(m);e.equalTo("user_id",l.user.id),e.equalTo("vocab",!0),e.equalTo("teacher_grammar",!0),e.notEqualTo("remove",!0),e.doesNotExist("level"),e.find({success:function(e){c.$apply(function(){c.items=e})}})},c.showRemove=function(e){if(e.remove_show)e.remove_show=!1,c.tmp_grammar=!1;else{for(var n=c.items.length-1;n>=0;n--)c.items[n].remove_show=!1;e.remove_show=!0,c.tmp_grammar=e}},c.deleteGrammar=function(){var e=c.tmp_grammar,n=c.items.indexOf(e);n>-1&&c.items.splice(n,1),e.set("remove",!0),e.save(),c.tem_remove=!1,c.tmp_grammar=!1},c.removeASKHide=function(e){e.remove_show=!1,c.tmp_grammar=!1},c.showRemoveVocab=function(e){if(e.remove_show)e.remove_show=!1,c.tmp_vocab=!1;else{for(var n=c.vocas.length-1;n>=0;n--)c.vocas[n].remove_show=!1;e.remove_show=!0,c.tmp_vocab=e}},c.removeVoca=function(e){var n=c.vocas.indexOf(e);n>-1&&c.vocas.splice(n,1),e.destroy()},c.addVocabCategoryWitchSelect=function(){c.word_add_disable=!0;for(var e=[],n=c.view_words,t=[],a=n.length-1;a>=0;a--)n[a].checked&&t.push(n[a].get("name"));for(var a=n.length-1;a>=0;a--)if(t.length<4){var s=t.indexOf(n[a].get("name"));0>s&&t.push(n[a].get("name"))}for(var a=n.length-1;a>=0;a--)if(n[a].checked){for(var o=n[a],i=o.get("define_obj"),r=(o.get("word_obj"),i.get("imagesmain")),l=i.get("lemma"),d=i.get("definition"),m=i.get("sentence_main"),u=[],g=t.length-1;g>=0;g--)t[g]!=n[a].get("name")&&u.push(t[g]);var f=new p,_=new Parse.ACL(Parse.User.current());_.setPublicReadAccess(!0),f.setACL(_);{c.select_word}f.set("type","voca"),f.set("category",c.select_word),f.set("lemma",l),f.set("lemma_arr",u),f.set("image",r),f.set("definition",d),f.set("sample",m),f.set("word_id",i.id),f.set("the_define_obj",i),f.set("creat_by",Parse.User.current()),f.set("user_id",Parse.User.current().id),f.set("parent_id",c.grammar.id),e.push(f)}Parse.Object.saveAll(e).then(function(e){c.$apply(function(){c.select_word=!1,c.view_words=!1,c.search_words=!1,c.vocas[0]||(c.vocas=[]);for(var n=e.length-1;n>=0;n--)c.vocas.push(e[n]);c.search_words=!1,c.view_words=!1,c.select_word=!1,c.word_add_disable=!1}),c.fixe_subquizs_order(c.vocas)})},c.use=function(e){if(a.note.content||(a.note.content=""),!a.cat.get("is_course")){var n='<a href = "#/grammar-module/course-vocab/'+e.id+' ">CLICK FOR VOCABULARY EXERCISE</a>';a.note.content+=n}var t=d.addQuizToCourse("vocab",e,a);a.test_objs=t,i.cancel()},c.searchInputChange=function(n){var t=e.searchCatByLemma(n);t.then(function(e){c.search_words=e,c.search_lemma=n})},c.selectWord=function(e){e.disable=!0,c.select_word=e;var n=d.getCatWords(e.id);n.then(function(e){c.view_words=e})},c.editGrammar=function(e){c.add_grammar_show=!0,c.input.title=e.get("name"),c.grammar=e;var n=new Parse.Query(p);n.equalTo("parent_id",e.id),n.notEqualTo("remove",!0),n.ascending("the_order"),n.find({success:function(e){c.fixe_subquizs_order(e),c.$apply(function(){c.vocas=e})}}),c.show_create_course=!0,c.show_create_course_title=!0,c.add_grammar_show=!0},c.cancel=function(){i.cancel()},c.close=function(){i.cancel()}}]),angular.module("triStudyNotesModule").controller("StudyNotesEditController",["$anchorScroll","$location","CourseExerciseService","VoteService","HelperService","$mdToast","$cookies","EmailService","$state","AddWordService","WordService","$mdUtil","$mdSidenav","WNService","ParseService","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_,h,v,b){function y(e){var n=new Date((new Date).getTime()+3e5);b.cookies.put(e,!0,{expires:n})}var w=Parse.Object.extend("StudyNotes");b.note={},b.type={},b.cookies=i,b.define_data={},b.note_type={},b.note_type.general=!0,b.cat_type="general",b.cat_title="",b.cat=!1;var k=(h.user,_.note_id),x=v.getNoteById(k);x.then(function(e){var n=e.get("cat_title");b.cat_title=n,b.cat=e;var t=v.getNotesByParent(k);t.then(function(n){b.notes=v.mergeExerciseToNotes(n,e);for(var t=0;t<=b.notes.length-1;t++)b.notes[t].set("the_order",t+1);Parse.Object.saveAll(b.notes)})}),h.$on("update_syns",function(e,n){b.define=n}),h.$on("pron_update",function(e,n){b.spelling=n.get("spelling")}),h.$on("addWord",function(e,n){console.log(n.toJSON()),b.check_obj=v.noteChekDefine(n),b.define_data={};var t=n.get("lemma"),a=n.get("pos");b.define=n,b.hide_search_area=!0,b.define_data.lemma=t,b.define_data.pos=a,b.define_data.imagesmain=n.get("imagesmain"),b.define_data.definition=n.get("definition"),b.define_data.synsetlemma=n.get("synsetlemma"),b.define_data.label=n.get("label");var o=c.getWordByLemma(t);o.then(function(e){b.all_word_data=e,b.show_use_data=!0,b.editDataArea=!0,b.define_data.spelling=b.all_word_data.get("spelling")}),b.hide_edit_define=s.checkHideEditDefine(b.define)?!0:!1,b.define_data.sentence_list=n.get("sentence_list")?n.get("sentence_list"):new Array,b.define_data.sentence_approve_list=n.get("sentence_approve_list")?n.get("sentence_approve_list"):new Array,b.define_data.sentence_list_status=n.get("sentence_list_status")?n.get("sentence_list_status"):new Array,b.define_data.sentence_admin_list=n.get("sentence_admin_list")?n.get("sentence_admin_list"):new Array,b.define_data.synsetlemma=n.get("synsetlemma")?n.get("synsetlemma"):new Array,b.define_data.synsetlemma_status=n.get("synsetlemma_status")?n.get("synsetlemma_status"):new Array,b.hide_add_for_normal_teacher=!1;for(var i=b.define_data.sentence_admin_list.length-1;i>=0;i--)if(b.define_data.sentence_admin_list[i]){b.hide_add_for_normal_teacher=!0;break}f.cancel()}),b.popImageEdit=function(e){f.show({controller:"popImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{define:e,getFocus:!0},focusOnOpen:!1})},b.editExercise=function(e,n){f.show({controller:"popEditExerciseDialogController",templateUrl:"app/study-notes/dialogs/edit-exericse_dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{quiz:e,note:n,parent_scope:b},focusOnOpen:!1})},b.closeNeedExerciseMsg=function(){b.hide_msg=!0},b.goToAdminCourseEdit=function(){l.go("admin-panel.default.grammar-data")},b.openLink=function(e){"youtube"==e.type||"game"==e.type||"quiz"==e.type||"gapfill"==e.type||"homework"==e.type||"correction"==e.type||"slideshow"==e.type?f.show({controller:"normalDialogController",templateUrl:"app/study-notes/Directive/normalDialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{data:e},focusOnOpen:!1}):"vocab"==e.type?b.test(e,"vocab1"):"free_practice"==e.type?b.test(e,"act13"):"grammar"==e.type?b.test(e,"act1"):"reading"==e.type?b.test(e,"act7"):"dialogue"==e.type?b.test(e,"act9"):"grammar_writing"==e.type?b.test(e,"act13"):"progress_test"==e.type?b.test(e,"progress_test"):v.openLink(e)},b.test=function(e,n){e.view=n,f.show({controller:"CourseReviewController",templateUrl:"app/grammar-course/template/course-review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{grammar:e,getFocus:!0},focusOnOpen:!1})},b.removeExercise=function(e,n){var t=n.test_objs,a=t.indexOf(e);a>-1&&(t.splice(a,1),n.id&&(n.set("test_objs",t),n.save()))},b.changeDefineLabel=function(){if(b.define_data.label){var e=b.define,n=e.get("label");b.define_data.definition=b.define_data.definition.replace(n+" ",""),e.set("label",b.define_data.label)}b.define_data.definition=b.define_data.label+" "+b.define_data.definition,b.define.set("definition",b.define_data.definition),b.define.update_define_btn=!0},b.inCorrectSpelling=function(e){b.cookies.get(e+b.all_word_data.get("lemma"))?alert("You will need to wait 5 minutes!"):(r.sendSpellingnMistakeEmail(b.all_word_data.get("lemma")),o.show(o.simple().content("Data error report sent!").position("bottom right").hideDelay(5e3)),y(e+b.all_word_data.get("lemma")))},b.inCorrectPron=function(e){b.cookies.get(e+b.all_word_data.get("lemma"))?alert("You will need to wait 5 minutes!"):(r.sendPronMistakeEmail(b.all_word_data.get("lemma")),o.show(o.simple().content("Data error report sent!").position("bottom right").hideDelay(5e3)),y(e+b.all_word_data.get("lemma")))},b.inCorrectForm=function(e){b.cookies.get(e+b.all_word_data.get("lemma"))?alert("You will need to wait 5 minutes!"):(r.sendFormMistakeEmail(b.all_word_data.get("lemma")),o.show(o.simple().content("Data error report sent!").position("bottom right").hideDelay(5e3)),y(e+b.all_word_data.get("lemma")))},b.sentence_change=function(e){var n=s.replace_lemma_form_sentence(e,b.all_word_data);n.include_lemma?(b.sentence_can_add=!0,b.lemma_missing=!1):(b.lemma_missing=!0,b.sentence_can_add=!1),b.sentence_change_message=""!=e?"This will be used by students. Please check for any typos or mistakes!":!1},b.enableUpdateDefine=function(e){e.update_define_btn=!0},b.changeDefine=function(){b.define.get("definition_init")||b.define.set("definition_init",b.define.get("definition")),b.define.update_define_btn=!1,b.define.set("need_update_data",!0),b.define.set("update_user",h.user.get("username"));var e=h.user.get("admin")?h.user.get("admin"):!1;if(!e)var e=h.user.get("author")?h.user.get("author"):!1;b.define.set("admin",e),b.define.set("definition",b.define_data.definition),b.define.save().then(function(e){b.check_obj=v.noteChekDefine(e),a.createDefineVote(e),o.show(o.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))},function(e){o.show(o.simple().content(e.message).position("bottom right").hideDelay(5e3))})},b.changeSpelling=function(){b.all_word_data.set("spelling",b.spelling),b.all_word_data.save()},b.deleteST=function(e){var n=b.define,t=b.define_data.sentence_list[e];b.define_data.sentence_list.splice(e,1),b.define_data.sentence_approve_list.splice(e,1),b.define_data.sentence_list_status.splice(e,1),b.define_data.sentence_admin_list.splice(e,1),n.set("sentence_list",b.define_data.sentence_list),n.set("sentence_approve_list",b.define_data.sentence_approve_list),n.set("sentence_list_status",b.define_data.sentence_list_status),n.set("sentence_admin_list",b.define_data.sentence_admin_list);for(var a=-1,s=0;s<=b.define_data.sentence_list_status.length-1;s++)"disable"!=b.define_data.sentence_list_status[s]&&(a=s);var o=n.get("sentence_main");o==t&&(a>=0?n.set("sentence_main",b.define_data.sentence_list[a]):n.set("sentence_main","")),b.check_obj=v.noteChekDefine(n),n.save()},b.disableST=function(e){var n=b.define;b.define_data.sentence_list_status[e]="disable";for(var t=0,a=0;a<=b.define_data.sentence_list_status.length-1;a++)"disable"!=b.define_data.sentence_list_status[a]&&(t=a);var s=n.get("sentence_main");s==b.sentence_list[e]&&(t>=0?n.set("sentence_main",b.sentence_list[t]):n.set("sentence_main","")),n.set("sentence_list_status",b.define_data.sentence_list_status),n.save(),b.check_obj=v.noteChekDefine(n)},b.enableST=function(e){var n=b.define;b.define_data.sentence_list_status[e]="enable",n.set("sentence_main",b.sentence_list[e]),n.set("sentence_list_status",b.define_data.sentence_list_status),n.save()
},b.addSentence=function(e){var n=b.define,t=h.user;b.sentence_change_message=!1;var i=b.all_word_data,r=(b.all_word_data,n.get("lemma"),s.replace_lemma_form_sentence(e,i));if(r.include_lemma){e=e.trim().replace(e.substring(0,1),e.substring(0,1).toUpperCase());var l=e.trim().slice(-1);"!"!=l&&"?"!=l&&"."!=l&&(e+="."),b.add_sentence=e,b.define_data.sentence_list.unshift(e),b.define_data.sentence_list_status.unshift("enable"),b.define_data.sentence_approve_list.unshift(h.user.id),n.set("sentence_list",b.define_data.sentence_list),n.set("sentence_approve_list",b.define_data.sentence_approve_list),n.set("sentence_main",e),n.set("need_update_data",!0),n.set("update_user",h.user.get("username")),b.define_data.sentence_admin_list.unshift(t.get("admin")?!0:!1),n.set("sentence_admin_list",b.define_data.sentence_admin_list),n.set("sentence_admin_list",b.define_data.sentence_admin_list),n.save().then(function(e){b.check_obj=v.noteChekDefine(e),a.createSentenceVote(e,b.all_word_data),o.show(o.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))},function(e){o.show(o.simple().content(e.message).position("bottom right").hideDelay(5e3))})}else alert("Always include the test word/phrase in your example sentence!")},b.CancelUseData=function(){b.show_use_data=!1,b.editDataArea=!1,b.hide_search_area=!1,b.all_word_data={},b.define={},b.spelling="",b.define_data={}},b.useData=function(){b.show_use_data=!1,b.editDataArea=!1,b.hide_search_area=!1,b.cat.get("is_course")||d.addWordByDefine(b.define);var e=b.all_word_data,n=e.get("lemma");if(b.define.get("uk_pron_ext"))var t=b.define.get("us_pron_ext")?b.define.get("us_pron_ext"):"empty",a=b.define.get("us_change_pron_ext")?b.define.get("us_change_pron_ext"):"empty",s=b.define.get("uk_pron_ext")?b.define.get("uk_pron_ext"):"empty",o=b.define.get("uk_change_pron_ext")?b.define.get("uk_change_pron_ext"):"empty";else var t=e.get("us_pron")?e.get("us_pron"):"empty",a=e.get("us_change_pron")?e.get("us_change_pron"):"empty",s=e.get("uk_pron")?e.get("uk_pron"):"empty",o=e.get("uk_change_pron")?e.get("uk_change_pron"):"empty";var i=e.get("spelling")?e.get("spelling"):"empty",r=b.define.get("synsetlemma")?b.define.get("synsetlemma"):!1,l=b.define.get("definition")?b.define.get("definition"):"empty",c="";b.define.get("sentence_approve_list")&&(c="<span class='approve'>APPROVED</span>");var m=b.define.get("sentence_main")?b.define.get("sentence_main"):"empty",p='<p><strong><a href = "#/word/word-page/'+n+"/"+n+'">'+n+'</a></strong><span class = "study-note-pron">UK ['+s+"] ["+o+']</span><span class = "study-note-pron">US ['+t+"] ["+a+"]</span> "+i+"</p>";p=p+"<p><strong>(Definition) "+l+"</strong></p>",p=p+"<p><strong>"+m+"</strong>"+c+"</p>";var u=h.type;if(e.get("form_v")&&u.v){var g="Verb",f=e.get("form_v_a")?e.get("form_v_a")+", ":"",_=e.get("form_v_b")?e.get("form_v_b")+", ":"",v=e.get("form_v_c")?e.get("form_v_c")+", ":"",y=e.get("form_v_d")?e.get("form_v_d")+", ":"",w=e.get("form_v_e")?e.get("form_v_e"):"";if(p=p+"<p><i>("+g+")</i> "+f+_+v+y+w+"</p>","v"==e.get("form_ext_type")){var g="Irreg.",f=e.get("form_ext_a")?e.get("form_ext_a")+", ":"",_=e.get("form_ext_b")?e.get("form_ext_b")+", ":"",v=e.get("form_ext_c")?e.get("form_ext_c")+", ":"",y=e.get("form_ext_d")?e.get("form_ext_d")+", ":"",w=e.get("form_ext_e")?e.get("form_ext_e"):"";p=p+"<p><i>("+g+")</i> "+f+_+v+y+w+"</p>"}}if(e.get("form_n")&&u.n){var g="Noun",f=e.get("form_n_a")?e.get("form_n_a")+", ":"",_=e.get("form_n_b")?e.get("form_n_b"):"";if(p=p+"<p><i>("+g+")</i> "+f+_+"</p>","n"==e.get("form_ext_type")){var g="Irreg.",f=e.get("form_ext_a")?e.get("form_ext_a")+", ":"",_=e.get("form_ext_b")?e.get("form_ext_b"):"";p=p+"<p><i>("+g+")</i> "+f+_+"</p>"}}if(e.get("form_j")&&u.j){var g="Adj.",f=e.get("form_j_a")?e.get("form_j_a")+", ":"",_=e.get("form_j_b")?e.get("form_j_b")+", ":"",v=e.get("form_j_c")?e.get("form_j_c"):"";if(p=p+"<p><i>("+g+")</i> "+f+_+v+"</p>","j"==e.get("form_ext_type")){var g="Irreg.",f=e.get("form_ext_a")?e.get("form_ext_a")+", ":"",_=e.get("form_ext_b")?e.get("form_ext_b")+", ":"",v=e.get("form_ext_c")?e.get("form_ext_c"):"";p=p+"<p><i>("+g+")</i> "+f+_+v+"</p>"}}if(e.get("form_r")&&u.r){var g="Adv",f=e.get("form_r_a")?e.get("form_r_a"):"",k=e.get("start_str")?e.get("start_str"):"";p=p+"<p><i>("+g+")</i> "+k+f+"</p>"}if(r){p+="<p class = 'synsetlemma'>(Similar) ";for(var x=r.length-1;x>=0;x--)b.define.get("synsetlemma_status")?"disable"!=b.define.get("synsetlemma_status")[x]&&(x>0?p=p+r[x]+", ":p+=r[x]):x>0?p=p+r[x]+", ":p+=r[x];p+="</p>"}b.note.content=b.note.content?b.note.content:"",b.note.content=b.note.content+p,b.show_save_revision=!0,b.all_word_data={},b.define={},b.spelling=""},b.changeTypeSelect=function(e){b.type={},"n"==e&&(b.type.n=!0),"v"==e&&(b.type.v=!0),"j"==e&&(b.type.j=!0),"r"==e&&(b.type.r=!0),"all"==e&&(b.type.n=!0,b.type.v=!0,b.type.j=!0,b.type.r=!0,b.type.all=!0)},b.highLight=function(e){b.note.content||(b.note.content=""),b.note.content+='<h2 style="color:'+e+';">text</h2>'},b.addTitle=function(){b.note.content||(b.note.content=""),b.note.content+='<h1 style = "font-family:verdana;">text</h1>'},b.save=function(e){var n=e.pop_edit_exercise;if(e.tmp_id||(e.tmp_id=s.getUNIString()),b.notes[0]||(b.notes=[]),b.edit_note)var t=b.edit_note;else{var a=h.user.id,i=1;b.notes[0]&&(i=b.notes[b.notes.length-1].get("the_order")?b.notes[b.notes.length-1].get("the_order")+1:b.notes.length+1);var t=new w,r=new Parse.ACL(Parse.User.current());r.setPublicReadAccess(!0),t.setACL(r);var l=new Date;t.set("parent_cat",_.note_id),t.set("type","notedetail"),t.set("user",a),t.set("time",l),t.set("cat_type",b.cat_type),t.set("the_order",i),t.set("tmp_id",e.tmp_id)}t.set("content",e.content),t.set("test_objs",e.test_objs),t.save(null,{success:function(t){n?e.pop_edit_exercise=!1:(b.$apply(function(){t.test_objs=e.test_objs,b.note={},b.edit_note||b.notes.push(t),b.edit_note=!1}),h.customWords.length>0&&o.show({hideDelay:15e3,position:"top left",controller:"saveNoteToastController",templateUrl:"app/study-notes/template/save-note-toast-template.tmpl.html"}))},error:function(e,n){alert(n.message)}})},b.exerciseDown=function(e,n){var t=n.test_objs,a=t.indexOf(e);a<t.length-1&&(t.splice(a,1),t.splice(a+1,0,e),n.test_objs=t,n.set("test_objs",t),n.save())},b.exerciseUp=function(e,n){var t=n.test_objs,a=t.indexOf(e);a>0&&(t.splice(a,1),t.splice(a-1,0,e),n.test_objs=t,n.set("test_objs",t),n.save())},b.noteUp=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},b.noteDown=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},b.changeNoteTypeSelect=function(e){var e=e,n=function(){b.cat_type=e,b.note_type.vocabulary=!1,b.note_type.grammar=!1,b.note_type.writing=!1,b.note_type.reading=!1,b.note_type.speaking=!1,b.note_type.listening=!1,b.note_type.homework=!1,b.note_type.general=!1};"vocabulary"==e&&(n(),b.note_type.vocabulary=!0),"grammar"==e&&(n(),b.note_type.grammar=!0),"writing"==e&&(n(),b.note_type.writing=!0),"reading"==e&&(n(),b.note_type.reading=!0),"speaking"==e&&(n(),b.note_type.speaking=!0),"listening"==e&&(n(),b.note_type.listening=!0),"homework"==e&&(n(),b.note_type.homework=!0),"general"==e&&(n(),b.note_type.general=!0)},b.updateCatTitle=function(e){b.cat.set("cat_title",e),b.cat.save().then(function(){o.show(o.simple().content("Title saved!").position("bottom right").hideDelay(5e3))})},b.remove=function(e){var n=f.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");f.show(n).then(function(){var n=b.notes.indexOf(e);n>-1&&b.notes.splice(n,1),e.destroy()})},b.addSlideShowPop=function(){f.show({controller:"popSlideShowImage",templateUrl:"app/study-notes/dialogs/pop-slideshow-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{getFocus:!0,note:b.note,parentscope:b},focusOnOpen:!1})},b.search=function(e){h.lemma=e,h.hideposselect=!0,h.type=b.type,f.show({controller:"AddWordDialogController",templateUrl:"components/addword/add-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},b.popEdit=function(t){b.edit_note=t,b.note.content=t.get("content"),b.note.tmp_id=t.get("tmp_id"),b.note.test_objs=t.test_objs,n.hash("study-note-text-area"),e()},b.addImagesPop=function(){b.note.content||(b.note.content=""),f.show({controller:"popStudyNoteImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{getFocus:!0,note:b.note},focusOnOpen:!1})},b.goToStudyNoteHelp=function(){l.go("admin-panel.default.help-wordiser")},b.readingCoursePoP=function(e){f.show({controller:"readingCoursePopController",templateUrl:"app/study-notes/dialogs/reading-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.dialogueCoursePoP=function(){f.show({controller:"dialogueCoursePopController",templateUrl:"app/study-notes/dialogs/dialogue-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.addProgressPoP=function(e){f.show({controller:"grammarProgressPopController",templateUrl:"app/study-notes/dialogs/progress-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.addVocabPoP=function(e){f.show({controller:"grammarVocabCoursePopController",templateUrl:"app/study-notes/dialogs/vocab-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.grammarCoursePoP=function(e){f.show({controller:"grammarCoursePopController",templateUrl:"app/study-notes/dialogs/grammar-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.gapFillPoP=function(e){f.show({controller:"gapFillPopController",templateUrl:"app/study-notes/dialogs/gap-fill-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.matchGamePoP=function(e){f.show({controller:"matchGamePopController",templateUrl:"app/study-notes/dialogs/match-game-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.youtubePoP=function(e){f.show({controller:"youtubePopController",templateUrl:"app/study-notes/dialogs/youtube-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b,type:e},focusOnOpen:!1})},b.addCatLinkPoP=function(){f.show({controller:"addCatLinkPopController",templateUrl:"app/study-notes/dialogs/add-cat-link-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.addCorrectionLink=function(){f.show({controller:"addCorrectionPopController",templateUrl:"app/study-notes/dialogs/add-correction-pop-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.addHomeworkLink=function(){f.show({controller:"addHomeworkPopController",templateUrl:"app/study-notes/dialogs/add-homework-pop-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.addWritingAssignment=function(){f.show({controller:"addWritingAssignmentPopController",templateUrl:"app/study-notes/dialogs/add-writing-assignment-pop-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.addQuizPoP=function(){f.show({controller:"addQuizPopController",templateUrl:"app/study-notes/dialogs/add-quiz-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{parentscope:b},focusOnOpen:!1})},b.popVotePronEdit=function(){f.show({controller:"popVoteEditPronController",templateUrl:"app/word-module/template/vote-edit-pron-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{all_word_data:b.all_word_data,getFocus:!0},focusOnOpen:!1})},b.popVoteSentenceEdit=function(e){f.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})},b.popSynEdit=function(e){e.only_syn=!0,e.word=b.all_word_data,f.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})},b.popVoteFormEdit=function(){f.show({controller:"popVoteEditFormController",templateUrl:"app/word-module/template/vote-edit-form-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:b.menuClickEvent,locals:{all_word_data:b.all_word_data,getFocus:!0},focusOnOpen:!1})},b.openSideNav=function(e){m.debounce(function(){p(e).toggle()},300)()}}]),angular.module("triStudyNotesModule").controller("StudyNotesController",["$translate","Socialshare","HelperService","$q","$cookies","ClassService","StudyNotesService","$mdToast","$mdDialog","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p){var u=Parse.Object.extend("StudyNotes");if(m.user=c.user,c.user)var g=c.user.id;m.parent_cat=p.parent_cat,m.parent_cat_name="Class study notes"!=p.parent_cat_name?p.parent_cat_name:!1,m.myClasses=[],m.init=function(){var e=o.getBelongToClass();e.then(function(e){m.myClasses=e});var n=p.parent_cat,t=i.getStudyNoteCategory(n);t.then(function(e){var t=i.getCourseRecord(n);t.then(function(n){var n=i.clearCourseProgress(e.studyNotes,n);m.course_record=n,m.pass_course=n.get("pass_course")?n.get("pass_course"):[],m.studyNotesCat=e.studyNotesCat;var t=n.get("enable_course_id");m.studyNotes="student"==c.user.get("user_role")?i.moveProgressCourseToTop(t,e.studyNotes):e.studyNotes,m.progress=parseInt(m.pass_course.length/m.studyNotes.length*100)})});var a=i.getCatById(n);a.then(function(e){if(e){m.stcat=e;var n=c.user.get("username"),t=e.get("note_role_students")?e.get("note_role_students"):[],a=t.indexOf(n);a>-1&&(m.user_have_edit_right=!0)}})},m.init(),m.copyNotePoP=function(e){l.show({controller:"selectStudyNoteFolderDialogController",templateUrl:"app/study-notes/dialogs/select-study-note-folder-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:m.menuClickEvent,locals:{note:e,parent_scope:m},focusOnOpen:!1})},m.leaveClass=function(e){var n=l.confirm().title("Do you really want to leave this class or folder?").ok("YES, LEAVE!").cancel("No");l.show(n).then(function(){var n=m.myClasses.indexOf(e);m.myClasses.splice(n,1),o.studentLeaveCourse(e,Parse.User.current())})},m.ifPassCourse=function(e){if(m.course_record){var n=m.course_record,t=n.get("pass_course")?n.get("pass_course"):[],a=t.indexOf(e.id);return a>-1&&"student"==c.user.get("user_role")?!0:!1}},m.lockCourse=function(e){if(e.get("user")==c.user.id||"teacher"==c.user.get("user_role"))return!1;if(m.stcat&&!m.stcat.get("is_course"))return!1;if(m.course_record){var n=m.course_record,t=n.get("pass_course")?n.get("pass_course"):[],a=t.indexOf(e.id);if(a>-1)return!1;var s=n.get("enable_course_id");return s&&s==e.id?!1:!0}},m.saveItemOrder=function(e){var n=e.get("the_order"),t=e.the_order;n!=t&&(e.set("the_order",Number(e.the_order)),e.save().then(function(){r.show(r.simple().content("Update succeeded! Plese refresh!").position("bottom right").hideDelay(5e3))}))},m.fixedOrder=function(e){for(var n=0;n<e.length;n++)e[e.length-n-1].set("the_order",n+1);Parse.Object.saveAll(e).then(function(){r.show(r.simple().content("Update order succeeded!").position("bottom right").hideDelay(5e3))})},m.noteDown=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},m.noteUp=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},m.toggleStudyNoteHide=function(e){e.set("hide",!e.hide),e.save()},m.popMangeRole=function(){l.show({controller:"ManageNoteRolePoPController",templateUrl:"app/study-notes/dialogs/manage-note-role-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:m.menuClickEvent,locals:{category:m.stcat},focusOnOpen:!1})},m.openLink=function(e,n){d.go(e,n)},m.showAddCategory=function(){m.edit_cat?(m.edit_cat=!1,m.showAddCategoryForm=!1):m.showAddCategoryForm=!m.showAddCategoryForm},m.showAddCourse=function(){m.edit_course?(m.edit_course=!1,m.showAddCourseForm=!1):m.showAddCourseForm=!m.showAddCourseForm},m.showAddWord=function(){m.showAddWordForm=!m.showAddWordForm},m.closeEditCat=function(){m.edit_cat=!1},m.saveEditCat=function(e){m.edit_cat.set("name",e),m.edit_cat.save().then(function(){m.edit_cat=!1})},m.editCateogry=function(e){e.get("is_course")?(m.edit_course=e,m.course={},m.course.name=e.get("name"),m.course.live=e.get("live"),m.course.dec=e.get("dec"),m.course.payment_type=e.get("payment_type")):(m.edit_cat=e,m.addCat={},m.addCat.name=e.get("name"))},m.deleteCategory=function(n){var t=l.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));l.show(t).then(function(){var e=m.studyNotesCat.indexOf(n);e>-1&&m.studyNotesCat.splice(e,1),n.set("remove",!0),n.save()})},m.manageNote=function(e){l.show({controller:"noteManageController",templateUrl:"app/study-notes/dialogs/note-manage-pop-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:m.menuClickEvent,locals:{note:e,parentscope:m},focusOnOpen:!1})},m.deleteNote=function(n){var t=l.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));l.show(t).then(function(){var e=m.studyNotes.indexOf(n);e>-1&&m.studyNotes.splice(e,1),n.set("remove",!0),n.save()})},m.catTypeClass=function(e){return e.get("is_course")?"course-tile":void 0},m.addCourse=function(e){o.createCourse(e),r.show(r.simple().content("New course added!").position("bottom right").hideDelay(3e3)),o.setUpdateClassData();var n=o.getBelongToClass();n.then(function(e){m.myClasses=e})},m.addCategory=function(e){if(m.studyNotesCat||(m.studyNotesCat=new Array),m.edit_cat)var n=m.edit_cat;else{var t=(new Date).getTime(),a=e.name+t,s=new Date,n=new u,o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),n.setACL(o),n.set("cat_id",a),n.set("time",s),n.set("type","category"),n.set("user",c.user.id),"root"==p.parent_cat&&(p.parent_cat=g),n.set("parent_cat",p.parent_cat);var i=1;m.studyNotesCat[0]&&(i=m.studyNotesCat[0].get("the_order")?m.studyNotesCat[0].get("the_order")+1:m.studyNotesCat.length+1),n.set("the_order",i)}n.set("name",e.name),n.save(),m.edit_cat||m.studyNotesCat.unshift(n),m.showAddCategoryForm=!1,m.edit_cat=!1,e={}},m.addStudyNotes=function(){var e=Parse.Object.extend("StudyNotes"),n=new e,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t);var a=new Date,s=("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear();"root"==p.parent_cat&&(p.parent_cat=g),n.set("parent_cat",p.parent_cat),n.set("type","note"),m.stcat.get("is_course")&&(n.set("is_course",!0),n.set("course_id",p.parent_cat));var o=1;m.studyNotes[0]&&(o=m.studyNotes[0].get("the_order")?m.studyNotes[0].get("the_order")+1:m.studyNotes.length+1),n.set("the_order",o),n.set("user",g),n.set("time",a),n.set("cat_title",s);var t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.save().then(function(e){c.studyNotes||(c.studyNotes=new Array),c.studyNotes.unshift(e),d.go("admin-panel.default.study-notes-edit",{note_id:e.id})})}}]).controller("saveNoteToastController",["$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i){i.user=s.user,i.studyNoteOpenNow=function(){s.$broadcast("open_sidebar_addword"),e.hide()}}]).controller("noteManageController",["parentscope","note","$mdToast","$state","$mdDialog","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l){l.cancel=function(){s.cancel()},l.close=function(){s.cancel()}}]),angular.module("triStudyNotesModule").controller("SendToStudentsPOPController",["cat_correction","homework","$stateParams","EmailService","$mdDialog","ClassService","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r){var l=o.getBelongToClass();l.then(function(e){r.myClasses=e}),r.send=function(s){if(n){s.disable=!0;var o=t.homework_id;a.sendHomeWorkEmail(s,o),n.set("emails_send",!0),n.save()}if(e){s.disable=!0;var i=t.correction_id;a.sendCorrectionEmail(s,i),e.set("emails_send",!0),e.save()}r.send_email_message=s.get("name")+" class students have been notified!"},r.cancel=function(){s.cancel()},r.close=function(){s.cancel()},r.closeDialog=function(){s.cancel()}}]),angular.module("triStudyNotesModule").controller("selectStudyNoteFolderDialogController",["$mdToast","parent_scope","ClassService","$mdDialog","note","StudyNotesService","$scope",function(e,n,t,a,s,o,i){var r=t.getMyClasses();r.then(function(e){i.myClasses=e});var l=s;console.log(l.toJSON()),i.copyNote=function(t){t.btn_disable=!0;var a=l.clone();a.set("parent_cat",t.id),a.set("the_order",1),a.set("cat_title",l.get("cat_title")+"(copy)"),a.save().then(function(a){var s=[],i=o.getNotesByParent(l.id);i.then(function(o){for(var i=0;i<o.length;i++){var r=o[i].clone();r.set("parent_cat",a.id),s.push(r)}Parse.Object.saveAll(s).then(function(){t.btn_disable=!1,e.show(e.simple().content("Copy to "+t.get("name")+" succeeded!").position("bottom right").hideDelay(5e3)),n.init()})})})},i.cancel=function(){a.cancel()},i.close=function(){a.cancel()}}]),angular.module("triStudyNotesModule").controller("popStudyNoteImageController",["UploadService","HelperService","note","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c){c.lemma_search="",c.note=t,c.data={},c.data.image_link="",c.$watch("data.files",function(){c.upload(c.data.files)}),c.$watch("data.file",function(){null!=c.data.file&&(c.data.files=[c.data.file])}),c.upload=function(n){if(n&&n[0]){c.upload_obj={};var t=e.uploadFile("study_note","study_note",n[0]);c.uploading=!0,t.then(function(e){c.upload_obj=e;var n=e.image_link;e.succeed?(c.changeImage(n),c.uploading=!1):c.uploading=!1})}},c.searchImages=function(e){c.disable_search_lemma=e;var n=e.split(" "),t=r.getWordByLemmas(n);t.then(function(e){for(var n=[],t=0;t<e.length;t++)for(var a=e[t].get("imagesource")?e[t].get("imagesource"):[],s=0;s<a.length;s++){var o=n.indexOf(a[s]);0>o&&n.push(a[s])}c.imagesList=n});var a=i.get_google_image(e);a.then(function(e){c.google_images=e.items})},c.searchImages(c.lemma_search),c.userImage=function(){var e="<img src = '"+c.imagesmain+"' />";t.content=t.content+e,s.cancel()},c.changeImage=function(e){c.imagesmain=e;var n="<img src = '"+c.imagesmain+"' />";t.content||(t.content=""),t.content=t.content+n,s.cancel()},c.cancel=function(){s.cancel()},c.closeDialog=function(){s.cancel()}}]),angular.module("triStudyNotesModule").controller("POPEditNoteDialogController",["$mdDialog","note","StudyNotesService","$scope",function(e,n,t,a){a.note=n,a.note.content=n.get("content"),a.isChecked=!0,a.isDisabled=!1,a.highLight=function(e){a.note.content||(a.note.content=""),a.note.content+='<h2 style="color:'+e+';">text</h2>'},a.addTitle=function(){a.note.content||(a.note.content=""),a.note.content+='<h1 style = "font-family:verdana;">text</h1>'},a.changeSave=function(e){e.set("content",e.content),e.save()},a.save=function(n){n.set("content",n.content),n.save().then(function(){e.cancel()})},a.cancel=function(){e.cancel()},a.close=function(){e.cancel()}}]),angular.module("triStudyNotesModule").controller("popEditExerciseDialogController",["$mdToast","parent_scope","quiz","note","$q","WordService","HelperService","$rootScope","ClassService","$stateParams","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m,p){p.quiz=t,p.saveExerciseTitle=function(){p.btn_disable=!0,a.pop_edit_exercise=!0,n.save(a),e.show(e.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3)),c.cancel()},p.cancel=function(){c.cancel()},p.close=function(){c.cancel()},p.closeDialog=function(){c.cancel()}}]),angular.module("triStudyNotesModule").controller("myQuizController",["$mdDialog","$state","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s){var o=t.user,i=a.getUserQuizs(o.id);i.then(function(e){s.quizs=e}),s.removeASK=function(n){var t=e.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");e.show(t).then(function(){for(var e=s.quizs.length-1;e>=0;e--)s.quizs[e].id==n.id&&s.quizs.splice(e,1);n.set("remove",!0),n.save()})},s.openLink=function(e){var t=e.get("question_ids"),a=e.id;if(t){for(var s="",o=t.length-1;o>=0;o--)s+=","+t[o];n.go("admin-panel.default.study-notes-quiz",{quiz_ids:s,parent_id:a})}},s.checkAnwser=function(e,n){var t=e.get("answers"),a=e.get("select"),o=t.indexOf(n);s.anwser_message=a[o]?"You are right!":"You are wrong!"},s.toggleAnwsers=function(e){e.show_anwser=e.show_anwser?!1:!0}}]).controller("myCorrectionController",["$mdDialog","$state","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s){var o=t.user,i=a.getUserCorrections(o.id);i.then(function(e){s.corrections=e}),s.toggleAnwsers=function(e){e.show_anwsers=e.show_anwsers?!1:!0},s.removeASK=function(n){var t=e.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");e.show(t).then(function(){for(var e=s.corrections.length-1;e>=0;e--)s.corrections[e].id==n.id&&s.corrections.splice(e,1);n.set("remove",!0),n.save()})},s.openLink=function(e){n.go("admin-panel.default.study-notes-correction",{correction_id:e.get("correction_id")})}}]).controller("myWrittingController",["$mdDialog","$state","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s){var o=t.user,i=a.getStudentWrittings(o);i.then(function(e){for(var n=e.length-1;n>=0;n--){e[n]}s.writtings=e}),s.removeASK=function(n){var t=e.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");e.show(t).then(function(){for(var e=s.writtings.length-1;e>=0;e--)s.writtings[e].id==n.id&&s.writtings.splice(e,1);n.set("remove",!0),n.save()})},s.openLink=function(e){n.go("admin-panel.default.study-notes-homework",{homework_id:e.get("homework_id")})}}]).controller("myGapFillController",["$mdDialog","$state","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s){var o=t.user,i=a.getUserGapFillQuizs(o.id);i.then(function(e){s.quizs=e}),s.removeASK=function(n){var t=e.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");e.show(t).then(function(){for(var e=s.quizs.length-1;e>=0;e--)s.quizs[e].id==n.id&&s.quizs.splice(e,1);n.set("remove",!0),n.save()})},s.openLink=function(e){var t=e.get("question_ids"),a=e.id;if(t){for(var s="",o=t.length-1;o>=0;o--)s+=","+t[o];n.go("admin-panel.default.study-notes-gap-fill-quiz",{quiz_ids:s,parent_id:a})}},s.checkAnwser=function(e,n){var t=e.get("answers"),a=e.get("select"),o=t.indexOf(n);s.anwser_message=a[o]?"You are right!":"You are wrong!"},s.toggleAnwsers=function(e){e.show_anwser=e.show_anwser?!1:!0}}]),angular.module("triStudyNotesModule").controller("matchGamePopController",["WordService","ClassService","parentscope","$stateParams","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i){var r=Parse.Object.extend("StudyQuizCat");i.match_words=[],i.current_num=0,i.input={};var l=Parse.User.current(),d=n.getBelongToClass();d.then(function(e){i.myClasses=e});var c=o.getUserMatchGames(l.id);c.then(function(e){i.games=e}),i.editGame=function(e){i.edit_game=e,i.input.game_title=e.get("title"),i.create_game=!0,i.match_words=e.get("match_words")?e.get("match_words"):[]},i.removeGame=function(){for(var e=i.tem_remove_game,n=i.games.length-1;n>=0;n--)i.games[n].id==e.id&&i.games.splice(n,1);e.set("remove",!0),e.save(),i.tem_remove_game=!1},i.removeASKHide=function(e){i.tem_remove_game=!1,e.remove_show=!1},i.removeASK=function(e){if(e.remove_show)e.remove_show=!1,i.tem_remove_quiz=!1;else{for(var n=i.games.length-1;n>=0;n--)i.games[n].remove_show=!1;e.remove_show=!0,i.tem_remove_game=e}},i.saveGame=function(){if(console.log(i.edit_game),i.edit_game)var e=i.edit_game;else{var e=new r,n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),i.edit_game=e}e.set("user_id",l.id),e.set("title",i.input.game_title),e.set("type","match_game");for(var t=[],a=0;a<i.match_words.length;a++){var s={};s.lemma=i.match_words[a].lemma,t.push(s)}e.set("match_words",t),e.save()},i.removeWord=function(e){i.match_words.splice(e,1),i.saveGame()},i.back=function(){var e=o.getUserMatchGames(l.id);e.then(function(e){console.log(e),i.games=e}),i.create_game=!1},i.showCreateGame=function(){i.create_game=!0,i.match_words=[],i.edit_game=!1},i.Select=function(e){i.option_words=[],e.disable=!0;var n=o.getWordsByCatId(e.id);n.then(function(e){for(var n=e.length-1;n>=0;n--){var t=e[n].get("name"),a=i.wordInList(t),s=i.option_words.indexOf(t);!a&&0>s&&i.option_words.unshift(t)}})},i.searchInputChange=function(){if(i.option_words=!1,i.show_class_select=!1,console.log(i.input.search_word),i.input.search_word){var n=e.searchCatByString(i.input.search_word);n.then(function(e){console.log(e),i.searchWordList=e})}},i.showClassLoad=function(){i.show_class_select=!0,i.searchWordList=!1,i.option_words=!1,i.input.search_word=""},i.closeClassLoad=function(){i.show_class_select=!1,i.searchWordList=!1,i.option_words=!1,i.input.search_word=""},i.wordInList=function(e){for(var n=!1,t=0;t<i.match_words.length;t++)if(i.match_words[t].lemma==e){n=!0;break}return n},i.addNewWord=function(e){var n={};n.lemma=e,i.match_words.unshift(n),i.new_word="",i.saveGame(),i.input.new_word=""},i.selectWord=function(){i.current_num=0;for(var e=i.class_words.length-1;e>=0;e--)i.class_words[e].check&&i.current_num++},i.useGame=function(e){for(var n="",a=e.get("match_words")?e.get("match_words"):[],r=e.get("title")?e.get("title"):"MATCH GAME",l=a.length-1;l>=0;l--)n+=a[l].lemma+",";t.note.content||(t.note.content="");var d={};d.words_str=n,d.title=r,t.cat.get("is_course")||(t.note.content+='<p><a href = "#/study-notes/matchgame/'+n+'">CLICK FOR '+d.title+"</a></p>");o.addQuizToCourse("game",d,t);s.cancel(),i.input.game_title=""},i.selectClass=function(e){i.option_words=[],i.disable_load_class=!0;var t=n.getClassWordListByClassId(e.id);t.then(function(e){for(var n=e.length-1;n>=0;n--){var t=e[n].get("lemma"),a=i.wordInList(t),s=i.option_words.indexOf(t);!a&&0>s&&i.option_words.unshift(t)}i.disable_load_class=!1,i.show_class_select=!1})},i.cancel=function(){s.cancel()},i.close=function(){s.cancel()},i.closeDialog=function(){s.cancel()}}]),angular.module("triStudyNotesModule").controller("ManageNoteRolePoPController",["ClassService","$state","$mdDialog","category","$stateParams","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r){r.note_role_students=a.get("note_role_students")?a.get("note_role_students"):[];var l=e.getClassStudentsById(a.get("parent_cat"));l.then(function(e){r.class_students=e}),r.removeStudentRight=function(e){var n=r.note_role_students.indexOf(e);n>-1&&(r.note_role_students.splice(n,1),a.set("note_role_students",r.note_role_students),a.save())},r.addStudentRight=function(e){var n=e.get("name"),t=r.note_role_students.indexOf(n);0>t&&(r.note_role_students.push(n),a.set("note_role_students",r.note_role_students),a.save())},r.cancel=function(){t.cancel()},r.close=function(){t.cancel()},r.closeDialog=function(){t.cancel()}
}]),angular.module("triStudyNotesModule").controller("courseHomeController",["ParseService","ClassService","$mdDialog","$state","$rootScope","StudyNotesService","$scope",function(e,n,t,a,s,o,i){i.level="student"==s.user.get("user_role")&&s.user.get("level")?s.user.get("level"):"all",i.initUserCourse=function(){if(i.vocab_courses=n.getVocabCourse(),s.user){for(var e=Parse.User.current(),t=e.get("course_list")?e.get("course_list"):[],a=[],o=[],r=t.length-1;r>=0;r--)t[r].name?o.unshift(t[r]):a.unshift(t[r]);i.vocab_list=o,Parse.Object.fetchAll(a,{success:function(e){i.course_list=e}})}},i.initUserCourse(),i.showVocabCourse=function(e){var n=e.include_level,t=n.indexOf(i.level);return t>-1?!0:void 0};var r=n.getCourseByLevel(i.level);r.then(function(e){for(var n=e.length-1;n>=0;n--)e[n].hide=e[n].get("hide");i.courses=e}),i.adminHideCourse=function(e){e.set("hide",e.hide),e.save().then(function(){e.toJSON()})},i.showAllCourses=function(){i.level="all",i.filterCourse()},i.filterCourse=function(){var e=n.getCourseByLevel(i.level);e.then(function(e){i.courses=e})},i.goCourse=function(e){a.go("admin-panel.default.study-notes",{parent_cat_name:e.get("name"),parent_cat:e.id,page:1})},i.inCourse=function(e){for(var n=Parse.User.current(),t=n.get("course_list")?n.get("course_list"):[],a=!1,s=t.length-1;s>=0;s--)t[s].id==e.id&&(a=!0);return a?!0:void 0},i.leaveCourse=function(e){if(e.is_vocab)var a=e.name;else var a=e.get("name");var s=t.confirm().title("Do you really want to leave the course '"+a+"'?").ok("YES, LEAVE IT!").cancel("No");t.show(s).then(function(){n.studentLeaveCourse(e,Parse.User.current())})},i.viewCourse=function(e){t.show({controller:"ViewCoursePoPController",templateUrl:"app/study-notes/dialogs/view-course-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:i.menuClickEvent,locals:{course:e,parent_scope:i},focusOnOpen:!1})}}]).controller("ViewCoursePoPController",["ParseService","parent_scope","CourseReviewService","$mdToast","course","ClassService","$state","$mdDialog","$stateParams","$rootScope","$scope",function(e,n,t,a,s,o,i,r,l,d,c){c.course=t.setAccessCodeObj(s),c.user=d.user,c.accessCodeClass=function(e){return e.click?"grey_bg":void 0},c.addAccessCode=function(e){var n=c.course;if(n.click_access_code="",e.click=!e.click,e.click)n.access_code_click_objs.push(e);else{var t=n.access_code_click_objs.indexOf(e);n.access_code_click_objs.splice(t,1)}for(var a=0;a<=n.access_code_click_objs.length-1;a++)n.click_access_code=n.click_access_code+n.access_code_click_objs[a].lemma},c.getVocabCourseName=function(){for(var e=d.user.get("course"),n=!1,t=o.getVocabCourse(),a=t.length-1;a>=0;a--)t[a].id==e&&(n=t[a]);return n},c.inCourse=function(){for(var e=Parse.User.current(),n=e.get("course_list")?e.get("course_list"):[],t=!1,a=n.length-1;a>=0;a--)n[a].id==c.course.id&&(t=!0);return t?!0:void 0},c.Join=function(){if(s.is_vocab){var t=o.studentJoinVocabCourse(s);t.then(function(){var n=!0;e.getOneCourseData(n).then(function(e){console.log(e),a.show(a.simple().content("One review added to your list!").position("bottom right").hideDelay(3e3))}),a.show(a.simple().content("You have just joined the course!").position("bottom right").hideDelay(3e3))})}else o.studentJoinCourse(Parse.User.current(),s),a.show(a.simple().content("You have just joined the course!").position("bottom right").hideDelay(3e3));n.initUserCourse(),r.cancel()},c.cancel=function(){r.cancel()},c.close=function(){r.cancel()},c.closeDialog=function(){r.cancel()}}]),angular.module("triStudyNotesModule").controller("addCatLinkPopController",["WordService","parentscope","$stateParams","$rootScope","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i){n.note.content||(n.note.content=""),i.searchInputChange=function(){i.select_words=!1;var n=e.searchCatByString(i.search_word);n.then(function(e){i.searchWordList=e}),i.add_search_word=""},i.search_word="",i.searchInputChange(i.search_word),i.searchChange=function(e){"word"==e?(i.words_check=!0,i.cat_check=!1):(i.cat_check=!0,i.words_check=!1),i.searchWordList=!1,i.search_word=""},i.useLink=function(e){e.disable=!0;var t='<a href = "#/notice/notice-category/'+e.id+'/1">CLICK FOR CATEGORY: '+e.get("name")+"</a>";n.note.content+=t,s.cancel()},i.cancel=function(){s.cancel()},i.close=function(){s.cancel()}}]),angular.module("triAngularAuthentication",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/authentication"),n.state("authentication",{"abstract":!0,templateUrl:"app/authentication/layouts/authentication.tmpl.html"}).state("authentication.login",{url:"/login",templateUrl:"app/authentication/login/login.tmpl.html",controller:"LoginController"}).state("authentication.loginlanguage",{url:"/loginlanguage",templateUrl:"app/authentication/login/login.tmpl.html",controller:"LoginController"}).state("authentication.loginstudent",{url:"/login-stu",templateUrl:"app/authentication/login/login.tmpl.html",controller:"LoginStudentController"}).state("authentication.loginteacher",{url:"/login-teacher",templateUrl:"app/authentication/login/login.tmpl.html",controller:"LoginTeacherController"}).state("authentication.signup",{url:"/signup",templateUrl:"app/authentication/signup/signup.tmpl.html",controller:"SignupController"}).state("authentication.lock",{url:"/lock",templateUrl:"app/authentication/lock/lock.tmpl.html",controller:"LockController"}).state("authentication.forgot",{url:"/forgot",templateUrl:"app/authentication/forgot/forgot.tmpl.html",controller:"ForgotController"}).state("admin-panel.default.profile",{url:"/profile",templateUrl:"app/authentication/profile/profile.tmpl.html",controller:"ProfileController"}).state("admin-panel.default.contactemails",{url:"/contactemails",templateUrl:"app/authentication/admin/template/contactemails.tmpl.html",controller:"ContactemailsController"}).state("admin-panel.default.updatedefine",{url:"/updatedefine",templateUrl:"app/authentication/admin/template/updatedefine.tmpl.html",controller:"UpdatedefineController"}).state("admin-panel.default.irregular",{url:"/irregular",templateUrl:"app/authentication/admin/template/irregular.tmpl.html",controller:"IrregularController"}).state("admin-panel.default.members",{url:"/members/:page",templateUrl:"app/authentication/admin/template/members.tmpl.html",controller:"MembersController"}).state("admin-panel.default.course-manage",{url:"/course-manage",templateUrl:"app/authentication/admin/template/course-manage.tmpl.html",controller:"CourseMangeController"}).state("admin-panel.default.category-data",{url:"/category-data",templateUrl:"app/authentication/admin/template/category-data.tmpl.html",controller:"AdminCategoryDataController"}).state("admin-panel.default.tutorial",{url:"/tutorial",templateUrl:"app/authentication/admin/template/tutorial.tmpl.html",controller:"TutorialController"})}]).run(["ReviewService","EmailService","SideMenu","HelperService","InitService","$rootScope","$location","$cookieStore","$state",function(e,n,t,a,s,o,i,r,l){if("dev.wordiser.com"==location.hostname||"app.wordiser.com"==location.hostname||"www.wordiser.com"==location.hostname||"michaeljohndok.github.io"==location.hostname){var d=["PcOHwqXCjcKOw4hnwrY/ZMOuYxRPccKGXsKOYsKafsOKRFbDi8OmwqBjbQBDwqzCrsK3wobCo8OhwqLDhBo=","w6PDpcKC","wr7ClkMs","w6fCusK5w4rCvcKfNgk=","ejTDmjDCthRCaA==","woZXw6zCj8OZwo5dH8Oyw4sfwpN2WQ/CoD7DtQ==","OxrDmj7DlQFGwqfDsARKEcOrwqFaA8KRw4DClsOkwpPCnA=="];!function(e,n){var t=function(n){for(;--n;)e.push(e.shift())};t(++n)}(d,166);var c=function(e,n){e-=0;var t=d[e];if(void 0===c.initialized){!function(){var e="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob||(e.atob=function(e){for(var t,a,s=String(e).replace(/=+$/,""),o=0,i=0,r="";a=s.charAt(i++);~a&&(t=o%4?64*t+a:a,o++%4)?r+=String.fromCharCode(255&t>>(-2*o&6)):0)a=n.indexOf(a);return r})}();var a=function(e,n){var t,a=[],s=0,o="",i="";e=atob(e);for(var r=0,l=e.length;l>r;r++)i+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);e=decodeURIComponent(i);for(var d=0;256>d;d++)a[d]=d;for(d=0;256>d;d++)s=(s+a[d]+n.charCodeAt(d%n.length))%256,t=a[d],a[d]=a[s],a[s]=t;d=0,s=0;for(var c=0;c<e.length;c++)d=(d+1)%256,s=(s+a[d])%256,t=a[d],a[d]=a[s],a[s]=t,o+=String.fromCharCode(e.charCodeAt(c)^a[(a[d]+a[s])%256]);return o};c.rc4=a,c.data={},c.initialized=!0}var s=c.data[e];return void 0===s?(void 0===c.once&&(c.once=!0),t=c.rc4(t,n),c.data[e]=t):t=s,t},m=c("0x0","C3#*"),p=m+c("0x1","1qR^"),u=c("0x2","vbi7"),g=c("0x3","FXfc"),f=c("0x4","m2XZ");Parse.initialize(p,u),Parse.serverURL=c("0x5","5IKs")+g+"seapi."+f+c("0x6","Ag][")}else{var _=["fsObDcKlGkALDEs=","FsOSXsKew6HDhMK7R8ONMMOMHHjCjcKHw41bJW7Ci0BQNcKDwpd1H8OIEA==","MUTCq8O7w4oIw7dUB8OaHMK4AMOGwoXCosOKFj3DqsKvLcKKw47CmcKNwqHDmylFw7rCiMOIMcOIwpbCmW7CpHs=","G8OHFsKrw4/CksKzMCZQfi8VSsKsd8O5BnfDlQrDgThQB2PDpD/CucO5NcKRWcKLLsOmd8OvIS0=","w6HDlMKIw4rDq8KHwrI9F3k="];!function(e,n){var t=function(n){for(;--n;)e.push(e.shift())};t(++n)}(_,347);var h=function(e,n){e-=0;var t=_[e];if(void 0===h.initialized){!function(){var e="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob||(e.atob=function(e){for(var t,a,s=String(e).replace(/=+$/,""),o=0,i=0,r="";a=s.charAt(i++);~a&&(t=o%4?64*t+a:a,o++%4)?r+=String.fromCharCode(255&t>>(-2*o&6)):0)a=n.indexOf(a);return r})}();var a=function(e,n){var t,a=[],s=0,o="",i="";e=atob(e);for(var r=0,l=e.length;l>r;r++)i+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);e=decodeURIComponent(i);for(var d=0;256>d;d++)a[d]=d;for(d=0;256>d;d++)s=(s+a[d]+n.charCodeAt(d%n.length))%256,t=a[d],a[d]=a[s],a[s]=t;d=0,s=0;for(var c=0;c<e.length;c++)d=(d+1)%256,s=(s+a[d])%256,t=a[d],a[d]=a[s],a[s]=t,o+=String.fromCharCode(e.charCodeAt(c)^a[(a[d]+a[s])%256]);return o};h.rc4=a,h.data={},h.initialized=!0}var s=h.data[e];return void 0===s?(void 0===h.once&&(h.once=!0),t=h.rc4(t,n),h.data[e]=t):t=s,t},v=h("0x0","7n9W"),b=h("0x1","8UGY");Parse[h("0x2","]aYd")](v,b),Parse[h("0x3","RqGR")]=h("0x4","ePdE")}var d=["PcOHwqXCjcKOw4hnwrY/ZMOuYxRPccKGXsKOYsKafsOKRFbDi8OmwqBjbQBDwqzCrsK3wobCo8OhwqLDhBo=","w6PDpcKC","wr7ClkMs","w6fCusK5w4rCvcKfNgk=","ejTDmjDCthRCaA==","woZXw6zCj8OZwo5dH8Oyw4sfwpN2WQ/CoD7DtQ==","OxrDmj7DlQFGwqfDsARKEcOrwqFaA8KRw4DClsOkwpPCnA=="];!function(e,n){var t=function(n){for(;--n;)e.push(e.shift())};t(++n)}(d,166);var c=function(e,n){e-=0;var t=d[e];if(void 0===c.initialized){!function(){var e="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob||(e.atob=function(e){for(var t,a,s=String(e).replace(/=+$/,""),o=0,i=0,r="";a=s.charAt(i++);~a&&(t=o%4?64*t+a:a,o++%4)?r+=String.fromCharCode(255&t>>(-2*o&6)):0)a=n.indexOf(a);return r})}();var a=function(e,n){var t,a=[],s=0,o="",i="";e=atob(e);for(var r=0,l=e.length;l>r;r++)i+="%"+("00"+e.charCodeAt(r).toString(16)).slice(-2);e=decodeURIComponent(i);for(var d=0;256>d;d++)a[d]=d;for(d=0;256>d;d++)s=(s+a[d]+n.charCodeAt(d%n.length))%256,t=a[d],a[d]=a[s],a[s]=t;d=0,s=0;for(var c=0;c<e.length;c++)d=(d+1)%256,s=(s+a[d])%256,t=a[d],a[d]=a[s],a[s]=t,o+=String.fromCharCode(e.charCodeAt(c)^a[(a[d]+a[s])%256]);return o};c.rc4=a,c.data={},c.initialized=!0}var s=c.data[e];return void 0===s?(void 0===c.once&&(c.once=!0),t=c.rc4(t,n),c.data[e]=t):t=s,t},m=c("0x0","C3#*"),p=m+c("0x1","1qR^"),u=c("0x2","vbi7"),g=c("0x3","FXfc"),f=c("0x4","m2XZ");Parse.initialize(p,u),Parse.serverURL=c("0x5","5IKs")+g+"seapi."+f+c("0x6","Ag]["),a.checkParseOnline(),o.user=Parse.User.current();var y=-1===$.inArray(i.path(),["/loginlanguage","/login","/login-stu","/login-teacher","/signup","/forgot"]),w=o.user;y&&!w&&l.go("authentication.login"),o.user&&s.init(o.user),o.$on("saveWordToList",function(){var n=o.user;e.init_review(n)}),o.$on("$locationChangeStart",function(){var e=-1===$.inArray(i.path(),["/loginlanguage","/login","/login-stu","/login-teacher","/signup","/forgot"]),n=o.user;e&&!n&&l.go("authentication.login")}),o.$on("reademail",function(e,t){var a=t.email;n.setUpdateEmail(),a.set("readed",!0),a.save().then(function(){var e=n.getUnreadEmailsCount();e.then(function(){})})}),o.$on("askFor",function(e,t,a,s,o){n.askForEmail(t,a,s,o)}),o.$on("userRegister",function(e,t,a,s){"student"==t&&n.sendStudentRegisterEmail(a,s),"teacher"==t&&n.sendTeacherRegisterEmail(a,s)}),t.addMenu({name:"MENU.Home",state:"admin-panel.default.home",type:"link",icon:"fa fa-home",priority:2.1}),t.addMenu({name:"MENU.REFERENCE",state:"admin-panel.default.notice-category",params:{parent_cat:"General English",page:1},type:"link",icon:"fa fa-sitemap",priority:4.1}),t.addMenu({name:"MENU.COURSES",state:"admin-panel.default.course-home",type:"link",icon:"fa fa-institution",priority:5.1}),t.addMenu({name:"MENU.HELP",icon:"fa fa-info-circle",state:"admin-panel.default.help-wordiser",type:"link",priority:3.1}),t.addMenu({name:"MENU.NOTICES",icon:"fa fa-envelope",state:"admin-panel-no-scroll.email.inbox",type:"link",priority:6.1}),t.addMenu({type:"divider",priority:2.3}),t.addMenu({type:"divider",priority:5.3}),t.addMenu({type:"divider",priority:8.3})}]),angular.module("triAngularAuthentication").directive("youtube",["$sce","HelperService","$q","WNService","EmailService","$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/youtube.tmpl.html",link:function(n){var t=n.data.video_id,a=e.trustAsResourceUrl("https://www.youtube.com/embed/"+t);n.link=a}}}]),angular.module("triAngularAuthentication").directive("writing",["HelperService","$q","WNService","EmailService","$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e,n,t,a,s,o,i,r){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/writing.tmpl.html",link:function(n){n.user=o.user,n.input_data={},n.types={},n.objs=[];Parse.Object.extend("Grammar");if(s.homework_id)var l=s.homework_id;else var l=n.data.id;var d=function(){if("student"==o.user.get("user_role")){n.feedback_sentences=[];var a=r.getHomeWorkForStudent(l,o.user);a.then(function(a){n.types=e.get_grammar_types(a),n.studentHW=a,n.input_data.homework_student=a.get("homework_student")?a.get("homework_student"):"",n.input_data.homework_title_student=a.get("homework_title_student")?a.get("homework_title_student"):"";var s=n.input_data.homework_student;if(n.input_data.homework_student){var i=t.get_grammar_for_str(s,n.studentHW.id,o.user.id);i.then(function(t){var t=e.calcuate_percent(t);n.feedback_sentences=t.sentences,n.grammars=t.in_db_grammars,n.grammar_obj=t})}})}if("teacher"==o.user.get("user_role")){var s=r.getStudentHomeWorks(l);s.then(function(e){n.studentHWs=e})}var i=r.getHomeWorkById(l);i.then(function(e){n.input_data.instructions=e.get("instructions"),n.homework=e})};d(),o.$on("update_grammar_percent",function(){var t=e.calcuate_percent(n.grammar_obj);n.feedback_sentences=t.sentences,n.grammars=t.in_db_grammars,n.grammar_obj=t}),n.closeShowSentence=function(){n.show_sentence_grammar=!1,n.grammar={}},n.show_grammar_check=function(e){n.show_sentence_grammar=!0,n.user=o.user;for(var t=n.grammars[0],a=n.grammars.length-1;a>=0;a--)if(e==n.grammars[a].get("sentence")){t=n.grammars[a];break}n.grammar=t,n.grammar.teacher_correction=t.get(t.get("teacher_correction")?"teacher_correction":"sentence"),n.grammar.feedback_grammar=[],n.grammar.note=t.get("note"),n.grammar.error_grammar_percent=t.get("error_grammar_percent");for(var a=n.grammar.get("feedback_grammar").length-1;a>=0;a--)n.grammar.feedback_grammar.unshift(n.grammar.get("feedback_grammar")[a])},n.refresh=function(){d()},n.copyWriting=function(e){n.input_data.teacher_feedback=n.input_data.teacher_feedback+e.get("homework_student")},n.sendToTeacher=function(){var e=s.homework_id;a.sendHomeWorkToTeacherEmail(n.homework.get("user"),e),n.send_email_message="Your teacher has been notified!",n.studentHW.set("emails_send",!0),n.studentHW.save()},n.sendToStudent=function(){var e=s.homework_id;a.sendHomeWorkToStudentEmail(n.studentHomework.get("student_id"),e),n.send_email_message="Student has been notified!",n.studentHomework.set("emails_send",!0),n.studentHomework.save()},n.sendToStudentsPOP=function(){i.show({controller:"SendToStudentsPOPController",templateUrl:"app/study-notes/dialogs/send-to-students-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:n.menuClickEvent,locals:{homework:n.homework,cat_correction:!1},focusOnOpen:!1})},n.saveFeedBack=function(){n.studentHomework.set("teacher_feedback",n.input_data.teacher_feedback),n.studentHomework.set("emails_send",!1),n.studentHomework.save()},n.selectHomeWork=function(a){if(n.send_email_message=!1,n.studentHomework=a,n.input_data.homework_student=a.get("homework_student"),n.types=e.get_grammar_types(a),n.input_data.homework_student){n.feedback_sentences=[];var s=t.get_grammar_for_str(n.input_data.homework_student,a.id,a.get("student_id"));s.then(function(t){var t=e.calcuate_percent(t);n.feedback_sentences=t.sentences,n.grammars=t.in_db_grammars,n.grammar_obj=t})}},n.saveTypes=function(){n.studentHomework=e.set_grammar_types(n.studentHomework,n.types),n.studentHomework.save()},n.stuWritingChangestuWritingChange=function(){var a=n.input_data.homework_student;if(n.input_data.homework_student){n.send_email_message="Loading...";var s=t.get_grammar_for_str(a,n.studentHW.id,o.user.id);s.then(function(t){var t=e.calcuate_percent(t);n.feedback_sentences=t.sentences,n.grammars=t.in_db_grammars,n.grammar_obj=t,n.send_email_message=!1,n.studentHW.set("homework_student",n.input_data.homework_student),n.studentHW.set("homework_title_student",n.input_data.homework_title_student),n.studentHW.save()})}},n.saveInstructions=function(){n.homework.set("instructions",n.input_data.instructions),n.homework.set("emails_send",!1),n.homework.save()},n.changePercent=function(){n.grammar.set("error_grammar_percent",n.grammar.error_grammar_percent),n.grammar.save(),o.$broadcast("update_grammar_percent")},n.saveTeacherNote=function(){n.grammar.set("note",n.grammar.note),n.grammar.save()},n.saveTeacherSuggestion=function(){n.grammar.set("feedback_grammar",n.grammar.feedback_grammar),n.grammar.save()},n.saveTeacherCorrection=function(){n.grammar.set("teacher_correction",n.grammar.teacher_correction),n.grammar.save()}}}}]),angular.module("triAngularAuthentication").directive("slideshow",["$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/slideshow.tmpl.html",link:function(n){var t=Parse.Object.extend("SlideShow");if(e.id)var a=e.id;else var a=n.data.id;var s=new Parse.Query(t);s.equalTo("type","item"),s.equalTo("parent_cat",a),s.notEqualTo("remove",!0),s.ascending("the_order"),s.find({success:function(e){n.$apply(function(){n.slideshows=e,n.slideshow=e[0],n.page=0})}}),n.speak=function(e,n){responsiveVoice.speak(e,n)},n.changePage=function(e){e>n.slideshows.length-1&&(e=0),0>e&&(e=n.slideshows.length-1),n.slideshow=n.slideshows[e],n.page=e}}}}]),angular.module("triAngularAuthentication").directive("quiz",["$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e,n){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/quiz.tmpl.html",link:function(t){function a(e){for(var n,t,a=e.length;a;n=parseInt(Math.random()*a),t=e[--a],e[a]=e[n],e[n]=t);return e}t.user=n.user,t.title="Quiz";var s=Parse.Object.extend("StudyQuizCat"),o=Parse.Object.extend("StudyQuiz");if(e.parent_id)var i=e.parent_id,r=e.quiz_ids,l=r.split(",");else var i=t.data.id,l=t.data.question_ids;var d=new Parse.Query(s);d.equalTo("objectId",i),d.first({success:function(e){e&&(t.quizCat=e,t.quiz_cat_title=e.get("quiz_title"))}}),t.show_index=0;var d=new Parse.Query(s);d.equalTo("objectId",i),d.first({success:function(e){e&&(t.quizCat=e,t.quiz_cat_title=e.get("quiz_title"))}});var d=new Parse.Query(o);d.containedIn("objectId",l),d.ascending("the_order"),d.find({success:function(e){var n=[];n.push(0),n.push(1),n.push(2),n.push(3);for(var s=e.length-1;s>=0;s--){a(n),e[s].answers_bak=e[s].get("answers"),e[s].select_bak=e[s].get("select"),e[s].answers=[],e[s].select=[];for(var o=[],i=[],r=n.length-1;r>=0;r--)o.push(e[s].answers_bak[n[r]]),i.push(e[s].select_bak[n[r]]);e[s].set("answers",o),e[s].set("select",i)}t.$apply(function(){t.quizs=e})}}),t.editQuiz=function(){t.edit_quiz=!0;var e=t.quizs[t.show_index];t.question={},t.question.question=e.get("question"),t.question.answers=e.get("answers"),t.question.select=e.get("select")},t.changeSelect=function(e){t.question.select[0]=!1,t.question.select[1]=!1,t.question.select[2]=!1,t.question.select[3]=!1,t.question.select[e]=!0},t.nextQuestion=function(){t.show_index++,t.anwser_message=!1},t.preQuestion=function(){t.show_index--,t.anwser_message=!1},t.anwserClass=function(e,n,t){return n==t.click_index&&"You are right!"==e?"green_bg font-white":void 0},t.checkAnwser=function(e,n,a){e.click_index=a;var s=e.get("answers"),o=e.get("select"),a=s.indexOf(n);t.anwser_message=o[a]?"You are right!":"You are wrong!"}}}}]),angular.module("triStudyNotesModule").controller("normalDialogController",["data","$q","WordService","HelperService","$rootScope","ClassService","$stateParams","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s,o,i,r,l,d){d.data=e,d.cancel=function(){r.cancel()},d.close=function(){r.cancel()},d.closeDialog=function(){r.cancel()}}]),angular.module("triAngularAuthentication").directive("gapfill",["HelperService","$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e,n,t){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/gapfill.tmpl.html",link:function(a){var s=Parse.Object.extend("StudyQuizCat"),o=Parse.Object.extend("StudyQuiz");if(n.parent_id)var i=n.parent_id,r=n.quiz_ids,l=r.split(",");else var i=a.data.id,l=a.data.question_ids;var d=new Parse.Query(s);d.equalTo("objectId",i),d.first({success:function(e){e&&(a.quizCat=e,a.quiz_cat_title=e.get("quiz_title"))}});var d=new Parse.Query(o);d.containedIn("objectId",l),d.ascending("the_order"),d.find({success:function(n){for(var t=n.length-1;t>=0;t--){var s=n[t];s.words=[],s.input_count_index=1;var o=s.get("show_first_letter")?!0:!1;s.show_first_letter=o,s.sentence="";for(var i=[],r=[],l=s.get("lemma_arr"),d=s.get("lemma_bak_arr"),c=e.getSymbols(),m=l.length-1;m>=0;m--){var p=l[m].indexOf("______");if(p>-1){var u={};u.check=!1,u.lemma=d[m],u.first_letter=s.show_first_letter?d[m].charAt(0):"",u.add_index=m;var g=d[m].charAt(d[m].length-1);u.last_word=g;var p=c.indexOf(g);s.show_first_letter?p>-1?(l[m]=d[m].charAt(0)+"______"+g,u.symbol=!0):l[m]=d[m].charAt(0)+"______":l[m]="______",u.index=m,i.unshift(u),r.unshift(m)}}for(var m=0;m<=d.length-1;m++){s.sentence+=d[m]+" ";var l=s.get("lemma_arr"),d=s.get("lemma_bak_arr"),f={},p=l[m].indexOf("______");f.check=p>-1?!1:!0,f.lemma=l[m],f.bak_lemma=d[m],s.words.push(f)}s.sentence=s.sentence.trim(),s.options=i,s.lemma_arr=l,s.lemma_bak_arr=d,s.option_index=r}a.$apply(function(){a.quizs=n})}}),a.optionIndex=function(e,n){for(var t=n.get("lemma_bak_arr"),a=n.options,s=t[e],o=-1,i=0;i<a.length;i++)a[i].lemma==s&&(o=i);return o>-1?o+1:void 0},a.speak=function(e){console.log(e.toJSON());var n="";"form"==e.get("gapfilltype")&&(n=",");for(var a=e.get("lemma_bak_arr"),s="",o=0;o<a.length;o++)s+=a[o]+" "+n;var i="uk"==t.user.get("spelling")?"UK English Male":"US English Female";responsiveVoice.speak(s,i)},a.close=function(e){e.show_edit=!1},a.updateSentence=function(e){e.words=[];var n=[];n=e.sentence.split(" ");for(var t=n.length-1;t>=0;t--){var a={};a.check=!0,a.lemma=n[t],a.bak_lemma=n[t],e.words.unshift(a)}},a.save=function(e){e.count=0;for(var n=e.words.length-1;n>=0;n--)e.words[n].check||e.count++;if(e.count<1)e.error_message="At less select one word!";else{e.error_message=!1;for(var t=[],a=[],s=[],o=[],n=e.words.length-1;n>=0;n--)t.unshift(e.words[n].lemma),a.unshift(e.words[n].bak_lemma);for(var n=t.length-1;n>=0;n--){var i=t[n].indexOf("______");if(i>-1){var r={};r.check=!1,r.lemma=a[n],r.first_letter=a[n].charAt(0),r.add_index=n,t[n]=a[n].charAt(0)+"______",r.index=n,o.unshift(r),s.unshift(n)}}e.lemma_arr=t,e.lemma_bak_arr=a,e.option_index=s,e.options=o,e.set("lemma_arr",t),e.set("lemma_bak_arr",a),e.save(),e.show_edit=!1}},a.changeOption=function(e,n){e.words;n.check?(n.check=!0,n.lemma=n.bak_lemma):(n.lemma=n.bak_lemma.charAt(0)+"______",n.check=!1)},a.inputFocus=function(e){var n=e.lemma.charAt(0)+"______";e.first_letter==n&&(e.first_letter=e.lemma.charAt(0))},a.optionClass=function(e,n){for(var t=e.option_index,a="",s=t.length-1;s>=0;s--)t[s]==n&&(a=e.lemma_bak_arr[n]==e.lemma_arr[n]?"font-green":"font-red");return a},a.focusInput=function(e,n){for(var t=a.quizs.length-1;t>=0;t--)a.quizs[t].focus_index=!1;n.focus_index=e},a.optionChange=function(e,n){e.correct=!0,e.lemma_arr[n.add_index]=n.symbol?n.first_letter+n.last_word:n.first_letter;for(var t=e.lemma_arr.length-1;t>=0;t--)e.lemma_arr[t]!=e.lemma_bak_arr[t]&&(e.correct=!1)},a.addOption=function(e,n){if(e.correct=!0,n.add_index)e.lemma_arr[n.add_index]="______",n.add_index=!1;else for(var t=0;t<=e.lemma_arr.length-1;t++)if("______"==e.lemma_arr[t]){e.lemma_arr[t]=n.first_letter,n.add_index=t;break}for(var t=e.lemma_arr.length-1;t>=0;t--)e.lemma_arr[t]!=e.lemma_bak_arr[t]&&(e.correct=!1)}}}}]).directive("focusOnCondition",["$timeout",function(e){var n=function(e){if(!e.focusOnCondition&&""!=e.focusOnCondition)throw"FocusOnCondition missing attribute to evaluate"};return{restrict:"A",link:function(t,a,s){n(s),t.$watch(s.focusOnCondition,function(n){1==n&&e(function(){a.focus()})})}}}]),angular.module("triAngularAuthentication").directive("game",["ReviewService","HelperService","GameService","$stateParams","$rootScope","$mdDialog","StudyNotesService",function(e,n,t,a,s){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/game.tmpl.html",link:function(o){if(a.page,t.setNormalGame(),o.gameData=t.getGameData(),o.data)var i=o.data.words_str;else if(a.words)var i=a.words;else var i=!1;if(i){for(var r=i.split(","),l=[],d=r.length-1;d>=0;d--)r[d]&&""!=r[d]&&l.push(r[d]);l=n.shuffle(l);var c=t.setWordList(l);o.wordList=c}else{var m=e.get_review_lemmas(s.user.id,15);m.then(function(e){var n=t.setWordList(e);o.wordList=n})}o.tips=function(){o.showanwsers=!o.showanwsers},o.startGame=function(){if(o.gameData.showStartButton=!1,a.words){for(var i=a.words,r=i.split(","),l=[],d=r.length-1;d>=0;d--)r[d]&&""!=r[d]&&l.push(r[d]);l=n.shuffle(l);var c=t.setWordList(l);o.wordList=c}else{var m=e.get_review_lemmas(s.user.id,15);m.then(function(e){var n=t.setWordList(e);o.wordList=n})}},o.returnClass=function(e){var n="";return e.computer&&(n+="computer "),e.person&&(n+="person "),e.select&&(n+="select "),n},o.personOneStep=function(e){t.personOneStep(e)}}}}]),angular.module("triAngularAuthentication").directive("correction",["$stateParams","$mdToast","WNService","EmailService","$mdDialog","$rootScope","StudyNotesService","$filter",function(e,n,t,a,s,o,i,r){return{$scope:{data:"="},restrict:"AE",replace:"true",templateUrl:"app/study-notes/Directive/correction.tmpl.html",link:function(l){l.input_data={},l.message={},l.corrections=[],l.user=o.user;o.user;if(e.correction_id)var d=e.correction_id;else var d=l.data.id;var c=i.getCorrectionById(d);c.then(function(e){l.cat_correction=e,l.instructions=e.get("instructions")});var m=function(){var e=i.getUserCorrectionById(d);e.then(function(e){l.hide_add_sentence=!1;for(var n=e.length-1;n>=0;n--)e[n].mistake_st=e[n].get("mistake_st"),e[n].right_st=e[n].get("right_st"),e[n].correction_st=e[n].get("mistake_st");l.corrections=e})};m(),l.refresh=function(){m()},l.showAnwserClass=function(e){return e.show_class?"":"hide_anwser"},l.showAnwser=function(e){e.show_class="show_anwser",setTimeout(function(){l.$apply(function(){e.show_class=!1})},5e3)},l.pastWords=function(e){e.right_st=e.get("mistake_st")},l.copyCorrection=function(e){e.correction_st=e.get("mistake_st")},l.stuPastWords=function(e){e.correction_st=e.get("mistake_st")},l.sendToTeacher=function(t){var s=e.correction_id;a.sendCorrectionWorkToTeacherEmail(l.cat_correction.get("user"),s),t.set("emails_send",!0),t.save(),n.show(n.simple().content("Your teacher has been notified!").position("bottom right").hideDelay(5e3))},l.sendToStudentsPOP=function(){s.show({controller:"SendToStudentsPOPController",templateUrl:"app/study-notes/dialogs/send-to-students-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:l.menuClickEvent,locals:{homework:!1,cat_correction:c},focusOnOpen:!1})},l.saveInstructions=function(e){l.cat_correction.set("instructions",e),l.cat_correction.set("emails_send",!1),l.cat_correction.save()},l.deleteCorrection=function(e){var n=s.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");s.show(n).then(function(){var n=l.corrections.indexOf(e);n>-1&&(l.corrections.splice(n,1),e.destroy())})},l.showEditCorrection=function(e){e.editing=!e.editing},l.setRightSentence=function(){var e=l.input_data,n=e.mistake_st,a=e.right_st;if(n&&a){var s=t.get_correction(n,a);s.then(function(e){l.chart_corrections=e})}},l.addSentence=function(){var e=Parse.Object.extend("CorrectionST");l.input_data.disable=!0;var n=l.chart_corrections;n.first_sentence=n.first_sentence?n.first_sentence:"",n.first_sentence_mark=n.first_sentence_mark?n.first_sentence_mark:[],n.second_sentence=n.second_sentence?n.second_sentence:"",n.second_sentence_mark=n.second_sentence_mark?n.second_sentence_mark:[];var t=new e,a=l.cat_correction.id,s=o.user;t.set("correction_id",a),t.set("user_id",s.id),t.set("username",s.get("username")),t.set("mistake_st",l.input_data.mistake_st),t.set("right_st",l.input_data.right_st),t.set("first_sentence",n.first_sentence),t.set("first_sentence_mark",n.first_sentence_mark),t.set("second_sentence",n.second_sentence),t.set("second_sentence_mark",n.second_sentence_mark);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),t.setACL(i),t.save().then(function(e){l.input_data={},l.chart_corrections=!1,l.corrections.unshift(e)})},l.setRightSentenceChange=function(e){var n=e,a=n.mistake_st,s=n.right_st;if(a&&s){var o=t.get_correction(a,s);o.then(function(n){e.set("first_sentence",n.first_sentence),e.set("first_sentence_mark",n.first_sentence_mark),e.set("second_sentence",n.second_sentence),e.set("second_sentence_mark",n.second_sentence_mark),e.save()})}},l.chartClass=function(e,n){return e?"undefined"==typeof e[n]?"correct":" "==e[n]?"correct":"-"==e[n]?"missing":"+"==e[n]?"extra":"^"==e[n]?"incorrect":""==e[n]?"correct":void 0:"correct"},l.setStudent=function(e){l.studentCorrections=e},l.remove=function(e){var n=l.corrections[e];l.corrections.splice(e,1),n.destroy()},l.checkSentence=function(e){var n=e.correction_st?e.correction_st.trim():e.correction_st,t=e.get("right_st");n==t?(e.checker="You are right!",e.show_class="show_anwser"):e.checker="You are wrong, try again!"},l.changeMessage=function(e){e.checker=!1},l.addCorrection=function(){t.get_correction(l.input_data.mistake_st,l.input_data.mistake_st);l.input_data.right_st&&""!=l.input_data.right_st&&(l.correction.set("right_st",l.input_data.right_st),l.correction.set("proper",l.input_data.right_st.split(" "))),l.input_data.mistake_st&&""!=l.input_data.mistake_st&&(l.correction.set("mistake_st",l.input_data.mistake_st),l.correction.set("text",l.input_data.mistake_st.split(" "))),l.correction.save().then(function(e){l.input_data.text=e.get("text"),l.input_data.proper=e.get("proper"),l.input_data.text&&l.input_data.proper&&(l.text=r("labelWords")(l.input_data.text,l.input_data.proper))})}}}}]),angular.module("triReviewModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/review-module"),n.state("admin-panel.default.review",{url:"/review/review/:user_id",templateUrl:"app/review-module/review.tmpl.html",controller:"ReviewController"}),n.state("admin-panel.default.game",{url:"/review/game",templateUrl:"app/review-module/game.tmpl.html",controller:"GameController"}),n.state("admin-panel.default.finalgame",{url:"/review/finalgame",templateUrl:"app/review-module/finalgame.tmpl.html",controller:"FinalGameController"}),n.state("website",{url:"/website",templateUrl:"app/review-module/website.tmpl.html",controller:"WebsiteController"})
}]),angular.module("triReviewModule").directive("summayaty",["GameService","ReviewService","$rootScope",function(e,n,t){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/summary.tmpl.html",link:function(e){t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data}),e.user=t.user,e.speak=function(e,n){responsiveVoice.speak(e,n)},e.summaryYes=function(){e.rs.disable_action=!0,n.summaryYes()}}}}]),angular.module("triReviewModule").directive("spellingaty",["HelperService","$q","$mdToast","GameService","ReviewService","$rootScope",function(e,n,t,a,s,o){return{$scope:{rs:"="},restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/spelling.tmpl.html",link:function(n){var t=e.getCurrentTutorial("pronselection");t.then(function(e){n.tutorial=e?e:"no_resulte"}),n.speak=function(e,n){responsiveVoice.speak(e,n)},n.updateSpelling=function(e){o.user.set("spelling",e),o.user.save(),n.rs={},n.rs.result_message="Spelling updated! Loading activite...",setTimeout(function(){s.create_review_data()},1e3)}}}}]),angular.module("triReviewModule").directive("a9aty",["HelperService","GameService","ReviewService","$rootScope",function(e,n,t,a){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a9.tmpl.html",link:function(n){var s=n.rs.spword,o=e.replace_the_from_sentence(s);n.sentence_arr=o.arr,n.anwser_lemma=o.anwser_lemma,n.anwser_index=o.anwser_index,a.$on("update_reivew_gb_data",function(t,a){n.rs=a.gb_data;var s=n.rs.spword,o=e.replace_the_from_sentence(s);n.sentence_arr=o.arr,n.anwser_lemma=o.anwser_lemma,n.anwser_index=o.anwser_index}),n.click=function(e){n.rs.disable_action=!0,n.anwser_lemma.trim().toLowerCase()==e?(n.sentence_arr[n.anwser_index]="<span class = 'right-lemma'>"+n.anwser_lemma+"</span>",n.rs.result_message="You are right!",setTimeout(function(){t.check_right_anwser("a9")},5e3)):(n.sentence_arr[n.anwser_index]="<span class = 'empty-lemma'>"+e+"</span>",n.rs.result_message="You are wrong! Answer : "+n.anwser_lemma,setTimeout(function(){t.check_wrong_anwser("a9")},5e3))}}}}]),angular.module("triReviewModule").directive("a8aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a8.tmpl.html",link:function(e){t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data}),e.a8CheckAnwser=function(t){e.rs.disable_action=!0,e.rs.highlight=!0,t==e.rs.replace_lemma?(e.rs.result_message="You are right!",setTimeout(function(){n.check_right_anwser("a8")},1e3)):(e.rs.result_message="You are wrong!",setTimeout(function(){n.check_wrong_anwser("a8")},1e3))}}}}]),angular.module("triReviewModule").directive("a7aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a7.tmpl.html",link:function(e){e.user=t.user,t.$on("update_reivew_gb_data",function(n,a){e.rs=a.gb_data,e.rs.user=t.user}),e.speak=function(e,n){responsiveVoice.speak(e,n)},e.a7Hint=function(){var n=e.rs.pron_resultes.star,t=e.rs.pron_resultes.split_pron_arr,a=e.rs.pron_resultes.star_anwser_arr,s=e.rs.pron_resultes.dot_anwser_arr,o=[];if(n>=1){for(var i=t.length-1;i>=0;i--){var r=a.indexOf(t[i]);0>r&&o.push(t[i])}e.rs.pron_resultes.hint_count<o.length&&e.rs.pron_resultes.hint_count++}if(0==n&&dot>=1&&dot>e.rs.pron_resultes.hint_count){for(var i=t.length-1;i>=0;i--){var r=s.indexOf(t[i]);0>r&&o.push(t[i])}e.rs.pron_resultes.hint_count<o.length&&e.rs.pron_resultes.hint_count++}0==n&&0==dot&&1==e.rs.pron_resultes.hint_count,e.false_answer_arr=o},e.a7CheckAnwser=function(){e.rs.disable_action=!0;var t=e.rs.pron_resultes.star,a=e.rs.pron_resultes.dot,s=e.rs.pron_resultes.check_anwser_arr,o=e.rs.pron_resultes.star_anwser_arr,i=e.rs.pron_resultes.dot_anwser_arr;if(e.rs.remove_stress_pron=e.rs.frek.get("the_uk_pron"),t>=1){for(var r=!0,l=s.length-1;l>=0;l--){var d=s[l].trim(),c=o.indexOf(d);0>c&&(r=!1)}r?(e.rs.result_message="You are right!",setTimeout(function(){e.rs.pron_resultes.anwser_message=!1,n.check_right_anwser("a7")},1e3)):(e.rs.result_message="You are wrong!",setTimeout(function(){e.rs.pron_resultes.anwser_message=!1,n.check_wrong_anwser("a7")},5e3))}if(0==t&&a>=1){for(var r=!0,l=s.length-1;l>=0;l--){var d=s[l].trim(),c=i.indexOf(d);0>c&&(r=!1)}r?(e.rs.result_message="You are right!",setTimeout(function(){e.rs.pron_resultes.anwser_message=!1,n.check_right_anwser("a7")},1e3)):(e.rs.result_message="You are wrong!",setTimeout(function(){e.rs.pron_resultes.anwser_message=!1,n.check_wrong_anwser("a7")},5e3))}0==t&&0==a&&n.check_right_anwser("a7")},e.pronClass=function(n,t){e.false_answer_arr||(e.false_answer_arr=[]);for(var a=[],s=0;s<e.rs.pron_resultes.hint_count;s++)a.push(e.false_answer_arr[s]);var o=e.rs.pron_resultes.check_anwser_arr_index,i=a.indexOf(n),r=o.indexOf(t);return i>-1?"grey_bg":r>-1?"in_anwser hand":"hand"},e.a7AddAnwser=function(n,t){n=n.trim();var a=e.rs.pron_resultes.check_anwser_arr,s=e.rs.pron_resultes.check_anwser_arr_index,o=a.indexOf(n);o>-1?a.splice(o,1):a.push(n);var o=s.indexOf(t);o>-1?s.splice(o,1):s.push(t)}}}}]),angular.module("triReviewModule").directive("a6aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a6.tmpl.html",link:function(e){t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data,e.initData()}),e.initData=function(){e.rs.frek;if(e.choiceFormsAnwser=[],e.option_index=1,e.anwser_wrong=!1,"r"!=e.rs.pos){e.choiceFormsAnwser[0]=e.rs.choiceFormsAnwser[0];var n=t.user.get("level"),a=n.indexOf("A1"),s=n.indexOf("A2");a>-1&&"v"==e.rs.pos&&(e.choiceFormsAnwser[3]=e.rs.choiceFormsAnwser[3],e.choiceFormsAnwser[4]=e.rs.choiceFormsAnwser[4]),s>-1&&"v"==e.rs.pos&&(e.choiceFormsAnwser[4]=e.rs.choiceFormsAnwser[4])}},e.initData(),e.addForm=function(t){var a=e.rs.choiceFormsAnwser[e.option_index];e.choiceFormsAnwser[e.option_index]=t,t!=a&&(e.rs.result_message="You are wrong!",e.anwser_wrong=!0,setTimeout(function(){n.check_wrong_anwser("a6")},6e3));for(var s=!1,o=0;o<e.rs.choiceFormsAnwser.length;o++)e.choiceFormsAnwser[o]||(s=!0);e.anwser_wrong||s?e.option_index++:(e.rs.result_message="You are right!",setTimeout(function(){n.check_right_anwser("a6")},1e3))}}}}]),angular.module("triReviewModule").directive("a5aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a5.tmpl.html",link:function(e){t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data,e.input={},e.input.a5=e.rs.firstletter}),e.input={},e.input.a5=e.rs.firstletter,e.a5anwserChange=function(){""==e.input.a5&&(e.rs.anwser_lemma=e.rs.firstletter+"_____"),e.rs.anwser_lemma=e.input.a5;var n=e.rs.spword.get("sample"),t=e.rs.replace_lemma,a=n.replace(t,'<span class = "anwser-input">'+e.rs.anwser_lemma+"</span>");e.rs.sentence_with_first_letter=a},e.a5answer=function(){e.rs.lemma;e.rs.disable_action=!0;var t=e.input.a5;t==e.rs.replace_lemma?(e.rs.result_message="You are right!",setTimeout(function(){n.check_right_anwser("a5")},1e3)):(e.rs.result_message="You are wrong! Answer : "+e.rs.replace_lemma,setTimeout(function(){n.check_wrong_anwser("a5")},1e3))}}}}]),angular.module("triReviewModule").directive("a4aty",["HelperService","GameService","ReviewService","$rootScope",function(e,n,t,a){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a4.tmpl.html",link:function(n){a.$on("update_reivew_gb_data",function(t,a){var s=n.rs.lemma,o=e.generate_lemma_arr(s);n.lemma_arr=[];for(var i=o.length-1;i>=0;i--){var r={};r.lemma=o[i],r.checked=!1,n.lemma_arr.push(r)}n.rs=a.gb_data,n.input={},n.input.a4=n.rs.firstletter});var s=n.rs.lemma,o=e.generate_lemma_arr(s);n.lemma_arr=[];for(var i=o.length-1;i>=0;i--){var r={};r.lemma=o[i],r.checked=!1,n.lemma_arr.push(r)}n.input={},n.input.a4=n.rs.firstletter,n.checkWordClass=function(e){return e.checked?"grey-bg":void 0},n.clear=function(){n.input.a4=n.rs.firstletter;for(var e=n.lemma_arr.length-1;e>=0;e--)n.lemma_arr[e].checked=!1},n.cleckLemma=function(e){e.checked||(e.checked=!0,n.input.a4="_"==e.lemma?n.input.a4+" ":n.input.a4+e.lemma)},n.a4anwserChange=function(){""==n.input.a4&&(n.rs.anwser_lemma=n.rs.firstletter+"_____"),n.rs.anwser_lemma=n.input.a4;var e=n.rs.spword.get("sample"),t=n.rs.replace_lemma,a=e.replace(t,'<span class = "anwser-input">'+n.rs.anwser_lemma+"</span>");n.rs.sentence_with_first_letter=a},n.a4answer=function(){n.rs.lemma;n.rs.disable_action=!0;var e=n.input.a4;e==n.rs.replace_lemma?(n.rs.result_message="You are right!",setTimeout(function(){t.check_right_anwser("a4")},1e3)):(n.rs.result_message="You are wrong! Answer : "+n.rs.replace_lemma,setTimeout(function(){t.check_wrong_anwser("a4")},1e3))}}}}]),angular.module("triReviewModule").directive("a3aty",["HelperService","GameService","ReviewService","$rootScope",function(e,n,t,a){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a3.tmpl.html",link:function(e){a.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data,e.input={},e.input.a3=e.rs.firstletter}),e.input={},e.input.a3=e.rs.firstletter,e.speak=function(e,n){responsiveVoice.speak(e,n)},e.addEnterAnwser=function(){e.input.a3||(e.input.a3=e.rs.firstletter);var n=e.input.a3.length+1,t=e.rs.replace_lemma,a=t.charAt(n-1);e.input.a3=e.input.a3+a},e.a3answer=function(){e.rs.disable_action=!0,e.anwser_right_icon="",e.show_anwser="Answer : "+e.rs.replace_lemma,e.input.a3==e.rs.replace_lemma?(e.rs.result_message="You are right!",setTimeout(function(){t.check_right_anwser("a3")},1e3)):(e.rs.result_message="You are wrong! Answer : "+e.rs.replace_lemma,setTimeout(function(){t.check_wrong_anwser("a3")},1e3))},e.a3anwserChange=function(){""==e.input.a3&&(e.rs.anwser_lemma=e.rs.firstletter+"_____"),e.rs.anwser_lemma=e.input.a3;var n=e.rs.spword.get("sample"),t=e.rs.replace_lemma,a=n.replace(t,'<span class = "anwser-input">'+e.rs.anwser_lemma+"</span>");e.rs.sentence_with_first_letter=a}}}}]),angular.module("triReviewModule").directive("a2aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{$scope:{rs:"="},restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a2.tmpl.html",link:function(e){t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data}),e.speak=function(e){var n="uk"==t.user.get("spelling")?"UK English Male":"US English Female";responsiveVoice.speak(e,n)},e.a2answer=function(t){e.show_result=!0,e.rs.disable_action=!0,e.rs.highlight=!0,t==e.rs.spword.get("lemma")?(e.rs.result_message="You are right!",setTimeout(function(){e.show_result=!1,n.check_right_anwser("a2")},1e3)):(e.rs.result_message="You are wrong!",setTimeout(function(){e.show_result=!1,n.check_wrong_anwser("a2")},1e3))}}}}]),angular.module("triReviewModule").directive("a1aty",["GameService","ReviewService","$rootScope",function(e,n,t){return{$scope:{rs:"="},restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a1.tmpl.html",link:function(e){e.user=t.user,t.$on("update_reivew_gb_data",function(n,t){e.rs=t.gb_data}),e.speak=function(e,n){responsiveVoice.speak(e,n)},e.clickAnswer=function(t){e.rs.disable_action=!0,e.rs.highlight=!0,"right"==e.rs.anwser[t]?(e.rs.result_message="You are right!",setTimeout(function(){n.check_right_anwser("a1")},1e3)):(e.rs.result_message="You are wrong!",setTimeout(function(){n.check_wrong_anwser("a1")},1e3))}}}}]),angular.module("triReviewModule").directive("a10aty",["HelperService","GameService","ReviewService","$rootScope",function(e,n,t,a){return{restrict:"AE",replace:"true",templateUrl:"app/review-module/Directive/a10.tmpl.html",link:function(n){a.$on("update_reivew_gb_data",function(t,s){n.rs=s.gb_data,n.option_words=[],n.option_words.push(n.rs.lemma);var o=a.user.get("user_list_lemmas");o=e.shuffle(o);for(var i=20;i>=0&&o[i];i--){var r=n.option_words.indexOf(o[i]);if(0>r&&n.option_words.push(o[i]),n.option_words.length>=6)break}n.option_words=e.shuffle(n.option_words)}),n.option_words=[],n.option_words.push(n.rs.lemma);var s=a.user.get("user_list_lemmas");s=e.shuffle(s);for(var o=20;o>=0&&s[o];o--){var i=n.option_words.indexOf(s[o]);if(0>i&&n.option_words.push(s[o]),n.option_words.length>=6)break}n.option_words=e.shuffle(n.option_words),n.checkAnwser=function(e){var a=n.rs.spword.get("sample"),s=n.rs.lemma;n.rs.disable_action=!0,e==s?(n.rs.sentence_no_first_letter=a.replace(s,'<span class = "anwser-input font-green">'+e+"</span>"),n.rs.result_message="You are right!",setTimeout(function(){t.check_right_anwser("a10")},5e3)):(n.rs.sentence_no_first_letter=a.replace(s,'<span class = "anwser-input font-red">'+e+"</span>"),n.rs.result_message="You are wrong! Answer : "+n.rs.replace_lemma,setTimeout(function(){t.check_wrong_anwser("a10")},5e3))}}}}]),angular.module("triReviewModule").directive("vocab1course",["$mdDialog","$mdToast","ReviewService","WordService","ClassService","AddWordService","CourseReviewService","$rootScope",function(e,n,t,a,s,o,i,r){return{$scope:{rs:"=",gb_data:"=",vocas:"=",rs:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/vocab1.tmpl.html",link:function(i){i.show_progress_bar=!1,i.voca_page=0,i.anwserClass=function(e,n){var t=i.vocas[i.voca_page];return e==t.click_lemma?"You are right!"==n?"green_bg":"grey_bg":void 0},i.checkVocaAnwser=function(l){var d=i.vocas[i.voca_page],c=d.get("lemma");if(d.click_lemma=l,l==c){var m=r.user.get("user_list_ids")?r.user.get("user_list_ids"):[],p=m.indexOf(d.get("word_id"));if(0>p&&"student"==r.user.get("user_role")){var u=s.getDefaultClass();u.then(function(e){var s=a.getDefineById(d.get("word_id"));s.then(function(a){var s=t.get_one_review_all_data_by_define(a);s.then(function(t){t.define=a;var s=o.setClassWordData(t);if(s){s.set("class_id",e.id),s.set("class_name",e.get("name"));var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.save().then(function(){n.show(n.simple().content("It has been added to your study list!").position("bottom right").hideDelay(3e3)),r.$broadcast("saveWordToList")})}})})})}d.message="You are right!",i.show_progress_bar=!0,i.voca_page+1<i.vocas.length?setTimeout(function(){i.$apply(function(){i.show_progress_bar=!1,i.voca_page++})},2e3):setTimeout(function(){e.cancel(),r.$broadcast("pass_grammar")},2e3)}else d.message="You are wrong!"}}}}]),angular.module("triReviewModule").directive("summarycourse",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",show_hide:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/summary.tmpl.html",link:function(t){t.item_tags=n.get_grammar_tags(),t.show_hide=n.check_hide_button(t.gb_data.tmp_sentences),t.fliterShow=function(e,n){t.current_filter=e;var a=e.lemma;e.click=!0,e.show=!0;for(var s=n.length-1;s>=0;s--){var o=!0;n[s].get(a)&&(o=!1),n[s].hide=o?!0:!1}for(var i=t.show_hide,r=i.arr,l=!0,s=0;s<=r.length-1;s++){var e=r[s];e.click||(l=!1)}l&&(i.next_enable=!0)},t.show_hide.arr[0]&&t.fliterShow(t.show_hide.arr[0],t.gb_data.sentences),t.next=function(){e.check_all_anwser_for_grammar(t.gb_data.sentences,t.gb_data,!0)},t.summaryClass=function(e){var n="";return e!=t.current_filter&&(n="bg-grey "),n}}}}]),angular.module("triReviewModule").directive("act9course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",dialogs:"=",dia_max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act9.tmpl.html",link:function(t){console.log(t.dialogs),t.show_progress_bar=!1,t.anwser_right=!0,t.item_tags=n.get_grammar_tags(),t.dialogs=n.act9_options(t.gb_data.dialogs,t.show_index),t.max_page=t.dialogs[0].act9_options.length,responsiveVoice.speak("Complete the conversation.","UK English Male"),t.anwserClass=function(e,n){return e==n.act9_anwser&&"You are right!"==n.act9_message?"green_bg":void 0},t.act9Next=function(){t.next_btn_disable=!0,e.check_all_anwser_for_grammar(t.dialogs,t.gb_data,!0)},t.act9AddAnwser=function(a,s){s.act9_anwser=a;var o=s.get("the_order"),i=a.get("the_order");o+1==i?(t.show_progress_bar=!0,s.act9_message="You are right!",s.show_progress_bar=!0,t.show_index+1<t.dia_max_page?setTimeout(function(){t.$apply(function(){t.show_progress_bar=!1,t.show_index++,s.show_progress_bar=!1,t.dialogs=n.act9_options(t.dialogs,t.show_index)})},2e3):e.check_all_anwser_for_grammar(t.gb_data.sentences,t.gb_data,t.anwser_right)):(s.act9_message="You are wrong!",t.anwser_right=!1)}}}}]),angular.module("triReviewModule").directive("act8course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act8.tmpl.html",link:function(t){var a=t.grammar;t.data=n.act8_options(a);for(var s=0;s<t.data.listen_arr_objs.length;s++)if(t.data.listen_arr_objs[s].option_obj){t.data.listen_arr_objs[s].show=!0;break}responsiveVoice.speak("Read and complete the gaps!","UK English Male"),t.showInputs=function(e){if(e.option_obj){for(var n=0;n<t.data.listen_arr_objs.length;n++)t.data.listen_arr_objs[n].option_obj&&(t.data.listen_arr_objs[n].show=!1);e.show=!0}},t.actExtraClass=function(e){var n="",t=e.lemma.trim();e.option_obj&&e.option_obj.input_lemma!=e.option_obj.fixed_lemma.trim()&&(n+=" font-pink strong "),e.option_obj&&e.option_obj.input_lemma==e.option_obj.fixed_lemma.trim()&&(n+=" font-green strong ");var a=t.charAt(0);return"'"==a&&(n+="back-margin-left-8 "),n+="."==t||"?"==t||"!"==t||","==t?"back-margin-left-8 margin-right-4 ":"margin-right-4 "},t.act8ChangeLemma=function(){for(var n=!0,s=!0,o=t.data.listen_arr_objs,i=0;i<o.length;i++)o[i].option_obj&&!o[i].option_obj.input_lemma&&(n=!1),o[i].option_obj&&o[i].option_obj.input_lemma!=o[i].option_obj.fixed_lemma&&(s=!1);n&&s?(a.act8_message="You are right!",e.check_all_anwser_for_grammar(t.gb_data.sentences,t.gb_data,!0)):n&&(a.act8_message="You are wrong!",e.check_all_anwser_for_grammar(t.gb_data.sentences,!0))}}}}]),angular.module("triReviewModule").directive("act7course",["CourseExerciseService","$mdDialog","CourseReviewService","$rootScope",function(e,n,t){return{$scope:{gb_data:"=",act7_page:"=",grammar:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act7.tmpl.html",link:function(n){n.show_progress_bar=!1,n.anwser_right=!0,responsiveVoice.speak("Look at the questions. Then click on the answers in the reading!","UK English Male"),n.act7_page=1,n.grammar=t.act7_options(n.grammar,n.act7_page),n.act7Speak=function(){var e=n.grammar;e.act7_show=!0,e.act7_lemmas=e.act7_obj.listen_arr},n.act7Speak(n.grammar.get("listen")),n.act7RemoveAnwser=function(e){var t=n.grammar;t[e]=""},n.anwserClass=function(e){return"You are right!"==e?"green_bg":void 0},n.act7Anwser=function(a,s){var o=n.grammar,i=(n.gb_data.sentences,o.act7_obj.anwser_index_arr);if(i[0]){var r=i.indexOf(s);r>-1?(o.act7_message="You are right!",n.show_progress_bar=!0,o.act7_obj.click_lemmar=o.act7_obj.anwser,setTimeout(function(){n.$apply(function(){n.act7_page++,n.show_progress_bar=!1,n.grammar=t.act7_options(n.grammar,n.act7_page),n.grammar.finish&&e.check_all_anwser_for_grammar(n.gb_data.sentences,n.gb_data,n.anwser_right)})},3e3)):(o.act7_message="You are wrong!",n.anwser_right=!1)}if(!i[0]){var l=a.charAt(a.length-1);("."==l||"!"==l||"?"==l||","==l)&&(a=a.substring(0,a.length-1)),o.act7_obj.click_lemmar=a;var d=o.act7_obj.anwser.indexOf(a);d>-1?(o.act7_message="You are right!",n.show_progress_bar=!0,setTimeout(function(){n.$apply(function(){n.act7_page++,n.show_progress_bar=!1,n.grammar=t.act7_options(n.grammar,n.act7_page),n.grammar.finish&&e.check_all_anwser_for_grammar(n.gb_data.sentences,n.gb_data,n.anwser_right)})},3e3)):(o.act7_message="You are wrong!",n.anwser_right=!1)}}}}}]),angular.module("triReviewModule").directive("act6course",["CourseExerciseService","$mdDialog","CourseReviewService","$rootScope",function(e,n,t){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act6.tmpl.html",link:function(n){n.show_progress_bar=!1,n.click_index=0,n.space_limit=6;for(var a=n.gb_data.sentences.length-1;a>=0;a--)n.gb_data.sentences[a]=t.act6_options(n.gb_data.sentences[a]);console.log(n.gb_data.sentences),responsiveVoice.speak("Which is the correct order? Click to move cards into the correct order!","UK English Male"),n.act6Class=function(e,n){return 0!=e||n.option_obj?n.option_obj?n.option_obj.index==n.index?"green_bg":"grey_bg":void 0:"flash"},n.act6RemoveLemma=function(e,n){e.option_obj.disable=!1,e.option_obj=!1,e.lemma="",n.act6_message=!1},n.act6AddLemma=function(t,a){t.disable=!0;for(var s=a.act6_anwser_objs,o=0,i=0;i<=s.length-1;i++){o=i;var r=s[i];if(!r.option_obj){r.option_obj=t,r.put_lemma=t.lemma;break}}n.click_index=parseInt((o+1)/n.space_limit);for(var l=!0,d=!0,i=s.length-1;i>=0;i--){var r=s[i];if(!r.option_obj){l=!1,d=!1;break}if(r.option_obj.index!=r.index){l=!1;break}}l?(a.act6_message="You are right!",n.show_progress_bar=!0,a.anwser="right",n.show_index<n.max_page&&setTimeout(function(){n.$apply(function(){n.show_progress_bar=!1,n.show_index++,n.click_index=0})},2e3),e.check_all_anwser(n.gb_data.sentences,n.gb_data)):d?(a.act6_message="You are wrong!",a.anwser_wrong=!0,a.anwser="wrong",e.check_all_anwser(n.gb_data.sentences,n.gb_data)):(a.act6_message=!1,a.anwser=!1,e.check_all_anwser(n.gb_data.sentences,n.gb_data))}}}}]),angular.module("triReviewModule").directive("act5course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act5.tmpl.html",link:function(t){t.show_progress_bar=!1;for(var a=t.gb_data.sentences.length-1;a>=0;a--)t.gb_data.sentences[a]=n.act5_options(t.gb_data.sentences[a]);responsiveVoice.speak("What are the mistakes? Click on each mistake and correct!","UK English Male"),t.anwserClass=function(e){return"You are right!"==e?"green_bg":void 0},t.act5ChangeLemma=function(n,a){t.check_three=!1,n.lemma=n.input,n.check_time=n.check_time?n.check_time:0,n.check_time++,n.right_lemma==n.input?(a.act5_message="You are right!",n.anwser="right"):(a.anwser_wrong=!0,n.anwser="wrong",n.check_time>=3?(a.act5_message="You are wrong! Anwser is : "+n.right_lemma,n.anwser="right",n.lemma=n.input,t.check_three=!0):a.act5_message="You are wrong!");for(var s=!0,o=!0,i=a.data_objs.length-1;i>=0;i--)a.data_objs[i].is_option&&!a.data_objs[i].anwser&&(s=!1),"wrong"==a.data_objs[i].anwser&&(o=!1);s&&o&&(a.anwser="right"),s&&!o&&(a.anwser="wrong"),s?(a.act5_more_message="","right"==a.anwser&&(t.show_progress_bar=!0,t.show_index<t.max_page?setTimeout(function(){t.$apply(function(){t.show_progress_bar=!1,t.show_index++})},2e3):setTimeout(function(){e.check_all_anwser(t.gb_data.sentences,t.gb_data)},2e3))):(a.act5_more_message="Now, find the next mistake.",a.anwser=!1)},t.act5SelectWord=function(e,n){e.act5_inputs||(e.act5_inputs=[]);var t=e.act5_inputs.indexOf(n);t>-1?(e.act5_inputs.splice(t,1),e.act5_message=""):n.is_option?(n.input=n.lemma,e.act5_message="Yes, that's a mistake!",e.act5_inputs.push(n)):e.act5_message="That isn't a mistake!"}}}}]),angular.module("triReviewModule").directive("act4course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act4.tmpl.html",link:function(t){t.show_progress_bar=!1,responsiveVoice.speak("Which are correct?Click on the correct ones!","UK English Male");for(var a=t.gb_data.sentences.length-1;a>=0;a--)t.gb_data.sentences[a]=n.act4_options(t.gb_data.sentences[a]);t.actClass=function(e){return e[0].show_act4_class&&e[0].is_right?"green_bg":e[0].show_act4_class&&!e[0].is_right?"grey_bg":void 0},t.marginRight=function(e){e=e.trim();var n=e.charAt(0),t="";return"'"==n&&(t+="back-margin-left-4 "),t+="."==e||"?"==e||"!"==e||","==e?"back-margin-left-4 margin-right-4 ":"margin-right-4 "},t.checkAnwserAct4=function(n,a){for(var s=a.act4_options_data.length-1;s>=0;s--)a.act4_options_data[s][0].show_act4_class=!1;n[0].is_right?(t.show_progress_bar=!0,a.message="You are right!",a.anwser="right",n[0].show_act4_class=!0):(a.message="You are wrong!",a.anwser="wrong",a.anwser_wrong=!0,n[0].show_act4_class=!0),console.log(a.anwser),a.anwser&&"right"==a.anwser&&(t.show_progress_bar=!0,t.show_index<t.max_page&&setTimeout(function(){t.$apply(function(){t.show_progress_bar=!1,t.show_index++})},2e3),setTimeout(function(){e.check_all_anwser(t.gb_data.sentences,t.gb_data)},2e3))}}}}]),angular.module("triReviewModule").directive("act3level",["CourseExerciseService","$interval","CourseReviewService","$rootScope",function(e){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",show_progress_bar:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act3level.tmpl.html",link:function(n){n.show_progress_bar=!1;for(var t=0;t<n.gb_data.sentences.length;t++)for(var a=n.gb_data.sentences[t],s=1,o=0;o<a.data_objs.length;o++)a.data_objs[o].is_option&&(a.data_objs[o].option_index=s,s++);responsiveVoice.speak("What is the correct answer?","UK English Male"),n.act3Class=function(e,n){return e==n.show_class_option&&e==n.lemma?"green_bg":e==n.show_class_option&&e!=n.lemma?"grey_bg":void 0},n.act3CheckForm=function(t,a,s){a.input_space=t,a.show_class_option=t,t==a.lemma?(a.act3_message="You are right!",a.anwser="right"):(a.anwser="wrong",a.act3_message="You are wrong! Anwser is : "+a.lemma,s.anwser_wrong=!0,s.disable_btn=!0);for(var o=!0,i=!0,r=s.data_objs.length-1;r>=0;r--)s.data_objs[r].is_option&&!s.data_objs[r].anwser&&(o=!1),"wrong"==s.data_objs[r].anwser&&(i=!1);s.disable_btn&&(o=!0,i=!0),o&&i&&("wrong"!=s.anwser&&(s.anwser="right"),n.show_progress_bar=!0,n.show_index<n.max_page&&setTimeout(function(){n.$apply(function(){n.show_progress_bar=!1,n.show_index++})},2e3),setTimeout(function(){e.check_all_anwser(n.gb_data.sentences,n.gb_data)},2e3)),o||(s.anwser=!1)}}}}]),angular.module("triReviewModule").directive("act3course",["CourseExerciseService","$interval","CourseReviewService","$rootScope",function(e){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",show_progress_bar:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act3.tmpl.html",link:function(n){n.show_progress_bar=!1,console.log(n.gb_data),responsiveVoice.speak("What is the correct answer?","UK English Male"),n.act3Class=function(e,n){return n.show_act3_class&&e==n.lemma?"green_bg":void 0},n.act3CheckForm=function(t,a,s){a.input_space=t,t==a.lemma?(a.act3_message="You are right!",a.anwser="right",a.show_act3_class=!0):(a.anwser="wrong",a.act3_message="You are wrong!",a.show_act3_class=!1,s.anwser_wrong=!0);for(var o=!0,i=!0,r=s.data_objs.length-1;r>=0;r--)s.data_objs[r].is_option&&!s.data_objs[r].anwser&&(o=!1),"wrong"==s.data_objs[r].anwser&&(i=!1);o&&i&&("wrong"!=s.anwser&&(s.anwser="right"),n.show_progress_bar=!0,n.show_index<n.max_page&&setTimeout(function(){n.$apply(function(){n.show_progress_bar=!1,n.show_index++})},2e3),setTimeout(function(){e.check_all_anwser(n.gb_data.sentences,n.gb_data)},2e3)),o||(s.anwser=!1)}}}}]),angular.module("triReviewModule").directive("act2course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act2.tmpl.html",link:function(t){t.item_tags=n.get_grammar_tags(),t.show_progress_bar=!1,t.anwser_list=n.get_grammar_tags_options(t.gb_data.grammar),responsiveVoice.speak("What do we use this for? Is it ..?","UK English Male"),t.act2Class=function(e,n){if(n.item==e&&n.anwser){if("right"==n.anwser)return"green_bg";if("wrong"==n.anwser)return"grey_bg"}},t.act2CheckGrammarTag=function(n,a,s){a.item=n;var o=t.item_tags.data_check_tip[n]?t.item_tags.data_check_tip[n]:"";t.gb_data.grammar.tip=o,responsiveVoice.speak(o,"UK English Male"),n==a.anwser_lemma?(a.message="You are right!",a.anwser="right",t.gb_data.grammar.anwser="right"):(a.message="You are wrong!",a.anwser="wrong",t.gb_data.grammar.anwser="wrong");for(var i=!0,r=!0,l=s.length-1;l>=0;l--)s[l].anwser||(i=!1),"wrong"==s[l].anwser&&(r=!1);i&&r&&(a.message="You are right! ",t.show_progress_bar=!0,setTimeout(function(){e.check_all_anwser_for_grammar(t.gb_data.sentences,t.gb_data,r)},2e3))}}}}]),angular.module("triReviewModule").directive("act1course",["HelperService","CourseExerciseService","$mdDialog","CourseReviewService","$rootScope",function(e,n,t,a){return{$scope:{gb_data:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act1.tmpl.html",link:function(e){e.max_page=e.gb_data.sentences.length,e.show_progress_bar=!1,e.item_tags=a.get_grammar_tags(),e.show_index=0,e.gb_data.sentences=a.set_act1_option(e.gb_data.sentences),responsiveVoice.speak("Is this spoken or written English? Is that a sentence, question, positive or negative?","UK English Male"),e.anwser_in_array=function(e,n){if(n.act1_anwser_arr){var t=n.act1_anwser_arr.indexOf(e);return t>-1?!0:!1}return!1},e.act1AnwserClass=function(e,n){var t=n.check_obj.anwser_arr.indexOf(e);return t>-1?"green-bg":"btn-grey-bg"},e.act1CheckModel=function(t,a){var s=["written","spoken"],o=["plus","min","plus_ask","min_ask"],i=a.act1_anwser_arr.indexOf(t),r=s.indexOf(t);if(r>-1)for(var l=s.length-1;l>=0;l--){var d=a.act1_anwser_arr.indexOf(s[l]);d>-1&&a.act1_anwser_arr.splice(d,1)}var c=o.indexOf(t);if(c>-1)for(var l=o.length-1;l>=0;l--){var m=a.act1_anwser_arr.indexOf(o[l]);m>-1&&a.act1_anwser_arr.splice(m,1)}if(i>-1)a.act1_anwser_arr.splice(i,1);else{var i=a.check_obj.anwser_arr.indexOf(t);i>-1?(a.act1_anwser_arr.push(t),a.message=!1):(a.act1_anwser_arr.push(t),a.message="You are wrong!",a.anwser_wrong=!0)}for(var p=!0,l=a.act1_anwser_arr.length-1;l>=0;l--){var t=a.act1_anwser_arr[l],i=a.check_obj.anwser_arr.indexOf(t);if(0>i){p=!1;break}}p&&2==a.act1_anwser_arr.length?(a.message="You are right!",a.anwser="right",e.show_progress_bar=!0,e.show_index<e.max_page&&setTimeout(function(){e.$apply(function(){e.show_progress_bar=!1,e.show_index++})},2e3),setTimeout(function(){n.check_all_anwser(e.gb_data.sentences,e.gb_data)},2e3)):n.check_all_anwser(e.gb_data.sentences,e.gb_data)}}}}]),angular.module("triReviewModule").directive("act14course",["CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act4.tmpl.html",link:function(e){e.act14_view=n.user.get("act14_view")?n.user.get("act14_view"):"act14_view_a",e.act14ChangeView=function(t){e.act14_view=t,n.user.set("act14_view",t),n.user.save()},e.act14_3_CheckForm=function(t,a){a.test_obj.lemma_arr[a.test_obj.index]=t,t==a.test_obj.anwser?(a.act2_message="You are right!",n.user.set("act14_view","act14_view_a"),n.user.save(),a.act2_anwser=!0):a.act2_message="You are wrong!";for(var s=!0,o=e.sentence_list.length-1;o>=0;o--)e.sentence_list.act2_anwser||(s=!1);s&&$mdDialog.cancel()},e.act14ChangeLemma=function(n){var t=n.act14_f_anwser,a=WNService.get_grammar_tags_by_sentence(t);a.then(function(t){for(var a=t.simple_tags_arr,s=!0,o="",i=e.test_tags.length-1;i>=0;i--){var r=e.test_tags[i],l=a.indexOf(r);0>l&&(s=!1,o+=r+" ")}var d=e.grammar.get("name");n.act14_f_message=s?"":"You need to use "+d+" and the correct form!"})}}}}]),angular.module("triReviewModule").directive("act13course",["CourseExerciseService","HelperService","WNService","CourseReviewService","$rootScope",function(e,n,t,a,s){return{$scope:{gb_data:"=",test_tag_obj:"=",show_index:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act13.tmpl.html",link:function(n){n.input={},n.item_tags=a.get_grammar_tags(),n.anwser_list=a.get_grammar_tags_options(n.gb_data.grammar);
var o=n.gb_data.grammar;n.writing_objs=o.get("writing_objs")?o.get("writing_objs"):[],n.max_page=n.writing_objs.length-1,n.check_time=0,n.anwser_right=!0,n.writing_task=n.writing_objs[n.show_index].writing_task,setTimeout(function(){responsiveVoice.speak(n.writing_objs[n.show_index].writing_task,"UK English Male")},2e3),n.show_hide=a.check_hide_button(n.gb_data.tmp_sentences),n.fliterShow=function(e,t){n.current_filter=e;var a=e.lemma;e.click=!0,e.show=!0;for(var s=t.length-1;s>=0;s--){var o=!0;t[s].get(a)&&(o=!1),t[s].hide=o?!0:!1}for(var i=n.show_hide,r=i.arr,l=!0,s=0;s<=r.length-1;s++){var e=r[s];e.click||(l=!1)}l&&(i.next_enable=!0)},n.show_hide.arr[0]&&n.fliterShow(n.show_hide.arr[0],n.gb_data.sentences),n.summaryClass=function(e){var t="";return e!=n.current_filter&&(t="bg-grey "),t},n.checkClass=function(e,n){return n.anwser_lemma==e?"green_bg":void 0},n.showWriting=function(){n.show_infos=!1},n.nextPage=function(){n.input.act13writing="",n.check_time=0,n.act13_no_tag_message="",n.input.act13writing="",n.show_index++,n.anwser_right=!0,n.writing_task=n.writing_objs[n.show_index].writing_task,setTimeout(function(){responsiveVoice.speak(n.writing_objs[n.show_index].writing_task,"UK English Male")},2e3)},n.prePage=function(){n.check_time=0,n.act13_no_tag_message="",n.input.act13writing="",n.show_index--,n.anwser_right=!0,n.writing_task=n.writing_objs[n.show_index].writing_task},n.clearData=function(){n.act13writing="",n.act13_grammar=!1},n.act13SentenceDetail=function(e){for(var t=n.act13_obj.in_db_grammars,a=t[0],s=t.length-1;s>=0;s--)if(e==t[s].get("sentence")){a=t[s];break}n.act13_grammar=a};var i=function(e){console.log(e);var n=e.simple_tags_arr,t=e.lemma_arr;if(e.include_tag=!0,e.first_match_index>-1)for(var a=e.get("tag_arr")?e.get("tag_arr"):[],s=e.get("tag_type_arr"),o=0;o<=a.length-1;o++){var i=s[o],r=a[o],l=e.first_match_index+o,d=n[l],c=t[l];"tag_tag"==i&&d!=r&&(e.include_tag=!1),"tag_lemma"==i&&c!=r&&(e.include_tag=!1)}else e.include_tag=!1;var m=e.get("sample");if(!m)var m=e.sample;var p=m.charAt(m.length-1);("."==p||"!"==p||"?"==p||","==p)&&(m=m.substring(0,m.length-1));var u=e.sample.indexOf(m);return u>-1&&(e.include_tag=!0),e};n.checkShowClick=function(e,n){for(var t=n.in_db_grammars,a=t[0],s=!1,o=t.length-1;o>=0;o--)e==t[o].get("sentence")&&(a=t[o],a.get("error_grammar")[0]&&(s=!0));return s},n.act13WritingCheck=function(a){n.btn_disable=!0,n.act13_no_tag_message="",n.check_time++,n.grammar_wrong=!1,n.act13_grammar=!1;var r=a.replace(/<(?:.|\n)*?>/gm,"").trim(),l=r.replace(/([.?!@])\s*(?=[A-Z])/g,"$1|").split("|"),d=(l.length,n.gb_data.test_forms);if(n.writing_obj=n.writing_objs[n.show_index],n.select_forms=!1,n.writing_obj.select_test_forms&&n.writing_obj.select_test_forms[0])for(var c=[],m=0;m<d.length;m++){var p=d[m].id,u=n.writing_obj.select_test_forms.indexOf(p);u>-1&&c.push(d[m])}if(c){var g=c;n.select_forms=g}else var g=d;var f=!1,_=t.get_grammar_tags_by_sentence(a);_.then(function(r){n.btn_disable=!1;for(var l=r.simple_tags_arr,d=r.lemma_arr,c=g.length-1;c>=0;c--){var m=g[c];m.include_tag=!1,m.simple_tags_arr=l,m.lemma_arr=d,m.sample=a;for(var p=m.get("tag_type_arr")[0],u=m.get("tag_arr")[0],_=0;_<=l.length-1;_++){var h=l[_],v=d[_];if(m.first_match_index=-1,"tag_tag"==p&&u==h&&(m.first_match_index=_,m=i(m)),"tag_lemma"==p&&u==v&&(m.first_match_index=_,m=i(m)),m.include_tag)break}m.include_tag&&(f=!0)}if(f)n.show_index<n.max_page?setTimeout(function(){n.$apply(function(){n.nextPage()})},2e3):setTimeout(function(){o.anwser="right",e.check_all_anwser_for_grammar(n.gb_data.sentences,n.gb_data,!0)},2e3),n.act13_no_tag_message="You are right!";else{n.gb_data.grammar.anwser_wrong=!0,n.act13_no_tag_message="There is a problem in your answer. Try again!",3==n.check_time&&(n.select_forms?(n.grammar_wrong=!1,n.act13_no_tag_message="There is a problem in your answer. Please use form below:"):n.show_infos=!0),n.check_time>=4&&(o.anwser="wrong",e.check_all_anwser_for_grammar(n.gb_data.sentences,n.gb_data,!0));var r=t.get_grammar_for_str(a,"act13",s.user.id);r.then(function(e){n.act13_obj=e;for(var t=n.act13_obj.in_db_grammars,a=t.length-1;a>=0;a--)t[a].get("error_grammar")[0]&&(n.grammar_wrong=!0)})}})}}}}]),angular.module("triReviewModule").directive("act12course",["CourseExerciseService","$mdDialog","CourseReviewService","$rootScope",function(e,n,t){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",dialogs:"=",dia_max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act12.tmpl.html",link:function(a){a.anwser_right=!0,a.item_tags=t.get_grammar_tags(),a.dialogs=t.act12_options(a.gb_data.dialogs,a.show_index),responsiveVoice.speak("correct and complete the conversation. There are many errors!","UK English Male"),a.showNext=function(){for(var e=!0,n=a.dialogs.length-1;n>=0;n--)if(a.dialogs[n].act12_show)for(var t=a.dialogs[n].data_objs,s=t.length-1;s>=0;s--)if(t[s].is_option){e=!1;break}return e},a.act12Next=function(){a.show_index+1<a.dia_max_page?(a.show_index++,a.dialogs=t.act12_options(a.dialogs,a.show_index)):(a.next_btn_disable=!0,e.check_all_anwser_for_grammar(a.dialogs,a.gb_data,a.anwser_right),setTimeout(function(){n.cancel()},2e3))},a.act12SelectWord=function(e,n){e.act12_inputs||(e.act12_inputs=[]);var t=e.act12_inputs.indexOf(n);t>-1?(e.act12_inputs.splice(t,1),e.act12_message=""):n.is_option?(n.input=n.lemma,e.act12_message="Yes, that's a mistake!",e.act12_inputs.push(n)):e.act12_message="That isn't a mistake!"},a.act12ChangeLemma=function(s,o){s.lemma=s.input,s.lemma==s.right_lemma?(o.act12_message="You are right!",s.anwser="right"):(o.act12_message="You are wrong!",s.anwser="wrong");for(var i=!0,r=!0,l=a.dialogs.length-1;l>=0;l--){var d=a.dialogs[l];if(d.act12_show)for(var c=d.data_objs.length-1;c>=0;c--)d.data_objs[c].is_option&&!d.data_objs[c].anwser&&(i=!1),d.data_objs[c].is_option&&"right"!=d.data_objs[c].anwser&&(r=!1)}i&&r&&(o.act12_message="You are right!",o.show_progress_bar=!0,a.show_index+1<a.dia_max_page?setTimeout(function(){a.$apply(function(){o.show_progress_bar=!1,a.show_index++,a.dialogs=t.act12_options(a.dialogs,a.show_index)})},2e3):(e.check_all_anwser_for_grammar(a.dialogs,a.gb_data,a.anwser_right),setTimeout(function(){n.cancel()},2e3)))}}}}]),angular.module("triReviewModule").directive("act11course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",dialogs:"=",dia_max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act11.tmpl.html",link:function(t){t.item_tags=n.get_grammar_tags(),t.anwser_right=!0,t.dialogs=n.act11_options(t.gb_data.dialogs,t.show_index),responsiveVoice.speak("Complete the conversation.","UK English Male"),t.showNext=function(){for(var e=!0,n=t.dialogs.length-1;n>=0;n--)if(t.dialogs[n].act11_show&&t.dialogs[n].act11_anwser_show)for(var a=t.dialogs[n].data_objs,s=a.length-1;s>=0;s--)if(a[s].is_option){e=!1;break}return e},t.act11Next=function(){t.show_index+1<t.dia_max_page?(t.show_index++,t.dialogs=n.act11_options(t.dialogs,t.show_index)):(t.next_btn_disable=!0,e.check_all_anwser_for_grammar(t.dialogs,t.gb_data,t.anwser_right))},t.act11ChangeLemma=function(a,s){a.input_space=a.act11_input,a.hide_label=a.act11_input?!0:!1,a.act11_input==a.lemma?(s.act11_message="You are right!",a.anwser="right"):(s.act11_message="You are wrong!",a.anwser="wrong",t.anwser_right=!1);for(var o=!0,i=!0,r=s.data_objs.length-1;r>=0;r--)s.data_objs[r].is_option&&!s.data_objs[r].anwser&&(o=!1),s.data_objs[r].is_option&&"right"!=s.data_objs[r].anwser&&(i=!1);o&&i&&(s.act11_message="You are right!",s.show_progress_bar=!0,t.show_index+1<t.dia_max_page?setTimeout(function(){t.$apply(function(){s.show_progress_bar=!1,t.show_index++,t.dialogs=n.act11_options(t.dialogs,t.show_index)})},2e3):setTimeout(function(){e.check_all_anwser_for_grammar(t.dialogs,t.gb_data,t.anwser_right)},2e3))}}}}]),angular.module("triReviewModule").directive("act10course",["CourseExerciseService","CourseReviewService","$rootScope",function(e,n){return{$scope:{gb_data:"=",show_index:"=",max_page:"=",dialogs:"=",dia_max_page:"="},restrict:"AE",replace:"true",templateUrl:"app/grammar-course/Directive/act10.tmpl.html",link:function(t){t.anwser_right=!0,t.item_tags=n.get_grammar_tags(),t.dialogs=n.act10_options(t.gb_data.dialogs,t.show_index),responsiveVoice.speak("Complete the conversation.","UK English Male"),t.showNext=function(){for(var e=!0,n=t.dialogs.length-1;n>=0;n--)if(t.dialogs[n].show)for(var a=t.dialogs[n].data_objs,s=a.length-1;s>=0;s--)if(a[s].is_option){e=!1;break}return e},t.act10Next=function(){t.show_index+1<t.dia_max_page?(t.show_index++,t.dialogs=n.act10_options(t.dialogs,t.show_index)):(t.next_btn_disable=!0,e.check_all_anwser_for_grammar(t.dialogs,t.gb_data,t.anwser_right))},t.act10Class=function(e,n){return n.act10_show_class&&n.input_space==e&&e==n.lemma?"green_bg":n.act10_show_class&&n.input_space==e&&e!=n.lemma?"grey_bg":void 0},t.act10CheckForm=function(a,s,o){s.input_space=a,s.lemma==a?(o.act10_message="You are right!",s.anwser="right",s.act10_show_class=!0):(o.act10_message="You are wrong!","wrong"==s.anwser,t.anwser_right=!1,s.act10_show_class=!0);for(var i=!0,r=!0,l=t.dialogs.length-1;l>=0;l--){var d=t.dialogs[l];if(d.show)for(var c=d.data_objs.length-1;c>=0;c--)d.data_objs[c].is_option&&!d.data_objs[c].anwser&&(i=!1),d.data_objs[c].is_option&&"right"!=d.data_objs[c].anwser&&(r=!1)}i&&r&&(o.act10_message="You are right!",o.show_progress_bar=!0,t.show_index+1<t.dia_max_page?setTimeout(function(){t.$apply(function(){o.show_progress_bar=!1,t.show_index++,t.dialogs=n.act10_options(t.dialogs,t.show_index)})},2e3):setTimeout(function(){e.check_all_anwser_for_grammar(t.dialogs,t.gb_data,t.anwser_right)},2e3))}}}}]),angular.module("triAngular",["720kb.socialshare","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngMaterial","ngFileUpload","ui.router","pascalprecht.translate","LocalStorageModule","googlechart","chart.js","linkify","ui.calendar","angularMoment","textAngular","hljs","triAngularAuthentication","triAngularEmail","triNoticeModule","triClassModule","triReviewModule","triWordModule","triStudyNotesModule","triGrammarCourseModule"]).constant("APP",{name:"Wordiser",logo:"assets/images/logo.png",version:"1.0",languages:[{name:"LANGUAGES.ENGLISH",key:"en"},{name:"LANGUAGES.FRENCH",key:"fr"},{name:"LANGUAGES.SPANISH",key:"sp"}],defaultSkin:"plumb-purple"}).constant("API_CONFIG",{url:"http://triangular-api.oxygenna.com/"}).config(["$stateProvider","$urlRouterProvider","$translateProvider","$translatePartialLoaderProvider","localStorageServiceProvider","APP",function(e,n,t,a,s,o){t.useLoader("$translatePartialLoader",{urlTemplate:"{part}/il8n/{lang}.json"}),a.addPart("app"),t.useSanitizeValueStrategy(null),t.useLoaderCache(!0);var i=[];for(var r in o.languages)i.push(o.languages[r].key);t.registerAvailableLanguageKeys(i,{en_US:"en",en_UK:"en"}).use("en"),t.useLocalStorage(),e.state("admin-panel",{"abstract":!0,templateUrl:"app/layouts/admin-panel/admin-panel.tmpl.html",data:{toolbar:{extraClass:"",background:!1,shrink:!0}}}).state("admin-panel.default",{"abstract":!0,views:{sidebarLeft:{templateUrl:"components/sidebar-left/sidebar-left.tmpl.html",controller:"SidebarLeftController"},sidebarRight:{templateUrl:"components/sidebar-right/sidebar-right.tmpl.html",controller:"SidebarRightController"},sidebarSearch:{templateUrl:"components/sidebar-search/sidebar-search.tmpl.html",controller:"SidebarSearchController"},sidebarAddWord:{templateUrl:"components/addword/sidebar-add-word.tmpl.html",controller:"SidebarAddWordController"},sidebarFilter:{templateUrl:"components/sidebar-filter/sidebar-filter.tmpl.html",controller:"SidebarFilterController"},toolbar:{templateUrl:"components/toolbars/default.tmpl.html",controller:"DefaultToolbarController"},content:{template:'<div id="admin-panel-content-view" flex ui-view></div>'}}}).state("admin-panel-no-scroll",{"abstract":!0,templateUrl:"app/layouts/admin-panel/admin-panel.tmpl.html",data:{toolbar:{extraClass:"",background:!1,shrink:!0}}}).state("admin-panel-no-scroll.default",{"abstract":!0,views:{sidebarLeft:{templateUrl:"components/sidebar-left/sidebar-left.tmpl.html",controller:"SidebarLeftController"},sidebarRight:{templateUrl:"components/sidebar-right/sidebar-right.tmpl.html",controller:"SidebarRightController"},sidebarSearch:{templateUrl:"components/sidebar-search/sidebar-search.tmpl.html",controller:"SidebarSearchController"},sidebarAddWord:{templateUrl:"components/addword/sidebar-add-word.tmpl.html",controller:"SidebarAddWordController"},sidebarFilter:{templateUrl:"components/sidebar-filter/sidebar-filter.tmpl.html",controller:"SidebarFilterController"},toolbar:{templateUrl:"components/toolbars/default.tmpl.html",controller:"DefaultToolbarController"},content:{template:'<div id="admin-panel-content-view" flex ui-view></div>'}}}).state("404",{url:"/404",templateUrl:"404.tmpl.html",controller:["$scope","$state","APP",function(e,n,t){e.app=t,e.goHome=function(){n.go("admin-panel.default.home")}}]}).state("update",{url:"/update",templateUrl:"update.tmpl.html",controller:["$scope","$state","APP",function(){}]}).state("500",{url:"/500",templateUrl:"500.tmpl.html",controller:["$scope","$state","APP",function(e,n,t){e.app=t,e.goHome=function(){n.go("admin-panel.default.home")}}]}),n.when("","/home"),n.when("/","/home"),n.otherwise("/home"),s.setPrefix("triAngular").setStorageType("sessionStorage")}]).config(["$mdThemingProvider","triThemingProvider","triSkinsProvider","APP",function(e,n,t,a){e.definePalette("white",{50:"ffffff",100:"ffffff",200:"ffffff",300:"ffffff",400:"ffffff",500:"ffffff",600:"ffffff",700:"ffffff",800:"ffffff",900:"ffffff",A100:"ffffff",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"dark"});var s=e.extendPalette("purple",{500:"5d00bb",50:"f5ebff",300:"ff3868",200:"c285ff",400:"850aff",700:"008000",900:"a0a0a0",A100:"A0A0A0",A200:"5d00bb",A400:"5d00bb",A700:"5d00bb"});e.definePalette("myPurple",s),e.definePalette("black",{50:"e1e1e1",100:"b6b6b6",200:"8c8c8c",300:"646464",400:"4d4d4d",500:"3a3a3a",600:"2f2f2f",700:"232323",800:"1a1a1a",900:"121212",A100:"ffffff",A200:"ffffff",A400:"ffffff",A700:"ffffff",contrastDefaultColor:"light"}),n.theme("cyan").primaryPalette("cyan").accentPalette("amber").warnPalette("deep-orange"),n.theme("white-cyan").primaryPalette("white").accentPalette("cyan",{"default":"500"}).warnPalette("deep-orange"),t.skin("cyan-cloud","Cyan Cloud").sidebarTheme("cyan").toolbarTheme("white-cyan").logoTheme("cyan").contentTheme("cyan"),n.theme("red").primaryPalette("red").accentPalette("amber").warnPalette("purple"),n.theme("white-red").primaryPalette("white").accentPalette("red",{"default":"500"}).warnPalette("purple"),t.skin("red-dwarf","Red Dwarf").sidebarTheme("red").toolbarTheme("white-red").logoTheme("red").contentTheme("red"),n.theme("purple").primaryPalette("myPurple").accentPalette("myPurple").warnPalette("amber"),n.theme("white-purple").primaryPalette("white").accentPalette("purple",{"default":"400"}).warnPalette("deep-orange"),t.skin("plumb-purple","Plumb Purple").sidebarTheme("purple").toolbarTheme("white-purple").logoTheme("purple").contentTheme("purple"),n.theme("dark").primaryPalette("black").accentPalette("amber").warnPalette("deep-orange").dark(),t.skin("dark-knight","Dark Knight").sidebarTheme("dark").toolbarTheme("dark").logoTheme("dark").contentTheme("dark"),n.theme("blue-grey").primaryPalette("blue-grey").accentPalette("amber").warnPalette("orange"),n.theme("white-blue-grey").primaryPalette("white").accentPalette("blue-grey",{"default":"400"}).warnPalette("orange"),t.skin("battleship-grey","Battleship Grey").sidebarTheme("blue-grey").toolbarTheme("white-blue-grey").logoTheme("blue-grey").contentTheme("blue-grey"),n.theme("orange").primaryPalette("orange",{"default":"800"}).accentPalette("lime").warnPalette("amber"),n.theme("white-orange").primaryPalette("white").accentPalette("orange",{"default":"500"}).warnPalette("lime"),t.skin("zesty-orange","Zesty Orange").sidebarTheme("orange").toolbarTheme("white-orange").logoTheme("orange").contentTheme("orange"),n.theme("indigo").primaryPalette("myPurple",{"default":"500"}).accentPalette("red").warnPalette("lime"),t.skin("indigo-island","Indigo Island").sidebarTheme("indigo").toolbarTheme("indigo").logoTheme("indigo").contentTheme("indigo"),n.theme("light-green").primaryPalette("light-green",{"default":"400"}).accentPalette("amber").warnPalette("deep-orange"),n.theme("white-light-green").primaryPalette("white").accentPalette("light-green",{"default":"400"}).warnPalette("deep-orange"),t.skin("kermit-green","Kermit Green").sidebarTheme("light-green").toolbarTheme("white-light-green").logoTheme("light-green").contentTheme("light-green"),t.useSkinCookie(!0),t.setSkin(a.defaultSkin)}]).config(["ChartJsProvider",function(e){e.setOptions({colours:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0"],responsive:!0})}]).run(["$rootScope","$window","$state",function(e,n){-1!==n.navigator.platform.indexOf("Win")&&(e.bodyClasses=["os-windows"])}]).value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["line","bar","geochart","scatter"],language:"en"}}),angular.module("triAngular").controller("AdminController",["HelperService","$rootScope","$scope","$element","$timeout","$mdSidenav","$mdUtil","$state",function(e,n,t,a,s,o,i,r){t.toolbarShrink=void 0,t.isMenuLocked=!0,t.isMenuCollapsing=!1,t.isHovering=!1,void 0!==r.current.data&&void 0!==r.current.data.toolbar&&r.current.data.toolbar.shrink===!0&&(t.toolbarShrink=!0);var l=function(){var n=e.getCurrentTutorial(r.current.name);n.then(function(e){t.tutorial=e})};l(),t.speak=function(e,n){responsiveVoice.speak(e,n)},n.$on("hide_toturial",function(){t.tutorial=!1}),n.$on("$stateChangeSuccess",function(e,n,t,a){var s=n.name,o=a.name;s!=o&&l()}),t.goToHelp=function(){r.go("admin-panel.default.help-wordiser")},t.closeTutorial=function(){var a=n.user,s=r.current.name,o=e.getLetterStr(s),i=a.get(o)?a.get(o):1;i+=1,a.set(o,i),a.save(),t.tutorial=!1},t.understand=function(){var t=n.user,a=r.current.name;a=e.getLetterStr(a);var s=t.get(a)?t.get(a):1;s+=1,t.set(a,s),t.save().then(function(){l()})},t.activateHover=function(){t.isHovering=!0},t.removeHover=function(){t.isHovering=!1},t.isMenuLocked=!t.isMenuLocked,t.isMenuCollapsing=!t.isMenuLocked,t.toggleMenuLock=function(){t.isMenuLocked=!t.isMenuLocked,t.isMenuCollapsing=!t.isMenuLocked,t.isMenuCollapsing===!0&&(t.isHovering=!1,s(function(){t.isMenuCollapsing=!1},400))},t.menuClass=function(){var e=t.isMenuLocked===!0?"":t.isMenuCollapsing===!0?"is-collapsing admin-sidebar-collapsed":1==t.isHovering?"admin-sidebar-collapsed hover":"admin-sidebar-collapsed";return e}}]),angular.module("triAngular").directive("adminPanelContent",["$compile","$templateRequest","$mdDialog",function(e,n,t){return{restrict:"A",link:function(a,s){a.$on("$stateChangeStart",function(){var e=s.parent();e.scrollTop(0)}),a.$on("$viewContentLoaded",function(){var o=s.find("#admin-panel-content-view");n("components/footer/footer.tmpl.html").then(function(n){var s=e(n),i=s(a);o.append(i),a.showDisclaimer=function(){t.show({controller:"showDisclaimerController",templateUrl:"app/review-module/dialog-disclaimer.tmpl.html",clickOutsideToClose:!0,targetEvent:a.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})}},function(){console.error("Could not load footer tempalate")})})}}}]),angular.module("triAngularAuthentication").controller("SignupController",["HelperService","InitService","$mdDialog","$q","$rootScope","$scope","$state","$mdToast","$http","$filter","API_CONFIG",function(e,n,t,a,s,o,i,r){o.user={},s.auto_set_language&&(o.user.native=s.auto_set_language),o.languages=e.getLanguage();var l=function(e){var n=a.defer(),t=Parse.Object.extend("User"),s=new Parse.Query(t);return s.equalTo("username",e),s.find({success:function(e){n.resolve(e)}}),n.promise},d=function(e){var n=a.defer(),t=Parse.Object.extend("User"),s=new Parse.Query(t);return s.equalTo("email",e),s.find({success:function(e){n.resolve(e)}}),n.promise};o.userRoleChange=function(){var e=t.confirm().title("Are you a "+o.user.role+"?").ok("YES").cancel("No");t.show(e).then(function(){},function(){o.user.role=""})},o.popPrivacy=function(){t.show({controller:"DialogController",templateUrl:"app/authentication/signup/privacy-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:o.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},o.agreeYes=function(){o.agree=!0,o.agreeno=!1},o.agreeNO=function(){o.agree=!1,o.agreeno=!0},o.checkSignUpCode=function(){o.show_signupcode_error=o.user.signupcode&&745==o.user.signupcode?!1:!0},o.checkUserName=function(){var e=l(o.user.username);e.then(function(e){o.show_username_error=e[0]&&""!=o.user.username?!0:!1})},o.checkEmail=function(){var e=d(o.user.email);e.then(function(e){o.show_email_error=e[0]&&""!=o.user.email?!0:!1})},o.signupClick=function(){var e=(l(o.user.username),new Parse.User);e.set("email",o.user.email),e.set("password",o.user.password),e.set("username",o.user.username);var t="";e.get("username")&&(t+=e.get("username").toLowerCase()),e.get("email")&&(t+=e.get("email").toLowerCase()),e.set("userserchdata",t),e.set("school",o.user.school),e.set("user_role",o.user.role),e.set("level",o.user.level),e.set("native",o.user.native),e.signUp(null,{success:function(e){s.auto_set_language=!1,n.init(e),s.$broadcast("userRegister",e.get("user_role"),e.id,e.get("username")),i.go(e.get("level")||"student"!=e.get("user_role")?"admin-panel.default.home":"admin-panel.default.level-test"),"teacher"==e.get("user_role")&&Parse.Cloud.run("send_teacher_signup_emails"),r.show(r.simple().content("Sign up succeeded!").position("bottom right").hideDelay(5e3))},error:function(e,n){r.show(r.simple().content("There is a problem: "+n.message).position("bottom right").hideDelay(5e3))}})}}]).controller("DialogController",["$mdDialog","$scope",function(e,n){n.cancel=function(){e.cancel()},n.close=function(){e.cancel()}}]),angular.module("triAngularAuthentication").directive("samePassword",function(){return{restrict:"A",require:"ngModel",scope:{samePassword:"="},link:function(e,n,t,a){a.$viewChangeListeners.push(function(){a.$setValidity("samePassword",e.samePassword.$modelValue===a.$modelValue),e.samePassword.$setValidity("samePassword",e.samePassword.$modelValue===a.$modelValue)})}}}),angular.module("triAngularAuthentication").controller("ProfileController",["$translate","HelperService","CourseReviewService","$cookies","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s,o,i,r,l,d){i.languages=n.getLanguage();var c="true"==a.get("auto_screen")?!0:!1;i.scuser={name:l.user.get("username"),email:l.user.get("email"),location:l.user.get("location"),website:l.user.get("website"),bio:l.user.get("bio"),school:l.user.get("school"),level:l.user.get("level"),course:l.user.get("course"),point:l.user.get("point"),user_role:l.user.get("user_role"),"native":l.user.get("native"),spelling:l.user.get("spelling"),total:l.user.get("total"),auto_tutorial:l.user.get("auto_tutorial"),receive_review_emails:!l.user.get("not_receive_review_emails"),auto_screen:c,course_outline_name:l.user.get("course_outline_name"),current:"",password:"",confirm:""},i.useTranslate=function(n){e.use(n)},i.autoScreen=function(){var e=new Date;e.setTime(e.getTime()+576e5),a.put("auto_screen",!i.scuser.auto_screen,{expires:e})},i.switchTutorial=function(){l.user.set("auto_tutorial",!i.scuser.auto_tutorial),l.user.save()},i.toggleEmailsSettings=function(){var e=l.user,n=i.scuser.receive_review_emails;e.set("not_receive_review_emails",n),e.save()},i.popEditAvatar=function(){s.show({controller:"editAvatarController",templateUrl:"app/authentication/profile/edit-avatar-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:i.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},i.logout=function(){Parse.User.logOut().then(function(){l.user=!1,r.go("authentication.login")})},i.updateSettingsClick=function(){l.user.set("name",i.scuser.name),l.user.set("location",i.scuser.location),l.user.set("website",i.scuser.website),l.user.set("bio",i.scuser.bio),l.user.set("user_role",i.scuser.user_role),l.user.set("school",i.scuser.school),l.user.set("level",i.scuser.level),l.user.set("native",i.scuser.native),l.user.set("spelling",i.scuser.spelling),l.user.save(),d.show(d.simple().content("Details updated!").position("bottom right").hideDelay(3e3))},i.resetPasswordClick=function(){Parse.User.requestPasswordReset(l.user.get("email"),{success:function(){d.show(d.simple().content("A password reset request was successfully sent. Please check your Email!").position("bottom right").hideDelay(3e3))},error:function(e){alert("Error: "+e.code+" "+e.message)}})},i.resetToturial=function(){for(var e=l.user,t=n.getStates(),a=t.states.length-1;a>=0;a--){var s=n.getLetterStr(t.states[a]),o=e.get(s)?e.get(s):1;o>1&&e.set(s,1)}e.save(),d.show(d.simple().content("Tutorial reset completed!").position("bottom right").hideDelay(3e3))}}]).controller("editAvatarController",["HelperService","$timeout","Upload","UploadService","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s,o,i,r,l){i.rs=l,i.data={},i.$watch("files",function(){i.upload(i.files)}),i.$watch("file",function(){null!=i.file&&(i.files=[i.file])}),i.log="",i.upload=function(e){if(e&&e[0]){i.upload_obj={};var n=a.uploadFile("avatars","avatar",e[0]);i.data.uploading=!0,n.then(function(e){i.upload_obj=e;var n=e.image_link;e.succeed?(l.user_avatar=n,l.user.set("user_avatar",n),l.user.save(),i.data.uploading=!1):i.data.uploading=!1})}},i.changeAvatar=function(e){l.user.set("user_avatar",e),l.user.save(),l.user_avatar=e},i.cancel=function(){s.cancel()},i.closeDialog=function(){s.cancel()}}]),angular.module("triAngularAuthentication").controller("LoginController",["$cookies","$stateParams","$translate","InitService","$q","SideMenu","$mdToast","$scope","$state","$rootScope",function(e,n,t,a,s,o,i,r,l,d){var c=e.get("login_cookies");if(!c){var m=new Date;m.setTime(m.getTime()+72e5),e.put("login_cookies",!0,{expires:m}),i.show({hideDelay:1e5,position:"bottom right",controller:"cookiesToastController",locals:{},templateUrl:"app/authentication/login/cookies-toast-template.tmpl.html"})}"authentication.loginlanguage"==l.current.name&&(t.use("sp"),d.auto_set_language="spanish"),d.user=Parse.User.current();var p=function(e,n){Parse.User.logIn(e,n,{success:function(e){a.init(e),l.go(e.get("level")||"student"!=e.get("user_role")?"admin-panel.default.home":"admin-panel.default.level-test")},error:function(e,n){i.show(i.simple().content("There is a problem: "+n.message).position("bottom right").hideDelay(5e3))}})};r.useTranslate=function(e){t.use(e),d.auto_set_language=!1},r.loginClick=function(){var e=r.account.name.indexOf("@");if(0>e)p(r.account.name,r.account.password);else{var n=r.account.name;Parse.Cloud.run("getUserByEmail",{email:n}).then(function(e){if(d.auto_set_language=!1,e){var n=e.get("username");p(n,r.account.password)}else p(r.account.name,r.account.password)})}}}]).controller("LoginStudentController",["InitService","$q","SideMenu","$mdToast","$scope","$state","$rootScope",function(e,n,t,a,s,o){var i="Demo Student",r="demostudent",l=function(n,t){Parse.User.logIn(n,t,{success:function(n){e.init(n),o.go("admin-panel.default.home")},error:function(e,n){a.show(a.simple().content("There is a problem: "+n.message).position("bottom right").hideDelay(5e3))}})};l(i,r)}]).controller("cookiesDialogController",["$mdToast","ClassService","$mdDialog","StudyNotesService","$scope",function(e,n,t,a,s){s.cancel=function(){t.cancel()},s.close=function(){t.cancel()}}]).controller("cookiesToastController",["$mdSidenav","$mdUtil","$mdToast","$state","$mdDialog","$stateParams","$rootScope","$scope",function(e,n,t,a,s,o,i,r){r.closeDialog=function(){t.hide()},r.openCookiesDialog=function(){t.hide(),s.show({controller:"cookiesDialogController",templateUrl:"app/authentication/login/cookies-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,focusOnOpen:!1})}}]).controller("LoginTeacherController",["InitService","$q","SideMenu","$mdToast","$scope","$state","$rootScope",function(e,n,t,a,s,o){var i="Demo Teacher",r="demoteacher",l=function(n,t){Parse.User.logIn(n,t,{success:function(n){e.init(n),o.go("admin-panel.default.home")},error:function(e,n){a.show(a.simple().content("There is a problem: "+n.message).position("bottom right").hideDelay(5e3))}})};l(i,r)}]),angular.module("triAngularAuthentication").controller("LockController",["$scope","$state",function(e,n){e.user={name:"Morris Onions",email:"info@oxygenna.com",password:"demo"},e.loginClick=function(){n.go("admin-panel.default.dashboard-general")},e.logoutClick=function(){n.go("public.auth.login")}}]),angular.module("triAngularAuthentication").controller("ForgotController",["$scope","$state","$mdToast","$filter","$http","API_CONFIG",function(e,n,t){e.user={email:"example@wordiser.com"},e.resetClick=function(){Parse.User.requestPasswordReset(e.user.email,{success:function(){t.show(t.simple().content("Sent! Please check email."+e.user.email).position("bottom right").highlightAction(!0).hideDelay(0)).then(function(){n.go("public.auth.login")})},error:function(e){t.show(t.simple().content(e.message+" Please sign up!").position("bottom right").hideDelay(5500))}})}}]),angular.module("triAngularAuthentication").controller("ContactemailsController",["$translate","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s,o,i){var r=Parse.Object.extend("WEBContact"),l=Parse.Object.extend("SBEmail"),d=new Parse.Query(r);d.notEqualTo("remove",!0),d.limit(1e3),d.addDescending("createdAt"),d.find({success:function(e){a.contacts=e}});var l=Parse.Object.extend("SBEmail"),d=new Parse.Query(l);d.addDescending("createdAt"),d.notEqualTo("remove",!0),d.limit(1e3),d.find({success:function(e){a.subscribe=e}}),a.deleteMessage=function(t){var s=n.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));n.show(s).then(function(){var e=a.contacts.indexOf(t);e>-1&&a.contacts.splice(e,1),t.set("remove",!0),t.save().then(function(){i.show(i.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))})})},a.deleteSb=function(t){var s=n.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));n.show(s).then(function(){var e=a.subscribe.indexOf(t);e>-1&&a.subscribe.splice(e,1),t.set("remove",!0),t.save().then(function(){i.show(i.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))})})}}]).controller("UpdatedefineController",["BuildDataService","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a){a.limit=20,a.getDict=function(e){var n=(e-1)*a.limit,t=Parse.Object.extend("Dict"),s=new Parse.Query(t);s.equalTo("need_update_data",!0),s.skip(n),s.limit(a.limit),s.descending("updatedAt"),s.count({success:function(e){console.log(e)}}),s.find({success:function(e){a.$apply(function(){a.defines=e})}})},a.getWord=function(e){var n=(e-1)*a.limit,t=Parse.Object.extend("Fre60K"),s=new Parse.Query(t);s.equalTo("need_update_data",!0),s.skip(n),s.limit(a.limit),s.descending("updatedAt"),s.find({success:function(e){a.$apply(function(){a.words=e})}})},a.getAddCat=function(e){var n=(e-1)*a.limit,t=Parse.Object.extend("AddCategory"),s=new Parse.Query(t);s.equalTo("need_update_data",!0),s.limit(50),s.descending("updatedAt"),s.skip(n),s.limit(a.limit),s.find({success:function(e){a.$apply(function(){a.add_words=e})}})},a.getFixedWord=function(){var e=Parse.Object.extend("FixedRecord"),n=new Parse.Query(e);n.find({success:function(e){a.$apply(function(){a.fixed_words=e})}})},a.category_page=1,a.getAddCat(a.category_page),a.dict_page=1,a.getDict(a.dict_page),a.word_page=1,a.getWord(a.word_page),a.getFixedWord(),a.editImage=function(e){var t=e.get("type");
if("word"==t)var s=Parse.Object.extend("Dict");else var s=Parse.Object.extend("AddCategory");var o=new Parse.Query(s);o.equalTo("objectId",e.get("fixed_id")),o.first({success:function(e){e&&n.show({controller:"popImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:a.menuClickEvent,locals:{define:e,getFocus:!0},focusOnOpen:!1})}})},a.deleteFixdWord=function(e){var n=a.fixed_words[e];a.fixed_words.splice(e,1),n.destroy()},a.prePageCat=function(){a.category_page--,a.getAddCat(a.category_page)},a.nextPageCat=function(){a.category_page++,a.getAddCat(a.category_page)},a.prePageDict=function(){a.dict_page--,a.getDict(a.dict_page)},a.nextPageDict=function(){a.dict_page++,a.getDict(a.dict_page)},a.prePageWord=function(){a.word_page--,a.getWord(a.word_page)},a.nextPageWord=function(){a.word_page++,a.getWord(a.word_page)},a.deleteCategory=function(e){var t=n.confirm().title("Do you really want to delete this? It will delete this data in database.").ok("YES, DELETE IT!").cancel("No");n.show(t).then(function(){var n=a.add_words.indexOf(e);n>-1&&a.add_words.splice(n,1),e.destroy()})},a.updateCategory=function(n){n.disable=!0,e.updateCategoryData(n)},a.updateWordData=function(n){n.disable=!0,n.set("need_update_data",!1),n.save(),e.updateWordData(n)},a.updateDefineData=function(n){n.disable=!0,n.set("update_data_cache",!0),n.save(),e.updateDefineAndSentence(n)},a.removeDefineCheck=function(n){n.disable=!0,n.set("update_data_cache",!1),n.set("need_update_data",!1),n.set("vote_number",0),n.save(),e.updateDefineAndSentence(n)}}]).controller("IrregularController",["WordService","BuildDataService","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s,o,i,r){s.word=!1,s.clearIrregularPron=function(){for(var e=0,n=s.defines.length-1;n>=0;n--)s.defines[n].check&&e++;var a=t.confirm().title("You have select "+e+" define/s clear pronunciation.").ok("YES, CLEAR IT!").cancel("No");t.show(a).then(function(){for(var e=[],n=s.defines.length-1;n>=0;n--)s.defines[n].check&&(s.defines[n].set("uk_pron_ext",""),s.defines[n].set("uk_change_pron_ext",""),s.defines[n].set("us_pron_ext",""),s.defines[n].set("us_change_pron_ext",""),e.push(s.defines[n]));Parse.Object.saveAll(e).then(function(){r.show(r.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))})})},s.updatePron=function(){for(var e=0,n=s.defines.length-1;n>=0;n--)s.defines[n].check&&e++;var a=t.confirm().title("You have select "+e+" define/s to update pronunciation ["+s.uk_pron+"]["+s.uk_change_pron+"] UK  ["+s.us_pron+"]["+s.us_change_pron+"] US .").ok("YES, UPDATE IT!").cancel("No");t.show(a).then(function(){for(var e=[],n=s.defines.length-1;n>=0;n--)s.defines[n].check&&(s.defines[n].set("uk_pron_ext",s.uk_pron),s.defines[n].set("uk_change_pron_ext",s.uk_change_pron),s.defines[n].set("us_pron_ext",s.us_pron),s.defines[n].set("us_change_pron_ext",s.us_change_pron),e.push(s.defines[n]));Parse.Object.saveAll(e).then(function(){r.show(r.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))})})},s.search=function(){var n=e.getWordByLemma(s.search_word);n.then(function(e){s.word=e});var t=e.getDefinesLemma(s.search_word);t.then(function(e){s.defines=e})},s.clearUK=function(){s.uk_change_pron="",s.uk_pron=""},s.addUK=function(){if(s.uk_pron=s.uk_pron?s.uk_pron:"",s.uk_change_pron=s.uk_change_pron?s.uk_change_pron:"","undefined"!=typeof s.uk_pron_con&&""!=s.uk_pron_con){var e=s.uk_pron_con.split(" ");e[1]?(s.uk_pron=(s.uk_pron+" "+e[0]).trim(),s.uk_change_pron=(s.uk_change_pron+" "+e[1].replace("[","").replace("]","")).trim()):(s.uk_pron=(s.uk_pron+" "+e[0]).trim(),s.uk_change_pron=(s.uk_change_pron+" "+e[0]).trim())}if("undefined"!=typeof s.uk_pron_sound&&""!=s.uk_pron_sound){var e=s.uk_pron_sound.split(" ");s.uk_pron=(s.uk_pron+" "+e[0]).trim(),s.uk_change_pron=(s.uk_change_pron+" "+e[1].replace("[","").replace("]","")).trim()}s.uk_pron_sound="",s.uk_pron_con=""},s.clearUS=function(){s.us_change_pron="",s.us_pron=""},s.addUS=function(){if(s.us_pron=s.us_pron?s.us_pron:"",s.us_change_pron=s.us_change_pron?s.us_change_pron:"","undefined"!=typeof s.us_pron_con&&""!=s.us_pron_con){var e=s.us_pron_con.split(" ");e[1]?(s.us_pron=(s.us_pron+" "+e[0]).trim(),s.us_change_pron=(s.us_change_pron+" "+e[1].replace("[","").replace("]","")).trim()):(s.us_pron=(s.us_pron+" "+e[0]).trim(),s.us_change_pron=(s.us_change_pron+" "+e[0]).trim())}if("undefined"!=typeof s.us_pron_sound&&""!=s.us_pron_sound){var e=s.us_pron_sound.split(" ");s.us_pron=(s.us_pron+" "+e[0]).trim(),s.us_change_pron=(s.us_change_pron+" "+e[1].replace("[","").replace("]","")).trim()}s.us_pron_sound="",s.us_pron_con=""}}]).controller("MembersController",["ClassService","HelperService","$stateParams","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s,o,i,r){var l=Parse.Object.extend("User");o.table={},o.table.id=!1,o.table.name=!0,o.table.email=!0,o.table.login=!0,o.table.role=!0,o.table.school=!0,o.table.native=!0,o.table.date=!1,o.table.actions=!1,t.page=Number(t.page),t.page<=1||isNaN(t.page)?(t.pre=1,t.nex=2):(t.pre=t.page-1,t.nex=t.page+1),o.page=t.page,o.nex=t.nex,o.pre=t.pre,o.filter_user_btn_disable=!1;var d=function(){var e=o.page;Parse.Cloud.run("queryUsers",{page:e}).then(function(e){for(var n=e.length-1;n>=0;n--){var t=new Date,a=e[n].get(e[n].get("last_login")?"last_login":"updatedAt"),s=t-a,i=parseInt(s/864e5),r=e[n].get("last_email_time_leave_time")?e[n].get("last_email_time_leave_time"):t-864e6;r=parseInt((t-r)/864e5),e[n].leave_time=i,e[n].last_email_time_leave_time=r}o.$apply(function(){o.users=e,o.filter_user_btn_disable=!1})})};d();var l=Parse.Object.extend("User"),c=new Parse.Query(l);c.notEqualTo("remove",!0),c.count({success:function(e){o.$apply(function(){o.num=e})}}),o.searchStudentByEmail=function(){if(o.if_email=n.checkEmail(o.student.email),r.searchHelperMsg="Searching---"+o.student.email,""!=o.student.email){var t=e.searchStudentByEmail(o.student.email);t.then(function(e){o.users=e})}else d()},o.contact=function(e){a.show({controller:"ContactUserDialogController",templateUrl:"app/authentication/admin/template/contact-to-user-dialog.tmpl.html",locals:{user:e}})},o.sendLeaveTimeEmail=function(e){e.send_leave_time_email_disabe=!0;var n=e.id;Parse.Cloud.run("send_leave_time_email",{user_id:n})},o.clearOrder=function(){o.filter_user_btn_disable=!0,r.member_order=!1,d()},o.orderByLogin=function(){o.filter_user_btn_disable=!0,r.member_order="login_time",d()},o.deleteUser=function(e){var n=a.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));a.show(n).then(function(){var n=o.users.indexOf(e);n>-1&&o.users.splice(n,1),Parse.Cloud.run("deleteUser",{user_id:e.id})})}}]).controller("TutorialController",["$translate","HelperService","$mdDialog","ParseService","$scope","$state","$rootScope","$mdToast",function(e,n,t,a,s){var o=Parse.Object.extend("Tutorial");s.languages=n.getLanguage();var i=new Parse.Query(o);i.limit(1e3),i.addDescending("createdAt"),i.find({success:function(e){s.$apply(function(){s.tutorials=e})}}),s.clearTags=function(){s.data.text=s.data.text.replace(/<(?:.|\n)*?>/gm,"")},s.changeFilter=function(e){s.tutorials=[];var n=new Parse.Query(o);n.limit(1e3),n.addDescending("createdAt"),"all"!=e&&n.equalTo("language",e),n.find({success:function(e){s.$apply(function(){s.tutorials=e})}})},s.delete=function(n){var a=t.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));t.show(a).then(function(){var e=s.tutorials.indexOf(n);e>-1&&s.tutorials.splice(e,1),n.destroy()})},s.understand=function(e){var n=e.get("state"),t=e.get("order")+1,a=e.get("role"),i=new Parse.Query(o);i.equalTo("state",n),i.equalTo("order",t),i.equalTo("viewed",!0),i.equalTo("role",a),i.first({success:function(e){s.tutorial=e}})},s.closeTutorial=function(){s.tutorial=!1},s.view=function(e){s.tutorial=e},s.edit=function(e){s.tutorial=e,s.data={},s.data.title=e.get("title"),s.data.role=e.get("role"),s.data.language=e.get("language"),s.data.page=e.get("page"),s.data.order=e.get("order"),s.data.text=e.get("text"),s.data.viewed=e.get("viewed")},s.copy=function(e){s.tutorial=!1,s.data={},s.data.title=e.get("title"),s.data.role=e.get("role"),s.data.language=e.get("language"),s.data.page=e.get("page"),s.data.order=e.get("order"),s.data.text=e.get("text"),s.data.viewed=e.get("viewed")},s.save=function(){if(s.data.disable=!0,s.tutorial)var e=s.tutorial;else var e=new o;var t=Number(s.data.order);e.set("title",s.data.title),e.set("role",s.data.role),e.set("language",s.data.language),e.set("page",s.data.page),e.set("order",t),e.set("text",s.data.text),e.set("viewed",s.data.viewed),e.set("state",n.getStatesByTitle(s.data.page)),e.save().then(function(){s.tutorial||s.tutorials.unshift(e),s.data={},s.tutorial=!1})}}]).controller("CourseMangeController",["$mdToast","$mdDialog","$scope",function(e,n,t){var a=Parse.Object.extend("MyClass");t.view="courses";var s=new Parse.Query(a);s.notEqualTo("remove",!0),s.equalTo("is_course",!0),s.include("createdBy"),s.find({success:function(e){t.$apply(function(){t.courses=e})}});var o=Parse.Object.extend("User"),s=new Parse.Query(o);s.equalTo("author",!0),s.find({success:function(e){t.$apply(function(){t.users=e})}}),t.changeView=function(e){t.view=e},t.disableCourse=function(e){e.set("live",!1),Parse.Cloud.run("manage_course",{course_id:e.id,action:"disable"}).then(function(n){e=n})},t.enableCourse=function(e){e.set("live",!0),Parse.Cloud.run("manage_course",{course_id:e.id,action:"enable"}).then(function(n){e=n})}}]).controller("AdminCategoryDataController",["HelperService","ClassService","$mdToast","$mdDialog","$scope",function(e,n,t,a,s){var o=Parse.Object.extend("AddCategory");s.limit=20,s.vocab_courses=n.getVocabCourse(),s.select_course=s.vocab_courses[0],s.levels=e.getLevels(),s.level="all",s.popEdit=function(e){a.show({controller:"popEditWordController",templateUrl:"app/authentication/admin/template/pop-edit-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:s.menuClickEvent,locals:{getFocus:!0,word:e},focusOnOpen:!1})},s.notAdminData=function(){s.not_admin_data=!s.not_admin_data,s.getCourseData(s.page,s.select_course)},s.search=function(){s.getCourseData(s.page,s.select_course)},s.triggerCourse=function(e){s.select_course=e,s.page=1,s.getCourseData(s.page,s.select_course)},s.jumpPage=function(){s.limit=Number(s.limit),s.getCourseData(s.page,s.select_course)},s.prePage=function(){s.page--,s.getCourseData(s.page,s.select_course)},s.nextPage=function(){s.page++,s.getCourseData(s.page,s.select_course)},s.changeFilter=function(e){s.level=e,s.getCourseData(s.page,s.select_course)},s.checkWordClass=function(e){var n=e.get("define_obj"),t=n.get("definition"),a=(n.get("lemma"),t.trim().charAt(0));return"("!=a?"red_bg":void 0},s.getCourseData=function(e,n){s.words=[];var t=s.level,a=(new Parse.Query(o),(e-1)*s.limit),i=n.id,r=new Parse.Query(o);r.exists("sample"),r.exists("definition"),r.exists("imagesmain"),r.equalTo("type","word"),s.search_str?r.matches("name",".*"+s.search_str+".*"):("cect4"==i?r.exists("cect4"):"ielts"==i?r.exists("ielts"):"pet"==i&&r.exists("pet"),t&&"all"!=t&&r.equalTo("level",t),r.skip(a),r.limit(s.limit)),r.include("define_obj"),r.find({success:function(e){s.$apply(function(){s.words=e})}})},s.page=1,s.getCourseData(s.page,s.select_course)}]).controller("popEditWordController",["ParseService","HelperService","ClassService","$mdToast","word","$mdDialog","$scope",function(e,n,t,a,s,o,i){i.word=s,i.vocab_courses=t.getVocabCourse(),i.levels=n.getLevels();var r=e.getCategoryById(s.get("parent_cat"));r.then(function(e){i.cat=e}),i.triggerCourse=function(e){i.word.get(e.id)?i.word.set(e.id,!1):i.word.set(e.id,!0),i.word.save()},i.triggerLevel=function(e){i.word.set("level",e.name),i.word.save()},i.cancel=function(){o.cancel()},i.close=function(){o.cancel()}}]).controller("ContactUserDialogController",["$mdToast","user","$mdDialog","$scope",function(e,n,t,a){a.email={},a.send=function(){a.email.disable=!0;var s=n.get("email"),o=n.get("username"),i=a.email.content,r=a.email.subject,l=i.replace(/<(?:.|\n)*?>/gm,"").trim();Parse.Cloud.run("send_email_with_content",{email:s,username:o,content:i,title:r,text:l}).then(function(){e.show(e.simple().content("Email sent to "+s).position("bottom right").hideDelay(5e3)),t.cancel()})},a.cancel=function(){t.cancel()},a.close=function(){t.cancel()}}]),angular.module("triAngular").controller("DefaultToolbarController",["CourseReviewService","$interval","HelperService","$mdToast","ReviewService","EmailService","$window","ParseService","$rootScope","$mdDialog","$scope","$translate","$state","$element","$mdUtil","$mdSidenav","$timeout","SideMenu","APP",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_,h,v){function b(){u.css("background-image",""),void 0!==p.current.data&&void 0!==p.current.data.toolbar&&(p.current.data.toolbar.extraClass!==!1&&(c.extraClass=p.current.data.toolbar.extraClass),p.current.data.toolbar.background&&u.css("background-image","url("+p.current.data.toolbar.background+")"))}if(c.tips=t.getTips(),n(function(){l.user&&l.gb.wordListNum&&l.gb.wordListNum>0&&a.show({hideDelay:1e4,position:"top left",controller:"saveNoteToastController",templateUrl:"app/study-notes/template/save-note-toast-template.tmpl.html"})},3e4,2e3),l.$on("open_sidebar_addword",function(){c.openSideNav("sidebar-addword")}),l.$on("update_email_num",function(e,n){l.gb.new_emails=n.num}),l.user&&"student"==l.user.get("user_role")){s.get_review_time()}l.$on("update_reivew_num",function(e,n){c.userNeedReviewNumber=n.userNeedReviewNumber}),l.$on("add_one_reivew_num",function(){c.userNeedReviewNumber++}),l.wordlistNum=l.customWords?l.customWords.length:0,c.popCourseOutline=function(){var n=e.getUserCourseData();n.then(function(e){var n=e.grammar,t=e.progress;n.view=t.get("view"),d.show({controller:"CourseReviewController",templateUrl:"app/grammar-course/template/course-review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:c.menuClickEvent,locals:{grammar:n,getFocus:!0},focusOnOpen:!1})})},c.openPOPTutorial=function(){l.user;p.go("admin-panel.default.help-wordiser")},c.toolbarTypeClass=function(){return c.extraClass},c.$on("$stateChangeStart",b),b(),c.switchLanguage=function(e){m.use(e).then(function(){})},c.popReview=function(){responsiveVoice.speak("Time to study","UK English Male"),d.show({controller:"ReviewDialogController",templateUrl:"app/review-module/review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:c.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},c.openSideNav=function(e){g.debounce(function(){f(e).toggle()},300)()},c.toggleNotificationsTab=function(e){c.$parent.$broadcast("triSwitchNotificationTab",e),c.openSideNav("notifications")},c.profile=function(){p.go("admin-panel.default.profile")},c.logout=function(){Parse.User.logOut(),l.user=!1,p.go("authentication.login")},c.login=function(){p.go("authentication.login")},c.$on("newMailNotification",function(){c.emailNew=!0}),c.languages=v.languages}]).controller("emailUnreadToastController",["$mdSidenav","$mdUtil","$mdToast","$state","$mdDialog","$stateParams","$rootScope","msg","$scope",function(e,n,t,a,s,o,i,r,l){l.msg=r,l.openEmail=function(){a.go("admin-panel-no-scroll.email.inbox")}}]),angular.module("triAngular").directive("breadcrumbs",function(){return{restrict:"A",require:"^toolbar",replace:!0,scope:{breadcrumbs:"="},template:'<span class="breadcrumb" hide-sm ng-repeat="breadcrumb in breadcrumbs" ng-show="breadcrumb.active" breadcrumb="breadcrumb"></span>'}}),angular.module("triAngular").directive("breadcrumb",["$compile",function(e){return{restrict:"A",replace:!0,scope:{breadcrumb:"="},template:'<span><span>{{breadcrumb.name | translate}}<md-icon md-font-icon="icon-chevron-right" ng-show="breadcrumb.children.length > 0"></md-icon></span></span>',link:function(n,t){void 0!==n.breadcrumb.children&&t.find("span").attr("hide-sm","");var a='<span breadcrumbs="breadcrumb.children"></span>';angular.isArray(n.breadcrumb.children)&&e(a)(n,function(e){t.append(e)})}}}]),angular.module("triAngular").controller("SidebarSearchController",["$rootScope","$mdDialog","WordService","ParseService","WNService","$scope","$http","$mdSidenav","$mdUtil","$state","API_CONFIG",function(e,n,t,a,s,o,i,r,l){e.user&&"student"==e.user.get("user_role")?o.cat_check=!0:o.words_check=!0,o.openSideNav=function(e){l.debounce(function(){r(e).toggle()},300)()},o.popAddNewWord=function(){n.show({controller:"popAddNewWordController",templateUrl:"app/word-module/template/add-new-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:o.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},o.searchInputChange=function(){if(o.words_check){var e=t.searchByString(o.search_word);e.then(function(e){o.searchWordList=e})}if(o.cat_check){var e=t.searchCatByString(o.search_word);e.then(function(e){o.searchWordList=e})}o.add_search_word=""},o.searchChange=function(e){"word"==e?(o.words_check=!0,o.cat_check=!1):(o.cat_check=!0,o.words_check=!1),o.searchWordList=!1,o.search_word=""},o.openSideNav=function(e){l.debounce(function(){r(e).toggle()},300)()}}]),angular.module("triAngular").filter("startFrom",function(){return function(e,n){return n=+n,e.slice(n)}}),angular.module("triAngularAuthentication").directive("mdTable",["$filter",function(e){return{restrict:"E",scope:{columns:"=",contents:"=",filters:"="},link:function(n,t,a){var s=[],o=null,i=!1;n.pageSize=void 0===a.pageSize?0:a.pageSize,n.page=void 0===a.page?0:a.page,angular.forEach(n.columns,function(e){e.sortable&&s.push(e.field)}),n.refresh=function(t){t===!0&&(n.page=0),n.contents=e("orderBy")(n.contents,o,i)},s.length>0&&(i=!1,o=s[0],n.refresh()),n.sortClick=function(e){-1!==s.indexOf(e)&&(e===o&&(i=!i),o=e,n.refresh())},n.showSortOrder=function(e,n){return e===o&&i===n},n.headerClass=function(e){var n=[];return-1!==s.indexOf(e)&&n.push("sortable"),e===o&&n.push("sorted"),n},n.cellContents=function(n,t){return void 0!==n.filter?e(n.filter)(t[n.field]):t[n.field]},n.numberOfPages=function(){return Math.ceil(n.contents.length/n.pageSize)},n.pageStart=function(){return n.page*n.pageSize+1},n.pageEnd=function(){var e=(n.page+1)*n.pageSize;return e>n.contents.length&&(e=n.contents.length),e},n.goToPage=function(e){n.page=e}},templateUrl:"components/tables/table-directive.tmpl.html"}}]),angular.module("triAngular").filter("tableImage",["$sce",function(e){return function(n){return e.trustAsHtml("<div style=\"background-image: url('"+n+"')\"/>")}}]),angular.module("triAngular").controller("SidebarRightController",["$mdUtil","ParseService","EmailService","$rootScope","$scope","$http","$mdSidenav","$state","API_CONFIG",function(e,n,t,a,s,o,i,r){s.notificationsTab=0,s.emails=[],s.$on("triSwitchNotificationTab",function(e,n){s.notificationsTab=n;var a=t.getEmails();a.then(function(e){s.emails=e,s.emailsbak=e})}),s.openSideNav=function(n){e.debounce(function(){i(n).toggle()},300)()},s.toggleNotificationsTab=function(e){s.$parent.$broadcast("triSwitchNotificationTab",e),s.openSideNav("notifications")},s.emailStatusClass=function(e){return e.get("readed")||e.get("from")==a.user.id?"":"purple-bg"},s.inputChangeSearchEmail=function(){if(""!=s.search_word){for(var e=[],n=s.emailsbak.length-1;n>=0;n--){var t=JSON.stringify(s.emailsbak[n].toJSON()),a=t.indexOf(s.search_word);a>-1&&e.unshift(s.emailsbak[n])}s.emails=e}},s.openMail=function(e){a.$broadcast("reademail",{email:e}),a.email=e,r.go("admin-panel-no-scroll.email.inbox.email",{emailID:e.id})},s.close=function(){i("notifications").close()}}]),angular.module("triAngular").controller("SidebarLeftController",["$scope","$timeout","$mdSidenav","APP","$mdComponentRegistry",function(e,n,t,a,s){e.sidebarInfo={appName:a.name,appLogo:a.logo},e.$on("$locationChangeSuccess",function(){n(function(){s.when("left").then(function(e){e.close()})})})}]),angular.module("triAngular").controller("SidebarFilterController",["NoticeService","WNService","ParseService","$rootScope","$scope","$http","$mdSidenav","$state","API_CONFIG",function(e,n,t,a,s){s.changePro=function(n){a.pronounce=n;var t=e.getCatWords();t.then(function(e){a.cat_words=e})}}]),angular.module("triAngular").service("SideMenu",["$rootScope",function(e){function n(e,t,a){if(a=void 0===a?-1:a,e instanceof Array){a++;for(var s=0;s<e.length;s++)n(e[s],t,a)}else t(e,a),void 0!==e.children&&n(e.children,t,a)}var t=e.user,a=!1;t&&(a=t.get("admin"));var s=[],o={name:"MENU.AUTH.STUDYNOTE",state:"admin-panel.default.study-notes",params:{parent_cat:"root",page:1},type:"link",icon:"fa fa-pencil",priority:7.1},i={name:"MENU.AUTH.My_Progress",state:"admin-panel.default.review",type:"link",icon:"fa fa-bar-chart-o",priority:8.1},r={name:"MENU.AUTH.PROFILE",state:"admin-panel.default.profile",type:"link",icon:"icon-person",priority:9.1},l={name:"Go to",icon:"fa fa-folder-open",type:"dropdown",priority:9.1,children:[{name:"MENU.AUTH.Study_Notes",icon:"fa fa-pencil",state:"admin-panel.default.study-notes",params:{parent_cat:"root",page:1},type:"link"},{icon:"fa fa-bar-chart-o",name:"MENU.AUTH.Progress",state:"admin-panel.default.classwordlist",type:"link"},{icon:"fa fa-print",name:"MENU.AUTH.Worksheets",state:"admin-panel.default.worksheethome",type:"link"},{icon:"fa fa-users",name:"MENU.AUTH.Manager",state:"admin-panel.default.class",type:"link"},{icon:"icon-person",name:"MENU.AUTH.PROFILE",state:"admin-panel.default.profile",type:"link"}]},d={name:"Admin",icon:"fa fa-folder-open",type:"dropdown",priority:9.1,children:[{icon:"fa fa-users",name:"MENU.AUTH.Contacts",state:"admin-panel.default.contactemails",type:"link"},{icon:"fa fa-users",name:"MENU.AUTH.Members",state:"admin-panel.default.members",type:"link",params:{page:1}},{icon:"fa fa-wrench",name:"MENU.AUTH.Cache_data",state:"admin-panel.default.updatedefine",type:"link"},{icon:"fa fa-wrench",name:"MENU.AUTH.Category_data",state:"admin-panel.default.category-data",type:"link"},{icon:"fa fa-wrench",name:"MENU.AUTH.Irregular_data",state:"admin-panel.default.irregular",type:"link"},{icon:"fa fa-wrench",name:"MENU.AUTH.Tutorial_Data",state:"admin-panel.default.tutorial",type:"link"},{icon:"fa fa-wrench",name:"MENU.AUTH.Course_Data",state:"admin-panel.default.grammar-data",type:"link"},{icon:"fa fa-wrench",name:"MENU.AUTH.Course_manage",state:"admin-panel.default.course-manage",type:"link"}]},c={addMenu:function(e){-1==s.indexOf(e)&&s.push(e)},removeMenu:function(e){var n=s.indexOf(e);n>-1&&s.splice(n,1)},removeMenuByName:function(e){for(var n=s.length-1;n>=0;n--){var t=s[n];if(t.name==e){var a=s.indexOf(t);a>-1&&s.splice(a,1)}}},addRoleMenu:function(e){var n=e.get("user_role");"student"==n&&(this.removeMenu(l),this.removeMenu(d),this.addMenu(o),this.addMenu(i),this.addMenu(r)),"teacher"==n&&(this.removeMenu(o),this.removeMenu(i),this.removeMenu(r),this.removeMenu(d),this.addMenu(l));var t=e.get("admin");t&&(this.removeMenu(o),this.removeMenu(i),this.removeMenu(r),this.removeMenu(l),this.addMenu(l),this.addMenu(d))},getMenu:function(){return s},setInboxCount:function(e){for(var n=s.length-1;n>=0;n--){var t=s[n];if("Notices"==t.name)var a=t}if(a.children)for(var n=a.children.length-1;n>=0;n--)"MENU.EMAIL.INBOX"==a.children[n].name&&(a.children[n].badge=e)},setSentCount:function(e){for(var n=s.length-1;n>=0;n--){var t=s[n];if("Notices"==t.name)var a=t}if(a)for(var n=a.children.length-1;n>=0;n--)"MENU.EMAIL.SENT"==a.children[n].name&&(a.children[n].badge=e)},addSentCount:function(){for(var e=s.length-1;e>=0;e--){var n=s[e];if("Notices"==n.name)var t=n}if(t)for(var e=t.children.length-1;e>=0;e--)"MENU.EMAIL.SENT"==t.children[e].name&&(t.children[e].badge=t.children[e].badge+1)},traverseMenu:function(e){n(s,e)},getPath:function(){var e=[];return c.traverseMenu(function(n){n.active&&e.push(n)}),e}};return c}]),angular.module("triAngular").directive("sideMenuItem",["$state",function(e){return{restrict:"E",require:"^sideMenu",scope:{item:"="},template:'<div ng-include="itemTemplate"></div>',link:function(n){function t(){var t=void 0===n.item.params?{}:n.item.params;return e.includes(n.item.state,t)}function a(){n.item.active=!0,n.item.open=!0,n.$emit("openParents")}n.itemTemplate="components/side-menu/side-menu-"+n.item.type+".tmpl.html",n.item.url=e.href(n.item.state),n.toggleMenu=function(){n.$parent.$parent.$broadcast("toggleMenu",n.item,!n.item.open)},n.$on("toggleMenu",function(e,t,a){n.item.open=n.item===t?a:!1}),t()&&a(),n.$on("$locationChangeSuccess",function(){n.item.active=!1,n.item.open=!1,t()&&a()}),n.activeClass=function(){return t()?"md-hue-3":""},n.openLink=function(){var t=void 0===n.item.params?{}:n.item.params;e.go(n.item.state,t)},n.$on("openParents",function(){n.item.active=!0,n.item.open=!0})}}}]),angular.module("triAngular").directive("sideMenu",["$location","$mdTheming","triTheming","SideMenu",function(e,n,t,a){return{restrict:"E",template:'<md-content><side-menu-item ng-repeat="item in menu | orderBy:\'priority\'" item="item"></side-menu-item></md-content>',scope:{},controller:["$scope",function(e){e.menu=a.getMenu()}],link:function(e,a,s){n(a);var o=a.controller("mdTheme");s.$observe("mdTheme",function(){var e=t.getThemeHue(o.$mdTheme,"primary","default"),n=t.rgba(e.value);a.css({"background-color":n}),a.children("md-content").css({"background-color":n})})}}}]),angular.module("triAngular").directive("triLoader",["$rootScope","APP",function(e,n){return{restrict:"E",replace:!0,scope:{},template:'<md-content flex class="loader" ng-show="active" layout="column" layout-fill layout-align="center center"><div class="loader-inner"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div><h3 class="md-headline">{{appName}}</h3></md-content>',link:function(t){t.appName=n.name,t.active=!0,e.$on("$viewContentLoading",function(){t.active=!0}),e.$on("$viewContentLoaded",function(){t.active=!1})}}}]),angular.module("triAngular").controller("FooterController",["$scope","APP",function(e,n){e.footerInfo={appName:n.name,appLogo:n.logo,date:new Date,version:n.version}}]),angular.module("triAngular").directive("countupto",["$timeout",function(e){return{restrict:"A",scope:{countupto:"=",options:"="},link:function(n,t,a){var s={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""};if(n.options)for(var o in s)void 0!==n.options[o]&&(s[o]=n.options[o]);a.from=void 0===a.from?0:parseInt(a.from),a.decimals=void 0===a.decimals?2:parseFloat(a.decimals),a.duration=void 0===a.duration?5:parseFloat(a.duration),e(function(){var e=new CountUp(t[0],a.from,n.countupto,a.decimals,a.duration,s);e.start()},500)}}}]),angular.module("triAngular").directive("themeBackground",["$mdTheming","triTheming",function(e,n){return{restrict:"A",link:function(t,a,s){e(a);var o=a.controller("mdTheme");if(void 0!==o){var i=s.themeBackground,r="default";if(-1!==i.indexOf(":")){var l=s.themeBackground.split(":");i=l[0],r=l[1]}var d=n.getThemeHue(o.$mdTheme,i,r);void 0!==d&&a.css({"background-color":n.rgba(d.value),"border-color":n.rgba(d.value),color:n.rgba(d.contrast)})}}}}]),angular.module("triAngular").directive("paletteBackground",["triTheming",function(e){return{restrict:"A",link:function(n,t,a){var s=a.paletteBackground.split(":"),o=e.getPaletteColor(s[0],s[1]);void 0!==o&&t.css({"background-color":e.rgba(o.value),"border-color":e.rgba(o.value),color:e.rgba(o.contrast)})}}}]),angular.module("triAngular").controller("SidebarAddWordController",["$mdUtil","$interval","ClassService","AddWordService","$mdToast","$mdDialog","$rootScope","ParseService","WNService","$scope","$http","$mdSidenav","$state","API_CONFIG",function(e,n,t,a,s,o,i,r,l,d,c,m,p){a.geCustomWords(),d.user=i.user;var u=function(){var e=p.current.name;return"admin-panel.default.study-notes-edit"==e?!1:void(d.customziedWords.length>0&&s.show({template:'<md-toast><span class="md-toast-text" flex>Do you want to save your Study List now or later?</span><md-button palette-background="pink:400"  class="md-raised md-primary"  ng-click="openSideNav()">Now</md-button><md-button palette-background="pink:400"  class="md-raised md-primary"   ng-click="closeToast()">Later</md-button></md-toast>',controller:"saveListToastController",position:"bottom right",hideDelay:3e4}))};n(u,9e5);i.$watch("customWords",function(){a.setWordListNum(),d.inputChangeSearch()},!0);d.openSideNav=function(n){e.debounce(function(){m(n).toggle()},300)()},d.getClass=function(){var e=t.getBelongToClass();e.then(function(e){d.myClasses=e})},d.removeWordFromCustomWords=function(e){a.removeWordFromCustomWords(e),s.show(s.simple().content("Word removed!").position("bottom right").hideDelay(3e3))},d.save_add_list_cat=function(){o.show({controller:"SelectClassDialogController",templateUrl:"components/addword/select-class-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:d.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},d.inputChangeSearch=function(){var e=d.search_word;if(""==e||void 0==e)d.customziedWords=i.customWords;else{for(var n=new Array,t=0;t<i.customWords.length;t++)-1!=i.customWords[t].get("lemma").indexOf(e)&&n.push(i.customWords[t]);d.customziedWords=n}}}]).controller("SelectClassDialogController",["ClassService","$mdDialog","ParseService","AddWordService","$mdToast","$state","$rootScope","$scope",function(e,n,t,a,s,o,i,r){r.rs=i;var l=e.getMyClasses();l.then(function(e){r.myClasses=e}),r.selectClass=function(e){a.pushWordToClass(e),n.cancel(),s.show("student"==i.user.get("user_role")?s.simple().content("Study List saved! Testing to start...").position("bottom right").hideDelay(3e3):s.simple().content("Word list saved!").position("bottom right").hideDelay(3e3))},r.cancel=function(){n.cancel()},r.closeDialog=function(){n.cancel()}}]).controller("saveListToastController",["$mdSidenav","$mdDialog","ParseService","AddWordService","$mdToast","$state","$rootScope","$scope",function(e,n,t,a,s,o,i,r){r.openSideNav=function(){e("sidebar-addword").toggle(),s.hide()},r.openPOPTutorial=function(){i.user;o.go("admin-panel.default.help-wordiser")},r.cancel=function(){s.hide()},r.closeToast=function(){s.hide()}}]).controller("AddWordDialogController",["$timeout","EmailService","AddWordService","$mdToast","$mdDialog","ParseService","WNService","WordService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c){if(c.user=d.user,d.hideposselect){c.lemma=d.lemma,c.popDefinesShow=!1,c.type=d.type;var m="all";c.type.n&&(m="n"),c.type.v&&(m="v"),c.type.j&&(m="j"),c.type.r&&(m="r"),c.type.all&&(m="all"),c.definesDetailsShow=!0,c.popDefinesShow=!1,t.get_defines_by_lemma(d.lemma,m,function(e){c.defines=e})}else c.popDefinesShow=!0;c.popVoteSentenceEdit=function(e){s.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:c.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})},c.askFor=function(e,n){var t=d.user.id,a=d.user.get("name");d.$broadcast("askFor",t,a,e,n)},t.get_types_option(d.lemma,function(n){e(function(){c.types_option=n,c.type={}})}),c.cancel=function(){s.cancel()},c.closeDialog=function(){s.cancel()},c.changeTypeSelect=function(e){c.type={},"n"==e&&(c.type.n=!0),"v"==e&&(c.type.v=!0),"j"==e&&(c.type.j=!0),"r"==e&&(c.type.r=!0)},c.changeTyle=function(){var e="all";c.type.n&&(e="n"),c.type.v&&(e="v"),c.type.j&&(e="j"),c.type.r&&(e="r"),c.definesDetailsShow=!0,c.popDefinesShow=!1,t.get_defines_by_lemma(d.lemma,e,function(e){c.defines=e})},c.addWordByDefine=function(e){var n=t.getAddWordBlock();n||(d.hideposselect||t.addWordByDefine(e),d.$broadcast("addWord",e))}}]),angular.module("triAngular").directive("addWord",["$mdToast","$mdDialog","$state","$stateParams","ParseService","WNService","$rootScope",function(e,n,t,a,s,o,i){return{restrict:"E",scope:{name:"@",lemma:"=",pro:"=",save:"&"},templateUrl:"components/addword/addword.tmpl.html",replace:!0,transclude:!1,controller:["$scope",function(){}],link:function(t){t.addword=function(){s.add_word_by_lemma(t.lemma)
},t.popDefines=function(a){t.diabled_add_word=!0,setTimeout(function(){t.diabled_add_word=!1},3e3),i.all_word_data.get("uk_pron")?(i.lemma=a,n.show({controller:"AddWordDialogController",templateUrl:"components/addword/add-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:t.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})):e.show(e.simple().content("Sorry this cannot be added. There's no pronunciation!").position("bottom right").hideDelay(5e3))}}}}]).directive("editDefine",["$mdDialog","$state","$stateParams","ParseService","WNService","$rootScope",function(e){return{restrict:"E",scope:{name:"@",defineid:"=",save:"&"},templateUrl:"components/addword/editdefine.tmpl.html",replace:!0,transclude:!0,controller:["$scope",function(){}],link:function(n){n.popVoteSentenceEdit=function(t){var a=Parse.Object.extend("Dict"),s=new Parse.Query(a);s.get(t,{success:function(t){e.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:n.menuClickEvent,locals:{getFocus:!0,define:t},focusOnOpen:!1})}})}}}}]),angular.module("triWordModule").factory("AddWordService",["HelperService","ReviewService","$q","WordService","$document","$mdToast","$state","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l){var d,c,m,p=Parse.Object.extend("Dict"),u=(Parse.Object.extend("CTWord"),Parse.Object.extend("ClassWord")),g=Parse.Object.extend("MyClass"),f=!1,_=!0,h="";if(l.customWords=new Array,l.user){l.user}var v=function(e,n){if(c==e&&d)n(d);else{c=e;var t=new Parse.Query(p);t.equalTo("lemma",c),t.find({success:function(e){d=e,n(d)}})}};return{updateCache:function(){_=!0},geCustomWords:function(){return l.customWords},removeWordFromCustomWords:function(e){var n=l.customWords.indexOf(e);return n>-1&&l.customWords.splice(n,1),e.destroy(),l.customWords},setWordListNum:function(){l.gb.wordListNum=l.customWords?l.customWords.length:0},get_types_option:function(e,n){v(e,function(e){for(var t={},a=e.length-1;a>=0;a--)"v"==e[a].get("pos")&&(t.v="true"),"n"==e[a].get("pos")&&(t.n="true"),"j"==e[a].get("pos")&&(t.j="true"),"r"==e[a].get("pos")&&(t.r="true"),"s"==e[a].get("pos")&&(t.j="true"),"a"==e[a].get("pos")&&(t.j="true");n(t)})},get_defines_by_lemma:function(e,n,t){v(e,function(e){for(var a=e.length-1;a>=0;a--)if(!e[a].get("sentence_main")){if(e[a].get("sampleset"))var s=e[a].get("sampleset").split("|");else var s=new Array;for(var o=s.length-1;o>=0;o--)s[o]=s[o].trim().replace(s[o].substring(0,1),s[o].substring(0,1).toUpperCase()),s[o].trim().endsWith("!")||s[o].trim().endsWith("?")||s[o].trim().endsWith(".")||(s[o]=s[o]+".");e[a].set("sentence_list",s),e[a].set("sentence_main",s[0])}for(var i=new Array,a=e.length-1;a>=0;a--)"all"==n?i.push(e[a]):(e[a].get("pos")==n&&i.push(e[a]),"j"==n&&("a"==e[a].get("pos")||"s"==e[a].get("pos"))&&i.push(e[a]));t(i)})},getAddWordBlock:function(){return m&&o.show(o.simple().content("Adding... Please wait a second!!").position("bottom right").hideDelay(5e3)),m},addWordByDefine:function(e){for(var t=this,a=l.customWords.length-1;a>=0;a--)if(l.customWords[a].get("word_id")==e.id)return void o.show(o.simple().content("Word already in the list!").position("bottom right").hideDelay(5e3));var t=this;m=!0;var s=n.get_one_review_all_data_by_define(e);s.then(function(n){console.log(n),n.define=e;var a=t.setClassWordData(n);a&&(l.customWords.push(a),o.show(o.simple().content("It has been added to your study list!").position("bottom right").hideDelay(3e3)),responsiveVoice.speak("Yay!","UK English Male"),t.setWordListNum(),m=!1)})},setClassWordData:function(n){var t=n.define,a=e.replace_lemma_form_sentence(t.get("sentence_main"),n.frek),s=a.sentence_with_first_letter,o=a.sentence_no_first_letter,i=a.replace_lemma,r=a.firstletter,l=(n.frek.get("uk_pron"),a.include_lemma,n.choiceWords,e.check_word_can_add(n,t));if(!l)return m=!1,l;var d=new u;if(d.set("define_obj",t),d.set("word_obj",n.frek),d.set("lemma",t.get("lemma")),d.set("define_id",t.id),d.set("pos",t.get("pos")),d.set("sample",t.get("sentence_main")),d.set("define",t.get("definition")),d.set("word_id",n.frek.id),d.set("choiceDefines",n.choiceDefines),d.set("choiceWords",n.choiceWords),d.set("form_v_a",n.frek.get("form_v_a")),d.set("form_v_b",n.frek.get("form_v_b")),d.set("form_v_c",n.frek.get("form_v_c")),d.set("form_v_d",n.frek.get("form_v_d")),d.set("form_v_e",n.frek.get("form_v_e")),d.set("form_n_a",n.frek.get("form_n_a")),d.set("form_n_b",n.frek.get("form_n_b")),d.set("form_j_a",n.frek.get("form_j_a")),d.set("form_j_b",n.frek.get("form_j_b")),d.set("form_j_c",n.frek.get("form_j_c")),d.set("form_r_a",n.frek.get("form_r_a")),d.set("form_r_b",n.frek.get("form_r_b")),d.set("form_ext_type",n.frek.get("form_ext_type")),d.set("form_ext_a",n.frek.get("form_ext_a")),d.set("form_ext_b",n.frek.get("form_ext_b")),d.set("form_ext_c",n.frek.get("form_ext_c")),d.set("form_ext_d",n.frek.get("form_ext_d")),d.set("form_ext_e",n.frek.get("form_ext_e")),d.set("the_uk_pron",n.frek.get("uk_pron")),d.set("the_uk_change_pron",n.frek.get("uk_change_pron")),d.set("the_us_pron",n.frek.get("us_pron")),d.set("the_us_change_pron",n.frek.get("us_change_pron")),t.get("uk_pron_ext")&&""!=t.get("uk_pron_ext")&&(d.set("the_uk_pron",t.get("uk_pron_ext")),d.set("the_uk_change_pron",t.get("uk_change_pron_ext")),d.set("the_us_pron",t.get("us_pron_ext")),d.set("the_us_change_pron",t.get("us_change_pron_ext"))),t.get("imagesmain")){var c=t.get("imagesmain").replace("http://cdn","//cdn");d.set("imagesmain",c)}d.set("uk_pron_ext",t.get("uk_pron_ext")),d.set("uk_change_pron_ext",t.get("uk_change_pron_ext")),d.set("us_pron_ext",t.get("us_pron_ext")),d.set("us_change_pron_ext",t.get("us_change_pron_ext")),d.set("uk_anwser",n.change_pron.uk_anwser),d.set("us_anwser",n.change_pron.us_anwser),d.set("uk_new_pron",n.change_pron.uk_new_pron),d.set("uk_pron",n.change_pron.uk_pron),d.set("us_new_pron",n.change_pron.us_new_pron),d.set("us_pron",n.change_pron.us_pron),d.set("sentence_with_first_letter",s),d.set("sentence_no_first_letter",o),d.set("replace_lemma",i),d.set("firstletter",r);var p=new Parse.ACL(Parse.User.current());return p.setPublicReadAccess(!0),d.setACL(p),d},addWordByDefineId:function(e){var n=Parse.Object.extend("Dict"),t=new Parse.Query(n),a=this;t.get(e,{success:function(e){a.addWordByDefine(e)},error:function(){alert("Can not find this define!")}})},getDefineById:function(e){var n=t.defer(),a=Parse.Object.extend("Dict"),s=new Parse.Query(a);return s.get(e,{success:function(e){n.resolve(e)}}),n.promise},removeClass:function(e){l.myClasses.remove(e),e.destroy()},updateUserStudyListLemma:function(){var e=t.defer(),n=l.user.id;h=n;var a=l.user,s=Parse.Object.extend("StudentProg"),o=new Parse.Query(s),i=a.get("user_list_lemmas")?a.get("user_list_lemmas"):[];return o.equalTo("user_id",a.id),o.notContainedIn("lemma",i),o.limit(20),o.find({success:function(n){for(var t=!1,s=n.length-1;s>=0;s--){var o=n[s].get("lemma"),r=i.indexOf(o);0>r&&(i.push(o),t=!0)}a.set("user_list_lemmas",i),e.resolve(a),t&&a.save()}}),e.promise},removeLemmaFromeStudyList:function(e){var n=l.user;f=n.get("user_list_lemmas");for(var t=f.length-1;t>=0;t--){var a=f[t];a==e&&f.splice(t,1)}n.set("user_list_lemmas",f),n.save()},getUserStudyListLemma:function(){var e=l.user,n=[];return"teacher"==e.get("user_role")?n:f},pushWordToClass:function(e){for(var n=(new Parse.Query(u),new Parse.Query(g),new Date,new Array),t=l.customWords.length-1;t>=0;t--)n.push(l.customWords[t].get("define_id"));var a=new Parse.Query(u);a.equalTo("class_id",e.id),a.containedIn("define_id",n),a.find({success:function(n){for(var t=n.length-1;t>=0;t--)for(var a=l.customWords.length-1;a>=0;a--)l.customWords[a].get("define_id")==n[t].get("define_id")&&l.customWords.splice(a,1);for(var s=new Date,o=new Array,t=l.customWords.length-1;t>=0;t--){var i=l.customWords[t];i.set("class_id",e.id),i.set("adddate",s),i.set("class_name",e.get("name"));var r=new Parse.ACL(Parse.User.current());r.setPublicReadAccess(!0),i.setACL(r),o.push(i)}Parse.Object.saveAll(o,function(){for(var e=0;e<o.length;e++)console.log(o[e].toJSON());l.customWords.length=0,l.customWords=new Array,l.$broadcast("saveWordToList")}),l.gb.wordListNum=0}})}}}]),angular.module("triAngularAuthentication").factory("WNService",["$q","$http","$stateParams","$rootScope",function(e,n,t,a){var s=Parse.Object.extend("Grammar"),o=["."," '","' ","'",' "','" ','"',"!",";","-","?","£","$","%","&","(",")","-","+","/"];return{get_grammar_for_str:function(n,t,o){var i=this,r=e.defer(),l=i.get_grammars_from_db_by_string(n,t,o);return l.then(function(n){var o=n.not_in_db_sentences,l=n.in_db_grammars;if(o[0]){for(var d=[],c=o.length-1;c>=0;c--){var m={};m.sentence=o[c],m.homework_id=t;var p=i.get_grammar_for_obj(m);d.push(p)}e.all(d).then(function(e){for(var t=[],o=e.length-1;o>=0;o--){var i=e[o],d=i.sentence,c=i.error_grammar_percent,p=i.error_grammar_count_total,u=[],g=[],f=[],_=[];if(i.check_grammar_feedback)for(var h=i.check_grammar_feedback.length-1;h>=0;h--)u.push(i.check_grammar_feedback[h].context),g.push(i.check_grammar_feedback[h].error_grammar),f.push(i.check_grammar_feedback[h].feedback_grammar.replace(/ *\([^)]*\) */g,"")),_.push(i.check_grammar_feedback[h].feedback_grammar_suggestion);var v=new s;v.set("sentence",d),v.set("error_grammar_percent",c),v.set("error_grammar_count_total",p),v.set("context",u),v.set("error_grammar",g),v.set("feedback_grammar",f),v.set("feedback_grammar_suggestion",_),v.set("homework_id",m.homework_id),v.set("user_id",a.user.id);var b=new Parse.ACL(Parse.User.current());b.setPublicReadAccess(!0),b.setPublicWriteAccess(!0),v.setACL(b),t.push(v)}Parse.Object.saveAll(t,function(e){for(var t=e.length-1;t>=0;t--)l.push(e[t]);n.in_db_grammars=l,r.resolve(n)})})}else n.in_db_grammars=l,r.resolve(n)}),r.promise},get_grammars_from_db_by_string:function(n,t,a){var o=this,i=e.defer(),r={},l=[],d=[],c=[],m=[],p=60,u=0,g=n.replace(/<(?:.|\n)*?>/gm,"").trim(),f=g.replace(/([.?!@])\s*(?=[A-Z])/g,"$1|").split("|");u=f.length,r.limit=p,r.sentence_number=u;for(var _=f.length-1;_>=0;_--)f[_]=f[_].replace("&#34;",'"'),f[_]=f[_].replace("&#34;",'"'),f[_]=f[_].replace("&#34;",'"'),f[_]=f[_].replace("&#34;",'"'),f[_]=f[_].replace("#@",""),c.length<p&&c.unshift(f[_]);for(var h=g.replace(/([.?!@])\s*(?=[A-Z])/g,"$1|").split("|"),_=h.length-1;_>=0;_--)h[_]=h[_].replace("&#34;",'"'),h[_]=h[_].replace("&#34;",'"'),h[_]=h[_].replace("&#34;",'"'),h[_]=h[_].replace("&#34;",'"'),m.length<p&&m.unshift(f[_]);var v=new Parse.Query(s);return v.equalTo("homework_id",t),v.containedIn("sentence",c),v.equalTo("user_id",a),v.find({success:function(e){for(var n=e.length-1;n>=0;n--)o.in_array(e[n].get("sentence"),c)&&(l.push(e[n]),c=o.remove_in_array(e[n].get("sentence"),c));var p=new Parse.Query(s);p.containedIn("sentence",c),p.find({success:function(e){for(var n=e.length-1;n>=0;n--)if(o.in_array(e[n].get("sentence"),c)){var p=e[n],u=new s;u.set("sentence",p.get("sentence")),u.set("error_grammar_percent",p.get("error_grammar_percent")),u.set("error_grammar_count_total",p.get("error_grammar_count_total")),u.set("context",p.get("context")),u.set("error_grammar",p.get("error_grammar")),u.set("feedback_grammar",p.get("feedback_grammar")),u.set("feedback_grammar_suggestion",p.get("feedback_grammar_suggestion")),u.set("homework_id",t),u.set("user_id",a);var g=new Parse.ACL(Parse.User.current());g.setPublicReadAccess(!0),g.setPublicWriteAccess(!0),u.setACL(g),c=o.remove_in_array(e[n].get("sentence"),c),d.push(u)}r.sentences=m,r.not_in_db_sentences=c,d[0]?Parse.Object.saveAll(d,function(e){for(var n=e.length-1;n>=0;n--)l.push(e[n]);r.in_db_grammars=l,i.resolve(r)}):(r.in_db_grammars=l,i.resolve(r))}})}}),i.promise},string_to_sentences:function(e){for(var n=e.replace(/([.?!])\s*(?=[A-Z])/g,"$1|").split("|"),t=n.length-1;t>=0;t--)n[t]=n[t].replace("&#34;",'"'),n[t]=n[t].replace("&#34;",'"'),n[t]=n[t].replace("&#34;",'"'),n[t]=n[t].replace("&#34;",'"');return n},remove_in_array:function(e,n){var t=n.indexOf(e);return t>-1&&n.splice(t,1),n},in_array:function(e,n){var t=n.indexOf(e);return t>-1?!0:!1},get_google_image:function(t){var a=e.defer(),s="https://www.googleapis.com/customsearch/v1?q="+t+"&num=10&searchType=image&imgSize=medium&key=AIzaSyBE3c6N1RSUeOIoipNZwylb3U9iD3cZTHQ&cx=014621299583427566598:yg1xavapyj8";return n({method:"GET",url:s}).then(function(e){a.resolve(e.data)}),a.promise},get_youtube_videow:function(t){var a=e.defer(),s="https://www.googleapis.com/youtube/v3/search?q="+t+"&maxResults=30&part=snippet&key=AIzaSyBE3c6N1RSUeOIoipNZwylb3U9iD3cZTHQ";return n({method:"GET",url:s}).then(function(e){a.resolve(e.data)}),a.promise},in_array_index:function(e,n){var t=n.indexOf(e);return t},get_grammar_for_obj:function(n){var t=e.defer(),a=n.sentence;return Parse.Cloud.run("grammarAPI",{sentence:a}).then(function(e){e.sentence=a,t.resolve(e)},function(){var e={};e.sentence=a,e.check_grammar_feedback=[],e.error_grammar_count_total=0,e.error_grammar_percent="0%",e.sentence=a,t.resolve(e)}),t.promise},get_grammar_for_obj_bak:function(t){var a=e.defer(),s="https://virtualwritingtutor.com/API/checkgrammar.php",o=t.sentence;return n({method:"POST",url:s,data:"text="+o,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var n=e.data;n.sentence=o,a.resolve(n)},function(){var e={};e.check_grammar_feedback=[],e.error_grammar_count_total=0,e.error_grammar_percent="0%",e.sentence=o,a.resolve(e)}),a.promise},get_grammar_get:function(t){var a=e.defer(),s="https://virtualwritingtutor.com/API/checkgrammar.php?text="+t;return n({method:"GET",url:s}).then(function(e){a.resolve(e.data)}),a.promise},get_base_forms:function(t){for(var a="",s=t.length-1;s>=0;s--)a+=t[s],s>0&&(a+=",");var o=e.defer(),i="//wordiser.tsyz100.com/phpwordfetch/public/baseforms/"+a;return n({method:"GET",url:i}).then(function(e){o.resolve(e.data)}),o.promise},load_categorys:function(){n.get("lib/d3/cat.json").success(function(e){a.categorys=e})},checkWordClass:function(e){var n=e.charAt(0),t=e.charAt(e.length-1),a="";return("'"==n||'"'==n||")"==n)&&(a+="back-margin-left-4 "),"%"==e||"."==e||"?"==e||"!"==e||","==e?a+="back-margin-left-4 margin-right-4 ":"-"!=t&&"+"!=t&&"/"!=t&&"("!=t&&"'"!=t&&'"'!=t&&"$"!=t&&"£"!=t&&(a+="margin-right-4 "),a},replace_symbols:function(e){for(var n=0;n<=o.length-1;n++){var t=o[n],a=" sym"+n+"sym ",s=e.indexOf(t);s>-1&&(e=e.split(t).join(a))}return e},recover_symbols:function(e){for(var n=o.length-1;n>=0;n--){var t=o[n],a=" "+t+" ",s="sym"+n+"sym",i=e.indexOf(s);i>-1&&(e=e.split(s).join(a),e=e.trim()," '"==t&&(e=" "+e),"' "==t&&(e+=" "),' "'==t&&(e=" "+e),'" '==t&&(e+=" "))}return e},get_grammar_tags_by_sentence:function(t){{var a=this;t.charAt(t.length-1)}t=t.replace("?"," ?"),t=t.replace(". ?"," ?");for(var s=[],o=t.split(" "),i=0;i<o.length;i++){var r=o[i],l=r.indexOf("$"),d=r.indexOf("?");if(l>-1||d>-1){var c={};c.lemma=r,c.tag="VBG",c.tmp_repace="tmp_repace"+i,s.push(c),o[i]=c.tmp_repace}}t="";for(var i=0;i<o.length;i++)t+=o[i]+" ";t=t.trim();var m=e.defer(),p=encodeURI("//wordiser.tsyz100.com/phpwordfetch/public/apigarmmarlogic/"+t);return n.get(p).success(function(e){var n={};n.response=e;for(var t="",o=[],i=[],r=[],l=[],d=0;d<=e.length-1;d++){e[d]=e[d].replace('[u"',"[u'"),e[d]=e[d].replace("[[u'","[u'"),e[d]=e[d].replace("\", u'","', u'");var c=e[d].split("', u'"),p=a.recover_symbols(c[0].replace("[u'","").trim()),u=c[1].replace(" u'",""),g="['"+p+"'"+u+"]";t+=g,o.push(g),i.push(p),r.push(u);var f={};f.lemma=p,f.tag=u;for(var _=0;_<s.length;_++)s[_].tmp_repace==p&&(f=s[_]);l.push(f)}n.tags=t,n.tags_arr=o,n.lemma_arr=i,n.simple_tags_arr=r,n.tag_objs=l,m.resolve(n)}),m.promise},get_type:function(e,t,s){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apitype/"+e+"/"+t).success(function(n){for(var t=n[0],o=n.length-1;o>=0;o--)n[o].key==e&&(t=n[o]);s(n),a.types=t})},get_types:function(e,t,a){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apitypes/"+e+"/"+t).success(function(e){a(e)})},get_prefix:function(e,t,a){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apiprefix/"+t+"/"+e).success(function(e){a(e)})},get_sentence_type:function(e,t,a,s){if(t){var o=new Array;o.push(e),o.push(t),o.push(a),n.post("//wordiser.tsyz100.com/phpwordfetch/public/apisempletypes/",o).success(function(e){s(e)})}},get_sentence_by_lemma:function(e,t){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apisentencebylemma/"+e).success(function(e){t(e)})},get_pros:function(e,t){for(var a=new Array,s=e.length-1;s>=0;s--)a[s]=e[s].get("lemma");n.post("//wordiser.tsyz100.com/phpwordfetch/public/apipro/",a).success(function(e){t(e)})},getWordsByLemmas:function(e,t){n.post("//wordiser.tsyz100.com/phpwordfetch/public/apigetwordsbylemmas/",e).success(function(e){t(e)})},get_review_pros:function(e,t){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apireviewpro/"+e).success(function(e){t(e)})},get_syn_defines:function(e,t){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apisynsets/"+e).success(function(e){t(e)})},get_correction:function(t,a){console.log(escape(t));var s=e.defer();return n.get("//wordiser.tsyz100.com/phpwordfetch/public/apicorrection/"+escape(t)+"/"+escape(a)).success(function(e){console.log(e),s.resolve(e)}),s.promise},get_hunter_emails:function(t){var a=100,s=a*t,o=e.defer();return n.get("https://hunter.io/v2/domain-search?limit="+a+"&offset="+s+"&domain=google.com&api_key=36645408ea7def74db18d52bda1ed0070762201e&format=json").success(function(e){o.resolve(e)}),o.promise},get_syn_lemmas:function(t){var a=e.defer();return n.get("//wordiser.tsyz100.com/phpwordfetch/public/apisynsets/"+t).success(function(e){a.resolve(e)}),a.promise},get_defines:function(e,t){for(var a=new Array,s=e.length-1;s>=0;s--)a[s]=e[s].get("lemma");n.post("//wordiser.tsyz100.com/phpwordfetch/public/apidefines/",a).success(function(e){t(e)})},get_review_pron:function(a,s){var o=!1;s||(s=a),a||(a=s),s||a||(s="* e m p . t E",a="* e m p . t E",o=!0),s=s.replace("*"," "),a=a.replace("*"," "),s=s.replace("*"," "),a=a.replace("*"," "),s=s.replace("*"," "),a=a.replace("*"," "),s=s.replace("'"," "),a=a.replace("'"," "),s=s.replace("'"," "),a=a.replace("'"," "),s=s.replace("'"," "),a=a.replace("'"," "),s=s.replace("."," "),a=a.replace("."," "),s=s.replace("."," "),a=a.replace("."," "),s=s.replace("."," "),a=a.replace("."," ");{var i=e.defer();t.lemma}return n.get("//wordiser.tsyz100.com/phpwordfetch/public/apireivewpron/"+a+"/"+s).success(function(e){e.empty_pron=o,i.resolve(e)}),i.promise},get_prons_by_lemmas:function(a){var s=e.defer(),o=(t.lemma,"//wordiser.tsyz100.com/phpwordfetch/public/apigetprons/"+a);return n.get(o).success(function(e){s.resolve(e)}),s.promise},get_word_phrase_and_pron:function(e){var a=t.lemma;n.get("//wordiser.tsyz100.com/phpwordfetch/public/apiphrases/"+a).success(function(n){e(n)})},searchByString:function(e,t){var a=e.search_word;n.get("//wordiser.tsyz100.com/phpwordfetch/public/apisearch/"+a+"/"+t).success(function(n){e.searchHelperMsg="Select result below",e.searchWordList=n})},addSearchByString:function(e){var t=e.add_search_word;n.get("//wordiser.tsyz100.com/phpwordfetch/public/apisearch/"+t).success(function(n){e.searchHelperMsg="Select result below",e.addSearchWordList=n})},getNoticeWord:function(e,t){n.get("//wordiser.tsyz100.com/phpwordfetch/public/apinotice/"+e.lemma+"/"+e.sentence).success(function(e){t.word.tags=e.tags,t.word.mood=e.mood,t.word.level=e.level,a.noticeWords=e})},update_phrase_chart:function(){var e=t.lemma;n.get("//wordiser.tsyz100.com/phpwordfetch/public/apiphrases/"+e).success(function(e){a.phrases=e})},getCatWords:function(){a.user?(a.level||(a.level=1e4),a.user.get("a1")&&(a.level=1e4),a.user.get("a2")&&(a.level=116),a.user.get("b1")&&(a.level=49),a.user.get("b2")&&(a.level=16),a.user.get("c1")&&(a.level=6),a.user.get("c2")&&(a.level=3),a.user.get("c2p")&&(a.level=1),a.pronounce||(a.pronounce="all")):(a.level=1e4,a.pronounce="all");var e=t.page,s=(t.catname,t.startwith),o=a.level,i=a.pronounce,r=12;n.get("//wordiser.tsyz100.com/phpwordfetch/public/apiwordlist/"+e+"/"+s+"/"+r+"/"+o+"/"+i).success(function(e){a.cat_words=e})},getCatWordsByLemmas:function(e){for(var t=new Array,s=e.length-1;s>=0;s--)t[s]=e[s].get("lemma");n.post("//wordiser.tsyz100.com/phpwordfetch/public/apiwordlistbylemmas/",t).success(function(e){a.cat_words=e})}}}]),angular.module("triAngularAuthentication").factory("ParseService",["ClassService","AddWordService","ReviewService","$q","$mdToast","$state","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l){{var d=(Parse.Object.extend("User"),Parse.Object.extend("Email"),Parse.Object.extend("Fre60K")),c=(Parse.Object.extend("CustomCategory"),Parse.Object.extend("StudentProg"),Parse.Object.extend("PhraseWN")),m=(Parse.Object.extend("Sentences"),Parse.Object.extend("AddSentences")),p=Parse.Object.extend("AddCategory"),u=(Parse.Object.extend("MyClass"),Parse.Object.extend("ClassWord"),Parse.Object.extend("ClassStudent"),Parse.Object.extend("CTWord"),Parse.Object.extend("RevieRecord")),g=Parse.Object.extend("Wod"),f=Parse.Object.extend("Email"),_=(Parse.Object.extend("CTWord"),Parse.Object.extend("Phrase")),h=Parse.Object.extend("Sentence"),v=Parse.Object.extend("MyClass"),b=Parse.Object.extend("ClassWord"),y=Parse.Object.extend("ClassStudent"),w=(Parse.Object.extend("User"),Parse.Object.extend("AddCategory"),Parse.Object.extend("RevieRecord"));new d}l.cat_words=new g,l.emails=new f,l.learnWords=new g,l.choiceWords=new g,l.phrases=new _,l.sentences=new h,l.myClasses=new v,l.classWordList=new b,l.classStudentList=new y,l.searchUserList=new y,l.reviewWordList=new w,l.word=new d,l.phrase=new c,l.learn_type="en_to_zh",l.vote_data={};var k=function(e){var n=new Array;n.push(""),n.push("No level"),n.push("A1, Beginner"),n.push("A2, Elementary"),n.push("B1, Intermediate"),n.push("B2, Upper Intermediate"),n.push("C1, Low Advanced"),n.push("C2, Advanced");var t=l.user.get("level")?l.user.get("level"):"C2, Advanced";if(l.user.get(!1))var t="C2, Advanced";if("pet"==e||"cect4"==e||"ielts"==e)var t="C2, Advanced";for(var a=new Array,s=0;s<=n.length-1&&(a.push(n[s]),t!=n[s]);s++);return a};return{remove_word:function(e){l.customWords.remove(e)},addCategory:function(e){var n=new p;n.set("name",e.name),e.level&&n.set("level",e.level),"undefined"==typeof r.parent_cat&&(r.parent_cat="root"),n.set("parent_cat",r.parent_cat),n.set("type","category"),n.save(),l.all_words.push(n)},addNewWordCat:function(e){for(var n=e.name.split(","),t=[],a=n.length-1;a>=0;a--)t.push(n[a].trim());i.getWordsByLemmas(t,function(e){for(var n=e.length-1;n>=0;n--){var t=e[n][0].lemma,a=e[n][0].pos,s=e[n][0].define,o=e[n][0].sample,i=(e[n],new p);i.set("name",t),i.set("pos",a),i.set("define",s),i.set("sample",o),"undefined"==typeof r.parent_cat&&(r.parent_cat="root"),i.set("parent_cat",r.parent_cat),i.set("type","word"),i.save(),l.all_words.push(i)}})},initReviewWordList:function(e){var n=new Parse.Query(u);n.equalTo("user_id",l.user.id),n.equalTo("type","eachword"),n.notEqualTo("remove","true"),n.descending("next_time"),n.find({success:function(n){l.$apply(function(){l.reviewWordList.reset(n),e(l.reviewWordList)})}})},getCategoryById:function(e){var n=a.defer(),t=new Parse.Query(p);return t.equalTo("objectId",e),t.first({success:function(e){n.resolve(e)}}),n.promise},getOneCourseData:function(s){var o=a.defer(),i=l.user;if(i){var r=i.get("course"),d=!0;if("student"!=i.get("user_role")&&(d=!1),!s){var c=t.getTmpReviewNum();c>5&&(d=!1)}if(r||(d=!1),d){var m=(k(r),l.user.get("user_list_ids")),u=new Parse.Query(p);u.notContainedIn("define_id",m),u.exists("sample"),u.exists("definition"),u.exists("imagesmain"),u.equalTo("type","word"),"cect4"==r?u.equalTo("cect4",!0):"ielts"==r?u.equalTo("ielts",!0):"pet"==r&&u.equalTo("pet",!0),u.first({success:function(s){if(!s){var i=l.user;i.set("course",""),i.set("alert_message","You have finished and completed all thewords in your vocabulary course. You can select a new vocabulary course now!");for(var i=Parse.User.current(),d=i.get("course_list")?i.get("course_list"):[],c=d.length-1;c>=0;c--)d[c].id==r&&d.splice(c,1);i.set("course_list",d),i.save()}a.all([n.getDefineById(s.get("define_id")),e.getMyClasses()]).then(function(e){var n=e[0],a=e[1][0],i=t.get_one_review_all_data_by_define(n);i.then(function(e){e.define=n,e.add_word=s,e.the_class=a;var i=t.addOneReview(e);i.then(function(e){o.resolve(e)})})},function(){o.resolve(!1)})}})}}else o.resolve(!1);return d||o.resolve(!1),o.promise},getCategoryData:function(e){var n=a.defer(),t={};"undefined"==typeof r.parent_cat&&(r.parent_cat="root");var s=k(e),o=new Parse.Query(p);o.equalTo("parent_cat",r.parent_cat),o.containedIn("level",s),"cect4"==e&&o.exists("cect4"),"ielts"==e&&o.exists("ielts"),"pet"==e&&o.exists("pet");var i=new Parse.Query(p);i.equalTo("parent_cat",r.parent_cat),i.doesNotExist("level"),"cect4"==e&&i.exists("cect4"),"ielts"==e&&i.exists("ielts"),"pet"==e&&i.exists("pet");var l=new Parse.Query(p);l.equalTo("type","category"),l.containedIn("level",s),l.equalTo("parent_cat",r.parent_cat);var d=new Parse.Query(p);"pet"==e||"cect4"==e||"ielts"==e?(d.equalTo("level_2_category",r.parent_cat),d.equalTo("type","word"),"cect4"==e&&d.exists("cect4"),"ielts"==e&&d.exists("ielts"),"pet"==e&&d.exists("pet")):d.equalTo("type","query nothing");var c=Parse.Query.or(o,i,l,d);return c.ascending("level"),c.include("define_obj"),c.include("word_obj"),c.find({success:function(e){t.cats=e;for(var a=[],s=[],o=e.length-1;o>=0;o--)"word"==e[o].get("type")?(e[o].definedata=e[o].get("define_obj"),e[o].worddata=e[o].get("word_obj"),s.push(e[o])):(e[o].hide=e[o].get("hide")?!0:!1,a.push(e[o]));a.sort(function(e,n){var t=e.get("children_data_cat")?e.get("children_data_cat").length:0,a=n.get("children_data_cat")?n.get("children_data_cat").length:0;return a-t});for(var o=s.length-1;o>=0;o--)if(s[o].definedata){var i=s[o].definedata;s[o].set("uk_pron_ext",i.get("uk_pron_ext")),s[o].set("uk_change_pron_ext",i.get("uk_change_pron_ext")),s[o].set("us_pron_ext",i.get("us_pron_ext")),s[o].set("us_change_pron_ext",i.get("us_change_pron_ext")),s[o].set("definition",i.get("definition")),s[o].set("sample",i.get("sentence_main")),s[o].set("define",i.get("definition"))}t.categorys=a,t.catWords=s,n.resolve(t)}}),n.promise},saveSentence:function(e){l.message_helper="Saving sentence record!",sentence=new m,sentence.set("lemma",e.lemma),sentence.set("define",e.define.define),sentence.set("sentence",e.sentence),sentence.set("level",e.level),sentence.set("mood",e.mood),sentence.set("gammartags",e.gammartags),sentence.set("synsetid",e.define.synsetid),sentence.set("garmmardefine",e.garmmardefine),sentence.set("syn",e.synid),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_spoken",e.gammartags_spoken),sentence.set("gammartags_specific",e.gammartags_specific),sentence.set("gammartags_present",e.gammartags_present),sentence.set("gammartags_future",e.gammartags_future),sentence.set("gammartags_past",e.gammartags_past),sentence.set("gammartags_in_progress",e.gammartags_in_progress),sentence.set("gammartags_interrupted",e.gammartags_interrupted),sentence.set("gammartags_period",e.gammartags_period),sentence.set("gammartags_order_of_time",e.gammartags_order_of_time),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_concurrent",e.gammartags_concurrent),sentence.set("gammartags_subsequent",e.gammartags_subsequent),sentence.set("gammartags_repetition",e.gammartags_repetition),sentence.set("gammartags_timetable",e.gammartags_timetable),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_routine_habit",e.gammartags_routine_habit),sentence.set("gammartags_plan",e.gammartags_plan),sentence.set("gammartags_arrangement",e.gammartags_arrangement),sentence.set("gammartags_prediction",e.gammartags_prediction),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_consequence",e.gammartags_consequence),sentence.set("gammartags_action",e.gammartags_action),sentence.set("gammartags_activity",e.gammartags_activity),sentence.set("gammartags_complete",e.gammartags_complete),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_incomplete",e.gammartags_incomplete),sentence.set("gammartags_certain",e.gammartags_certain),sentence.set("gammartags_uncertain",e.gammartags_uncertain),sentence.set("gammartags_fact_truth",e.gammartags_fact_truth),sentence.set("gammartags_possibility",e.gammartags_possibility),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_impossibility",e.gammartags_impossibility),sentence.set("gammartags_experience",e.gammartags_experience),sentence.set("gammartags_opinion",e.gammartags_opinion),sentence.set("gammartags_suggestion",e.gammartags_suggestion),sentence.set("gammartags_obligation",e.gammartags_obligation),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_phrasal_verb",e.gammartags_phrasal_verb),sentence.set("gammartags_advice",e.gammartags_advice),sentence.set("gammartags_decision",e.gammartags_decision),sentence.set("gammartags_intention",e.gammartags_intention),sentence.set("gammartags_regret",e.gammartags_regret),sentence.set("gammartags_general",e.gammartags_general),sentence.set("gammartags_guess_speculation",e.gammartags_guess_speculation),sentence.set("gammartags_dramatic_effect",e.gammartags_dramatic_effect),sentence.set("gammartags_stress_emphasis",e.gammartags_stress_emphasis),sentence.set("gammartags_collocation",e.gammartags_collocation),sentence.set("gammartags_phrase_idiom",e.gammartags_phrase_idiom),sentence.save().then(function(){l.$apply(function(){l.message_helper="Save sentence succeed!"})})},searchByStringZh:function(e,n){var t=new Parse.Query(d);t.startsWith("zh",e),t.ascending("rank"),t.limit(10),t.find({success:function(e){for(var t=new Array,a=e.length-1;a>=0;a--){var s={};s.lemma=e[a].get("lemma"),t.push(s),l.$apply(function(){l.searchWordList=t})}n(e)}})},searchByString:function(e){var n=new Parse.Query(d);n.startsWith("lemma",e.search_word),n.ascending("rank"),n.limit(10),n.find({success:function(n){l.$apply(function(){e.searchHelperMsg="Select result below",e.searchWordList=new g,e.searchWordList.reset(n)})}})},initWordByLemma:function(e,n){l.word_vote_data={};var t=Parse.Object.extend("AllWordData"),a=new Parse.Query(t);a.equalTo("lemma",e),a.find({success:function(a){var s=e.split(" ");a[0]?l.all_word_data=a[0]:(l.all_word_data=new t,l.all_word_data.set("lemma",e),l.all_word_data.set("single_lemma",s[0]),l.all_word_data.save()),i.get_prefix(r,e,function(e){l.prefixs=e,l.vote_data.prefixs=l.prefixs});var o=new Parse.Query(d);if(o.equalTo("lemma",s[0]),o.ascending("rank"),o.find({success:function(e){l.$apply(function(){var t=e[0];t&&(l.all_word_data.set("SPOKEN",t.get("SPOKEN")),l.all_word_data.set("FICTION",t.get("FICTION")),l.all_word_data.set("ACADEMIC",t.get("ACADEMIC")),l.all_word_data.set("spoken_rate",t.get("SPOKEN")),l.all_word_data.set("fiction_rate",t.get("FICTION")),l.all_word_data.set("academic_rate",t.get("ACADEMIC")),l.all_word_data.save(),l.all_word_data.set("word_rete_done",!0),n(l.all_word_data,e))})}}),l.all_word_data.get("relate_words")||i.get_word_phrase_and_pron(function(e){l.all_word_data.set("uk_change_pron",e.dt.uk_change_pron.replace(/<span class = "pron_bg">/g," ").replace(/<\/span>/g," ").replace("[","").replace("]","").trim()),l.all_word_data.set("uk_pron",e.dt.uk_pron.replace(/<span class = "pron_bg">/g," ").replace(/<\/span>/g," ").replace("[","").replace("]","").trim()),l.all_word_data.set("us_pron",e.dt.us_pron.replace(/<span class = "pron_bg">/g," ").replace(/<\/span>/g," ").replace("[","").replace("]","").trim()),l.all_word_data.set("us_change_pron",e.dt.us_change_pron.replace(/<span class = "pron_bg">/g," ").replace(/<\/span>/g," ").replace("[","").replace("]","").trim()),l.all_word_data.set("spelling",e.dt.spelling);for(var n=new Array,t=e.ph.length-1;t>=0;t--)n.push(e.ph[t].lemma);
l.all_word_data.set("relate_words",n),l.all_word_data.set("vote_pron_rate",100),l.all_word_data.set("vote_phrase_rate",100),l.all_word_data.save()}),!l.all_word_data.get("form_type_done")){var r="v";i.get_type(r,e,function(e){for(var n=e.length-1;n>=0;n--)"v"==e[n].pos&&(l.all_word_data.set("form_v",!0),l.all_word_data.set("form_v_a",e[n].types.a),l.all_word_data.set("form_v_b",e[n].types.b),l.all_word_data.set("form_v_c",e[n].types.c),l.all_word_data.set("form_v_d",e[n].types.d),l.all_word_data.set("form_v_e",e[n].types.e)),"n"==e[n].pos&&(l.all_word_data.set("form_n",!0),l.all_word_data.set("form_n_a",e[n].types.a),l.all_word_data.set("form_n_b",e[n].types.b)),"j"==e[n].pos&&(l.all_word_data.set("form_j",!0),l.all_word_data.set("form_j_a",e[n].types.a),l.all_word_data.set("form_j_b",e[n].types.b),l.all_word_data.set("form_j_c",e[n].types.c)),"r"==e[n].pos&&(l.all_word_data.set("form_r",!0),l.all_word_data.set("form_r_a",e[n].types.a),l.all_word_data.set("form_r_b",e[n].types.b)),l.all_word_data.set("end_str",e[0].end_str),l.all_word_data.set("start_str",e[0].start_str),l.all_word_data.set("form_type_done",!0),l.all_word_data.set("vote_form_type_rate",100),l.all_word_data.save()})}}});var s=Parse.Object.extend("Dict"),a=new Parse.Query(s);a.equalTo("lemma",e),a.find({success:function(e){for(var n=new Array,t=e.length-1;t>=0;t--)if(!e[t].get("sentence_main")){if(e[t].get("sampleset"))var a=e[t].get("sampleset").split("|");else var a=new Array;for(var o=a.length-1;o>=0;o--)a[o]=a[o].trim().replace(a[o].substring(0,1),a[o].substring(0,1).toUpperCase()),a[o].trim().endsWith("!")||a[o].trim().endsWith("?")||a[o].trim().endsWith(".")||(a[o]=a[o]+".");e[t].set("sentence_list",a),e[t].set("sentence_main",a[0]),e[t].get("vote_sentence_rate")||e[t].set("vote_sentence_rate",100),n.push(e[t].get("synsetid"))}for(var t=e.length-1;t>=0;t--)e[t].save();var i=new Parse.Query(s);i.containedIn("synsetid",n),i.find({success:function(n){for(var t=n.length-1;t>=0;t--)for(var a=n[t].get("synsetid"),s=e.length-1;s>=0;s--)if(e[s].get("synsetid")==a){var o=e[s].get("synsetlemma");o||(o=new Array),-1==o.indexOf(n[t].get("lemma"))&&(o.push(n[t].get("lemma")),e[s].set("synsetlemma",o))}for(var t=e.length-1;t>=0;t--)e[t].save()}}),l.worddefines=e}})},search_word:function(e,n){var t=new Parse.Query(d);t.equalTo("lemma",e),t.ascending("rank"),t.limit(1),t.find({success:function(e){n(e)}})}}}]),angular.module("triAngular").factory("HelperService",["EmailService","$interval","$q","$mdToast","$state","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r){var l,d=[],c=!1,m="";return{getLevels:function(){var e=[],n={};n.name="A1, Beginner",n.id="a1_beginner",e.push(n);var n={};n.name="A2, Elementary",n.id="a2_elementary",e.push(n);var n={};n.name="B1, Intermediate",n.id="b1_intermediate",e.push(n);var n={};n.name="B2, Upper Intermediate",n.id="b2_upper_intermediate",e.push(n);var n={};n.name="C1, Low Advanced",n.id="c1_low_advanced",e.push(n);var n={};return n.name="C2, Advanced",n.id="c2_advanced",e.push(n),e},getLanguage:function(){var e={};return e.arabic={key:"arabic",name:"Arabic",short_name:"Arabic"},e.chinese={key:"chinese",name:"Chinese",short_name:"Chinese"},e.english={key:"english",name:"English",short_name:"English"},e.french={key:"french",name:"French",short_name:"French"},e.german={key:"german",name:"German",short_name:"German"},e.indian_language={key:"indian_language",name:"Indian language",short_name:"Indian language"},e.indonesian={key:"indonesian",name:"Bahasa Indonesia",short_name:"Bahasa Indonesia"},e.iranian_language={key:"iranian_language",name:"Iranian language",short_name:"Iranian language"},e.italian={key:"italian",name:"Italian",short_name:"Italian"},e.japanese={key:"japanese",name:"Japanese",short_name:"Japanese"},e.korean={key:"korean",name:"Korean",short_name:"Korean"},e.malaysian={key:"malaysian",name:"Malaysian",short_name:"Malaysian"},e.mordic_language={key:"mordic_language",name:"Nordic language",short_name:"Nordic language"},e.polish={key:"polish",name:"Polish",short_name:"Polish"},e.portuguese={key:"portuguese",name:"Portuguese",short_name:"Portuguese"},e.russian={key:"russian",name:"Russian",short_name:"Russian"},e.spanish={key:"spanish",name:"Spanish",short_name:"Spanish"},e.thai={key:"thai",name:"Thai",short_name:"Thai"},e.turkish={key:"turkish",name:"Turkish",short_name:"Turkish"},e.vietnamese={key:"vietnamese",name:"Vietnamese",short_name:"Vietnamese"},e.other={key:"other",name:"Other",short_name:"Other"},e},fixeSentence:function(e){e=e.trim().replace(e.substring(0,1),e.substring(0,1).toUpperCase());var n=e.trim().slice(-1);return"!"!=n&&"?"!=n&&"."!=n&&(e+="."),e},fixeSentenceSpace:function(e){e=e.trim().replace(e.substring(0,1),e.substring(0,1).toUpperCase());var n=e.trim().slice(-1);return"!"!=n&&"?"!=n&&"."!=n&&(e+=" ."),e},getUNIString:function(){for(var e=Date.parse(new Date),n="",t="abcdefghijklmnopqrstuvwxyz0123456789",a=0;5>a;a++)n+=t.charAt(Math.floor(Math.random()*t.length));var s=e+n;return s},setProgressGrammarView:function(e){var n=e.been_test_acts?e.been_test_acts:[],t=this.getCourseExerciseMatch();if("progress_test"==e.type)var a="load_next";else if("reading"==e.grammar_type)var a="load_next";else var a="close";for(var s in t){var o=n.indexOf(s);if(0>o&&e[s]){a=t[s].action,n.push(s),e.been_test_acts=n;break}}return e.view=a,e},getCourseExerciseMatch:function(){var e={};return e.test_all={type:"test_all",action:"summary",key:"test_all",name:"Test All",short_name:"All"},e.lexis={type:"vocab",action:"vocab1",key:"lexis",name:"Lexis",short_name:"Lexis"},e.form={type:"old_summary",action:"summary",key:"summary",name:"Form",short_name:"Form"},e.form_action={type:"summary",action:"summary",key:"form_action",name:"Form",short_name:"Form"},e.spoken_writing_form={type:"summary",action:"act1",key:"spoken_writing_form",name:"Spoken/Writing form",short_name:"Spoken/Writing form"},e.use_func={type:"normal",action:"act2",key:"use_func",name:"Use/Function",short_name:"Use/Function"},e.quiz={type:"normal",action:"act3",key:"quiz",name:"Quiz",short_name:"Quiz"},e.identification={type:"normal",action:"act4",key:"identification",name:"Identification",short_name:"Identification"},e.error_correction={type:"normal",action:"act5",key:"error_correction",name:"Error correction",short_name:"Error correction"},e.word_order={type:"normal",action:"act6",key:"word_order",name:"Word order",short_name:"Word order"},e.reading_comprehension={type:"reading",action:"act7",key:"reading_comprehension",name:"Reading comprehension",short_name:"Comprehension"},e.reading_gap_fill={type:"reading",action:"act8",key:"reading_gap_fill",name:"Reading gap-fill",short_name:"Gap-fill"},e.dialogue_match={type:"dialogue",action:"act9",key:"dialogue_match",name:"Dialogue match",short_name:"Match"},e.dialogue_quiz={type:"dialogue",action:"act10",key:"dialogue_quiz",name:"Dialogue quiz",short_name:"Quiz"},e.dialogue_gap_fill={type:"dialogue",action:"act11",key:"dialogue_gap_fill",name:"Dialogue gap-fill",short_name:"Gap-fill"},e.dialogue_error_correction={type:"dialogue",action:"act12",key:"dialogue_error_correction",name:"Dialogue error correction",short_name:"Error correction"},e.free_practice={type:"free_practice",action:"act13",key:"free_practice",name:"Free practice",short_name:"Free practice"},e},onlyUnique:function(e){for(var n=[],t=e.length-1;t>=0;t--){var a=e[t],s=n.indexOf(a);0>s&&n.push(a)}return n},scrollTo:function(e){function n(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function t(e){for(var n=document.getElementById(e),t=n.offsetTop,a=n;a.offsetParent&&a.offsetParent!=document.body;)a=a.offsetParent,t+=a.offsetTop;return t}var a=n(),s=t(e),o=s>a?s-a:a-s;if(100>o)return void scrollTo(0,s);var i=Math.round(o/100);i>=20&&(i=20);var r=Math.round(o/25),l=s>a?a+r:a-r,d=0;if(s>a)for(var c=a;s>c;c+=r)setTimeout("window.scrollTo(0, "+l+")",d*i),l+=r,l>s&&(l=s),d++;else for(var c=a;c>s;c-=r)setTimeout("window.scrollTo(0, "+l+")",d*i),l-=r,s>l&&(l=s),d++},checkEmail:function(e){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)},remove_in_array:function(e,n){var t=n.indexOf(e);return t>-1&&n.splice(t,1),n},in_array:function(e,n){var t=n.indexOf(e);return t>-1?!0:!1},in_array_index:function(e,n){var t=n.indexOf(e);return t},get_grammar_types:function(e){var n={};return n.spoken=e.get("spoken"),n.informal=e.get("informal"),n.formal=e.get("formal"),n.academic=e.get("academic"),n.business=e.get("business"),n.legal=e.get("legal"),n.scientific=e.get("scientific"),n.journalistic=e.get("journalistic"),n.literary=e.get("literary"),n.poetic=e.get("poetic"),n},set_grammar_types:function(e,n){return e.set("spoken",n.spoken),e.set("informal",n.informal),e.set("formal",n.formal),e.set("academic",n.academic),e.set("business",n.business),e.set("legal",n.legal),e.set("scientific",n.scientific),e.set("journalistic",n.journalistic),e.set("literary",n.literary),e.set("poetic",n.poetic),e},calcuate_percent:function(e){for(var n=e.in_db_grammars,t=0,a=n.length-1;a>=0;a--){var s=n[a],o=s.get("error_grammar_percent")?s.get("error_grammar_percent"):100;o=100-Number(parseFloat(o)),t+=o}return n.length>0?(t=Math.ceil(t/n.length),t+="%"):t="100%",e.total_percent=t,e},makeid:function(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;10>t;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},getDemoImages:function(){var e=[];return e.push("//cdn.morguefile.com/imageData/public/files/c/Castlelass/03/m/1457366289ay3al.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/j/JessicaGale/03/m/1457301886x1u3g.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/j/JasonGillman/03/m/1457239370rbq3p.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/d/Domas/03/m/145708975616ea5.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/d/Domas/03/m/145708970344wbo.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/d/Domas/03/m/1457089697lwdux.jpg"),e.push("//cdn.morguefile.com/imageData/public/files/d/dibjo/03/m/1457048950xscqx.jpg"),e},shuffle:function(e){for(var n,t,a=e.length;a;n=parseInt(Math.random()*a),t=e[--a],e[a]=e[n],e[n]=t);return e},limitArray:function(e,n){for(var t=[],a=0;a<=n.length-1;a++)t.length<e&&t.push(n[a]);return t},getLetterStr:function(e){for(var n=e.match(/[a-zA-Z]+/g),t="",a=n.length-1;a>=0;a--)t+=n[a];return t},getCurrentTutorial:function(e){var n=this.getLetterStr(e),a=t.defer(),s=r.user,o="",i="",l="not set it yet";if(s){o=s.get(n)?s.get(n):1,i=s.get("user_role");var l=s.get("native")?s.get("native"):"english";l=l.toLowerCase(),"spanish"!=l&&"indonesian"!=l&&(l="english")}var d=Parse.Object.extend("Tutorial"),c=new Parse.Query(d);return c.equalTo("state",e),c.equalTo("language",l),c.equalTo("order",o),c.equalTo("viewed",!0),c.equalTo("role",i),c.first({success:function(e){a.resolve(e)}}),a.promise},getSymbols:function(){var e=[".",",",";","!","?"];return e},getStatesByTitle:function(e){var n=this.getStates(),t=n.titles,a=n.states,s=t.indexOf(e);return s>-1?(console.log(a[s]),a[s]):""},getTitileByState:function(e){var n=this.getStates(),t=n.titles,a=n.states,s="",o=r.user;o&&(s=o.get("user_role"));for(var i=t.length-1;i>=0;i--){var l=t[i].indexOf(s);0>l&&(a.splice(l,1),t.splice(l,1))}var l=a.indexOf(e);return l>-1?t[l]:!1},getStates:function(){var e=[],n=[];e.push("LEVEL TEST"),e.push("TUTORIAL"),e.push("HOMEPAGE"),e.push("REFERENCE"),e.push("STUDY NOTES"),e.push("PROGRESS TEACHER"),e.push("PROGRESS STUDENT"),e.push("ClASS MANAGE"),e.push("PRINTABLE WORKSHEETS"),e.push("PRON SELECTION"),e.push("COURSE 100% SHARE"),n.push("admin-panel.default.level-test"),n.push("admin-panel.default.help-wordiser"),n.push("admin-panel.default.home"),n.push("admin-panel.default.notice-category"),n.push("admin-panel.default.study-notes"),n.push("admin-panel.default.classwordlist"),n.push("admin-panel.default.review"),n.push("admin-panel.default.class"),n.push("admin-panel.default.worksheet"),n.push("pronselection"),n.push("curse100share");var t={};return t.titles=e,t.states=n,t},getTips:function(){var e={},n={};return e.general="Click here to study General, Business or Exam English... Use the + STUDY button to add what you want to study and learn!",e.grammar="Click here to study English Grammar... Again use the + STUDY button.",e.list="Click here to save your study lists, added by the + STUDY button.",e.search="Click here to search words or phrases to study.",e.email="Click here for notices, messages and updates.",e.progress="Click here for your progress and to access work done e.g. quizzes or writing.",e.note="Click here to save notes or access lesson notes from a teacher.",e.help="Click here for further help and tutorial videos. See all the things you can do with Wordiser!",n.search="Click here to search words or phrases for students to study.",n.email="Click here for notices, messages and updates.",n.list="Click here to save your class study lists, which are used to generate printable worksheets and automated revision exercises for students.",n.general="Click here to view General, Business or Exam English word lists. You can print worksheets from here or add items to your class study list.",n.grammar="Click here to view English Grammar categories. You can print worksheets from here or add items to your class study list.",n.class="Click here to set up and manage classes and students.",n.note="Click here to open and save interactive class notes.",n.progress="Click here for student progress reports.",n.worksheet="Click here to access all printable worksheets, either from your saved class study lists or General, Business, Exam or Grammar categories.",n.help="Click here for further help and tutorial videos. See how to setup classes and add students to them!",r.user&&"student"==r.user.get("user_role")?e:n},set_adverb_false_anwsers:function(e){c="Adverb",l=e.get("lemma");var n=[],t=[],a={};n[0]=[];if(n[0].push(l),t.push(l),t.type="r","well"==l)var s="good",o="goodly";else if("ally"==l.substr(l.length-4,4))var i=l.substr(0,l.length-4),s=i+"ly",o=i+"aly";else if("ly"!=l.substr(l.length-2,2))var s=l+"ly",o=l+"aly";else if("ally"!=l.substr(l.length-4,4)&&"ly"==l.substr(l.length-2,2))var i=l.substr(0,l.length-2),s=i+"y",o=i+"ally";else var i=l.substr(0,l.length-2),s=i+"y",o=i+"ally";return n[0].push(s),n[0].push(o),a.choiceForms=this.shuffle_forms_array(n),a.choiceFormsAnwser=t,a.lemma_pos=c,a},checkParseOnline:function(){if("update"!=s.current.name){var e=Parse.Object.extend("Fre60K"),n=new Parse.Query(e);n.first({success:function(e){return e?!0:void s.go("update")},error:function(){s.go("update")}})}},goToUpdatePage:function(){s.go("update")},splitDefineLable:function(e){var n=e.get("definition"),t=n.indexOf(")");if(t>-1){var a=n.split(")");if(2==a.length){var s=a[1],o=a[0]+")";e.set("definition",s.trim()),e.set("label",o),e.save()}}return e},checkHideEditDefine:function(e){var n=r.user;return!e.get("admin")||n.get("admin")||n.get("author")?!1:!0},generate_next_review_time:function(e){var n=(new Date,0),t=e.get("next_type");if("a7"==t){n=12;var a=60*n*60*1e3}else if("a6"==t){n=12;var a=60*n*60*1e3}else if("a8"==t){n=24;var a=60*n*60*1e3}else if("a4"==t){n=24;var a=60*n*60*1e3}else if("a9"==t){n=24;var a=60*n*60*1e3}else{n=.5;var a=60*n*60*1e3}var s=new Date((new Date).getTime()+a);return e.set("next_time",s),e},generate_process_class:function(e){var n="progress-0";switch(e){case"a1":n="progress-10";break;case"a7":n="progress-20";break;case"a3":n="progress-30";break;case"a6":n="progress-40";break;case"a2":n="progress-50";break;case"a8":n="progress-60";break;case"a4":n="progress-70";break;case"a5":n="progress-80";break;case"a9":n="progress-90";break;case"a10":n="progress-100";break;case"go_to_game":n="progress-100";break;default:n="progress-0"}return n},generate_next_review_type:function(e,n){var t=e.get("next_type");"a10"==t&&e.set("finish_test",!0);var a=e.get("sentence_no_first_letter"),s=n.get("the_uk_pron"),o=s.indexOf("*");switch(t){case"a1":0>o?e.set("next_type","a3"):e.set("next_type","a7");break;case"a7":e.set("next_type","a3");break;case"a3":e.set("next_type","a6");break;case"a6":""!=a&&a?e.set("next_type","a2"):e.set("next_type","a8");break;case"a2":e.set("next_type","a8");break;case"a8":""!=a&&a?e.set("next_type","a4"):e.set("next_type","a9");break;case"a4":e.set("next_type","a5");break;case"a5":e.set("next_type","a9");break;case"a9":e.set("next_type","a10");break;case"10":e.set("finish_test",!0);break;default:e.set("finish_test",!0)}return e},grammar_generate_next_review_time:function(e){var n=(new Date,0),t=e.get("next_type");if("act1"==t){n=12;var a=60*n*60*1e3}else if("act3"==t){n=12;var a=60*n*60*1e3}else if("act4"==t){n=24;var a=60*n*60*1e3}else if("act5"==t){n=24;var a=60*n*60*1e3}else if("act6"==t){n=24;var a=60*n*60*1e3}else if("act13"==t){n=672;var a=60*n*60*1e3}else{n=.5;var a=60*n*60*1e3}var s=new Date((new Date).getTime()+a);return e.set("next_time",s),e},grammar_get_act_weight:function(e){var n=1;switch(e){case"act1":n="a12";break;case"act2":n=1;break;case"act3":n=2;break;case"act4":n=1;break;case"act5":n=1;break;case"act6":n=1;break;case"act7":n=1;break;case"act8":n=1;break;case"act9":n=1;break;case"act10":n=1;break;case"act11":n=1;break;case"act12":n=1;break;case"act13":n=1;break;default:n=1}return n},grammar_generate_next_review_type:function(e){e.grammar_type&&(e.type="progress_test");var n=e.type,t=e.view,a="",s=this;if("grammar"==n)switch(t){case"act1":a="act3";break;case"act3":a="act4";break;case"act4":a="act5";break;case"act5":a="act6";break;case"act6":a="close";break;default:a="act1"}else if("select_actions"==n){var o=s.setProgressGrammarView(e);a=o.view}else if("progress_test"==n){var o=s.setProgressGrammarView(e);a=o.view}else if("grammar_exercise"==n)switch(t){case"act1":a="act3";break;case"act3":a="act4";break;case"act4":a="act5";break;case"act5":a="act6";break;case"act6":a="act13";break;case"act13":a="act13";break;default:a="act1"}else if("dialogue"==n)switch(t){case"act8":a="act9";break;case"act9":a="act10";break;case"act10":a="act11";break;case"act11":a="act12";break;case"act12":a="close";break;default:a="act8"}else switch(t){case"act1":a="act2";break;case"act2":a="act3";break;case"act3":a="act4";break;case"act4":a="act5";break;case"act5":a="act6";break;case"act6":a="act7";break;case"act7":a="act8";break;case"act8":a="act9";break;case"act9":a="act10";break;case"act10":a="act11";break;case"act11":a="act12";break;case"act12":a="act15";break;case"act13":a="act14";break;case"act14":a="close";break;default:a="act1"}return a},generate_lemma_arr:function(e){for(var n=[],t=[],a=e.length-1;a>=0;a--)n.push(" "==e[a]?"_":e[a]);for(var s="aeiou",a=s.length-1;a>=0;a--)t.push(s[a]);this.shuffle(t),n.push(t[0]),n.push(t[1]);for(var s="bcdfghjklmnpqrstvwxyx",a=s.length-1;a>=0;a--)t.push(s[a]);this.shuffle(t),n.push(t[0]),n.push(t[1]),n.push(t[2]);var o=this.shuffle(n);return o},check_word_can_add:function(n,t){var s=this.replace_lemma_form_sentence(t.get("sentence_main"),n.frek),o=n.frek.get("uk_pron"),i=s.include_lemma,r=n.choiceWords,l=!0;r.length<2&&(l=!1),i||(l=!1);var d=o.indexOf("*");return 0>d&&(l=!1),l||(a.show(a.simple().content("Sorry, word or phrase cannot be added!").position("bottom right").hideDelay(5e3)),t.dont_sent_email||e.defineErrorReportEmail(t)),l},get_false_anwsers:function(e,n){d=[];if("v"==n)var t=this.set_verb_false_anwsers(e);if("n"==n)var t=this.set_noun_false_anwsers(e);if("r"==n)var t=this.set_adverb_false_anwsers(e);if("j"==n||"a"==n||"s"==n)var t=this.set_adj_false_anwsers(e);return t},get_forms_data:function(){this.shuffle(d);var e={};return e.choiceFormsAnwser=m,e.choiceForms=d,e.lemma_pos=c,e},replace_vowel:function(e,n){var t={},a=e.substr(0,n);a||(a="");for(var s=e.substr(n,e.length),o=!1,i=0,r=this,l=0;l<=s.length-1;l++){var d=s.charAt(l);switch(d){case"a":s=r.setCharAt(s,l,"u"),o=!0;break;case"e":s=r.setCharAt(s,l,"i"),o=!0;break;case"i":s=r.setCharAt(s,l,"e"),o=!0;break;case"o":s=r.setCharAt(s,l,"a"),o=!0;break;case"u":s=r.setCharAt(s,l,"o"),o=!0}if(o){i=l+1;break}}return t.fa=a+s,t.start=i,t},setCharAt:function(e,n,t){return n>e.length-1?e:e.substr(0,n)+t+e.substr(n+1)},set_noun_false_anwsers:function(e){c="Noun";var n=e.get("lemma"),t=e.get("lemma"),a=e.get("form_n_b")?e.get("form_n_b"):n+"s",s=[],o=[],i={};s[0]=[],s[1]=[],s[2]=[];if(o[0]=n,o[1]=a,s[0].push(n),s[1].push(a),t==n&&"er"==t.substr(t.length-2,2))var r=t.substr(0,t.length-2);else if(t==n&&"or"==t.substr(t.length-2,2))var r=t.substr(0,t.length-2);else if(t==n&&"ar"==t.substr(t.length-2,2))var r=t.substr(0,t.length-2);else;if("e"==n.substr(n.length-1,1))var r=n.substr(0,n.length-1),l=r+"s",d=r+"ies";else if("y"==n.substr(n.length-1,1))var r=n.substr(0,n.length-1),l=r+"s",d=r+"ment";else if("ers"==a.substr(a.length-3,3))var r=a.substr(0,a.length-3),l=r+"ars",d=r+"ors";else if("ars"==a.substr(a.length-3,3))var r=a.substr(0,a.length-3),l=r+"ers",d=r+"ors";else if("ors"==a.substr(a.length-3,3))var r=a.substr(0,a.length-3),l=r+"ers",d=r+"ars";else if("ies"==a.substr(a.length-3,3))var l=n+"es",d=n+"s";else if("es"==a.substr(a.length-2,2))var l=n+"ies",d=n+"s";else{var l=n+"ment";if("e"==n.substr(n.length-1,1))var d=n+"s";else var d=n+"es"}return s[0].push(n),s[1].push(l),s[0].push(n),s[1].push(d),i.choiceForms=this.shuffle_forms_array(s),i.choiceFormsAnwser=o,i.lemma_pos=c,i},set_verb_false_anwsers:function(e){c="Verb";var n=this,t=[],a=[],s={};t[0]=[],t[1]=[],t[2]=[],t[3]=[],t[4]=[],"v"==e.get("form_ext_type")&&(t[5]=[],t[6]=[]);var o=e.get("lemma"),i=e.get("form_v_b")?e.get("form_v_b"):l+"s",r=e.get("form_v_c")?e.get("form_v_c"):l+"ing",d=e.get("form_v_d")?e.get("form_v_d"):l+"ed",m=e.get("form_v_e")?e.get("form_v_e"):l+"ed";if("v"==e.get("form_ext_type"))var p=e.get("form_ext_d"),u=e.get("form_ext_e");var g=n.expload_mutile_word(o),f=n.expload_mutile_word(i),_=n.expload_mutile_word(r),h=n.expload_mutile_word(d),v=n.expload_mutile_word(m);if("v"==e.get("form_ext_type"))var b=n.expload_mutile_word(p),y=n.expload_mutile_word(u);var w=g.first_lemma,k=g.first_lemma,x=g.first_lemma;if(a[0]=o,a[1]=i,a[2]=r,a[3]=d,a[4]=m,t[0].push(o),t[1].push(i),t[2].push(r),t[3].push(d),t[4].push(m),"v"==e.get("form_ext_type")&&(a[5]=p,a[6]=u,t[5].push(p),t[6].push(u)),"ies"==f.first_lemma.substr(f.first_lemma.length-3,3))var C=f.first_lemma.substr(0,f.first_lemma.length-3),S=C+"es",E=C+"s";else if("e"==w.substr(w.length-1,1))var S=w+"es",E=w+"yies";else if("es"==f.first_lemma.substr(f.first_lemma.length-2,2))var S=w+"ies",E=w+"s";else if("s"==f.first_lemma.substr(f.first_lemma.length-1,1))var C=f.first_lemma.substr(0,f.first_lemma.length-1),S=C+"es",E=C+"ies";else if("e"==f.first_lemma.substr(f.first_lemma.length-1,1))var C=f.first_lemma.substr(0,f.first_lemma.length-1),S=C+"ies",E=C+"yies";else var S=w+"ies",E=w+"es";var P=_.first_lemma.substr(_.first_lemma.length-5,5),A=_.first_lemma.substr(0,_.first_lemma.length-3);if("dding"==P||"tting"==P||"gging"==P||"pping"==P||"mming"==P||"nning"==P||"bbing"==P)var C=_.first_lemma.substr(0,_.first_lemma.length-5),T=C+"ing",j=C+"ings";else if(A.charAt(A.length)==A.charAt(A.length-1))var C=_.first_lemma.substr(0,_.first_lemma.length-4),T=C+"ing",j=C+"ings";else if(_.first_lemma==w+"ing")var T=w+"ng",j=w+w.charAt(w.length-1)+"ing";else if("e"==_.first_lemma.substr(_.first_lemma.length-1,1))var C=_.first_lemma.substr(0,_.first_lemma.length-1),T=C+"ng",j=C+"in";else var T=w+"ng",j=w+"ing";if("e"==w.substr(w.length-1,1))var $=w+"en",D=h.first_lemma+"n";else if("yed"==h.first_lemma.substr(h.first_lemma.length-3,3))var $=w+"ied",D=w+"d";else if("ied"==h.first_lemma.substr(h.first_lemma.length-3,3))var $=w+"yed",D=w+"d";else if("gged"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"ped",D=w+"pened";else if("pped"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"yed",D=w+"d";else if("nned"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"ned",D=w+"nened";else if("tted"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"ted",D=w+"tened";else if("rred"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"red",D=w+"rened";else if("ssed"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"sed",D=w+"sened";else if("mmed"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"med",D=w+"mened";else if("eled"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"elled",D=w+"eleed";else if("ored"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"orred",D=w+"oreed";else if("ered"==h.first_lemma.substr(h.first_lemma.length-4,4))var $=w+"erred",D=w+"ereed";else if(d==w+"ed")var $=w+"ied",D=w+"d";else if(d==w)var $=w+"ed",D=w+"ied";else if("d"==h.first_lemma.substr(h.first_lemma.length-1,1))var C=h.first_lemma.substr(0,h.first_lemma.length-1),$=C+"e",D=h.first_lemma+"n";else var $=w+"yed",D=w+"ied";if("v"==e.get("form_ext_type"))if("e"==w.substr(w.length-1,1))var O=w+"en",L=b.first_lemma+"n";else if("yed"==b.first_lemma.substr(b.first_lemma.length-3,3))var O=w+"ied",L=w+"d";else if("ied"==b.first_lemma.substr(b.first_lemma.length-3,3))var O=w+"yed",L=w+"d";else if("gged"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"ped",L=w+"pened";else if("pped"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"yed",L=w+"d";else if("nned"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"ned",L=w+"nened";else if("tted"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"ted",L=w+"tened";else if("rred"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"red",L=w+"rened";else if("ssed"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"sed",L=w+"sened";else if("mmed"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"med",L=w+"mened";else if("eled"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"elled",L=w+"eleed";else if("ored"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"orred",L=w+"oreed";else if("ered"==b.first_lemma.substr(b.first_lemma.length-4,4))var O=w+"erred",L=w+"ereed";else if(p==w+"ed")var O=w+"ied",L=w+"d";else if(p==w)var O=w+"ed",L=w+"ied";else if("d"==b.first_lemma.substr(b.first_lemma.length-1,1))var C=b.first_lemma.substr(0,b.first_lemma.length-1),O=C+"e",L=b.first_lemma+"n";else var O=w+"yed",L=w+"ied";if("own"==v.first_lemma.substr(v.first_lemma.length-3,3))var C=v.first_lemma.substr(0,v.first_lemma.length-3),q=C+"on",U=C+"one";else if("n"==v.first_lemma.substr(v.first_lemma.length-1,1))var C=v.first_lemma.substr(0,v.first_lemma.length-1),q=C+"ne",U=C+"en";else if("t"==v.first_lemma.substr(v.first_lemma.length-1,1))var C=v.first_lemma.substr(0,v.first_lemma.length-1),q=C+"d",U=C+"ed";else if("ne"==v.first_lemma.substr(v.first_lemma.length-2,2))var C=v.first_lemma.substr(0,v.first_lemma.length-2),q=C+"n",U=C+"e";else if("en"==v.first_lemma.substr(v.first_lemma.length-2,2))var C=v.first_lemma.substr(0,v.first_lemma.length-2),q=C+"in",U=C+"ine";else if("ed"==v.first_lemma.substr(v.first_lemma.length-2,2))var C=v.first_lemma.substr(0,v.first_lemma.length-2),q=C+"d",U=C+"ied";else if("e"==v.first_lemma.substr(v.first_lemma.length-1,1))var C=v.first_lemma.substr(0,v.first_lemma.length-1),q=C+"ied",U=C+"d";else var C=v.first_lemma.substr(0,v.first_lemma.length-1),q=C+"ed",U=C+"ied";if("v"==e.get("form_ext_type"))if("own"==y.first_lemma.substr(y.first_lemma.length-3,3))var C=y.first_lemma.substr(0,y.first_lemma.length-3),I=C+"on",W=C+"one";else if("n"==y.first_lemma.substr(y.first_lemma.length-1,1))var C=y.first_lemma.substr(0,y.first_lemma.length-1),I=C+"ne",W=C+"en";else if("t"==y.first_lemma.substr(y.first_lemma.length-1,1))var C=y.first_lemma.substr(0,y.first_lemma.length-1),I=C+"d",W=C+"ed";else if("ne"==y.first_lemma.substr(y.first_lemma.length-2,2))var C=y.first_lemma.substr(0,y.first_lemma.length-2),I=C+"n",W=C+"e";else if("en"==y.first_lemma.substr(y.first_lemma.length-2,2))var C=y.first_lemma.substr(0,y.first_lemma.length-2),I=C+"in",W=C+"ine";else if("ed"==y.first_lemma.substr(y.first_lemma.length-2,2))var C=y.first_lemma.substr(0,y.first_lemma.length-2),I=C+"d",W=C+"ied";else if("e"==y.first_lemma.substr(y.first_lemma.length-1,1))var C=y.first_lemma.substr(0,y.first_lemma.length-1),I=C+"ied",W=C+"d";else var C=y.first_lemma.substr(0,y.first_lemma.length-1),I=C+"ed",W=C+"ied";return t[0].push(k+" "+g.last_lemma),t[1].push(S+" "+f.last_lemma),t[2].push(T+" "+_.last_lemma),t[3].push($+" "+h.last_lemma),t[4].push(q+" "+v.last_lemma),t[0].push(x+" "+g.last_lemma),t[1].push(E+" "+f.last_lemma),t[2].push(j+" "+_.last_lemma),t[3].push(D+" "+h.last_lemma),t[4].push(U+" "+v.last_lemma),"v"==e.get("form_ext_type")&&(t[5].push(O+" "+b.last_lemma),t[6].push(I+" "+y.last_lemma),t[5].push(L+" "+b.last_lemma),t[6].push(W+" "+y.last_lemma)),s.choiceForms=this.shuffle_forms_array(t),s.choiceFormsAnwser=a,s.lemma_pos=c,s},shuffle_forms_array:function(e){for(var n=e.length-1;n>=0;n--)e[n]&&e[n][0]&&(e[n]=this.shuffle(e[n]));return e},expload_mutile_word:function(e){var n={},t=e.trim().split(" "),a=t[0];if(t[1])var s=t[t.length-1];else var s="";var o=e.replace(a,""),i=e.replace(s,"");return n.first_lemma=a,n.last_lemma=s,n.last_leave_lemma=o,n.first_leave_lemma=i,n},set_adj_false_anwsers:function(e){c="Adjective",l=e.get("lemma");var n=[],t=[],a={};n[0]=[],n[1]=[],n[2]=[];var s=e.get("form_j_b")?e.get("form_j_b"):l+"er",o=e.get("form_j_c")?e.get("form_j_c"):l+"est";if(t[0]=l,t[1]=s,t[2]=o,n[0].push(l),n[1].push(s),n[2].push(o),s.indexOf("more ")>-1&&"e"==s.substr(s.length-1,1))var i=l+"r",r=l+"er";else if(s.indexOf("more ")>-1&&"y"==s.substr(s.length-1,1))var i=l+"ier",r=l+"er";else if(s.indexOf("more ")>-1&&"y"!=s.substr(s.length-1,1)&&"e"!=s.substr(s.length-1,1))var i=l+"er",r=l+"ier";else if("ier"==s.substr(s.length-3,3))var i="more "+l,r=l+"er";else if("er"==s.substr(s.length-2,2))var i="more "+l,r=l+"r";if(o.indexOf("most ")>-1&&"e"==o.substr(o.length-1,1))var d=l+"st",m=l+"est";else if(o.indexOf("most ")>-1&&"y"==o.substr(o.length-1,1))var d=l+"iest",m=l+"est";else if(o.indexOf("most ")>-1&&"y"!=o.substr(o.length-1,1)&&"e"!=o.substr(o.length-1,1))var d=l+"est",m="most "+l+"st";else if("est"==o.substr(o.length-3,3))var d="most "+l,m=l+"st";else if("iest"==o.substr(o.length-2,2))var d="most "+l,m=l+"est";return n[0].push(l),n[1].push(i),n[2].push(d),n[0].push(l),n[1].push(r),n[2].push(m),a.choiceForms=this.shuffle_forms_array(n),a.choiceFormsAnwser=t,a.lemma_pos=c,a},remove_stress_pron:function(e){return e=e.replace(".",""),e=e.replace(".",""),e=e.replace(".",""),e=e.replace("*",""),e=e.replace("*",""),e=e.replace("*",""),e=e.replace("'",""),e=e.replace("'",""),e=e.replace("'",""),e=e.replace(".",""),e=e.replace(".",""),e=e.replace(".",""),e=e.replace("*",""),e=e.replace("*",""),e=e.replace("*",""),e=e.replace("'",""),e=e.replace("'",""),e=e.replace("'","")},getRandomArbitrary:function(e,n){return Math.floor(Math.random()*n)+e},replace_the_from_sentence:function(e){var n=e.get("pos"),t=e.get("replace_lemma"),a=e.get("sample"),s="______",o=!1,i="",r=a.split(" ");if("n"==n)for(var l=a.replace(t,s),r=l.split(" "),d=r.length-1;d>=0;d--){var c=r[d].indexOf(s);if(c>0&&!o){r[d]=r[d].replace(s,t);var m=r[d-1].trim();("a"==m||"an"==m||"the"==m||"The"==m||"An"==m||"A"==m)&&(o=r[d-1],r[d-1]="<span class = 'empty-lemma'>______</span>",i=d-1)}}else for(var d=r.length-1;d>=0;d--)o||"a"!=r[d]&&"an"!=r[d]&&"the"!=r[d]||(o=r[d],i=d,r[d]="<span class = 'empty-lemma'>______</span>");if(!o)for(var l=a.replace(t,s),r=l.split(" "),d=r.length-1;d>=0;d--){var c=r[d].indexOf(s);c>-1&&(r[d]=r[d].replace(s,t),r.splice(d,0,"<span class = 'empty-lemma'>______</span>"),o="_",i=d)}if(!o){var p=this.getRandomArbitrary(1,r.length-2);r.splice(p,0,"<span class = 'empty-lemma'>______</span>"),o="_",i=p}var u={};return u.anwser_lemma=o,u.anwser_index=i,u.arr=r,u},replace_lemma_form_sentence:function(e,n){var t=!1,a="",s="",o="",i="",r="",l="",d="",c="",m=n.get("lemma"),p=m.trim().replace(m.substring(0,1),m.substring(0,1).toUpperCase()),u=new Array;
u.push(n.get("form_v_b")),u.push(n.get("form_v_c")),u.push(n.get("form_v_d")),u.push(n.get("form_v_e")),u.push(n.get("form_n_b")),u.push(n.get("form_j_a")),u.push(n.get("form_j_b")),u.push(n.get("form_r_b")),u.push(n.get("form_ext_b")),u.push(n.get("form_ext_c")),u.push(n.get("form_ext_d")),u.push(n.get("form_ext_e")),u.push(m),u.push(p);for(var g=u.length-1;g>=0;g--)("undefined"==typeof u[g]||""==u[g])&&u.splice(g,1);u.sort(function(e,n){return e.length-n.length});for(var g=u.length-1;g>=0;g--){var c=u[g];if(c&&(c=c.trim()),e&&e.indexOf(c)>-1){var d=c.charAt(0),f=d+"______",l="______",a=e.replace(c,'<span class = "anwser-input">'+f+"</span>"),s=e.replace(c,'<span class = "anwser-input">'+l+"</span>"),o=e.replace(c,'<strong class = "anwser-input">'+c+"</strong>"),i=e.replace(c,l),r=e.replace(c,f);t=!0;break}}var _={};return _.sentence_with_first_letter=a.trim(),_.sentence_no_first_letter=s.trim(),_.sentence_strong_letter=o.trim(),_.anwser_lemma=l.trim(),_.replace_lemma=c.trim(),_.firstletter=d.trim(),_.include_lemma=t,_.sentence_no_first_letter_no_html=i.trim(),_.sentence_with_first_letter_no_html=r.trim(),_}}}]),angular.module("triAngular").factory("GameService",["$interval","$q","$mdToast","$state","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i){function r(e){for(var n,t,a=e.length;a;n=parseInt(Math.random()*a),t=e[--a],e[a]=e[n],e[n]=t);return e}var l,d,c=35,m=100,p=300,u=[],g=[],f={},_="normal_game";return f.level=1,f.anwser_words=[],{setMinGame:function(){c=15,m=45,p=200,f.level=1,_="min_game"},setNormalGame:function(){c=35,m=120,p=300,f.level=1,_="normal_game"},getGameData:function(){return f},initGameData:function(){u=[],f.personPoint=0,f.computerPoint=0,f.timeCount=0,f.timeBegin=!1,f.results=!1,f.countTimeEnd=parseInt(m/f.level),f.endPoint=p},in_array:function(e,n){for(var t=0;t<e.length;t++)if(e[t]==n)return!0;return!1},get_rand:function(e){for(var n=e.length;n>=1;n--){var t=e[Math.floor(Math.random()*e.length)];if(!in_array(gen_nums,t))return gen_nums.push(t),t}},getRandomInt:function(e,n){return e=1,n=totalRow*totalCol,Math.floor(Math.random()*(n-e+1))+e},getLength:function(e){if(e.length<3)return 1;if(3==e.length)return 2;var n=e.length,t=parseInt(n/3);return n%3>0&&(t+=1),t},unique:function(e){var n=[];return $.each(e,function(e,t){-1==$.inArray(t,n)&&n.push(t)}),n},unique_ext:function(e){for(var n=[],t=e.length-1;t>=0;t--){var a=e[t],s=n.indexOf(a);0>s&&n.push(a)}return n},getLeaveLemms:function(){for(var e=[],n=u.length-1;n>=0;n--){var t=u[n];t.clicked||e.push(t.lemma)}return e},checkMatchWord:function(e){var n=e,t={};t.matched=!1;for(var a=n.length-1;a>=0;a--)for(var s=g.length-1;s>=0;s--)if(g[s].indexOf(n[a].lemma)>-1)for(var o=g[s].replace(n[a].lemma,""),i=n.length-1;i>=0;i--)if(o==n[i].lemma){t.first_match=n[a],t.second_match=n[i],t.matched=!0,t.matched_lemma=g[s];var r=t.matched_lemma,l=t.first_match.lemma,d=(t.second_match.lemma,r.indexOf(l));if(d>0){var c=t.first_match;t.first_match=t.second_match,t.second_match=c}return t.first_match.anwser_word="<strong>"+t.first_match.lemma+"</strong>"+t.second_match.lemma,t.second_match.anwser_word=t.first_match.lemma+"<strong>"+t.second_match.lemma+"</strong>",t}return t},checkGameEnd:function(){var e=this;if(f.timeCount>=f.countTimeEnd||f.personPoint>=f.endPoint){f.showStartButton=!0,e.cancelAllTimers();var n=f.personPoint>=f.endPoint?!0:!1;n?(t.show(t.simple().content("You win! Click START for next level.").position("top left").hideDelay(5e3)),f.level=f.level+1,f.level=f.level>5?5:f.level,f.results="You win! Click START for next level."):("normal_game"==_&&(t.show(t.simple().content("You lose! Sorry, you're down a level. Click START to continue.").position("top left").hideDelay(5e3)),f.results="You lose! Sorry, you're down a level. Click START to continue."),"min_game"==_&&(t.show(t.simple().content("You lose! Continue review.").position("top left").hideDelay(5e3)),i.$broadcast("game_lose")),f.level=f.level-1,f.level=f.level<1?1:f.level)}},checkComputerMatchWord:function(){for(var e=[],n=u.length-1;n>=0;n--){var t=u[n];t.computer&&!t.select&&e.push(t)}var a=this.checkMatchWord(e);return a.matched&&(a.first_match.select=!0,a.first_match.computer=!0,a.first_match.matched_lemma=a.matched_lemma,a.second_match.select=!0,a.second_match.computer=!0,a.second_match.matched_lemma=a.matched_lemma,f.computerPoint=f.computerPoint+50),!1},checkPersonMatchWord:function(){for(var e=[],n=u.length-1;n>=0;n--){var a=u[n];a.person&&!a.select&&e.push(a)}var s=this.checkMatchWord(e);if(s.matched)s.first_match.select=!0,s.first_match.person=!0,s.first_match.matched_lemma=s.matched_lemma,s.first_match.anwsers=s.second_match.select=!0,s.second_match.person=!0,s.second_match.matched_lemma=s.matched_lemma,f.personPoint=f.personPoint+50;else if(e.length>=2){f.timeCount=f.timeCount+5,f.personPoint<0&&(f.personPoint=0);for(var n=e.length-1;n>=0;n--)e[n].person=!1,e[n].clicked=!1;t.show(t.simple().content("No match! Sorry, you lose 5 seconds!").position("top left").hideDelay(2e3))}return s.matched},setWordList:function(e){e=r(e),g=e,f.anwser_words=[],this.initGameData();for(var n=[],t=[],a=0,s=100;s>=0;s--){a>e.length-1&&(a=0);var o=e[a];if(a++,!(o.length<=2)){if(o.length<=3)t=o.match(/.{1,2}/g),n=n.concat(t),f.anwser_words.push(o);else{var i=o.trim().indexOf(" ");if(i>-1){var l=o.split(" ");n.push(l[0]);var d=o.replace(l[0],"");n.push(d),f.anwser_words.push(o)}else{var m=parseInt(o.length/2);t=o.substring(0,m),n.push(t),t=o.substring(m,o.length),n.push(t),f.anwser_words.push(o)}}if(n.length>c-2)break}}for(var p=[],s=f.anwser_words.length-1;s>=0;s--){var _=f.anwser_words[s];p.indexOf(_)<0&&p.push(_)}f.anwser_words=p,r(n);for(var s=c-2;s>0;s--){var h={};h.lemma=n[s],h.id=s-1,u.push(h)}return u.push({lemma:"pla",clicked:!0,computer:!0,select:!0}),u.push({lemma:"y!",clicked:!0,computer:!0,select:!0}),r(u),u},cancelAllTimers:function(){e.cancel(l),e.cancel(d)},timeBegin:function(){var n=this;f.timeBegin=!0;var n=this;d=e(function(){f.timeCount=f.timeCount+1,n.checkGameEnd()},1e3)},computerOneStep:function(){},personOneStep:function(e){if(!e.clicked){f.timeBegin||this.timeBegin();var n=this;e.clicked=!0,e.person=!0,n.checkPersonMatchWord(),this.checkGameEnd()}}}}]),angular.module("triAngular").factory("BuildDataService",["$http","WordService","HelperService","$interval","$q","$mdToast","$state","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l,d){var c=Parse.Object.extend("Fre60K"),m=Parse.Object.extend("AddCategory");return{checkImage:function(n){var t=n.get("imagesmain"),a=n.id,o=n.get("lemma"),i=s.defer(),r="word";return t?e.get(t).success(function(){i.resolve("succeed!")}).error(function(){var e=Parse.Object.extend("FixedRecord"),n=new e;n.set("fixed_id",a),n.set("imagesmain",t),n.set("lemma",o),n.set("type",r),n.save().then(function(e){i.resolve(e)})}):i.resolve("no image"),i.promise},buildVocabDefine:function(){var e=s.defer(),n=(Parse.Object.extend("GrammarACTData"),Parse.Object.extend("GrammarACTSTC")),t=new Parse.Query(n);return t.equalTo("type","voca"),t.exists("definition"),t.exists("word_id"),t.doesNotExist("the_define_obj"),t.limit(50),t.count({success:function(e){console.log(e)}}),t.find({success:function(n){for(var t=[],a=n.length-1;a>=0;a--)t.push(n[a].get("definition"));var s=Parse.Object.extend("Dict"),o=new Parse.Query(s);o.containedIn("definition",t),o.find({success:function(e){console.log(e);for(var t=n.length-1;t>=0;t--)for(var a=e.length-1;a>=0;a--)n[t].get("definition")==e[a].get("definition")&&n[t].set("the_define_obj",e[a]);console.log(d.user.id),console.log(n[10].toJSON()),Parse.Object.saveAll(n).then(function(e){console.log(e[10].toJSON())})}}),e.resolve(vocab)}}),e.promise},buildIelts:function(){var e=(s.defer(),new Parse.Query(c));e.exists("cect4");var n=new Parse.Query(m);n.matchesKeyInQuery("name","lemma",e),n.equalTo("type","word"),n.doesNotExist("cect4"),n.count({success:function(e){console.log(e)}});var t=[];n.limit(100),n.find({success:function(e){for(var n=e.length-1;n>=0;n--)e[n].set("cect4",!0),t.push(e[n]);Parse.Object.saveAll(t)}})},getOneCatRecord:function(e){var n=s.defer(),t=new Parse.Query(m);return t.equalTo("type","word"),t.exists("define_obj"),t.doesNotExist(e),t.include("define_obj"),t.select(["define_obj"]),t.count(function(e){console.log(e)}),t.first({success:function(e){n.resolve(e)}}),n.promise},buildCategoryAdmin:function(){var e=(s.defer(),new Parse.Query(m));e.equalTo("type","word"),e.exists("define_obj"),e.doesNotExist("admin"),e.include("define_obj"),e.select(["define_obj"]),e.limit(100),e.count({success:function(e){console.log(e)}});var n=[];e.find({success:function(e){console.log(e[0].toJSON());for(var t=0;t<e.length;t++){var a=e[t].get("define_obj");a.set("admin",!0),e[t].set("admin",!0),n.push(a)}Parse.Object.saveAll(e).then(function(e){console.log(e[0].toJSON())}),Parse.Object.saveAll(n).then(function(e){console.log(e[0].toJSON())})}})},lessReviews:function(){if(!d.user)return!1;var e=Parse.Object.extend("StudentProg"),n=18e6,t=new Date((new Date).getTime()+n),a=new Parse.Query(e);a.equalTo("user_id",d.user.id),a.notEqualTo("remove",!0),a.descending("next_time"),a.lessThan("next_time",new Date),a.notEqualTo("finish_test",!0),a.skip(50),a.limit(200),a.find({success:function(e){for(var n=e.length-1;n>=0;n--){var a=e[n];a.set("next_time",t)}Parse.Object.saveAll(e)}})},buildDefineAndWordForAddCat:function(){var e=Parse.Object.extend("Dict"),n=new Parse.Query(m);n.equalTo("type","word"),n.exists("define_id"),n.doesNotExist("define_obj"),n.limit(100),n.count({success:function(e){console.log(e)}}),n.find({success:function(n){for(var t=[],a=n.length-1;a>=0;a--)t.push(n[a].get("define_id"));var s=new Parse.Query(e);s.containedIn("objectId",t),s.find({success:function(e){for(var t=n.length-1;t>=0;t--)for(var a=e.length-1;a>=0;a--)n[t].get("define_id")==e[a].id&&n[t].set("define_obj",e[a]);Parse.Object.saveAll(n)}})}})},buildWordAndWordForAddCat:function(){var e=Parse.Object.extend("Fre60K"),n=new Parse.Query(m);n.equalTo("type","word"),n.exists("name"),n.notEqualTo("name",""),n.doesNotExist("word_obj"),n.limit(300),n.count({success:function(e){console.log(e)}}),n.find({success:function(n){for(var t=[],a=n.length-1;a>=0;a--)t.push(n[a].get("name"));var s=new Parse.Query(e);s.containedIn("lemma",t),s.limit(300),s.find({success:function(e){console.log(e);for(var t=n.length-1;t>=0;t--)for(var a=e.length-1;a>=0;a--)n[t].get("name")==e[a].get("lemma")&&n[t].set("word_obj",e[a]);Parse.Object.saveAll(n)}})}})},buildCatData:function(){var e=s.defer(),n=864e6,t=new Date((new Date).getTime()-n),a=Parse.Object.extend("AddCategory"),o=new Parse.Query(a);o.lessThan("last_build_data_time",t);var i=new Parse.Query(a);i.doesNotExist("last_build_data_time");var r=Parse.Query.or(o,i);return r.equalTo("type","category"),r.count(function(e){console.log(e)}),r.first({success:function(n){var t=n.id,s=new Parse.Query(a);s.equalTo("parent_cat",t),s.find(function(t){for(var a=[],s=[],o=[],i=[],r=t.length-1;r>=0;r--){var l=t[r],d=l.get("name"),c=l.get("type");"category"==c?(a.push(d),o.push(l.id)):(s.push(d),i.push(l.id))}n.set("last_build_data_time",new Date),n.set("children_data_cat",a),n.set("children_data_word",s),n.set("children_data_cat_ids",o),n.set("children_data_word_ids",i),n.save().then(function(){e.resolve(n)})})}}),e.promise},runCloudCode:function(e){Parse.Cloud.run(e)},updateCategoryData:function(e){if(!d.user.get("admin")&&!d.user.get("author"))return!1;console.log(e.toJSON());var n=Parse.Object.extend("AddCategory"),t=e.id,a=new Parse.Query(n);a.equalTo("parent_cat",t),a.find(function(n){for(var t=[],a=[],s=[],o=[],i=n.length-1;i>=0;i--){var r=n[i],l=r.get("name"),d=r.get("type");"category"==d?(t.push(l),s.push(r.id)):(a.push(l),o.push(r.id))}e.set("last_build_data_time",new Date),e.set("children_data_cat",t),e.set("children_data_word",a),e.set("children_data_cat_ids",s),e.set("children_data_word_ids",o),e.set("need_update_data",!1),e.set("change_data",""),e.save().then(function(e){console.log(e.toJSON())})})},updateWordData:function(e){var n=r.get_review_pron(e.get("uk_pron"),e.get("us_pron"));n.then(function(n){Parse.Cloud.run("updateNewWordClass",{word_id:e.id}).then(function(a){for(var s=a.length-1;s>=0;s--){var o=a[s];if(o.get("lemma")){o.set("form_v_a",e.get("form_v_a")),o.set("form_v_b",e.get("form_v_b")),o.set("form_v_c",e.get("form_v_c")),o.set("form_v_d",e.get("form_v_d")),o.set("form_v_e",e.get("form_v_e")),o.set("form_n_a",e.get("form_n_a")),o.set("form_n_b",e.get("form_n_b")),o.set("form_j_a",e.get("form_j_a")),o.set("form_j_b",e.get("form_j_b")),o.set("form_j_c",e.get("form_j_c")),o.set("form_r_a",e.get("form_r_a")),o.set("form_r_b",e.get("form_r_b")),o.set("uk_anwser",n.uk_anwser),o.set("uk_new_pron",n.uk_new_pron),o.set("uk_pron",n.uk_pron),o.set("us_anwser",n.us_anwser),o.set("us_new_pron",n.us_new_pron),o.set("us_pron",n.us_pron),o.set("the_uk_pron",e.get("uk_pron")),o.set("the_uk_change_pron",e.get("uk_change_pron")),o.set("the_us_pron",e.get("us_pron")),o.set("the_us_change_pron",e.get("us_change_pron"));var i=t.replace_lemma_form_sentence(o.get("sample"),o);i.include_lemma&&(o.set("replace_lemma",i.replace_lemma),o.set("sentence_with_first_letter",i.sentence_with_first_letter),o.set("sentence_no_first_letter",i.sentence_no_first_letter),o.set("anwser_lemma",i.anwser_lemma),o.set("firstletter",i.firstletter),o.set("sentence_no_first_letter_no_html",i.sentence_no_first_letter_no_html),o.set("sentence_with_first_letter_no_html",i.sentence_with_first_letter_no_html))}}Parse.Object.saveAll(a)}),Parse.Cloud.run("updateNewWordProgress",{word_id:e.id}).then(function(a){for(var s=a.length-1;s>=0;s--){var o=a[s];if(o.get("lemma")){o.set("form_v_a",e.get("form_v_a")),o.set("form_v_b",e.get("form_v_b")),o.set("form_v_c",e.get("form_v_c")),o.set("form_v_d",e.get("form_v_d")),o.set("form_v_e",e.get("form_v_e")),o.set("form_n_a",e.get("form_n_a")),o.set("form_n_b",e.get("form_n_b")),o.set("form_j_a",e.get("form_j_a")),o.set("form_j_b",e.get("form_j_b")),o.set("form_j_c",e.get("form_j_c")),o.set("form_r_a",e.get("form_r_a")),o.set("form_r_b",e.get("form_r_b")),o.set("uk_anwser",n.uk_anwser),o.set("uk_new_pron",n.uk_new_pron),o.set("uk_pron",n.uk_pron),o.set("us_anwser",n.us_anwser),o.set("us_new_pron",n.us_new_pron),o.set("us_pron",n.us_pron),o.set("the_uk_pron",e.get("uk_pron")),o.set("the_uk_change_pron",e.get("uk_change_pron")),o.set("the_us_pron",e.get("us_pron")),o.set("the_us_change_pron",e.get("us_change_pron"));var i=t.replace_lemma_form_sentence(o.get("sample"),o);i.include_lemma&&(o.set("replace_lemma",i.replace_lemma),o.set("sentence_with_first_letter",i.sentence_with_first_letter),o.set("sentence_no_first_letter",i.sentence_no_first_letter),o.set("anwser_lemma",i.anwser_lemma),o.set("firstletter",i.firstletter),o.set("sentence_no_first_letter_no_html",i.sentence_no_first_letter_no_html),o.set("sentence_with_first_letter_no_html",i.sentence_with_first_letter_no_html))}}Parse.Object.saveAll(a).then(function(){}),e.set("need_update_data",!1),e.save()})})},updateDefineAndSentence:function(e){Parse.Cloud.run("updateNewDefinesProgress",{define_id:e.id}).then(function(e){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a.get("lemma")){var s=t.replace_lemma_form_sentence(a.get("sample"),a);s.include_lemma&&(a.set("replace_lemma",s.replace_lemma),a.set("sentence_with_first_letter",s.sentence_with_first_letter),a.set("sentence_no_first_letter",s.sentence_no_first_letter),a.set("anwser_lemma",s.anwser_lemma),a.set("firstletter",s.firstletter),a.set("sentence_no_first_letter_no_html",s.sentence_no_first_letter_no_html),a.set("sentence_with_first_letter_no_html",s.sentence_with_first_letter_no_html))}}Parse.Object.saveAll(e).then(function(e){console.log(e)})}),Parse.Cloud.run("updateNewDefinesClass",{define_id:e.id}).then(function(e){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a.get("lemma")){var s=t.replace_lemma_form_sentence(a.get("sample"),a);s.include_lemma&&(a.set("replace_lemma",s.replace_lemma),a.set("sentence_with_first_letter",s.sentence_with_first_letter),a.set("sentence_no_first_letter",s.sentence_no_first_letter),a.set("anwser_lemma",s.anwser_lemma),a.set("firstletter",s.firstletter),a.set("sentence_no_first_letter_no_html",s.sentence_no_first_letter_no_html),a.set("sentence_with_first_letter_no_html",s.sentence_with_first_letter_no_html))}}Parse.Object.saveAll(e).then(function(e){console.log(e)})})},getDataCount:function(){var e=200,n=17,t=Parse.Object.extend("AddCategory"),a=new Parse.Query(t);a.exists("sample"),a.exists("define_id"),a.equalTo("type","word"),a.limit(e),a.skip(e*n),a.count({success:function(e){console.log(e)}})},pronFixed:function(){var e=" I-aa ",n=new Parse.Query(c);n.matches("uk_change_pron",e);var t=new Parse.Query(c);t.matches("us_change_pron",e);var a=Parse.Query.or(n,t);a.doesNotExist("pron_fixd_5"),a.count({success:function(e){console.log(e)}}),a.limit(0),a.find({success:function(e){for(var n=e.length-1;n>=0;n--){var t=e[n],a=" "+t.get("uk_pron")+" ",s=" "+t.get("us_pron")+" ",o=" "+t.get("uk_change_pron")+" ",i=" "+t.get("us_change_pron")+" ",r=" bl ",l=" b l ";a=a.replace(r,l),s=s.replace(r,l),o=o.replace(r,l),i=i.replace(r,l),t.set("uk_pron",a.trim()),t.set("us_pron",s.trim()),t.set("uk_change_pron",o.trim()),t.set("us_change_pron",i.trim())}}})},getNeedReivewUser:function(){var e=Parse.Object.extend("EmailUserList"),n=s.defer(),t=Parse.Object.extend("StudentProg"),a=2592e5,o=new Date((new Date).getTime()-a),i=new Parse.Query(e);i.lessThan("createdAt",o);var r=new Parse.Query(Parse.User);return r.doesNotMatchKeyInQuery("email","email",i),r.limit(1),r.find({success:function(e){if(e[0]){var a=e[0],s=a.id,o=new Parse.Query(t);o.equalTo("user_id",s),o.notEqualTo("remove",!0),o.notEqualTo("finish_test",!0),o.descending("next_time"),o.lessThan("next_time",new Date),o.count({success:function(e){a.set("num",e),n.resolve(a)}})}else n.resolve(!1)}}),n.promise}}}]),angular.module("triReviewModule").directive("gotoaddcategory",["$state","$mdDialog","ReviewService","$rootScope",function(e,n){return{scope:{},restrict:"AE",replace:"true",templateUrl:"components/Directive/GoToAddCategory.tmpl.html",link:function(t){t.goToAddWordCategory=function(){e.go("admin-panel.default.notice-category",{parent_cat:"General English",page:1}),n.cancel()}}}}]),angular.module("triReviewModule").directive("mingame",["GameService","ReviewService","$rootScope",function(e,n,t){return{scope:{},restrict:"AE",replace:"true",templateUrl:"components/Directive/mingame.tmpl.html",link:function(a){var s=function(){var s=n.get_review_lemmas(t.user.id,15);s.then(function(n){var t=e.setWordList(n);a.wordList=t})};s(),e.setMinGame(),t.$on("set_game_data",function(){s()}),a.gameData=e.getGameData(),a.tips=function(){a.showanwsers=!a.showanwsers},a.startGame=function(){a.gameData.showStartButton=!1;var s=n.get_review_lemmas(t.user.id,15);s.then(function(n){var t=e.setWordList(n);a.wordList=t})},a.returnClass=function(e){var n="";return e.computer&&(n+="computer "),e.person&&(n+="person "),e.select&&(n+="select "),n},a.personOneStep=function(n){e.personOneStep(n)}}}}]),angular.module("triNoticeModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/notice-module"),n.state("admin-panel.default.help-wordiser",{url:"/notice/help-wordiser",templateUrl:"app/notice-module/help-wordiser.tmpl.html",controller:"HelpWordiserController"}).state("admin-panel.default.teacher-new",{url:"/notice/teacher-new",templateUrl:"app/notice-module/teacher-new-wordiser.tmpl.html",controller:"EmptyStudentProcessPopController"}).state("admin-panel.default.student-new",{url:"/notice/student-new",templateUrl:"app/notice-module/student-new-wordiser.tmpl.html",controller:"EmptyStudentProcessPopController"}).state("admin-panel.default.exam-ielts-page",{url:"/notice/exam-ielts-page/:parent_cat/:page",templateUrl:"app/notice-module/exam-page.tmpl.html",controller:"ExamIeltsCageyController"}).state("admin-panel.default.exam-cect4-page",{url:"/notice/exam-cect4-page/:parent_cat/:page",templateUrl:"app/notice-module/exam-page.tmpl.html",controller:"ExamCect4PageyController"}).state("admin-panel.default.exam-pet-page",{url:"/notice/exam-pet-page/:parent_cat/:page",templateUrl:"app/notice-module/exam-page.tmpl.html",controller:"ExamPetPageyController"}).state("admin-panel.default.exam-home-page",{url:"/notice/exam-home-page",templateUrl:"app/notice-module/exam-home-page.tmpl.html",controller:"ExamHomePageyController"}).state("admin-panel.default.notice-english-category",{url:"/notice/notice-english-category",templateUrl:"app/notice-module/notice-english-category-page.tmpl.html",controller:"NoticeEnglishCategoryController"}).state("admin-panel.default.class-category-home",{url:"/notice/class-category-home",templateUrl:"app/notice-module/class-category-home.tmpl.html",controller:"ClassCategoryController"}).state("admin-panel.default.notice-category",{url:"/notice/notice-category/:parent_cat/:page",templateUrl:"app/notice-module/notice-category.tmpl.html",controller:"NoticeCategoryController"}).state("admin-panel.default.notice-page",{url:"/notice/notice-page",templateUrl:"app/notice-module/home-page.tmpl.html",controller:"NoticePageController"}).state("admin-panel.default.home",{url:"/home",templateUrl:"app/notice-module/home-page.tmpl.html",controller:"NoticePageController"})}]),angular.module("triNoticeModule").directive("checkImage",["$http",function(e){return{restrict:"A",scope:{color:"=",obj:"="},link:function(n,t,a){var s=a.objId,o=a.parentCat,i=a.lemma,r=a.imagesmain,l=a.type;a.$observe("ngSrc",function(n){e.get(n).error(function(){var e=Parse.Object.extend("FixedRecord"),n=new Parse.Query(e);n.equalTo("fixed_id",s),n.first({success:function(n){if(!n){var n=new e;n.set("fixed_id",s),n.set("parent_cat",o),n.set("imagesmain",r),n.set("lemma",i),n.set("type",l),n.save(),console.log(n.toJSON())}}})})})}}}]),angular.module("triReviewModule").directive("ad4game",["ReviewService","$rootScope",function(){return{scope:{},restrict:"AE",replace:"true",templateUrl:"components/Directive/Ad4GameNew.tmpl.html",link:function(){}}}]),angular.module("triAngularEmail",[]).constant("EMAIL_ROUTES",[{state:"admin-panel-no-scroll.email.inbox",name:"MENU.EMAIL.INBOX",url:"/email/inbox",icon:"icon-inbox"},{state:"admin-panel-no-scroll.email.sent",name:"MENU.EMAIL.SENT",url:"/email/sent",icon:"icon-mail"}]).config(["$translatePartialLoaderProvider","$stateProvider","$provide","EMAIL_ROUTES",function(e,n,t,a){e.addPart("app/email"),n.state("admin-panel-no-scroll.email",{"abstract":!0,views:{sidebarLeft:{templateUrl:"components/sidebar-left/sidebar-left.tmpl.html",controller:"SidebarLeftController"},sidebarRight:{templateUrl:"components/sidebar-right/sidebar-right.tmpl.html",controller:"SidebarRightController"},sidebarSearch:{templateUrl:"components/sidebar-search/sidebar-search.tmpl.html",controller:"SidebarSearchController"},sidebarAddWord:{templateUrl:"components/addword/sidebar-add-word.tmpl.html",controller:"SidebarAddWordController"},sidebarFilter:{templateUrl:"components/sidebar-filter/sidebar-filter.tmpl.html",controller:"SidebarFilterController"},toolbar:{templateUrl:"components/toolbars/default.tmpl.html",controller:"DefaultToolbarController"},content:{template:'<div flex ui-view layout="column" class="overflow-hidden"></div>'}}}),angular.forEach(a,function(e){n.state(e.state,{url:e.url,templateUrl:"app/email/inbox.tmpl.html",controller:"InboxController"})}),angular.forEach(a,function(e){n.state(e.state+".email",{url:"/mail/:emailID",templateUrl:"app/email/email.tmpl.html",controller:"EmailController"})}),t.decorator("taOptions",["taRegisterTool","taTranslations","$delegate",function(e,n,t){return t.toolbar=[["bold","italics","underline","insertLink"]],t.classes={focussed:"focussed",toolbar:"editor-toolbar",toolbarGroup:"editor-group",toolbarButton:"md-button",toolbarButtonActive:"",disabled:"",textEditor:"form-control",htmlEditor:"form-control"},t}]),t.decorator("taTools",["$delegate",function(e){return e.bold.iconclass="icon-format-bold",e.italics.iconclass="icon-format-italic",e.underline.iconclass="icon-format-underline",e.insertLink.iconclass="icon-insert-link",e}])}]),angular.module("triAngularEmail").controller("EmailToolbarController",["$scope","$rootScope","$filter","$mdUtil","$mdSidenav","$state","SideMenu","EMAIL_ROUTES",function(e,n,t,a,s,o,i,r){e.showSearch=!1,e.toolbarMenu=[],e.menu=i.getMenu();for(var l=0;l<r.length;l++)e.toolbarMenu.push({name:t("translate")(r[l].name),state:r[l].state,icon:r[l].icon});e.filterEmailList=function(){n.$broadcast("emailSearch",e.emailSearch)},e.toggleSearch=function(){e.showSearch=!e.showSearch},e.openSideNav=function(e){a.debounce(function(){s(e).toggle()},300)()}}]),angular.module("triAngularEmail").controller("InboxController",["EmailService","$rootScope","ParseService","$scope","$filter","$location","$state","$mdMedia","$mdBottomSheet","$stateParams","$mdDialog","$mdToast",function(e,n,t,a,s,o,i,r,l,d,c,m){function p(){a.showEmailList=!(r("sm")&&"admin-panel-no-scroll.email.inbox.email"==i.current.name)}a.$on("send_mail",function(){var n=e.getEmails();n.then(function(e){a.emails=e})}),a.reverse_select=!0,a.emails=[];var u=e.getEmails();u.then(function(e){a.emails=e}),a.baseState=i.current,a.emailStatusClass=function(e){return e.get("readed")||e.get("from")==n.user.id?"":"purple-bg"},a.readSelect=function(){for(var n=0,t=a.emails.length-1;t>=0;t--){var s=a.emails[t];s.done&&s.id&&n++}if(n>1)var o=n+" emails";else var o=n+" email";var i=c.confirm().title("Do you really want to mark "+o+" as read?").ok("YES, MARK "+o+" AS READ!").cancel("No");c.show(i).then(function(){e.readEmails()})},a.removeSelect=function(){for(var n=0,t=a.emails.length-1;t>=0;t--){var s=a.emails[t];s.done&&s.id&&n++}if(n>1)var o=n+" emails";else var o=n+" email";var i=c.confirm().title("Do you really want to delete "+o+" ?").ok("YES, DELETE "+o+" !").cancel("No");c.show(i).then(function(){e.removeEmails()})},a.reverse=function(){for(var e=a.emails.length-1;e>=0;e--)a.emails[e].done=a.reverse_select?!0:!1;a.reverse_select=!a.reverse_select},a.inboxBasePath=o.path(),a.selectedMail=null,a.openMail=function(e){n.$broadcast("reademail",{email:e}),n.email=e,"admin-panel-no-scroll.email.inbox.email"==a.baseState.name&&(a.baseState.name="admin-panel-no-scroll.email.inbox"),i.go(a.baseState.name+".email",{emailID:e.id})},a.openlist=function(){i.go(a.baseState.name)},a.delete=function(e){angular.forEach(a.emailGroups,function(n){var t=null;angular.forEach(n.emails,function(n,a){e.id===n.id&&(t=a)}),null!==t&&(n.emails.splice(t,1),m.show(m.simple().content(s("translate")("EMAIL.DELETED")).position("bottom right").hideDelay(3e3)))}),a.openlist()},a.composeClick=function(){c.show({controller:"EmailDialogController",templateUrl:"app/email/email-dialog.tmpl.html"}).then(function(){},function(){m.show(m.simple().content("Message cancelled!").position("bottom right").hideDelay(3e3))})},a.$on("emailSearch",function(e,n){for(var t in emailGroupsBackup)a.emailGroups[t].emails=s("emailSearchFilter")(emailGroupsBackup[t].emails,n)}),p(),a.$on("$locationChangeSuccess",p)}]),angular.module("triAngularEmail").filter("emailGroup",function(){return function(e,n){return e.filter(function(e){var t=moment(e.date,moment.ISO_8601);return t.isAfter(n.from)&&t.isBefore(n.to)?e:void 0})}}),angular.module("triAngularEmail").controller("EmailDialogController",["ClassService","EmailService","$state","$rootScope","$mdToast","ParseService","$scope","$timeout","$mdDialog","$filter","triSkins","textAngularManager",function(e,n,t,a,s,o,i,r,l,d,c){i.user=a.user,i.sent_to_users=[],i.sent_to_class=!1,i.email={},i.select_text="teacher"==i.user.get("user_role")?"Or select someone":"Select someone";var m=e.getFriends();m.then(function(e){i.friends=e});var p=e.getBelongToClass();p.then(function(e){i.ownClasses=e}),i.triSkin=c.getCurrent(),i.addSentToClass=function(e){i.sent_to_class=e,i.sent_to_users=[]},i.removeSentToClass=function(){i.sent_to_class=!1,i.sent_to_users=[]},i.addSentToUser=function(e){i.sent_to_users.push(e),i.sent_to_class=!1},i.removeSentToUser=function(e){var n=i.sent_to_users.indexOf(e);i.sent_to_users.splice(n,1)},i.checkSendDisabled=function(){var e=i.email,n=!1;return(i.sent_to_users[0]||i.sent_to_class)&&(n=!0),n&&e.subject&&e.content?!1:!0},i.toggleCCS=function(){i.showCCS=!i.showCCS,i.showCCSIcon=i.showCCS?"icon-arrow-drop-up":"icon-arrow-drop-down"},i.sendToUsers=function(){for(var e=[],t=(i.email,0);t<i.sent_to_users.length;t++){var o=i.sent_to_users[t];e.push(o.get("student_id"))}var r=i.email,d=n.sendEmailToPerson(e,a.user.id,a.user.get("username"),r);d.then(function(){l.hide(i.email),s.show(s.simple().content("Message sent!").position("bottom right").hideDelay(3e3)),a.$broadcast("send_mail","")})},i.sendToCLass=function(){var e=i.email;e.classid=i.sent_to_class.id;var t=n.sendEmailToClass(i.email);t.then(function(){l.hide(i.email),s.show(s.simple().content("Message sent!").position("bottom right").hideDelay(3e3)),a.$broadcast("send_mail","")})},i.cancel=function(){l.cancel()}}]).controller("EmailToPserionDialogController",["student","ClassService","EmailService","$rootScope","$mdToast","ParseService","$scope","$timeout","$mdDialog","$filter","triSkins","textAngularManager",function(e,n,t,a,s,o,i,r,l){i.user=a.user,i.email={},i.email.persion_name=e.student_name,i.email.to_user_id=e.id,i.email.manageUserId=i.user.id,i.email.manageUserName=i.user.get("username"),i.send=function(){l.hide(i.email),t.sendEmailToPerson([i.email.to_user_id],i.email.manageUserId,i.email.manageUserName,i.email),s.show(s.simple().content("Message sent!").position("bottom right").hideDelay(3e3)),a.$broadcast("send_mail","")},i.cancel=function(){l.cancel()}}]),angular.module("triAngularEmail").controller("ReplyEmailDialogController",["VoteService","$rootScope","email","$mdToast","ParseService","EmailService","$scope","$timeout","$mdDialog","$filter","triSkins","textAngularManager",function(e,n,t,a,s,o,i,r,l){i.email={type:t.get("type"),subject:t.get("subject"),parent_id:t.id,email:t,from:n.user.get("email")},i.reply=function(){l.hide(i.email);var e=o.replyEmail(i.email);e.then(function(){var e=o.getEmails();e.then(function(e){n.emails=e})}),a.show(a.simple().content("Reply sent!").position("bottom right").hideDelay(3e3))},i.cancel=function(){l.cancel()}}]).controller("EmailController",["$translate","$timeout","VoteService","$state","ParseService","EmailService","$rootScope","$scope","$stateParams","$mdDialog","$mdToast","$filter",function(e,n,t,a,s,o,i,r,l,d,c){r.pageCurrent="admin-panel-no-scroll.email.sent.email"==a.current.name?"sent":"inbox",r.baseState=a.current,r.user=i.user;var m=o.getEmail(l.emailID);m.then(function(e){if(r.email=e,r.email.get("define")){var n=r.email.get("define");n.fetch({success:function(e){r.define=e}})}if(r.email.get("vote")){var t=r.email.get("vote");t.fetch({success:function(e){r.vote=e}})}if(r.email.get("word")){var a=r.email.get("word");a.fetch({success:function(e){r.word=e}})}o.getReplyEmail(r.email.id,function(e){r.replys=e})}),r.yesVote=function(e){var t=i.user,s=e.get("vote_user_list")?e.get("vote_user_list"):[];s.push(t.get("username")),e.set("vote_user_list",s);var l=e.get("yes_user_list")?e.get("yes_user_list"):[];l.push(t.get("username")),e.set("yes_user_list",l),e.save();var d=r.define.get("vote_number")?r.define.get("vote_number"):0;d<l.length&&(r.define.set("vote_number",l.length),r.define.save()),c.show(c.simple().content("Thanks for voting!").position("bottom right").hideDelay(3e3)),n(function(){o.removeEmail(r.email),a.go("admin-panel-no-scroll.email.inbox")},2e3)},r.userInVoteList=function(e){if(e){var n=e.get("vote_user_list")?e.get("vote_user_list"):[],t=n.indexOf(i.user.get("username"));return t>-1?!0:!1}},r.noVote=function(e){var s=i.user,l=e.get("vote_user_list")?e.get("vote_user_list"):[];l.push(s.get("username")),e.set("vote_user_list",l);var d=e.get("no_user_list")?e.get("no_user_list"):[];
if(d.push(s.get("username")),e.set("no_user_list",d),d.length>=2){var m=r.vote.get("sentence"),p=r.vote.get("relate_word"),u=(r.vote.get("define"),r.vote.get("definition"));m&&t.voteNoSentence(r.vote,r.define),p&&t.voteNoRelateWord(r.vote,r.define),u&&t.voteDefinition(r.vote,r.define)}c.show(c.simple().content("Thanks for voting!").position("bottom right").hideDelay(3e3)),n(function(){o.removeEmail(r.email),a.go("admin-panel-no-scroll.email.inbox")},2e3)},r.goToVotePage=function(e){var n=e.get("vote_id");a.go("admin-panel.default.p2p_vote",{id:n})},r.updateEntry=function(e){i.highLightId=e.get("define_id"),a.go("admin-panel.default.word-page",{lemma:e.get("content"),originlemma:e.get("content")})},r.sendUpdateReply=function(e){e.disabled=!0,o.sendUpdateReply(e),c.show(c.simple().content("Reply sent!").position("bottom right").hideDelay(3e3))},r.remove=function(n){var t=d.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));d.show(t).then(function(){o.removeEmail(n),a.go("admin-panel-no-scroll.email.inbox")})},r.replyEmailAction=function(e){d.show({locals:{email:e},controller:"ReplyEmailDialogController",templateUrl:"app/email/reply-email-dialog.tmpl.html",clickOutsideToClose:!0}).then(function(){},function(){c.show(c.simple().content("Reply cancelled!").position("bottom right").hideDelay(3e3))})},r.menuClick=function(e){r.menuClickEvent=e},r.delete=function(e){var n=e.id,t=i.user.get("delete_emails_id");t||(t=new Array),t.push(n),i.user.set("delete_emails_id",t),i.user.save();for(var s=i.emails.length-1;s>=0;s--)e.id==i.emails[s].id&&i.emails.splice(s,1);a.go(r.baseState.name)}}]),angular.module("triAngularEmail").factory("EmailService",["ClassService","$q","$mdToast","$state","$stateParams","$rootScope",function(e,n,t,a,s,o){var i,r=Parse.Object.extend("ClassStudent"),l=Parse.Object.extend("Email"),d=(Parse.Object.extend("User"),Parse.Object.extend("MyClass")),c="SNgD2SmFjM",m="Wordiser",p=[],u=!0,g="utxZjD8zzT",f="AgbEYEzDNN",_="OuiqOv8g5w",h="Gmm4qPgQKB";return{getEmails:function(){var e=n.defer(),t=this;if(!u&&p[0])e.resolve(p);else{var a=new Parse.Query(l);a.equalTo("to",o.user.id);var s=new Parse.Query(l);s.equalTo("from",o.user.id),s.doesNotExist("classemails"),s.doesNotExist("vote_id");var r=Parse.Query.or(a,s);r.notEqualTo("type","reply"),r.descending("createdAt"),r.doesNotExist("remove"),o.user.get("admin")?r.notEqualTo("hide_for_admin",!0):r.notEqualTo("hide_for_users",!0),"teacher"==o.user.get("user_role")&&r.notEqualTo("hide_for_teacher",!0),r.limit(200),r.find({success:function(n){var a=n;u=!1,p=a,i=a[0],e.resolve(p),t.getUnreadEmailsCount()}})}return e.promise},getRandTeachers:function(){var e=n.defer(),t=new Parse.Query(Parse.User);t.equalTo("user_role","teacher");var a=[f,_,g,h];return t.containedIn("objectId",a),t.limit(5),t.find({success:function(n){e.resolve(n)}}),e.promise},getCurrentEmail:function(){return i},removeEmail:function(e){for(var n=p.length-1;n>=0;n--){var t=p[n];t.id==e.id&&(t.set("remove",!0),t.save(),p.splice(n,1))}},readEmails:function(){for(var e=this,a=n.defer(),s=[],o=p.length-1;o>=0;o--)p[o].done&&p[o].id&&(p[o].set("readed",!0),s.push(p[o]));return Parse.Object.saveAll(s).then(function(){t.show(t.simple().content("Update email/s succeeded!").position("bottom right").hideDelay(3e3)),e.getUnreadEmailsCount(),a.resolve(s)}),a.promise},removeEmails:function(){for(var e=this,a=n.defer(),s=[],o=p.length-1;o>=0;o--)p[o].done&&p[o].id&&(p[o].set("remove",!0),s.push(p[o]),p.splice(o,1));return Parse.Object.saveAll(s).then(function(){t.show(t.simple().content("Update email/s succeeded!").position("bottom right").hideDelay(3e3)),e.getUnreadEmailsCount(),a.resolve(s)}),a.promise},setUpdateEmail:function(){u=!0},getUnreadEmailsCount:function(){if(!o.user)return void a.go("authentication.login");var e=n.defer(),t=new Parse.Query(l);t.equalTo("to",o.user.id);var s=new Parse.Query(l);s.equalTo("from",o.user.id),s.doesNotExist("classemails");var i=Parse.Query.or(t,s);return i.notEqualTo("type","reply"),i.notEqualTo("readed",!0),i.descending("createdAt"),i.doesNotExist("remove"),o.user.get("admin")?i.notEqualTo("hide_for_admin",!0):i.notEqualTo("hide_for_users",!0),"teacher"==!o.user.get("user_role")&&i.notEqualTo("hide_for_teacher",!0),i.count({success:function(n){o.$broadcast("update_email_num",{num:n}),e.resolve(n)}}),e.promise},sendEmail:function(e){u=!0;var n=o.user,t=new Date,a=new l,s=n.get("user_avatar")?n.get("user_avatar"):"assets/images/avatars/avatar-1.png";a.set("to",e.classid),a.set("userType","class"),a.set("from",n.id),a.set("user_avatar",s),a.set("send_user",n),a.set("fromname",n.get("username")),a.set("type",e.type),a.set("subject",e.subject),a.set("content",e.content),e.define_id&&a.set("define_id",e.define_id),e.noreply&&a.set("noreply",!0),e.define_type&&a.set("define_type",e.define_type),a.set("time",t);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),a.setACL(i),a.save()},sendEmailToPerson:function(e,t,a,s){var i=n.defer();u=!0;for(var r=new Date,d=new Array,c=o.user,m=c.get("user_avatar")?c.get("user_avatar"):"assets/images/avatars/avatar-1.png",p=e.length-1;p>=0;p--){var g=new l;g.set("to",e[p]),g.set("userType","person"),g.set("from",t),g.set("fromname",a),g.set("user_avatar",m);var f=new Parse.ACL(Parse.User.current());f.setPublicReadAccess(!0),f.setWriteAccess(t,!0),f.setWriteAccess(e[p],!0),g.setACL(f),g.set("subject",s.subject),g.set("content",s.content),s.many_users&&g.set("many_users",!0),s.hide_for_users&&g.set("hide_for_users",!0),s.hide_for_admin&&g.set("hide_for_admin",!0),s.noreply&&g.set("noreply",!0),s.hide_for_teacher&&g.set("hide_for_teacher",!0),s.type&&g.set("type",s.type),s.sub_type&&g.set("sub_type",s.sub_type),s.vote_id&&g.set("vote_id",s.vote_id),s.vote&&g.set("vote",s.vote),s.define&&g.set("define",s.define),g.set("time",r),g.set("define_id",s.define_id),g.set("define_type",s.define_type),d.push(g)}return Parse.Object.saveAll(d).then(function(e){i.resolve(e)}),i.promise},sendEmailToClass:function(t){u=!0;var a=o.user,s=t.classid,i=a.id,r=a.get("username"),d=n.defer(),c=new Date,m=new Array,p=e.getClassStudentsById(s);return p.then(function(e){for(var n=[],s=0;s<e.length;s++)n.push(e[s].get("student_id"));for(var s=n.length-1;s>=0;s--){var o=new l;o.set("to",n[s]),o.set("userType","system"),o.set("from",i),o.set("fromname",r),o.set("subject",t.subject),o.set("content",t.content),o.set("classemails",!0);var p=new Parse.ACL(Parse.User.current());p.setPublicReadAccess(!0),p.setWriteAccess(i,!0),p.setWriteAccess(n[s],!0),o.setACL(p),n[s]==a.id&&o.set("readed",!0),t.noreply&&o.set("noreply",!0),o.set("time",c),o.set("define_id",t.define_id),o.set("define_type",t.define_type),m.push(o)}Parse.Object.saveAll(m).then(function(e){d.resolve(e)})}),d.promise},sendRelateWordMistakeEmail:function(e,n){var e=n.get("lemma"),t=n.id,a=[f,_],s=(o.user,{type:"extra",sub_type:"relate_word",define_id:t,noreply:!0,subject:"Related word problem!",content:e});this.sendEmailToPerson(a,c,m,s)},sendSpellingnMistakeEmail:function(e){var n=[f,_],t=(o.user,{type:"extra",sub_type:"spelling",noreply:!0,subject:"Spelling problem!",content:e});this.sendEmailToPerson(n,c,m,t)},sendPronMistakeEmail:function(e){var n=[f,_],t=(o.user,{type:"extra",sub_type:"pron",noreply:!0,subject:"Pronunciation problem!",content:e});this.sendEmailToPerson(n,c,m,t)},sendFormMistakeEmail:function(e){var n=[f,_],t=(o.user,{type:"extra",sub_type:"form",noreply:!0,subject:"Form problem!",content:e});this.sendEmailToPerson(n,c,m,t)},sendDataMistakeEmailToAdmin:function(e){var n=[f,_],t='<a href = "#/word/word-page/'+e+"/"+e+' ">Edit word ('+e+")</a>",a=o.user,s={type:"general",noreply:!0,hide_for_users:!0,subject:"Word Mistake Report!",content:"<p>Hi,</p><p>"+a.get("username")+" has asked that you fix : '"+e+"'.</p><p>Please use the link below.</p><p>"+t+"</p><p>The Wordiser Team</p>"};this.sendEmailToPerson(n,c,m,s)},relateWordVoteEmail:function(e,n,t){var a=this,s=e.get("lemma"),o=n.id,i={type:"extra",sub_type:"vote_relate_word",noreply:!0,subject:"Possible problem with related words!",vote_id:o,lemma:s,vote:n,define:e,word:t,content:s},r=a.getRandTeachers();r.then(function(e){for(var n=[],t=e.length-1;t>=0;t--)n.push(e[t].id);a.sendEmailToPerson(n,c,m,i)})},sentenceVoteEmail:function(e,n){var t=this,a=e.get("lemma"),s=n.id,o={type:"extra",sub_type:"vote_sentence",noreply:!0,subject:"Possible problem with example for students!",vote_id:s,lemma:a,vote:n,define:e,word:word,content:a},i=t.getRandTeachers();i.then(function(e){for(var n=[],a=e.length-1;a>=0;a--)n.push(e[a].id);t.sendEmailToPerson(n,c,m,o)})},defineVoteEmail:function(e,n){var t=this,a=e.get("lemma"),s=n.id,o={type:"extra",sub_type:"vote_define",noreply:!0,subject:"Possible problem with definition for students!",vote_id:s,lemma:a,vote:n,define:e,content:a},i=t.getRandTeachers();i.then(function(e){for(var n=[],a=e.length-1;a>=0;a--)n.push(e[a].id);t.sendEmailToPerson(n,c,m,o)})},sendCorrectionWorkToTeacherEmail:function(e,n){var t='<a href = "#/study-notes/correction/'+n+' ">CLICK HERE!</a>',a=o.user,s={type:"correction",noreply:!0,subject:"Correction Check Request!",content:"<p>Hi,</p><p>"+a.get("username")+" has asked that you check this.</p><p>Please use the link below.</p><p>"+t+"</p><p>The Wordiser Team</p>"};this.sendEmailToPerson([e],o.user.id,m,s)},sendHomeWorkToTeacherEmail:function(e,n){var t='<a href = "#/study-notes/homework/'+n+' ">CLICK HERE!</a>',a=o.user,s={type:"general",noreply:!0,subject:"Writing Check Request!",content:"<p>Hi,</p><p>"+a.get("username")+" has asked that you check this.</p><p>Please use the link below.</p><p>"+t+"</p><p>The Wordiser Team</p>"};this.sendEmailToPerson([e],o.user.id,m,s)},sendHomeWorkToStudentEmail:function(e,n){var t='<a href = "#/study-notes/homework/'+n+' ">CLICK HERE!</a>',a=o.user,s={type:"general",noreply:!0,hide_for_teacher:!0,subject:"Writing Feedback!",content:"<p>Hi,</p><p>"+a.get("username")+" has given feedback on your writing.</p><p>Please use the link below.</p><p>"+t+"</p><p>The Wordiser Team</p>"};this.sendEmailToPerson([e],o.user.id,m,s)},sendHomeWorkEmail:function(e,n){var t=(o.user,'<a href = "#/study-notes/homework/'+n+' ">CLICK HERE!</a>'),a={type:"homework",classid:e.id,noreply:!0,subject:"Writing Task ("+e.get("name")+")",content:"<p>Hi,  </p><p>Your teacher asks you to do this writing task. Please click on the link below. </p><p>"+t+"  </p><p>The Wordiser Team</p>"};this.sendEmailToClass(a)},sendCorrectionEmail:function(e,n){var t=(o.user,'<a href = "#/study-notes/correction/'+n+' ">CLICK HERE!</a>'),a={type:"correction",classid:e.id,noreply:!0,subject:"Error Check Request! ("+e.get("name")+")",content:"<p>Hi,  </p><p>Your teacher asks you to do this writing task. Please click on the link below. </p><p>"+t+"  </p><p>The Wordiser Team</p>"};this.sendEmailToClass(a)},sendStudentRegisterEmail:function(e,n){var t={type:"general",noreply:!0,subject:"Welcome to Wordiser!",hide_for_admin:!0,content:"<p>Hi "+n+" ,</p>  <p>Welcome to Wordiser, your own personal English reviser.</p><p>Using Wordiser will help you improve your English and learn faster. As your personal reviser, Wordiser tracks your learning, testing you as you progress on key skills, including: spelling, pronunciation, grammatical form, use and meaning. We believe learning should be fun too - so there is a game too as a reward! But, you can only play it if you do your revision! ;)</p><p>To start using Wordiser, simply click the <b>+</b> button where you see it. This will add what you want to revise to your study list. You can add more to this list. So, when you are ready, click to save and Wordiser will do the rest, automatically.</p><p>As a suggestion, best to select anything with 'APPROVED', as this means it has been written and checked by our community of expert English language teachers.</p><p>Want to get the best out of Wordiser? Suggest it to your teacher! Wordiser in the classroom connects you with your classmates and lets you share study notes (class/lesson notes), homework and more.</p><p>Now it is time to get revising!</p><p>The Wordiser Team</p>"};this.sendEmailToPerson([e],c,m,t)},sendTeacherRegisterEmail:function(e,n){var t={type:"general",noreply:!0,subject:"Welcome to Wordiser!",hide_for_admin:!0,content:"<p>Hi "+n+" ,</p>  <p>Welcome to Wordiser, our solution to hassle-free teaching.</p><p>You can use Wordiser in class to:</p><p><ul> <li>track progress and results</li><li>send students automated revision exercises</li>    <li>save and share study notes (lesson/class notes)</li><li>print instant tailored worksheets</li><li>And more... Coming soon!</li></ul></p><p>Thank you for joining. We really hope Wordiser becomes an indispensable tool for you and your classes.</p><p><b>The Wordiser Team</b></p> "};this.sendEmailToPerson([e],c,m,t)},sendNewNoteEmail:function(e,n,t){var a={classid:n,noreply:!0,type:"general",subject:"New Study Note!",define_id:e,define_type:"newNote",content:t},s=new Date;email=new l,email.set("to",a.classid),email.set("userType","class"),email.set("from",c),email.set("fromname",m),email.set("type",a.type),email.set("subject",a.subject),email.set("define_id",a.define_id),email.set("define_type",a.define_type),email.set("content",a.content),email.set("time",s);var o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),email.setACL(o),email.save()},defineErrorReportEmail:function(e){var n=e.get("lemma"),t=e.id,a={type:"general",noreply:!0,subject:"Word error report!",define_id:t,lemma:n,define_type:"askFor",hide_for_users:!0,content:n},s=[f,_],i=o.user.id,r=o.user.get("username");this.sendEmailToPerson(s,i,r,a)},sendUpdateReply:function(e){var n=e.get("content"),t=e.get("fromname"),a=e.get("from"),s={type:"general",noreply:!0,subject:"The problem with : '"+n+"' has been corrected.",hide_for_admin:!0,content:"<p>Hi "+t+" ,</p>  <p>The problem with : '"+n+"' has been corrected.</p><p><b>The Wordiser Team</b></p> "};this.sendEmailToPerson([a],o.user.id,o.user.get("username"),s)},askForEmail:function(e,n,t,a){var s={type:"general",noreply:!0,subject:"Student Request",define_id:a,lemma:t,define_type:"askFor",content:t},i=new Parse.Query(d),l=new Parse.Query(r);l.equalTo("student_id",e),i.matchesKeyInQuery("objectId","class_id",l);var c=[],p=this;i.find({success:function(n){c=n;for(var t=[],a=c.length-1;a>=0;a--){var i=c[a].get("user_id");e!=i&&t.push(i)}p.sendEmailToPerson(t,o.user.id,m,s)}})},getHomeworkEmails:function(e){var n=new Parse.Query(l);if("student"==o.user.get("user_role")){var t=new Parse.Query(r);t.equalTo("student_id",o.user.id),n.equalTo("userType","class"),n.matchesKeyInQuery("to","class_id",t),n.notEqualTo("type","reply")}else{var t=new Parse.Query(d);t.equalTo("user_id",o.user.id),n.equalTo("userType","class"),n.matchesKeyInQuery("to","objectId",t),n.notEqualTo("type","reply")}n.descending("time"),n.find({success:function(n){e(n)}})},getGeneralEmails:function(e){var n=new Parse.Query(l);if("student"==o.user.get("user_role")){var t=new Parse.Query(r);t.equalTo("student_id",o.user.id),n.equalTo("userType","class"),n.matchesKeyInQuery("to","class_id",t),n.notEqualTo("type","reply")}else{var t=new Parse.Query(d);t.equalTo("user_id",o.user.id),n.equalTo("userType","class"),n.matchesKeyInQuery("to","objectId",t),n.notEqualTo("type","reply")}n.equalTo("type","general");var a=new Parse.Query(l);a.equalTo("userType","person"),a.equalTo("to",o.user.id),a.notEqualTo("type","reply");var s=Parse.Query.or(n,a);s.descending("time"),s.find({success:function(n){o.$apply(function(){var t=new Array,a=o.user.get("delete_emails_id");a||(a=new Array);for(var s=!1,i=n.length-1;i>=0;i--){s=!1;for(var r=a.length-1;r>=0;r--)a[r]==n[i].id&&(s=!0);s||t.unshift(n[i])}e(t)})}})},getEmail:function(e){var t=n.defer(),a=new Parse.Query(l);return a.equalTo("objectId",e),a.first({success:function(e){o.$apply(function(){t.resolve(e)})}}),t.promise},replyEmail:function(e){var t=n.defer(),a=e.email,s=new Date,i=new l;i.set("parent_id",e.parent_id),i.set("from",o.user.id),i.set("fromname",o.user.get("username")),i.set("type","reply"),i.set("subject",e.subject),i.set("content",e.content),i.set("time",s);var r=new Parse.ACL(Parse.User.current());return r.setPublicReadAccess(!0),i.setACL(r),i.save().then(function(n){a.set("last_replay_id",n.id),a.set("last_replay_content",e.content),a.set("time",s),a.save().then(function(){t.resolve(a)})}),o.replys.unshift(i),t.promise},getReplyEmail:function(e,n){var t=new Parse.Query(l);t.equalTo("parent_id",e),t.addDescending("createdAt"),t.find({success:function(e){o.$apply(function(){o.replys=e,n(e)})}})}}}]),angular.module("triAngular").provider("triTheming",ThemingProvider),angular.module("triAngular").provider("triSkins",SkinsProvider).run(addSkinToScope),angular.module("triStudyNotesModule").service("StudyNotesService",["$state","WordService","HelperService","NoticeService","$q","$stateParams","$rootScope",function(e,n,t,a,s,o,i){var r=Parse.Object.extend("StudyNotes"),l=Parse.Object.extend("HomeWork"),d=Parse.Object.extend("CorrectionST"),c=Parse.Object.extend("StudyQuiz"),m=Parse.Object.extend("StudyQuizCat"),p=Parse.Object.extend("CourseRecord"),u=!1,g={clearCourseProgress:function(e,n){if(!e[0])return n;for(var t=!1,a=n.get("pass_course")?n.get("pass_course"):[],s=[],o=e.length-1;o>=0;o--)s.push(e[o].id);for(var o=a.length-1;o>=0;o--){var i=a[o],r=s.indexOf(i);0>r&&(a.splice(o,1),t=!0)}for(var l=e[0].id,o=e.length-1;o>=0;o--){var i=e[o].id,r=a.indexOf(i);if(0>r){l=i;break}}return n.set("enable_course_id",l),n.set("pass_course",a),n.save(),n},moveProgressCourseToTop:function(e,n){if(!e)return n;for(var t=!1,a=n.length-1;a>=0;a--)n[a].id==e&&(t=n[a],n.splice(a,1));return t&&n.push(t),n},passCourse:function(e,n){var a=this,s=this.getCourseRecord(n.get("parent_cat"));s.then(function(e){var s=e.get("pass_course")?e.get("pass_course"):[],o=n.id;s.push(o),s=t.onlyUnique(s),e.set("pass_course",s);var i=a.getNextCourse(n,s);i.then(function(n){n?(e.set("enable_course_id",n.id),e.set("enable_course_name",n.get("cat_title")),e.save()):e.save()})})},checkAllPass:function(e,n){for(var t=n.get("pass_quiz_ids")?n.get("pass_quiz_ids"):[],a=!0,s=e.length-1;s>=0;s--){var o=t.indexOf(e[s]);0>o&&(a=!1)}return n.set("all_pass",a),n.save(),a},openLink:function(n){var t=n.question_ids,a=n.id,s="";if(t)for(var o=t.length-1;o>=0;o--)s+=","+t[o];t&&"quiz"==n.type&&e.go("admin-panel.default.study-notes-quiz",{quiz_ids:s,parent_id:a}),t&&"gapfill"==n.type&&e.go("admin-panel.default.study-notes-gap-fill-quiz",{quiz_ids:s,parent_id:a}),"homework"==n.type&&e.go("admin-panel.default.study-notes-homework",{homework_id:a}),"correction"==n.type&&e.go("admin-panel.default.study-notes-correction",{correction_id:a}),"grammar"==n.type&&e.go("admin-panel.default.study-note-grammar-view",{id:a}),"reading"==n.type&&e.go("admin-panel.default.study-note-reading-view",{id:a}),"vocab"==n.type&&e.go("admin-panel.default.study-note-vocab-view",{id:a}),"slideshow"==n.type&&e.go("admin-panel.default.study-notes-slide-show",{id:a})},removeExerciseNotInNote:function(e,n,t){for(var a=t.get("test_objs"),s=n.length-1;s>=0;s--){var o=n[s].get("tmp_id");e.push(o)}for(var s=a.length-1;s>=0;s--){var o=a[s].note_tmp_id,i=e.indexOf(o);0>i&&a.splice(s,1)}return t.set("test_objs",a),t},getUNIString:function(){for(var e=Date.parse(new Date),n="",t="abcdefghijklmnopqrstuvwxyz0123456789",a=0;5>a;a++)n+=t.charAt(Math.floor(Math.random()*t.length));var s=e+n;return s},mergeExerciseToNotes:function(e,n){for(var t=[],a=0;a<e.length;a++){e[a].test_objs=e[a].get("test_objs")?e[a].get("test_objs"):[];for(var s=0;s<e[a].test_objs.length;s++)t.push(e[a].test_objs[s].uni_id)}return n.exercise_ids=t,e},addQuizToCourse:function(e,n,a){var s=this;a.note||(a.note={}),a.note.test_objs||(a.note.test_objs=[]),a.note.tmp_id||(a.note.tmp_id=t.getUNIString()),n.note_tmp_id=a.note.tmp_id;var o={};n.select_actions&&(o.select_actions=n.select_actions,o.select_actions.type="select_actions"),o.id=n.id;var i=s.getUNIString();return o.uni_id=i,o.note_tmp_id=n.note_tmp_id,o.type=e,("quiz"==e||"gapfill"==e)&&(o.title=n.get("quiz_title"),o.question_ids=n.get("question_ids")),("homework"==e||"correction"==e)&&(o.title=n.get("instructions")),("free_practice"==e||"grammar"==e||"vocab"==e||"dialogue"==e)&&(o.title=n.get("name")),"grammar_writing"==e&&(o.title=n.name),("reading"==e||"slideshow"==e)&&(o.title=n.name?n.name:n.get("title")),("game"==e||"youtube"==e)&&(o.title=n.title,o.words_str=n.words_str),o.title||"reading"!=e||(o.title=n.get("name")),"youtube"==e&&(o.video_id=n.video_id),"progress_test"==e&&(o.title=n.get("name"),o.no_retake=n.no_retake,o.bbbbbbb="[]",o.progress_items=n.get("progress_items")),n.point&&(o.point=n.point),n.title&&(o.title=n.title),n.number&&(o.number=n.number),a.note.test_objs.push(o),a.note.test_objs},arrStringToObj:function(e,n){for(var t=n.get(e)?n.get(e):[],a=[],s=t.length-1;s>=0;s--){var o=JSON.parse(t[s]);a.push(o)}return a},getCourseProgressByCategoryId:function(e,n){var t=s.defer(),a=this,o=a.getStudyNoteCategory(e);return o.then(function(e){for(var a=[],s=e.studyNotes[0]?e.studyNotes:[],o=s.length-1;o>=0;o--)a.push(s[o].id);var i=new Parse.Query(p);i.containedIn("course_id",a),i.equalTo("user_id",n),i.equalTo("type","learn_course"),i.find({success:function(n){for(var a=s.length-1;a>=0;a--)for(var o=n.length-1;o>=0;o--)s[a].id==n[o].get("course_id")&&(s[a].record=n[o]);for(var a=s.length-1;a>=0;a--){var i=s[a].record,r=s[a].get("test_objs")?s[a].get("test_objs"):[];if(i){var l=i.get("pass_quiz_ids")?i.get("pass_quiz_ids"):[],d=l.length?l.length:0,c=parseInt(d/r.length*100);s[a].progress=c}}t.resolve(e.studyNotes)}})}),t.promise},getUserCourse:function(e){for(var n=s.defer(),t=e.get("course_list")?e.get("course_list"):[],a=[],o=t.length-1;o>=0;o--)t[o].name||a.unshift(t[o]);return Parse.Object.fetchAll(a,{success:function(e){n.resolve(e)}}),n.promise},getNextCourse:function(e,n){var t=s.defer(),a=e.id,o=e.get("parent_cat"),i=!1,r=!1,l=this,d=l.getStudyNoteCategory(o);return d.then(function(e){for(var s=e.studyNotes,o=s.length-1;o>=0;o--){var l=s[o];if(l.id==a&&(i=o),i&&s[o]&&!r){var d=s[o].id,c=n.indexOf(d);if(0>c){r=s[o];break}}}t.resolve(r)}),t.promise},getCourseRecord:function(e){var n=s.defer();if(u&&u.id==e)n.resolve(u);else{var t=new Parse.Query(p);t.equalTo("course_id",e),t.equalTo("user_id",i.user.id),t.equalTo("type","learn_course"),t.first({success:function(t){if(t)n.resolve(t);else{var t=new p;t.set("user_id",i.user.id),t.set("course_id",e),t.set("type","learn_course");var a=new Parse.ACL(Parse.User.current());a.setPublicReadAccess(!0),t.setACL(a),t.save().then(function(){n.resolve(t)})}u=t}})}return n.promise},noteChekDefine:function(e){var n=e.get("lemma"),t={},a=!1,s="",o=e.get("definition");o?o=o.trim():(a=!0,s+="Definition lack! ");var i=o.indexOf("("),r=o.indexOf(")");(0>i||0>r)&&(a=!0,s+="For the definition, please check and use the select option! ");var l=e.get("synsetlemma")?e.get("synsetlemma"):!1,d=e.get("synsetlemma_status")?e.get("synsetlemma_status"):[],c=!0;if(!d[0]&&l[0])c=!1;else for(var m=d.length-1;m>=0;m--)"disable"!=d[m]&&l[m]!=n&&(c=!1);var p=e.get("sentence_main")?e.get("sentence_main"):!1,u=!0;return p&&(u=!1),c&&(a=!0,s+="There are no related words. Please update this!"),u&&(a=!0,s+="Sentence lack! "),t.disable=a,t.text=s,t},getNotesByParent:function(e){var n=s.defer(),t=new Parse.Query(r);return t.equalTo("parent_cat",e),t.ascending("the_order"),t.find({success:function(e){n.resolve(e)}}),n.promise},getStudyNoteCategory:function(e){var n={},t=s.defer(),a=new Parse.Query(r);return a.notEqualTo("remove",!0),a.equalTo("parent_cat",e),a.ascending("the_order"),a.limit(200),a.find({success:function(e){for(var a=[],s=[],o=0;o<=e.length-1;o++)e[o].hide=e[o].get("hide"),e[o].the_order=e[o].get("the_order"),"note"==e[o].get("type")?s.unshift(e[o]):a.unshift(e[o]);n.studyNotesCat=a,n.studyNotes=s,t.resolve(n)}}),t.promise},getCatWords:function(e){var n=s.defer(),t=new Array;t.push(""),t.push("No level"),t.push("A1, Beginner"),t.push("A2, Elementary"),t.push("B1, Intermediate"),t.push("B2, Upper Intermediate"),t.push("C1, Low Advanced"),t.push("C2, Advanced");var a=Parse.Object.extend("AddCategory"),o=new Parse.Query(a);return o.equalTo("parent_cat",e),o.equalTo("type","word"),o.containedIn("level",t),o.include("define_obj"),o.include("word_obj"),o.find({success:function(e){n.resolve(e)}}),n.promise},getWordsByCatId:function(e){var n=s.defer(),t=this.getCatWords(e);return t.then(function(e){for(var t=e.length-1;t>=0;t--)e[t].worddata=e[t].get("word_obj"),e[t].check=!0;n.resolve(e)}),n.promise},gapFillCreateData:function(e){for(var n=e.length-1;n>=0;n--){var a=e[n];a.words=[];var s=a.get("show_first_letter")?!0:!1;a.show_first_letter=s,a.sentence="";for(var o=[],i=[],r=a.get("lemma_arr"),l=a.get("lemma_bak_arr"),d=t.getSymbols(),c=r.length-1;c>=0;c--){var m=r[c].indexOf("______");if(m>-1){var p={};p.check=!1,p.lemma=l[c],p.first_letter=l[c].charAt(0),p.add_index=c;var u=l[c].charAt(l[c].length-1);p.last_word=u;var m=d.indexOf(u);a.show_first_letter?m>-1?(r[c]=l[c].charAt(0)+"______"+u,p.symbol=!0):r[c]=l[c].charAt(0)+"______":r[c]="______",p.index=c,o.unshift(p),i.unshift(c)}}for(var c=0;c<=l.length-1;c++){a.sentence+=l[c]+" ";var r=a.get("lemma_arr"),l=a.get("lemma_bak_arr"),g={},m=r[c].indexOf("______");g.check=m>-1?!1:!0,g.lemma=r[c],g.bak_lemma=l[c],a.words.push(g)}a.word=r,a.lemma_bak_arr=l,a.quiz_obj=a}return e},buildGapFillFormByCat:function(e,n){for(var t=s.defer(),a=[],o=i.user,r=0;r<n.length;r++)if(n[r].check){var l=n[r].get("word_obj"),d=n[r].get("pos"),p=[],u=[];if("v"==d&&l.get("form_v")){var g=l.get("form_v_a");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_v_b");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_v_c");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_v_d");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_v_e");p.push(g.charAt(0)+"______"),u.push(g)}if(("j"==d||"a"==d)&&l.get("form_j")){var g=l.get("form_j_a");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_j_b");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_j_c");p.push(g.charAt(0)+"______"),u.push(g)}if("n"==d&&l.get("form_n")){var g=l.get("form_n_a");p.push(g.charAt(0)+"______"),u.push(g);var g=l.get("form_n_b");p.push(g.charAt(0)+"______"),u.push(g)}if(p[0]){var f=new c,_=new Parse.ACL(Parse.User.current());_.setPublicReadAccess(!0),f.setACL(_),f.set("show_first_letter",!0),f.set("lemma_arr",p),f.set("lemma_bak_arr",u),f.set("user_id",o.id),f.set("type","gapfill"),f.set("gapfilltype","form"),a.push(f)}}return Parse.Object.saveAll(a,function(n){for(var a=[],s=n.length-1;s>=0;s--)a.push(n[s].id);var i="Category ("+e.get("name")+") gap-fill",r=new m,l=new Parse.ACL(Parse.User.current());l.setPublicReadAccess(!0),r.setACL(l),r.set("question_ids",a),r.set("user_id",o.id),r.set("quiz_title",i),r.set("type","gapfill"),r.set("gapfilltype","form"),r.save().then(function(e){var a={};a.list=n,a.cat=e,t.resolve(a)})}),t.promise},buildGapFillByCat:function(e,n){for(var a=s.defer(),o=[],r=[],l=i.user,d=n.length-1;d>=0;d--)n[d].check&&(n[d].set("origin_obj_lemma",n[d].get("name")),r.push(n[d]));for(var d=r.length-1;d>=0;d--){var p=r[d];if(p.get("define_obj"))var u=p.get("define_obj").get("sentence_main");else var u=p.get("sample");if(!u)var u=p.get("sentence_main");var g=t.replace_lemma_form_sentence(u,p.worddata);if(g.include_lemma){for(var f=g.sentence_with_first_letter_no_html.split(" "),_=g.sentence_with_first_letter_no_html.split(" "),h=_.length-1;h>=0;h--){var v=_[h].indexOf("______");v>-1&&(_[h]=g.replace_lemma)}var b=new c,y=new Parse.ACL(Parse.User.current());y.setPublicReadAccess(!0),b.setACL(y),b.set("lemma_arr",f),b.set("lemma_bak_arr",_),b.set("user_id",l.id),b.set("type","gapfill"),o.push(b)}}return Parse.Object.saveAll(o,function(n){for(var t=[],s=n.length-1;s>=0;s--)t.push(n[s].id);var o="Category ("+e.get("name")+") gap-fill",i=new m,r=new Parse.ACL(Parse.User.current());r.setPublicReadAccess(!0),i.setACL(r),i.set("question_ids",t),i.set("user_id",l.id),i.set("quiz_title",o),i.set("type","gapfill"),i.save().then(function(e){var t={};t.list=n,t.cat=e,a.resolve(t)})}),a.promise},buildExerciseByCat:function(e,n){for(var a=s.defer(),o=e.get("name"),r=[],l=[],d=n.length-1;d>=0;d--){var p=n[d].get("name"),u=l.indexOf(p);0>u&&l.push(p)}for(var d=n.length-1;d>=0;d--){var g=n[d];if(g.check){var f=g.worddata;if(g.get("define_obj"))var _=g.get("define_obj").get("sentence_main");else var _=g.get("sample");if(!_)var _=g.get("sentence_main");var h=t.replace_lemma_form_sentence(_,f);if(h.include_lemma){var v=[],b=[],l=t.shuffle(l);v.push(h.replace_lemma);for(var y=l.length-1;y>=0;y--){var u=v.indexOf(l[y]);if(0>u&&l[y]!=g.get("lemma")&&v.push(l[y]),v.length>3)break}v=t.shuffle(v);for(var y=v.length-1;y>=0;y--)b[y]=v[y]==h.replace_lemma?!0:!1;var w=i.user,k=new c,x=new Parse.ACL(Parse.User.current());x.setPublicReadAccess(!0),k.setACL(x),k.set("question",h.sentence_no_first_letter_no_html),k.set("select",b),k.set("user_id",w.id),k.set("answers",v),r.push(k)}}}return Parse.Object.saveAll(r).then(function(e){for(var n={},t=[],s=i.user,r=e.length-1;r>=0;r--)t.push(e[r].id);var l=new m,d=new Parse.ACL(Parse.User.current());d.setPublicReadAccess(!0),l.setACL(d),l.set("question_ids",t),l.set("user_id",s.id),l.set("type","normal"),l.set("quiz_title","Category ("+o+") exercise"),l.save().then(function(t){n.quizs=e,n.cat=t,a.resolve(n)})}),a.promise},getHomeWorkById:function(e){var n=s.defer(),t=new Parse.Query(l);return t.equalTo("objectId",e),t.limit(1),t.find({success:function(e){var t=e[0];n.resolve(t)}}),n.promise},getUserMatchGames:function(e){var n=s.defer(),t=new Parse.Query(m);return t.equalTo("user_id",e),t.notEqualTo("remove",!0),t.equalTo("type","match_game"),t.find({success:function(e){n.resolve(e)}}),n.promise},getUserQuizs:function(e){var n=s.defer(),t=new Parse.Query(m);return t.equalTo("user_id",e),t.notEqualTo("remove",!0),t.equalTo("type","normal"),t.descending("quiz_title"),t.find({success:function(e){n.resolve(e)}}),n.promise},getUserGapFillQuizs:function(e){var n=s.defer(),t=new Parse.Query(m);return t.equalTo("user_id",e),t.notEqualTo("remove",!0),t.equalTo("type","gapfill"),t.find({success:function(e){n.resolve(e)}}),n.promise},getUserCorrections:function(e){var n=Parse.Object.extend("CorrectionST"),t=s.defer(),a=new Parse.Query(n);return a.equalTo("user_id",e),a.descending("updatedAt"),a.notEqualTo("remove",!0),a.find({success:function(e){t.resolve(e)}}),t.promise},getStudentWrittings:function(e){var n=e.id,t=s.defer(),a=new Parse.Query(l);return a.equalTo("student_id",n),a.notEqualTo("remove",!0),a.limit(100),a.find({success:function(e){for(var n=[],a=[],s=e.length-1;s>=0;s--)n.push(e[s].get("homework_id"));var o=new Parse.Query(l);o.containedIn("objectId",n),o.find({success:function(n){for(var s=e.length-1;s>=0;s--)for(var o=n.length-1;o>=0;o--)e[s].get("homework_id")==n[o].id&&e[s].set("instructions",n[o].get("instructions"));for(var s=e.length-1;s>=0;s--)e[s].get("instructions")&&""!=e[s].get("instructions")&&a.push(e[s]);t.resolve(a)}})}}),t.promise},getUserCorrectionById:function(e){var n=s.defer(),t=new Parse.Query(d);return t.equalTo("correction_id",e),t.notEqualTo("remove",!0),t.limit(50),t.ascending("the_order"),t.find({success:function(e){if(!e)var e=[];n.resolve(e)}}),n.promise},getCarCorrectionsById:function(e){var n=s.defer(),t=new Parse.Query(d);return t.equalTo("correction_id",e),t.ascending("updatedAt"),t.limit(300),t.find({success:function(e){for(var t={},a=e.length-1;a>=0;a--){var s=e[a],o=s.get("user_id"),i=s.get("username"),s=e[a];s.right_st=s.get("right_st"),t[o]||(t[o]={},t[o].corrections=[],t[o].check=0,t[o].username=i),s.get("first_sentence_mark")&&t[o].check++,t[o].corrections.push(s)}n.resolve(t)}}),n.promise},getCorrectionById:function(e){var n=s.defer(),t=new Parse.Query(d);return t.equalTo("objectId",e),t.limit(1),t.find({success:function(e){var t=e[0];
n.resolve(t)}}),n.promise},getStudentHomeWorks:function(e){var n=s.defer(),t=new Parse.Query(l);return t.equalTo("homework_id",e),t.limit(50),t.find({success:function(e){n.resolve(e)}}),n.promise},getHomeWorkForStudent:function(e,n){var t=n.id,a=n.get("username"),o=s.defer(),i=new Parse.Query(l);return i.equalTo("homework_id",e),i.equalTo("student_id",t),i.limit(1),i.find({success:function(n){if(n[0]){var s=n[0];o.resolve(s)}else{var s=new l,i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.set("homework_id",e),s.set("student_id",t),s.set("student_name",a),s.save().then(function(e){o.resolve(e)})}}}),o.promise},getNoteById:function(e){var n=s.defer(),t=new Parse.Query(r);return t.equalTo("objectId",e),t.first({success:function(e){n.resolve(e)}}),n.promise},getCatById:function(e){var n=Parse.Object.extend("MyClass"),t=s.defer(),a=new Parse.Query(n);return a.equalTo("objectId",e),a.first({success:function(a){if(a)t.resolve(a);else{var s=Parse.Object.extend("StudyNotes"),o=new Parse.Query(s);o.equalTo("cat_id",e),o.first({success:function(a){if(a)a.subcat=!0,t.resolve(a);else{var s=new n,o="MY NOTES",r=((new Date).getTime(),new Date);s.set("name",o),s.set("cat_id",e),s.set("parent_cat",i.user.id),s.set("type","category"),s.set("user",i.user.id),s.set("time",r),t.resolve(s)}}})}}}),t.promise}};return g}]),angular.module("triNoticeModule").directive("widget",["$mdTheming",function(e){return{restrict:"E",templateUrl:"app/notice-module/widget.tmpl.html",transclude:!0,replace:!0,scope:{title:"@",subtitle:"@",avatar:"@"},controller:["$scope",function(e){e.menu=null,e.loading=!1,this.setMenu=function(n){e.menu=n},this.setLoading=function(n){e.loading=n}}],link:function(n,t,a){n.widgetLayout="left"===a.titlePosition||"right"===a.titlePosition?"row":"column",n.contentLayout=void 0===a.contentLayout?void 0:a.contentLayout,n.contentPadding=void 0===a.contentPadding?void 0:!0,n.contentLayoutAlign=void 0===a.contentLayoutAlign?"center center":a.contentLayoutAlign,n.titleOrder="right"===a.titlePosition||"bottom"===a.titlePosition?2:1,n.contentOrder="right"===a.titlePosition||"bottom"===a.titlePosition?1:2,n.overlayTitle=void 0===a.overlayTitle?void 0:!0,e(t),void 0!==a.class&&t.addClass(a.class),void 0!==a.backgroundImage&&t.css("background-image","url("+a.backgroundImage+")"),n.menuClick=function(e){void 0!==n.menu.menuClick&&n.menu.menuClick(e)}}}}]),angular.module("triNoticeModule").service("NoticeService",["$q","$rootScope","$stateParams",function(e,n,t){var a=Parse.Object.extend("AddCategory"),s={getCatByName:function(n){var t=e.defer(),s=new Parse.Query(a);return s.equalTo("name",n),s.equalTo("type","category"),s.find({success:function(e){t.resolve(e[0])}}),t.promise},getCatWords:function(){n.user?(n.level||(n.level=0),n.user.get("a1")&&(n.level=0),n.user.get("a2")&&(n.level=1),n.user.get("b1")&&(n.level=3),n.user.get("b2")&&(n.level=5),n.user.get("c1")&&(n.level=7),n.user.get("c2")&&(n.level=9),n.user.get("c2p")&&(n.level=13),n.pronounce||(n.pronounce="all")):(n.level=0,n.pronounce="all");var a=e.defer(),s=t.page,o=t.startwith,i=n.level,r=n.pronounce,l=12,i=1e3*n.level,d=(s-1)*l,c=Parse.Object.extend("Fre60K"),m=new Parse.Query(c);return"all"!=o&&m.startsWith("lemma",o),"all"!=r&&(m.matches("uk_change_pron",".*"+r+".*"),m.matches("uk_pron",".*"+r+".*"),m.matches("us_pron",".*"+r+".*"),m.matches("us_change_pron",".*"+r+".*")),m.greaterThan("rank",i),m.ascending("rank"),m.skip(d),m.limit(l),m.find({success:function(e){a.resolve(e)}}),a.promise}};return s}]),angular.module("triNoticeModule").controller("NoticePageController",["$q","$translate","EmailService","WordService","BuildDataService","WNService","HelperService","$timeout","AddWordService","$interval","$mdDialog","ClassService","$cookies","NoticeService","ReviewService","ParseService","SideMenu","$mdToast","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_,h,v,b,y){b.user=Parse.User.current(),y.tips=i.getTips(),y.user_data={},y.user=b.user,b.user&&(y.user_data.level=b.user.get("level"),y.user_data.course=b.user.get("course"),y.auto_tutorial=b.user.get("auto_tutorial"),"teacher"==b.user.get("user_role")&&n.use("en"));var w=g.get_review_time();if(w.then(function(e){y.userNeedReviewNumber=e}),b.$on("update_reivew_num",function(e,n){y.userNeedReviewNumber=n.userNeedReviewNumber}),b.user){for(var k=Parse.User.current(),x=k.get("course_list")?k.get("course_list"):[],C=[],S=[],E=x.length-1;E>=0;E--)x[E].name?S.unshift(x[E]):C.unshift(x[E]);y.vocab_list=S,Parse.Object.fetchAll(C,{success:function(e){y.course_list=e}})}if(b.user&&"student"==b.user.get("user_role")){var P=p.get("timeToInitReview");if(!P){var A=new Date;A.setTime(A.getTime()+72e5),p.put("timeToInitReview",!0,{expires:A}),g.init_review(b.user)}}var T=t.getUnreadEmailsCount();T&&T.then(function(e){if(b.gb.new_emails=e,e>1)var n="You have "+e+" unread emails!";else var n="You have "+e+" unread email!";e>0&&h.show({hideDelay:2e4,position:"bottom right",controller:"emailUnreadToastController",locals:{msg:n},templateUrl:"components/toolbars/email-toast-template.tmpl.html"})}),y.goProgress=function(){v.go("admin-panel.default.review")},y.openCourseHome=function(){v.go("admin-panel.default.course-home")},y.reviewTileClass=function(e){return e>0?"glowing":void 0},y.popReview=function(){y.userNeedReviewNumber>0&&(responsiveVoice.speak("Time to study","UK English Male"),c.show({controller:"ReviewDialogController",templateUrl:"app/review-module/review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:y.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1}))},y.closeAlertMessage=function(){b.user.set("alert_message",""),b.user.save()},y.searchInputChange=function(){var e=a.searchCatByString(y.search_word);e.then(function(e){y.searchWordList=e})},y.openLink=function(e,n,t){b.link_category_type=e;var t=void 0===t?{}:t;t.parent_cat="GeneralEnglish"==t.parent_cat?"General English":t.parent_cat,t.parent_cat="AcademicEnglish"==t.parent_cat?"Academic English":t.parent_cat,t.parent_cat="BusinessEnglish"==t.parent_cat?"Business English":t.parent_cat,t.parent_cat="GrammarEnglish"==t.parent_cat?"Grammar English":t.parent_cat,v.go(n,t)}}]).controller("NoticeCategoryController",["BuildDataService","WordService","$cookies","$q","WorksheetService","ReviewService","NoticeService","ClassService","AddWordService","$mdToast","$mdSidenav","$mdUtil","ParseService","$mdDialog","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_,h){var v=Parse.Object.extend("AddCategory");_.selects=s.getWorksheetType(),_.addCat={};var b=p.getCategoryData("normal");b.then(function(e){_.catWords=e.catWords,_.categorys=e.categorys});var y=r.getBelongToClass();y.then(function(e){_.myClasses=e}),_.parent_cat=h.parent_cat;var w=p.getCategoryById(_.parent_cat);w.then(function(e){console.log(e),_.current_category=e,e&&responsiveVoice.speak(e.get("name"),"UK English Male")}),_.checkDataClass=function(e,n){if(!e)return!1;var t=e.indexOf(n);return 0>t&&(f.user.get("admin")||f.user.get("author"))?"no_pron":void 0},_.goDetailsPage=function(e){var n=e.id,t=e.get("lemma");f.highLightId=n,g.go("admin-panel.default.word-page",{lemma:t,originlemma:t}),u.cancel()},_.toggleCategoryHide=function(e){console.log(e),e.set("hide",!e.hide),e.save()},_.noteDown=function(e,n){var t=n.indexOf(e);if(t>0){var a=n[t-1],s=a.get("the_order"),o=e.get("the_order");n[t-1]=e,n[t]=a,n[t-1].set("the_order",s),n[t].set("the_order",o),n[t-1].save(),n[t].save()}},_.noteUp=function(e,n){var t=n.indexOf(e),a=n[t+1];if(t>-1&&a){var s=a.get("the_order"),o=e.get("the_order");n[t+1]=e,n[t]=a,n[t+1].set("the_order",s),n[t].set("the_order",o),n[t+1].save(),n[t].save()}},_.inStudyList=function(e){var n=l.getUserStudyListLemma();if(n){var t=n.indexOf(e);return t>-1?!0:!1}return!1},_.loadWorksheetData=function(){var e=r.saveCatWordsAsClass(_.parent_cat,_.catWords);e.then(function(e){var n="pronunction",t=o.getClassWordDateList(f.user.id,e.id,a);t.then(function(e){for(var t=new Array,a=0;a<e.length;a++){var s=e[a];t.push(s.id)}u.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),type:n,parent_scope:_,getFocus:!0},focusOnOpen:!1})})})},_.printAllOpenLink=function(e){var n=r.saveCatWordsAsClass(_.parent_cat,_.catWords);n.then(function(n){var i=n.id;t.put("print_all",!1);var r="pronunction",l=o.getClassWordDateList(f.user.id,i,a);l.then(function(n){for(var t=new Array,a=0;a<n.length;a++){var o=n[a];t.push(o.id)}var l=s.getGenerateWordIds(t,r),d=new Object;d.teachername=f.user.get("name"),d.classid=i,d.date="all",l.then(function(n){if(d.wordlist=n.toString(),n.length<3){var t=confirm("This study list has very few words. Do you still want to print it?");1==t&&g.go(e,d)}else g.go(e,d)})})})},_.speak=function(e,n){var t=e.get("name");responsiveVoice.speak(t,n)},_.haveStudy=function(e){var n=f.user.get("user_list_ids"),t=n.indexOf(e);return t>-1?!0:!1},_.catClass=function(e){var n="";return e.get("children_data_cat")&&(n=e.get("children_data_cat").length>10?"more-than-10":""),e.get("children_data_word")&&""==n&&(n=e.get("children_data_word").length>10?"more-than-10":""),n},_.openCategoryPage=function(e){i.getCatByName(e).then(function(e){g.go("admin-panel.default.notice-category",{parent_cat:e.id,page:1})})},_.openLink=function(e,n,t){f.link_category_type=e;var t=void 0===t?{}:t;g.go(n,t)},_.ownClass=function(){var e=!1;if(_.myClasses[0])for(var n=h.parent_cat,t=_.myClasses.length-1;t>=0;t--)_.myClasses[t].id==n&&(e=!0);return e},_.openSideNav=function(e){m.debounce(function(){c(e).toggle()},300)()},_.showAddCategory=function(){_.showAddCategoryForm=!_.showAddCategoryForm},_.showAddWord=function(){_.showAddWordForm=!_.showAddWordForm},_.showPrint=function(){_.showPrintTile=!_.showPrintTile},_.addCategory=function(){var n=_.addCat,t=Parse.Object.extend("AddCategory"),a=new t;a.set("name",n.name),n.level&&a.set("level",n.level),"undefined"==typeof h.parent_cat&&(h.parent_cat="root"),a.set("parent_cat",h.parent_cat),a.set("type","category"),a.set("user_id",f.user.id),a.save(),_.categorys.unshift(a),_.current_category.set("need_update_data",!0),_.current_category.set("change_data","Add category : "+n.name),_.current_category.save().then(function(){e.updateCategoryData(_.current_category)}),_.addCat={},n={}},_.addWord=function(){_.word.btn_disable=!0;for(var t=_.word.name.split(","),a=_.word.level?_.word.level:"A1, Beginner",s=[],o=[],i=t.length-1;i>=0;i--)o.push(t[i].trim());var r=Parse.Object.extend("Dict"),l=new Parse.Query(r);l.containedIn("lemma",o),l.find({success:function(t){for(var i=new Array,r=t.length-1;r>=0;r--){var l=t[r],c=l.get("lemma"),m=i.indexOf(c);if(!(m>-1)){i.push(c);var p=(l.get("pos"),l.get("definition"),l.get("sentence_main"),l.get("sampleset"),l.id,new v);p.set("level",a),p.set("name",c),p.set("user_id",f.user.id),p.set("lowser_lemma",c.toLowerCase()),"undefined"==typeof h.parent_cat&&(h.parent_cat="root"),p.set("parent_cat",h.parent_cat),p.set("type","word"),s.push(p)}}var u=n.getWordByLemmas(i);u.then(function(n){for(var t=s.length-1;t>=0;t--)for(var a=n.length-1;a>=0;a--)s[t].get("name")==n[a].get("lemma")&&(s[t].set("word_obj",n[a]),s[t].worddata=s[t].get("word_obj"));Parse.Object.saveAll(s).then(function(n){_.$apply(function(){for(var e=n.length-1;e>=0;e--)_.catWords.unshift(n[e])}),e.updateCategoryData(_.current_category)})}),_.word.btn_disable=!1,_.word.name="",_.word.level="",console.log(_.word);for(var g="",r=o.length-1;r>=0;r--){var b=o[r],m=i.indexOf(b);0>m&&(g+=" "+b)}g&&d.show(d.simple().content('Sorry, word/phrase "'+g.trim()+'" is not recognised! Ask Wordiser admin to add this word for you.').position("bottom right").hideDelay(1e4))}}),_.current_category.set("need_update_data",!0),_.current_category.set("change_data","Add word : "+_.word.name),_.current_category.save()},_.deleteWord=function(n){var t=u.confirm().title("Would you like to delete this word? ").ok("YES, DELETE IT!").cancel("No");u.show(t).then(function(){n.destroy();var t=_.catWords.indexOf(n);t>-1&&_.catWords.splice(t,1),_.current_category.set("need_update_data",!0),_.current_category.set("change_data","Delete : "+n.get("name")),_.current_category.save().then(function(){e.updateCategoryData(_.current_category)})})},_.editWord=function(e){e.shw_edit=!0,u.show({controller:"editWordDialogController",templateUrl:"app/notice-module/edit-word-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:_.menuClickEvent,locals:{getFocus:!0,word:e},focusOnOpen:!1})},_.deleteCategory=function(n){var t=u.confirm().title("Would you like to delete the category? ").ok("YES, DELETE IT!").cancel("No");u.show(t).then(function(){n.destroy().then(function(){e.updateCategoryData(_.current_category)});var t=_.categorys.indexOf(n);t>-1&&_.categorys.splice(t,1)})},_.editCateogry=function(e){u.show({controller:"editCategoryDialogController",templateUrl:"app/notice-module/edit-category-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:_.menuClickEvent,locals:{getFocus:!0,cat:e},focusOnOpen:!1})},_.popImageView=function(e){e.view=!0,u.show({controller:"popImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:_.menuClickEvent,locals:{define:e,getFocus:!0},focusOnOpen:!1})},_.popImageEdit=function(e){e.view=!1,u.show({controller:"popImageController",templateUrl:"app/word-module/template/vote-edit-image-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:_.menuClickEvent,locals:{define:e,getFocus:!0},focusOnOpen:!1})},_.addWordByDefineId=function(e){var n=l.getAddWordBlock();n||(e.disabled=!0,l.addWordByDefineId(e.get("define_id")),d.show(d.simple().content("Adding word to your study list!").position("bottom right").hideDelay(3e3)))}}]).controller("editCategoryDialogController",["cat","$mdDialog","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s){s.cat={};var o=e.get("parent_cat");s.cat.name=e.get("name"),s.cat.level=e.get("level"),s.cat.parent_cat=e.get("parent_cat"),s.cat.copy_cat_id=e.get("copy_cat_id")?e.get("copy_cat_id"):"",s.save=function(){if(o!=s.cat.parent_cat){var t=confirm("You have change the category parent, would you like to do that?");if(!t)return}e.set("name",s.cat.name),e.set("level",s.cat.level),e.set("parent_cat",s.cat.parent_cat),s.cat.copy_cat_id&&e.set("copy_cat_id",s.cat.copy_cat_id),e.save().then(function(e){if(e.get("parent_cat")!=o){var n=a.categorys.indexOf(e);n>-1&&a.categorys.splice(n,1)}}),n.cancel()},s.cancel=function(){n.cancel()},s.closeDialog=function(){n.cancel()}}]).controller("editWordDialogController",["$mdToast","$timeout","AddWordService","word","$mdDialog","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r){r.user=i.user,r.popDefinesShow=!0,r.word={},r.word.name=a.get("name"),r.word.level=a.get("level"),r.word.pos=a.get("pos"),r.word.define_id=a.get("define_id"),r.word.definition=a.get("definition"),r.word.sentence_main=a.get("sentence_main"),r.word.parent_cat=a.get("parent_cat"),t.get_types_option(r.word.name,function(t){n(function(){r.types_option=t,r.type={}}),r.goDetailsPage=function(e){if(e.define_id)var n=e.define_id,t=e.name;else var n=e.id,t=e.get("lemma");i.highLightId=n,o.go("admin-panel.default.word-page",{lemma:t,originlemma:t}),s.cancel()},r.popDefineEdit=function(e){var n=Parse.Object.extend("Dict"),t=new Parse.Query(n);t.equalTo("objectId",e),t.first({success:function(e){s.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})}})},r.popVoteSentenceEdit=function(e){s.show({controller:"popVoteSentenceEditController",templateUrl:"app/word-module/template/vote-sentence-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0,define:e},focusOnOpen:!1})},r.changeParentCat=function(){r.word.change_parent_cat=!0},r.saveParentCat=function(){r.word.change_parent_cat=!1,a.set("parent_cat",r.word.parent_cat),a.save()},r.wordLevelUpdate=function(){a.set("level",r.word.level),a.save().then(function(){alert("Level update success!")})},r.askFor=function(n,t){var a=i.user.id,s=i.user.get("name");e.hide(),i.$broadcast("askFor",a,s,n,t)}}),r.cancel=function(){s.cancel()},r.closeDialog=function(){s.cancel()},r.changeTypeSelect=function(e){r.type={},"n"==e&&(r.type.n=!0),"v"==e&&(r.type.v=!0),"j"==e&&(r.type.j=!0),"r"==e&&(r.type.r=!0)},r.addDefineBtn=function(){s.show({controller:"popAddNewDefineController",templateUrl:"app/word-module/template/add-new-define-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0,define:a},focusOnOpen:!1})},r.backSelectDefine=function(){r.add_define_box=!1},r.changeTyle=function(){var e="all";r.type.n&&(e="n"),r.type.v&&(e="v"),r.type.j&&(e="j"),r.type.r&&(e="r"),r.definesDetailsShow=!0,r.popDefinesShow=!1,t.get_defines_by_lemma(r.word.name,e,function(e){r.defines=e})},r.useDefine=function(e){a.set("definition",e.get("definition")),a.set("sentence_main",e.get("sentence_main")),a.set("sample",e.get("sentence_main")),a.set("pos",e.get("pos")),a.set("define_id",e.id),a.set("define_obj",e),a.save().then(function(e){r.word.name=e.get("name"),r.word.pos=e.get("pos"),r.word.definition=e.get("definition"),r.word.sentence_main=e.get("sentence_main"),s.cancel()})},r.save=function(){var e=r.word.name,n=Parse.Object.extend("Dict"),t=new Parse.Query(n);t.equalTo("lemma",e),t.first({success:function(e){e?(a.set("name",r.word.name),a.save(),s.cancel()):alert("Sorry, this word did not in our database")}})},r.cancel=function(){s.cancel()},r.closeDialog=function(){s.cancel()}}]).controller("NoticesSentenceController",["$state","$rootScope","$scope","$stateParams",function(e,n,t){n.message_helper="",t.saveSentence=function(e){ParseService.saveSentence(e)},t.getDefines=function(e){WNService.getNoticeWord(e,t)},t.checkDefine=function(e){t.word.define=e}}]).controller("ClassCategoryController",["ClassService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a){var s=e.getBelongToClass();s.then(function(e){a.myClasses=e}),a.openLink=function(e,a,s){t.link_category_type=e;var s=void 0===s?{}:s;n.go(a,s)}}]).controller("NoticeEnglishCategoryController",["ClassService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a){a.openLink=function(e,a,s){t.link_category_type=e;var s=void 0===s?{}:s;s.parent_cat="GeneralEnglish"==s.parent_cat?"General English":s.parent_cat,s.parent_cat="AcademicEnglish"==s.parent_cat?"Academic English":s.parent_cat,s.parent_cat="BusinessEnglish"==s.parent_cat?"Business English":s.parent_cat,s.parent_cat="GrammarEnglish"==s.parent_cat?"Grammar English":s.parent_cat,n.go(a,s)}}]).controller("reviewToastController",["$mdSidenav","$mdDialog","ParseService","AddWordService","$mdToast","$state","$rootScope","$scope",function(e,n,t,a,s,o,i,r){r.popReview=function(){s.hide(),responsiveVoice.speak("Time to study","UK English Male"),n.show({controller:"ReviewDialogController",templateUrl:"app/review-module/review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})},r.cancel=function(){s.hide()},r.closeToast=function(){s.hide()}}]),angular.module("triNoticeModule").controller("ExamHomePageyController",["$interval","$mdDialog","ClassService","$cookies","NoticeService","ReviewService","ParseService","SideMenu","$mdToast","$state","$rootScope","$scope","$stateParams",function(){}]).controller("ExamIeltsCageyController",["AddWordService","$mdSidenav","$mdUtil","WordService","$interval","$mdDialog","ClassService","$cookies","NoticeService","ReviewService","ParseService","SideMenu","$mdToast","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_){f.exam_title="IELTS",f.parent_cat=_.parent_cat;var h=c.getCategoryById(f.parent_cat);h.then(function(e){e&&(f.current_category=e,responsiveVoice.speak(e.get("name"),"UK English Male"))});var v=c.getCategoryData("ielts");v.then(function(e){f.catWords=e.catWords;for(var n=e.categorys,t=[],a=n.length-1;a>=0;a--){var s=n[a];_.parent_cat!=s.get("level_2_category")&&t.unshift(s)}f.categorys=t}),f.speak=function(e,n){var t=e.get("name");responsiveVoice.speak(t,n)},f.inStudyList=function(n){var t=e.getUserStudyListLemma();if(t){var a=t.indexOf(n);return a>-1?!0:!1}return!1},f.openLink=function(e){u.go("admin-panel.default.exam-ielts-page",e)},f.addWordByDefineId=function(n){var t=e.getAddWordBlock();t||(n.disabled=!0,e.addWordByDefineId(n.get("define_id")))},f.openSideNav=function(e){t.debounce(function(){n(e).toggle()},300)()}}]).controller("ExamPetPageyController",["AddWordService","$mdSidenav","$mdUtil","WordService","$interval","$mdDialog","ClassService","$cookies","NoticeService","ReviewService","ParseService","SideMenu","$mdToast","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_){f.exam_title="PET",f.parent_cat=_.parent_cat;var h=c.getCategoryById(f.parent_cat);h.then(function(e){e?(f.current_category=e,responsiveVoice.speak(e.get("name"),"UK English Male")):"General English"==_.parent_cat&&responsiveVoice.speak("General English","UK English Male")}),f.speak=function(e,n){var t=e.get("name");responsiveVoice.speak(t,n)},f.inStudyList=function(n){var t=e.getUserStudyListLemma();if(t){var a=t.indexOf(n);return a>-1?!0:!1}return!1},f.openLink=function(e){u.go("admin-panel.default.exam-pet-page",e)};var v=c.getCategoryData("pet");v.then(function(e){f.catWords=e.catWords;for(var n=e.categorys,t=[],a=n.length-1;a>=0;a--){var s=n[a];_.parent_cat!=s.get("level_2_category")&&t.unshift(s)}f.categorys=t}),f.addWordByDefineId=function(n){var t=e.getAddWordBlock();t||(n.disabled=!0,e.addWordByDefineId(n.get("define_id")))},f.openSideNav=function(e){t.debounce(function(){n(e).toggle()},300)()}}]).controller("ExamCect4PageyController",["AddWordService","$mdSidenav","$mdUtil","WordService","$interval","$mdDialog","ClassService","$cookies","NoticeService","ReviewService","ParseService","SideMenu","$mdToast","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g,f,_){f.exam_title="CECT-4",f.parent_cat=_.parent_cat;var h=c.getCategoryById(f.parent_cat);h.then(function(e){f.current_category=e}),f.parent_cat=_.parent_cat;var v=c.getCategoryData("cect4");v.then(function(e){f.catWords=e.catWords;for(var n=e.categorys,t=[],a=n.length-1;a>=0;a--){var s=n[a];_.parent_cat!=s.get("level_2_category")&&t.unshift(s)}f.categorys=t}),f.speak=function(e,n){var t=e.get("name");responsiveVoice.speak(t,n)},f.inStudyList=function(n){var t=e.getUserStudyListLemma();if(t){var a=t.indexOf(n);return a>-1?!0:!1}return!1},f.openLink=function(e){u.go("admin-panel.default.exam-cect4-page",e)},f.addWordByDefineId=function(n){var t=e.getAddWordBlock();t||(n.disabled=!0,e.addWordByDefineId(n.get("define_id")))},f.openSideNav=function(e){t.debounce(function(){n(e).toggle()},300)()}}]),angular.module("triReviewModule").controller("ReviewController",["$state","$translate","StudyNotesService","ClassService","CourseExerciseService","AddWordService","RecordService","$stateParams","$rootScope","ParseService","ReviewService","$scope","$timeout","$mdDialog",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u){m.page=1,m.limit=30,r.user_id?(m.user_id=r.user_id,m.teacher_view_student=!0):(m.user_id=l.user.id,m.teacher_view_student=!1),m.exerciseClass=function(e){return m.view==e?"green_bg":void 0},m.loadExercises=function(e){var n=l.user;switch(m.quizs=[],m.view=e,e){case"quiz":var a=t.getUserQuizs(n.id);a.then(function(e){m.quizs=e});break;case"gap_fill":var a=t.getUserGapFillQuizs(n.id);a.then(function(e){m.quizs=e});break;case"errors":var s=t.getUserCorrections(n.id);s.then(function(e){m.quizs=e,console.log(e[0].toJSON())});break;case"writing":var o=t.getStudentWrittings(n);o.then(function(e){m.quizs=e});break;default:var a=t.getUserQuizs(n.id);a.then(function(e){m.quizs=e})}};var g=function(){m.loadExercises("quiz"),m.reviewWordList=[];var e=i.getStudentWordChatData(m.user_id);e.then(function(e){m.reviewChart=i.generateChatData(e)});var n=c.getUserReviewLemaByUserId(m.user_id,m.page,m.limit);if(n.then(function(e){m.reviewWordList=e}),r.user_id){var o=a.getUserById(r.user_id);o.then(function(e){m.view_user=e,m.point=m.view_user.get("point"),m.correct=m.view_user.get("right"),m.incorrect=m.view_user.get("total")-m.view_user.get("right"),m.totalrevised=m.view_user.get("total");var n=t.getUserCourse(e);n.then(function(n){if(m.course_list=n,n[0]){m.show_course=n[0];var a=t.getCourseProgressByCategoryId(m.show_course.id,e.id);a.then(function(e){m.study_notes=e})}});var a=s.getRecords(e);a.then(function(e){m.records=e})})}else{m.point=l.user.get("point"),m.correct=l.user.get("right"),m.incorrect=l.user.get("total")-l.user.get("right"),m.totalrevised=l.user.get("total");var d=s.getRecords();d.then(function(e){m.records=e});var p=t.getUserCourse(l.user);p.then(function(e){if(m.course_list=e,e[0]){m.show_course=e[0];var n=t.getCourseProgressByCategoryId(m.show_course.id,l.user.id);n.then(function(e){m.study_notes=e})}})}};g(),l.$on("set_review",function(){g()}),m.openLink=function(n){var t=m.view;switch(t){case"quiz":var a=n.get("question_ids"),s=n.id;if(a){for(var o="",i=a.length-1;i>=0;i--)o+=","+a[i];e.go("admin-panel.default.study-notes-quiz",{quiz_ids:o,parent_id:s})}break;case"gap_fill":var a=n.get("question_ids"),s=n.id;if(a){for(var o="",i=a.length-1;i>=0;i--)o+=","+a[i];e.go("admin-panel.default.study-notes-gap-fill-quiz",{quiz_ids:o,parent_id:s})}break;case"errors":e.go("admin-panel.default.study-notes-correction",{correction_id:n.get("correction_id")});break;case"writing":e.go("admin-panel.default.study-notes-homework",{homework_id:n.get("homework_id")});break;default:console.log("no action..")}},m.removeASK=function(e){var n=u.confirm().title("Do you really want to delete this?").ok("YES, DELETE IT!").cancel("No");u.show(n).then(function(){for(var n=m.quizs.length-1;n>=0;n--)m.quizs[n].id==e.id&&m.quizs.splice(n,1);e.set("remove",!0),e.save()})},m.showCourse=function(e){m.show_course=e;var n=t.getCourseProgressByCategoryId(m.show_course.id,l.user.id);n.then(function(e){m.study_notes=e})},m.progressClass=function(e){var n="";return e&&(n=50>e?"red_bg":70>e?"orange_bg":""),n},m.prePage=function(){m.page--,m.page<1&&(m.page=1),m.reviewWordList=[];var e=c.getUserReviewLemaByUserId(m.user_id,m.page,m.limit);e.then(function(e){m.reviewWordList=e})},m.nextPage=function(){m.page++,m.page<1&&(m.page=1),m.reviewWordList=[];var e=c.getUserReviewLemaByUserId(m.user_id,m.page,m.limit);e.then(function(e){m.reviewWordList=e})},m.goToExercise=function(){e.go("admin-panel.default.home")},m.setGrammarActClass=function(e,n){var t="";if(n.id){var a=n.get(e);if("wrong"==a){switch(e){case"act1":t="purple-border";break;case"act3":t="yellow-border";break;case"act4":t="blue-border";break;case"act5":t="blue-border";break;case"act6":t="pink-border";break;case"act13":t="pink-border";break;default:t=""}t+=" black-bg"}else if("right"==a)switch(e){case"act1":t="purple-bg";break;case"act3":t="yellow-bg";break;case"act4":t="blue-bg";break;case"act5":t="blue-bg";break;case"act6":t="pink-bg";break;case"act13":t="pink-bg";break;default:t=""}else t=""}return t},m.deleteGrammarRecoard=function(e){var t=u.confirm().title(n.instant("HELP.Do_you_really_want_to_delete_this")).ok(n.instant("HELP.YES_DELETE_IT")).cancel(n.instant("HELP.No"));u.show(t).then(function(){var n=m.records.indexOf(e);console.log(n),n>-1&&m.records.splice(n,1),e.destroy()})},m.checkDoneClass=function(e){return e.id&&e.get("finish_test")?"lightgreen-bg":void 0},m.setActClass=function(e,n){var t="";if(n.id){var a=n.get(e);if("wrong"==a){switch(e){case"a1":t="orange-border";break;case"a7":t="orange-border";break;case"a3":t="yellow-border";break;case"a6":t="yellow-border";break;case"a2":t="purple-border";break;case"a8":t="purple-border";break;case"a5":t="pink-border";break;case"a4":t="pink-border";break;case"a9":t="blue-border";break;case"a10":t="blue-border";break;default:t=""}t+=" black-bg"}else if("right"==a)switch(e){case"a1":t="orange-bg";break;case"a7":t="orange-bg";break;case"a3":t="yellow-bg";break;case"a6":t="yellow-bg";break;case"a2":t="purple-bg";break;case"a8":t="purple-bg";break;case"a5":t="pink-bg";break;case"a4":t="pink-bg";break;case"a9":t="blue-bg";break;case"a10":t="blue-bg";break;default:t=""}else t=""}return t},m.resetPoints=function(){var e=u.confirm().title("Do you really want to do this?").ok("YES, DO IT!").cancel("No");u.show(e).then(function(){var e=l.user;e.set("point",0),e.set("total",0),e.set("right",0),e.save().then(function(e){m.point=e.get("point"),m.correct=e.get("right"),m.incorrect=e.get("total")-e.get("right"),m.totalrevised=e.get("total")})})},m.disableAll=function(){var e=u.confirm().title("Do you really want to do this?").ok("YES, DO IT!").cancel("No");u.show(e).then(function(){for(var e=m.reviewWordList,n=e.length-1;n>=0;n--)e[n].set("remove",!0);Parse.Object.saveAll(e).then(function(e){m.reviewWordList=e})})},m.disableRecoard=function(e){m.records.indexOf(e);e.set("remove",!0),e.save()},m.enableRecoard=function(e){e.set("remove",!1),e.save()},m.deleteRecoard=function(e){var t=u.confirm().title(n.instant("HELP.Do_you_really_want_to_delete_this")).ok(n.instant("HELP.YES_DELETE_IT")).cancel(n.instant("HELP.No"));u.show(t).then(function(){var n=m.reviewWordList.indexOf(e);n>-1&&m.reviewWordList.splice(n,1),e.destroy().then(function(){o.removeLemmaFromeStudyList(e.get("lemma"))})})},m.popViewFullDetails=function(e){(e.at_no>0||e.sp_no>0||e.ud_no)&&u.show({controller:"ReviewViewFullDetails",templateUrl:"app/review-module/dialog-review-full-details.tmpl.html",clickOutsideToClose:!0,targetEvent:m.menuClickEvent,locals:{record:e,getFocus:!0},focusOnOpen:!1})}}]).filter("reverseReview",function(){return function(e){if(e){for(var n=new Array,t=e.length-1;t>=0;t--)n.push(e[t]);return n}return e}}).controller("showDisclaimerController",["$rootScope","ParseService","$scope","$timeout","$mdDialog",function(e,n,t,a,s){t.cancel=function(){s.cancel()},t.closeDialog=function(){s.cancel()}}]).controller("ReviewViewFullDetails",["$rootScope","ParseService","ReviewService","$scope","$timeout","$mdDialog","record",function(e,n,t,a,s,o,i){t.getUserReviewLema(i,function(e){for(var n=e.length-1;n>=0;n--){var t=e[n].get("at_no")?e[n].get("at_r_no")/e[n].get("at_no"):0,s=e[n].get("sp_no")?e[n].get("sp_r_no")/e[n].get("sp_no"):0,o=e[n].get("ud_no")?e[n].get("ud_r_no")/e[n].get("ud_no"):0,i=e[n].get("pron_no")?e[n].get("pron_r_no")/e[n].get("pron_no"):0;e[n].set("at_rate",t),e[n].set("sp_rate",s),e[n].set("ud_rate",o),e[n].set("pron_rate",i)}a.reviewWordList=e}),a.cancel=function(){o.cancel()},a.closeDialog=function(){o.cancel()}}]).controller("ReviewViewAllDetails",["$stateParams","$rootScope","ParseService","ReviewService","$scope","$timeout","$mdDialog","record",function(e,n,t,a,s,o,i,r){var l=r.student_id,d=r.class_id;e.class_id=d;var c=function(){a.getUserReviewLemaByUserId(l,function(e){s.reviewWordList=e});var e=a.getUserReviewLemaByUserId(user_id,s.page);e.then(function(e){s.reviewWordList=e})};fixPage(),c(),s.PrePageClick=function(){e.page=e.page-1,fixPage(),c()},s.NextPageClick=function(){e.page=e.page+1,fixPage(),c()},s.checkDoneClass=function(e){return e.id&&e.get("finish_test")?"lightgreen-bg":void 0},s.setActClass=function(e,n){var t="";if(n.id){var a=n.get(e);if("wrong"==a){switch(e){case"a1":t="orange-border";break;case"a7":t="orange-border";break;case"a3":t="yellow-border";break;case"a6":t="yellow-border";break;case"a2":t="purple-border";break;case"a8":t="purple-border";break;case"a5":t="pink-border";break;case"a4":t="pink-border";break;case"a9":t="blue-border";break;case"a10":t="blue-border";break;default:t=""}t+=" black-bg"}else if("right"==a)switch(e){case"a1":t="orange-bg";break;case"a7":t="orange-bg";break;case"a3":t="yellow-bg";
break;case"a6":t="yellow-bg";break;case"a2":t="purple-bg";break;case"a8":t="purple-bg";break;case"a5":t="pink-bg";break;case"a4":t="pink-bg";break;case"a9":t="blue-bg";break;case"a10":t="blue-bg";break;default:t=""}else t=""}return t},s.cancel=function(){i.cancel()},s.closeDialog=function(){i.cancel()}}]),angular.module("triReviewModule").service("ReviewService",["CourseExerciseService","RecordService","BuildDataService","HelperService","$interval","$timeout","$state","$q","WordService","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l,d,c,m){var p,u,g,f,_,h,v,b,y,w,k,x,C,S,E,P,A,T,j,$,D,O,L=Parse.Object.extend("ClassStudent"),q=Parse.Object.extend("StudentProg"),U=Parse.Object.extend("ClassWord"),I=(Parse.Object.extend("RevieRecord"),Parse.Object.extend("StudentWordRecordRate")),W=(Parse.Object.extend("MyClass"),!1),N=-1,R=0,z=!1,M=[],G={},F=[],H=!1,B="Do later",V=!1,Y=!1,K=!1,Q=[],J="",X=!1,Z=!1,en=!1,nn="progress-0",tn=!1,an=function(e){for(var n,t,a=e.length;a;n=parseInt(Math.random()*a),t=e[--a],e[a]=e[n],e[n]=t);return e};return{get_gb_data:function(){var e={};return e.spword=g,e.frek=h,e.next_type=_,e.pos=u,e.lemma=p,e.sample=f,e.pron_resultes=G,e.random_forms=M,e.change_pron=x,e.new_pron=k,e.anwser=C,e.sentence_with_first_letter=S,e.sentence_no_first_letter=E,e.sentence_strong_letter=P,e.firstletter=w,e.choiceWords=T,e.choiceDefines=j,e.points=m.user.get("point"),e.do_later_text=B,e.disable_do_later=V,e.game_show=v,e.ads_show_div=b,e.disable_action=Y,e.highlight=K,e.lemma_pos=D,e.choiceForms=Q,e.choiceFormsAnwser=J,e.result_message=Z,e.replace_lemma=O,e.firstletter=w,e.remove_stress_pron=$,e.ads_show_div_first=z,e.progress_class=nn,g.get("uk_pron_ext")&&(tn=!0),e.irr_pron=tn,e},update_need_review_num:function(e){m.$broadcast("update_reivew_num",{userNeedReviewNumber:e})},set_review_recoard:function(e,t,a){var s=this;n.set_user_record(a,t,e),n.set_class_record(a,t,e),n.set_user_chat_record(a,t,e),n.set_user_class_rate(a,t,e);var o=n.set_my_word_record(a,t,e);o.then(function(){s.create_review_data();s.get_review_time()})},get_review_time:function(){var n=m.user?m.user.id:"",a=this,s=r.defer(),o=new Parse.Query(q);return o.equalTo("user_id",n),o.notEqualTo("remove",!0),o.notEqualTo("finish_test",!0),o.exists("the_uk_pron"),o.descending("next_time"),o.lessThan("next_time",new Date),o.count({success:function(n){n>50&&(t.lessReviews(),n=50);var o=e.get_grammar_time();o.then(function(e){W=0==n?!0:!1,n+=e,N=n,a.update_need_review_num(n),s.resolve(n)})}}),s.promise},getTmpReviewNum:function(){return N},getEmptyReviewNum:function(){return W},getClassByIds:function(e){var n=Parse.Object.extend("MyClass"),t=r.defer(),a=new Parse.Query(n);return a.containedIn("objectId",e),a.find({success:function(e){t.resolve(e)}}),t.promise},get_review_lemmas:function(e,n){var t=r.defer(),a=new Parse.Query(q);return a.equalTo("user_id",e),a.notEqualTo("remove",!0),a.descending("updatedAt"),a.limit(2*n),a.find({success:function(e){var a=[];if(e[0])for(var s=0;s<=e.length-1;s++)if(e[s].get("lemma")){var o=a.indexOf(e[s].get("lemma").toUpperCase());0>o&&a.length<n&&a.push(e[s].get("lemma").toLowerCase())}a.length>=7?t.resolve(a):(a.length<7&&a.push("play"),a.length<7&&a.push("game"),a.length<7&&a.push("match"),a.length<7&&a.push("word"),a.length<7&&a.push("part"),t.resolve(a))}}),t.promise},addOneReview:function(e){var n=r.defer(),t=m.user,s=this;if(!t)return!1;var o=new Date,i=new q,l=new Parse.ACL(Parse.User.current());l.setPublicReadAccess(!0),i.setACL(l);var d=o.getFullYear()+""+("0"+(o.getMonth()+1)).slice(-2)+("0"+o.getDate()).slice(-2),c=new I,p=new Parse.ACL(Parse.User.current());p.setPublicReadAccess(!0),c.setACL(p);var u=e.define,g=e.frek,f=e.the_class,_=e.add_word;i.set("user_id",t.id),i.set("word_id",g.id),i.set("define_id",u.id),i.set("lemma",u.get("lemma")),i.set("define",_.get("definition")),i.set("sample",_.get("sample")),i.set("pos",_.get("pos")),i.set("next_time",o),i.set("next_type","a1"),i.set("word_create_Date",d),i.set("class_id",f.id),i.set("class_name",f.get("name")),i.set("choiceDefines",e.choiceDefines),i.set("choiceWords",e.choiceWords),i.set("uk_anwser",e.change_pron.uk_anwser),i.set("uk_new_pron",e.change_pron.uk_new_pron),i.set("uk_pron",e.change_pron.uk_pron),i.set("us_anwser",e.change_pron.us_anwser),i.set("us_new_pron",e.change_pron.us_new_pron),i.set("us_pron",e.change_pron.us_pron),i.set("form_v_a",g.get("form_v_a")),i.set("form_v_b",g.get("form_v_b")),i.set("form_v_c",g.get("form_v_c")),i.set("form_v_d",g.get("form_v_d")),i.set("form_v_e",g.get("form_v_e")),i.set("form_n_a",g.get("form_n_a")),i.set("form_n_b",g.get("form_n_b")),i.set("form_j_a",g.get("form_j_a")),i.set("form_j_b",g.get("form_j_b")),i.set("form_j_c",g.get("form_j_c")),i.set("form_r_a",g.get("form_r_a")),i.set("form_r_b",g.get("form_r_b")),i.set("form_ext_type",g.get("form_ext_type")),i.set("form_ext_a",g.get("form_ext_a")),i.set("form_ext_b",g.get("form_ext_b")),i.set("form_ext_c",g.get("form_ext_c")),i.set("form_ext_d",g.get("form_ext_d")),i.set("form_ext_e",g.get("form_ext_e"));var h=a.replace_lemma_form_sentence(_.get("sentence_main"),g);if(i.set("sentence_with_first_letter",h.sentence_with_first_letter),i.set("sentence_no_first_letter",h.sentence_with_first_letter),i.set("replace_lemma",h.sentence_with_first_letter),i.set("firstletter",h.firstletter),i.set("the_uk_pron",g.get("uk_pron")),i.set("the_uk_change_pron",g.get("uk_change_pron")),i.set("the_us_pron",g.get("us_pron")),i.set("the_us_change_pron",g.get("us_change_pron")),u.get("uk_pron_ext")&&""!=u.get("uk_pron_ext")&&(i.set("the_uk_pron",u.get("uk_pron_ext")),i.set("the_uk_change_pron",u.get("uk_change_pron_ext")),i.set("the_us_pron",u.get("us_pron_ext")),i.set("the_us_change_pron",u.get("us_change_pron_ext"))),i.set("uk_pron_ext",u.get("uk_pron_ext")),i.set("uk_change_pron_ext",u.get("uk_change_pron_ext")),i.set("us_pron_ext",u.get("us_pron_ext")),i.set("us_change_pron_ext",u.get("us_change_pron_ext")),_.get("imagesmain")){var v=_.get("imagesmain").replace("http://cdn","//cdn");i.set("imagesmain",v)}c.set("student_id",t.id),c.set("word_create_Date",d),c.set("lemma",g.get("lemma")),c.set("class_id",f.id),c.set("word_id",g.id),c.set("class_name",f.get("name")),c.set("origin_obj_lemma",g.get("lemma"));var b=t.get("user_list_ids")?t.get("user_list_ids"):[],y=b.indexOf(u.id);return 0>y&&b.push(u.id),t.set("user_list_ids",b),t.save().then(function(t){!e.change_pron.empty_pron&&h.include_lemma&&(c.save(),i.save().then(function(e){n.resolve(e),s.get_review_time()})),m.user=t}),n.promise},init_review:function(e){var e=m.user,n=e.id,t=new Date,a=[],s=this,o=e.get("user_list_ids")?e.get("user_list_ids"):[],i=new Parse.Query(L);i.equalTo("student_id",n),i.doesNotExist("is_course"),i.find({success:function(i){for(var r=i.length-1;r>=0;r--)a.push(i[r].get("class_id"));var l=new Date,d=6048e5,c=new Date(l.getTime()-d),m=new Parse.Query(U);m.containedIn("class_id",a),m.notContainedIn("define_id",o),m.limit(10),m.addDescending("createdAt"),m.greaterThan("createdAt",c),m.find({success:function(a){for(var i=[],r=[],l=a.length-1;l>=0;l--){var d=new q,c=new Parse.ACL(Parse.User.current());c.setPublicReadAccess(!0),d.setACL(c);var m=t.getFullYear()+""+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2),p=new I,u=new Parse.ACL(Parse.User.current());u.setPublicReadAccess(!0),p.setACL(u);var g=a[l];g.get("define_obj")&&d.set("define_obj",g.get("define_obj")),g.get("word_obj")&&d.set("word_obj",g.get("word_obj")),d.set("user_id",n),d.set("word_id",g.get("word_id")),d.set("define_id",g.get("define_id")),d.set("lemma",g.get("lemma")),d.set("define",g.get("define")),d.set("sample",g.get("sample")),d.set("pos",g.get("pos")),d.set("next_time",t),d.set("next_type","a1"),d.set("word_create_Date",m),d.set("class_id",g.get("class_id")),d.set("class_name",g.get("class_name")),d.set("choiceDefines",g.get("choiceDefines")),d.set("choiceWords",g.get("choiceWords")),d.set("uk_anwser",g.get("uk_anwser")),d.set("uk_new_pron",g.get("uk_new_pron")),d.set("uk_pron",g.get("uk_pron")),d.set("us_anwser",g.get("us_anwser")),d.set("us_new_pron",g.get("us_new_pron")),d.set("us_pron",g.get("us_pron")),d.set("form_v_a",g.get("form_v_a")),d.set("form_v_b",g.get("form_v_b")),d.set("form_v_c",g.get("form_v_c")),d.set("form_v_d",g.get("form_v_d")),d.set("form_v_e",g.get("form_v_e")),d.set("form_n_a",g.get("form_n_a")),d.set("form_n_b",g.get("form_n_b")),d.set("form_j_a",g.get("form_j_a")),d.set("form_j_b",g.get("form_j_b")),d.set("form_j_c",g.get("form_j_c")),d.set("form_r_a",g.get("form_r_a")),d.set("form_r_b",g.get("form_r_b")),d.set("form_ext_type",g.get("form_ext_type")),d.set("form_ext_a",g.get("form_ext_a")),d.set("form_ext_b",g.get("form_ext_b")),d.set("form_ext_c",g.get("form_ext_c")),d.set("form_ext_d",g.get("form_ext_d")),d.set("form_ext_e",g.get("form_ext_e")),d.set("sentence_with_first_letter",g.get("sentence_with_first_letter")),d.set("sentence_no_first_letter",g.get("sentence_no_first_letter")),d.set("replace_lemma",g.get("replace_lemma")),d.set("firstletter",g.get("firstletter")),d.set("the_uk_pron",g.get("the_uk_pron")),d.set("the_uk_change_pron",g.get("the_uk_change_pron")),d.set("the_us_pron",g.get("the_us_pron")),d.set("the_us_change_pron",g.get("the_us_change_pron")),d.set("uk_pron_ext",g.get("uk_pron_ext")),d.set("uk_change_pron_ext",g.get("uk_change_pron_ext")),d.set("us_pron_ext",g.get("us_pron_ext")),d.set("us_change_pron_ext",g.get("us_change_pron_ext")),g.get("imagesmain")&&d.set("imagesmain",g.get("imagesmain")),i.push(d),p.set("student_id",n),p.set("word_create_Date",m),p.set("lemma",a[l].get("origin_obj_lemma")),p.set("class_id",a[l].get("class_id")),p.set("word_id",a[l].get("word_id")),p.set("class_name",a[l].get("class_name")),p.set("origin_obj_lemma",a[l].get("origin_obj_lemma")),r.push(p);var f=o.indexOf(a[l].get("define_id"));0>f&&o.push(a[l].get("define_id"))}e.set("user_list_ids",o),e.save().then(function(){Parse.Object.saveAll(i).then(function(){Parse.Object.saveAll(r),s.get_review_time()})})}})}})},check_right_anwser:function(e){var n=[],t=this;n.push("Great! 10 points."),n.push("You did it! 10 points."),n.push("You're amazing! 10 points."),n.push("Brilliant! 10 points."),n.push("You get 10 points. Great work!"),n.push("10 points! Keep it up!"),an(n),m.$broadcast("check_right_anwser",{win_word:n[0]}),responsiveVoice.speak(n[0],"UK English Male"),g=a.generate_next_review_time(g),g=a.generate_next_review_type(g,h),t.set_review_recoard(e,"right",g)},check_wrong_anwser:function(e){var n=(m.user,2),t=60*n*60*1e3,a=new Date((new Date).getTime()+t);g.set("next_time",a),this.set_review_recoard(e,"wrong",g)},check_next_word:function(e){var n=18e5,t=new Date((new Date).getTime()+n);g.set("next_time",t),this.set_review_recoard(e,"next",g)},summaryYes:function(){var e="summary",n=1e3,t=new Date((new Date).getTime()+n);g.set("next_time",t),g.set("learn_type","a1"),g.set("summary",!0),this.set_review_recoard(e,"summary_yes",g)},review_count_trigger:function(){R+=1,R%15==4?(v=!0,m.$broadcast("set_game_data")):v=!1,b=R%2==1?!0:!1},set_a7_data:function(){G.star=0,G.dot=0,G.hint_count=0,G.top_dot=0,G.split_pron_arr=[],G.hint_anwser_arr=[],G.star_anwser_arr=[],G.dot_anwser_arr=[],G.check_anwser_arr=[],G.check_anwser_arr_index=[];for(var e=h.get("the_uk_pron"),n="",t=h.get("the_uk_pron"),s=!1,o=0;o<=e.length-1;o++)"*"==e[o]?(G.star++,""!=n&&G.split_pron_arr.push(n.trim()),"star"==s&&G.star_anwser_arr.push(n.trim()),"dot"==s&&G.dot_anwser_arr.push(n.trim()),s="star",n=""):"'"==e[o]?(G.top_dot++,""!=n&&G.split_pron_arr.push(n.trim()),"star"==s&&G.star_anwser_arr.push(n.trim()),"dot"==s&&G.dot_anwser_arr.push(n.trim()),s="dot",n=""):"."==e[o]?(G.dot++,""!=n&&G.split_pron_arr.push(n.trim()),"star"==s&&G.star_anwser_arr.push(n.trim()),"dot"==s&&G.dot_anwser_arr.push(n.trim()),s="dot",n=""):n+=e[o];"star"==s&&G.star_anwser_arr.push(n.trim()),"dot"==s&&G.dot_anwser_arr.push(n.trim()),$=a.remove_stress_pron(t),G.split_pron_arr.push(n.trim()),G.split_pron_arr[1]||(G.split_pron_arr=G.split_pron_arr[0].split(" "),G.star_anwser_arr=[],G.dot_anwser_arr=[],G.star_anwser_arr.push(G.split_pron_arr[0]),G.dot_anwser_arr.push(G.split_pron_arr[0])),G.split_pron_arr},set_a6_data:function(){var e=a.get_false_anwsers(h,u);Q=e.choiceForms,J=e.choiceFormsAnwser,D=e.lemma_pos},get_one_review_spword:function(){var e=r.defer(),n=new Parse.Query(q);return n.equalTo("user_id",m.user.id),n.notEqualTo("remove",!0),n.notEqualTo("finish_test",!0),n.descending("next_time"),n.exists("the_uk_pron"),n.lessThan("next_time",new Date),n.first({success:function(n){e.resolve(n)}}),e.promise},get_syn_defines:function(e){var n=r.defer();return d.get_syn_defines(e,function(e){n.resolve(e)}),n.promise},get_change_pron:function(e,n){var t=n.get("next_type"),a=r.defer();if("a1"==t){if(n.get("uk_pron_ext"))var s=d.get_review_pron(n.get("uk_pron_ext"),n.get("us_pron_ext"));else var s=d.get_review_pron(e.get("uk_pron"),e.get("us_pron"));s.then(function(e){a.resolve(e)})}else a.resolve(!0);return a.promise},get_syn_lemmas:function(e,n){var t=e.get("lemma"),s=e.get("definition"),o=r.defer(),i=[],c=[],m=e.get("synsetlemma")?e.get("synsetlemma"):[],p=a.replace_lemma_form_sentence(e.get("sentence_main"),n);i.push(p.replace_lemma),c.push(s),T=[],j=[];var p={};return d.get_syn_lemmas(t).then(function(e){for(var n=0;n<m.length;n++){var a=i.indexOf(m[n]);0>a&&i.length<=2&&i.push(m[n])}for(var n=e.length-1;n>=0;n--){var a=i.indexOf(e[n]);0>a&&i.length<=2&&i.push(e[n])}var s=l.getDefinesByLemmas(i);s.then(function(e){for(var n=e.length-1;n>=0;n--){var a=c.indexOf(e[n].get("definition"));e[n].get("lemma")==t&&0>a&&c.length<=2&&c.push(e[n].get("definition"))}for(var n=e.length-1;n>=0;n--){var a=c.indexOf(e[n].get("definition"));0>a&&c.length<=2&&c.push(e[n].get("definition"))}an(c),an(i),p.choiceDefines=c,p.choiceWords=i,o.resolve(p)})}),o.promise},get_one_review_cache_data:function(){var e=r.defer(),n=this;if(g&&F[0])for(var t=F.length-1;t>=0;t--)F[t]&&F[t].spword&&F[t].spword.get("lemma")==g.get("lemma")&&F.splice(t,1);return F.length>0?(e.resolve(F[0]),F.splice(0,1)):n.add_one_review_cache_data().then(function(n){e.resolve(n),n&&F.splice(0,1)}),e.promise},add_one_review_cache_data:function(){var e=r.defer(),n=this;return F.length<4&&!H&&n.get_one_review_all_data().then(function(n){n?(F.push(n),e.resolve(F[0])):e.resolve("false")}),e.promise},get_already_pop:function(){return X},get_one_review_all_data_by_define:function(e){e.set("next_type","a1");var n=this,t=r.defer(),a={};return p=e.get("lemma"),l.getWordByLemma(p).then(function(s){a.frek=s,r.all([n.get_change_pron(s,e),n.get_syn_lemmas(e,s)]).then(function(e){a.change_pron=e[0],a.choiceDefines=e[1].choiceDefines,a.choiceWords=e[1].choiceWords,en=!1,t.resolve(a)},function(){t.resolve("false")})}),t.promise},get_one_review_all_data:function(){var e=this,n={},t=r.defer();return e.get_one_review_spword().then(function(a){a&&(p=a.get("lemma"),n.spword=a,H=!1,l.getWordByLemma(p).then(function(s){n.frek=s,r.all([e.get_change_pron(s,a),e.get_syn_lemmas(a,s)]).then(function(e){n.change_pron=e[0],n.choiceDefines=e[1].choiceDefines,n.choiceWords=e[1].choiceWords,en=!1,t.resolve(n)},function(){t.resolve("false")})})),a||(H=!1,t.resolve("false"))}),t.promise},create_review_data:function(){X=!0;var e=this,n=r.defer(),t=this.get_one_review_spword();return t.then(function(t){if(t||(_="end",m.$broadcast("finish_review_data"),n.resolve(r)),t){e.review_count_trigger(),g=t,h=t,T=g.get("choiceWords"),an(T),j=g.get("choiceDefines"),an(j),x=g.get("change_pron"),B="Do later",V=!1,f=g.get("sample"),u=g.get("pos"),p=g.get("lemma"),_=g.get("next_type"),y=g.get("sample"),w=p.charAt(0),g.get("summary")||g.get("vocab")||(_="summary"),k=g.get("uk_pron"),C=g.get("uk_anwser"),x=g.get("uk_new_pron");var s=a.replace_lemma_form_sentence(g.get("sample"),h);g.set("sentence_with_first_letter",s.sentence_with_first_letter),g.set("sentence_no_first_letter",s.sentence_no_first_letter),g.set("replace_lemma",s.replace_lemma),S=g.get("sentence_with_first_letter"),E=g.get("sentence_no_first_letter");var o=g.get("sample"),i=g.get("replace_lemma");P=o.replace(i,'<strong class = "font-purple anwser-input">'+i+"</strong>"),O=g.get("replace_lemma"),w=g.get("firstletter"),A="_____",nn=a.generate_process_class(_),"a7"==_&&e.set_a7_data(),"a6"==_&&e.set_a6_data();var r=e.get_gb_data();m.$broadcast("update_reivew_gb_data",{gb_data:r}),n.resolve(r)}}),n.promise},set_remove_recoard_by_word_id:function(e){var n=new Parse.Query(I);n.equalTo("word_id",e),n.limit(1),n.find({success:function(e){e[0]&&(e[0].set("remove",!0),e[0].save())}})},remove_repeat_spword:function(){var e=new Parse.Query(q);e.equalTo("user_id",m.user.id),e.descending("updatedAt"),e.limit(100),e.find({success:function(e){for(var n=[],t=e.length-1;t>=0;t--){var a=e[t].get("define_id"),s=n.indexOf(a);s>-1?e[t].destroy():n.push(a)}}})},set_enable_recoard_by_word_id:function(e){var n=new Parse.Query(I);n.equalTo("word_id",e),n.limit(1),n.find({success:function(e){e[0]&&(e[0].set("remove",!1),e[0].save())}})},set_remove_process_by_word_id:function(e){var n=new Parse.Query(q);n.equalTo("word_id",e),n.limit(1),n.find({success:function(e){e[0]&&(e[0].set("remove",!0),e[0].save())}})},set_enable_process_by_word_id:function(e){var n=new Parse.Query(q);n.equalTo("word_id",e),n.limit(1),n.find({success:function(e){e[0]&&(e[0].set("remove",!1),e[0].save())}})},getUserReviewListData:function(e,n){var t=e.student_id,a=e.class_id,s=new Parse.Query(q);s.equalTo("user_id",t),s.equalTo("class_id",a),s.addDescending("updatedAt"),s.limit(200),s.find({success:function(e){n(e)}})},getUserReviewLema:function(e,n){var t=new Parse.Query(I);t.equalTo("student_id",e.student_id),t.equalTo("word_create_Date",e.word_create_Date),t.addDescending("word_create_Date"),t.limit(1e3),t.find({success:function(e){n(e)}})},getUserReviewLemaByUserId:function(e,n,t,a){var s=r.defer(),o=this;(!n||1>n)&&(n=1),console.log(t);var i=(n-1)*t,l=new Parse.Query(q);return l.equalTo("user_id",e),a&&l.equalTo("class_id",a),l.addDescending("updatedAt"),l.limit(t),l.skip(i),l.find({success:function(e){for(var n=new Array,t=e.length-1;t>=0;t--){var a=e[t].get("class_id"),i=n.indexOf(a);0>i&&n.push(a)}var r=o.getClassByIds(n);r.then(function(n){for(var t=e.length-1;t>=0;t--)for(var a=n.length-1;a>=0;a--)e[t].get("class_id")==n[a].id&&e[t].set("class_name",e[a].get("name"));s.resolve(e)})}}),s.promise},getClassWordDateList:function(e,n,t){var a=t.defer(),s=new Parse.Query(U);return s.select(["objectId","createdAt","lemma","origin_obj_lemma","pos"]),s.equalTo("class_id",n),s.limit(1e3),s.addDescending("createdAt"),s.find({success:function(e){for(var n=0;n<e.length;n++){var t=e[n].get("lemma");t||e[n].set("lemma",e[n].get("origin_obj_lemma"))}a.resolve(e)}}),a.promise}}}]),angular.module("triReviewModule").controller("ReviewDialogController",["HelperService","CourseReviewService","CourseExerciseService","$state","ReviewService","$mdToast","$rootScope","ParseService","$scope","$timeout","$mdDialog",function(e,n,t,a,s,o,i,r,l,d,c){i.user.get("spelling")?s.create_review_data().then(function(e){e&&(l.rs={},l.rs=e,l.rs.user=i.user)}):l.next_type="spelling",l.$on("update_reivew_gb_data",function(e,n){l.rs=n.gb_data,l.next_type=l.rs.next_type}),l.$on("game_lose",function(){l.rs.game_show=!1});var m=function(){l.grammar_course_exercise=!1,l.next_type="temp_empty",l.grammar_testing=!0;var n=t.getOneGrammrExercise();n.then(function(n){if(n){l.grammar_course=n,l.grammar_course_exercise=!0;var a=n.get("grammar"),s=n.get("next_type");a.type="grammar_exercise",a.view=s;var o=t.getSentencesByGrammarId(a,n);o.then(function(n){l.next_type=s,l.gb_data=n,l.gb_data.sentences=e.limitArray(8,l.gb_data.sentences),l=t.init_data(l,n)})}else l.next_type="go_to_game",l.rs={},l.rs.progress_class="progress-100",l.grammar_course_exercise=!1})};l.$on("finish_review_data",function(){l.rs&&(l.rs.result_message=!1),m()}),l.$on("update_course_gb_data",function(){var n=l.grammar_course.get("select_actions"),t=e.setProgressGrammarView(n);l.grammar_course.set("select_actions",t),l.grammar_course.set("next_type",t.view),l.grammar_course=e.grammar_generate_next_review_time(l.grammar_course),"close"==t.view&&l.grammar_course.set("finish_test",!0),l.grammar_course.save().then(function(){s.get_review_time(),m()})}),l.$on("check_right_anwser",function(e,n){o.show(o.simple().content(n.win_word).position("bottom right").hideDelay(3e3))}),l.goToGame=function(){a.go("admin-panel.default.finalgame"),c.cancel()},l.speak=function(e){responsiveVoice.speak(e,"UK English Male")},l.checkWordClass=function(e,n){var a=t.checkWordClass(l.view,e,n);return a},l.anwserClass=function(e,n){return n&&e?"right":void 0},l.openLink=function(e,n,t){i.link_category_type=e;var t=void 0===t?{}:t;t.parent_cat="GeneralEnglish"==t.parent_cat?"General English":t.parent_cat,t.parent_cat="AcademicEnglish"==t.parent_cat?"Academic English":t.parent_cat,t.parent_cat="BusinessEnglish"==t.parent_cat?"Business English":t.parent_cat,t.parent_cat="GrammarEnglish"==t.parent_cat?"Grammar English":t.parent_cat,c.cancel(),a.go(n,t)},l.anwserBgClass=function(e){if(!e)return!1;var n=e.indexOf("right!");if(n>0)return"anwser-green-bg";var n=e.indexOf("wrong!");return n>0?"anwser-grey-bg":void 0},l.continueReview=function(){l.rs.game_show=!1},l.nextWord=function(){l.rs.do_later_text="Loading..",l.rs.disable_do_later=!0,s.check_next_word()},l.removeWord=function(){l.rs.spword.set("remove",!0),l.rs.disable_action=!0,l.rs.spword.save().then(function(){s.create_review_data(),s.get_review_time()})},l.cancel=function(){c.cancel()},l.closeDialog=function(){c.cancel()}}]),angular.module("triReviewModule").service("RecordService",["ClassService","BuildDataService","HelperService","$interval","$timeout","$state","$q","WordService","WNService","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l,d,c){var m=Parse.Object.extend("ClassRecord"),p=Parse.Object.extend("UserRecord");return{set_user_record:function(e,n,t){var a=c.user,s=a.get("point")?a.get("point"):0;"right"==n&&(s+=10),"wrong"==n&&(s-=5),0>s&&(s=0),a.set("point",s),a=this.calculate_rate(a,t,n),a.save()},set_user_class_rate:function(n,t,a){var s=this,o=n.get("class_id"),i=c.user.id,r=e.getStudent(o,i),l=n.get("lemma");r.then(function(e){e=s.calculate_rate(e,a,t),s.set_recent_lemmas(l),e.save().then(function(){})})},set_my_word_record:function(e,n,t){{var a=i.defer();c.user}return e=this.calculate_rate(e,t,n),e.save().then(function(){a.resolve(e)}),a.promise},set_user_chat_record:function(e,n,t){var a=this,s=c.user.id,o=this.get_today_user_record(s);o.then(function(e){e=a.calculate_rate(e,t,n),e.save()})},set_class_record:function(e,n,t){var a=this,s=e.get("class_id"),o=this.get_today_class_record(s);o.then(function(e){e=a.calculate_rate(e,t,n),e.save().then(function(){})})},get_class_report:function(e){var n=i.defer(),t=new Parse.Query(m);return t.equalTo("class_id",e),t.descending("createdAt"),t.limit(7),t.find({success:function(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a]);n.resolve(t)}}),n.promise},get_today_class_record:function(e){var n=new Date,t=n.getFullYear()+""+("0"+(n.getMonth()+1)).slice(-2)+("0"+n.getDate()).slice(-2),a=i.defer(),s=new Parse.Query(m);return s.equalTo("class_id",e),s.equalTo("time",t),s.first({success:function(n){if(n)a.resolve(n);else{var s=new m;s.set("time",t),s.set("class_id",e);var o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),s.setACL(o),a.resolve(s)}}}),a.promise},get_today_user_record:function(e){var n=new Date,t=("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear(),a=i.defer(),s=new Parse.Query(p);return s.equalTo("user_id",e),s.equalTo("time",t),s.first({success:function(n){if(n)a.resolve(n);else{var s=new p;s.set("time",t),s.set("user_id",e);var o=new Parse.ACL(Parse.User.current());o.setPublicReadAccess(!0),s.setACL(o),a.resolve(s)}}}),a.promise},set_recent_lemmas:function(e){var n=10,t=[],a=Parse.User.current(),s=a.get("recent_lemmas");if(!s)var s=[];for(var o=0;100>=o;o++){if(s[o]){var i=t.indexOf(s[o]);0>i&&s[o]!=e&&t.push(s[o])}if(t.length>=n-1)break}return t.unshift(e),a.set("recent_lemmas",t),a.save(),a},calculate_rate:function(e,n,t){if("summary_yes"==t)return e;var a=0,s=0;e.increment("total"),"wrong"==t&&(s=1,e.increment("wrong"),e.set(n,t)),e.set("current",n),"right"==t&&(a=1,s=1,e.increment("right"),e.get(n)||e.set(n,t)),e.get("pron_no")||(e.set("pron_no",0),e.set("pron_r_no",0)),e.get("at_no")||(e.set("at_no",0),e.set("at_r_no",0)),e.get("sp_no")||(e.set("sp_no",0),e.set("sp_r_no",0)),e.get("ext_no")||(e.set("ext_no",0),e.set("ext_r_no",0));var o=e.get("pron_no")+s,i=e.get("pron_r_no")+a,r=e.get("at_no")+s,l=e.get("at_r_no")+a,d=e.get("ud_no")+s,c=e.get("ud_r_no")+a,m=e.get("sp_no")+s,p=e.get("sp_r_no")+a,u=e.get("ext_no")+s,g=e.get("ext_r_no")+a;switch(n){case"a1":e.set("pron_no",o),e.set("pron_r_no",i);break;case"a7":e.set("pron_no",o),e.set("pron_r_no",i);break;case"a3":e.set("sp_no",m),e.set("sp_r_no",p);break;case"a6":e.set("sp_no",m),e.set("sp_r_no",p);break;case"a2":e.set("ud_no",d),e.set("ud_r_no",c);break;case"a8":e.set("ud_no",d),e.set("ud_r_no",c);break;case"a4":e.set("at_no",r),e.set("at_r_no",l);break;case"a5":e.set("at_no",r),e.set("at_r_no",l);break;case"a9":e.set("ext_no",u),e.set("ext_r_no",g);break;case"a10":e.set("ext_no",u),e.set("ext_r_no",g)}return e},getStudentWordChatData:function(e){if(!e)var e=c.user.id;var n=i.defer(),t=new Parse.Query(p);return t.equalTo("user_id",e),t.descending("createdAt"),t.limit(7),t.find({success:function(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a]);n.resolve(t)}}),n.promise},generateChatData:function(e){for(var n=[],t=[],a=[],s=[],o=0;o<=e.length-1;o++){var i=e[o],r=new Date(i.createdAt),l=("0"+r.getDate()).slice(-2)+"/"+("0"+(r.getMonth()+1)).slice(-2)+"/"+r.getFullYear();s.push(l);var d=i.get("total")?i.get("total"):0,c=i.get("right")?i.get("right"):0,m=d-c;n.push(d),t.push(c),a.push(m)}var p=[];p.push(n),p.push(t),p.push(a);var u={labels:s,series:["Revision (total done)","Progress (total correct)","Problems (total incorrect)"],options:{datasetFill:!1,datasetStrokeWidth:4},colours:["#c8bfe7","#3f0180","#ec407a"],data:p};return u}}}]),angular.module("triReviewModule").controller("FinalGameController",["HelperService","$stateParams","GameService","$mdToast","$interval","ReviewService","$compile","$rootScope","ParseService","$scope","$timeout","$mdDialog",function(e,n,t,a,s,o,i,r,l,d){if(n.page,t.setNormalGame(),d.gameData=t.getGameData(),n.words){for(var c=n.words,m=c.split(","),p=[],u=m.length-1;u>=0;u--)m[u]&&""!=m[u]&&p.push(m[u]);p=e.shuffle(p);var g=t.setWordList(p);d.wordList=g}else{var f=o.get_review_lemmas(r.user.id,15);f.then(function(e){var n=t.setWordList(e);d.wordList=n})}d.tips=function(){d.showanwsers=!d.showanwsers},d.startGame=function(){if(d.gameData.showStartButton=!1,n.words){for(var a=n.words,s=a.split(","),i=[],l=s.length-1;l>=0;l--)s[l]&&""!=s[l]&&i.push(s[l]);i=e.shuffle(i);var c=t.setWordList(i);d.wordList=c}else{var m=o.get_review_lemmas(r.user.id,15);m.then(function(e){var n=t.setWordList(e);d.wordList=n})}},d.returnClass=function(e){var n="";return e.computer&&(n+="computer "),e.person&&(n+="person "),e.select&&(n+="select "),n},d.personOneStep=function(e){t.personOneStep(e)}}]),angular.module("triGrammarCourseModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/grammar-course"),n.state("admin-panel.default.grammar-data",{url:"/grammar-data",templateUrl:"app/grammar-course/template/grammar_data.tmpl.html",controller:"GrammarDataController"}).state("admin-panel.default.level-test",{url:"/level-test",templateUrl:"app/grammar-course/template/leveltest.tmpl.html",controller:"LevelTestController"}).state("admin-panel.default.course-progress",{url:"/course-progress",templateUrl:"app/grammar-course/template/course-progress.tmpl.html",controller:"CourseProgressController"}).state("admin-panel.default.edit-data",{url:"/edit-grammar/:id",templateUrl:"app/grammar-course/template/edit_grammar.tmpl.html",controller:"EditGrammarController"}).state("admin-panel.default.study-note-grammar-view",{url:"/grammar-module/study-note-view/:id",templateUrl:"app/grammar-course/template/course-study-note-view.tmpl.html",controller:"StudyNoteCourseViewController"}).state("admin-panel.default.study-note-vocab-view",{url:"/grammar-module/course-vocab/:id",templateUrl:"app/grammar-course/template/vocab-study-note-view.tmpl.html",controller:"StudyNoteCourseViewController"}).state("admin-panel.default.study-note-reading-view",{url:"/grammar-module/course-reading/:id",templateUrl:"app/grammar-course/template/reading-study-note-view.tmpl.html",controller:"StudyNoteCourseViewController"}).state("admin-panel.default.study-note-writing-view",{url:"/grammar-module/course-writing/:id",templateUrl:"app/grammar-course/template/writing-study-note-view.tmpl.html",controller:"StudyNoteCourseViewController"}).state("admin-panel.default.study-note-dialogue-view",{url:"/grammar-module/course-dialogue/:id",templateUrl:"app/grammar-course/template/dialogue-study-note-view.tmpl.html",controller:"StudyNoteCourseViewController"})}]),angular.module("triGrammarCourseModule").controller("LevelTestController",["CourseExerciseService","CourseReviewService","HelperService","$rootScope","$state","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r){var l=0,d=function(){r.grammar=r.test_grammars[l],r.grammar.type="level_test",r.grammar.view="act3",r.level=r.grammar.get("level");var n=e.getSentencesByGrammarId(r.grammar);n.then(function(n){r.gb_data=n,r.gb_data.sentences=t.shuffle(r.gb_data.sentences),r.gb_data.sentences=t.limitArray(8,r.gb_data.sentences),r=e.init_data(r,n),r.view=n.view})},c=e.getLevelTestGrammars();c.then(function(e){r.test_grammars=e,d()}),r.$on("update_course_gb_data",function(e,n){r.view="loading..",r.$apply(function(){r.view="loading.."});var t=n.gb_data.anwser_percentage;t>=.75?(l++,d()):r.$apply(function(){r.view="show_anwser",r.level=r.grammar.get("level"),a.user.set("level",r.level),a.user.save()})}),r.goToHome=function(){s.go("admin-panel.default.home")},r.speak=function(e){responsiveVoice.speak(e,"UK English Male")},r.checkWordClass=function(n,t){var a=e.checkWordClass(r.view,n,t);return a}}]),angular.module("triGrammarCourseModule").controller("CourseReviewController",["CourseExerciseService","$rootScope","WNService","CourseReviewService","HelperService","$mdToast","grammar","$mdDialog","$scope",function(e,n,t,a,s,o,i,r,l){console.log("$scope.grammar"),l.input={},l.grammar=i;var d=function(t){l=e.init_data(l,t),"close"==t.view&&(console.log(l.grammar),n.$broadcast("pass_grammar"),setTimeout(function(){r.cancel()},2e3))};if(l.$on("load_next_course_gb_data",function(t,a){if(l.progress_id++,l.progress_id>l.progress_grammar_objs.length-1)setTimeout(function(){l.view="show_point",l.progress_point=a.gb_data.progress_points,n.$broadcast("porgress_test",{progress_point:l.progress_point})},2e3);else{l.view="loading..";var o=l.progress_grammar_objs[l.progress_id].grammar;o.view=s.setProgressGrammarView(l.progress_grammar_objs[l.progress_id]).view,o.type=l.grammar.type,l.grammar=o;var i=e.getSentencesByGrammarId(o);i.then(function(n){var n=e.set_progress_obj(l.progress_grammar_objs[l.progress_id]);d(n),l.view=n.view})}}),l.$on("update_course_gb_data",function(e,n){d(n.gb_data),setTimeout(function(){l.$apply(function(){l.view=l.gb_data.view})},2e3)}),l.grammar.note_tmp_id)if(l.hide_bar=!0,"progress_test"==l.grammar.type){console.log(l.grammar);var c=l.grammar.progress_items,m=e.createProgress(c);m.then(function(n){l.progress_grammar_objs=n,l.progress_id=0;var t=l.progress_grammar_objs[l.progress_id].grammar;t.view=s.setProgressGrammarView(l.progress_grammar_objs[l.progress_id]).view,t.type=l.grammar.type,l.grammar=t;var a=e.getSentencesByGrammarId(t);a.then(function(n){var n=e.set_progress_obj(l.progress_grammar_objs[l.progress_id]);d(n),l.view=n.view})
})}else{var p=l.grammar.id,i=a.getGrammarByid(p);i.then(function(n){if(console.log(l.grammar),console.log(l.grammar.type),l.grammar.select_actions)var t=Object.assign({},l.grammar.select_actions);else if("vocab"==l.grammar.type)var t={lexis:!0,type:"select_actions"};else if("grammar_writing"==l.grammar.type)var t={free_practice:!0,type:"select_actions"};else if("grammar"==l.grammar.type)var t={error_correction:!0,form_action:!0,identification:!0,quiz:!0,spoken_writing_form:!0,test_all:!0,type:"select_actions",use_func:!0,word_order:!0};else if("reading"==l.grammar.type)var t={reading_gap_fill:!0,reading_comprehension:!0,type:"select_actions"};else if("dialogue"==l.grammar.type)var t={dialogue_gap_fill:!0,dialogue_error_correction:!0,dialogue_match:!0,dialogue_quiz:!0,type:"select_actions"};else if("free_practice"==l.grammar.type)var t={free_practice:!0,type:"select_actions"};else var t={error_correction:!0,form_action:!0,identification:!0,quiz:!0,spoken_writing_form:!0,test_all:!0,type:"select_actions",use_func:!0,word_order:!0};n.view=s.setProgressGrammarView(t).view,n.type=l.grammar.type,l.grammar=n;var a=e.getSentencesByGrammarId(n);a.then(function(n){e.addUserGrammarExercise(l.grammar.type,l.grammar.view,t,n.grammar);var n=e.set_progress_obj(t);d(n),l.view=n.view})})}else{var u=e.getSentencesByGrammarId(i);u.then(function(e){d(e),l.view=e.view})}l.speak=function(e){responsiveVoice.speak(e,"UK English Male")},l.checkWordClass=function(n,t){var a=e.checkWordClass(l.view,n,t);return a},l.cancel=function(){r.cancel()},l.close=function(){r.cancel()}}]),angular.module("triGrammarCourseModule").controller("CourseProgressController",["CourseExerciseService","CourseReviewService","HelperService","$rootScope","$state","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r){var l=e.getRecords();l.then(function(e){r.records=e}),r.page=1,r.setActClass=function(e,n){var t="";if(n.id){var a=n.get(e);if("wrong"==a){switch(e){case"act1":t="purple-border";break;case"act2":t="purple-border";break;case"act3":t="purple-border";break;case"act4":t="yellow-border";break;case"act5":t="yellow-border";break;case"act6":t="yellow-border";break;case"act7":t="blue-border";break;case"act8":t="blue-border";break;case"act9":t="blue-border";break;case"act10":t="blue-border";break;case"act11":t="blue-border";break;case"act12":t="blue-border";break;case"act13":t="pink-border";break;case"act14":t="pink-border";break;default:t=""}t+=" black-bg"}else if("right"==a)switch(e){case"act1":t="purple-bg";break;case"act2":t="purple-bg";break;case"act3":t="purple-bg";break;case"act4":t="yellow-bg";break;case"act5":t="yellow-bg";break;case"act6":t="yellow-bg";break;case"act7":t="blue-bg";break;case"act8":t="blue-bg";break;case"act9":t="blue-bg";break;case"act10":t="blue-bg";break;case"act11":t="blue-bg";break;case"act12":t="blue-bg";break;case"act13":t="pink-bg";break;case"act14":t="pink-bg";break;default:t=""}else t=""}return t}}]),angular.module("triGrammarCourseModule").controller("GrammarDataController",["$translate","BuildDataService","WordService","HelperService","$rootScope","$state","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r,l){l.match_exercises=a.getCourseExerciseMatch();var d=Parse.Object.extend("GrammarACTData");l.view="course",l.outline_data={},l.table={},l.act7_obj={},l.act7_obj.a="";var c=s.user;l.filter=c.get("course_view_filter")?c.get("course_view_filter"):"all",c.get("course_view_id")||c.get("course_view_level")||c.get("course_view_structure")||c.get("course_view_action")?(l.table.id=c.get("course_view_id"),l.table.outline=!0,l.table.level=c.get("course_view_level"),l.table.structure=c.get("course_view_structure"),l.table.action=c.get("course_view_action"),l.table.order=!0):(l.table.id=!0,l.table.outline=!0,l.table.level=!0,l.table.structure=!0,l.table.action=!0,l.table.order=!0),l.outlines=[],l.items=[],l.items_bak=[],l.grammarACTDatas=[];var m=new Parse.Query(d);m.ascending("outline_order"),m.notEqualTo("remove",!0),m.notEqualTo("teacher_grammar",!0),m.notEqualTo("reading_grammar",!0),m.find({success:function(e){l.$apply(function(){for(var n=e.length-1;n>=0;n--)"outline"!=e[n].get("type")&&(e[n].outline=e[n].get("outline"),e[n].outline_order=e[n].get("outline_order"));l.grammarACTDatas=e;for(var n=e.length-1;n>=0;n--)"outline"==e[n].get("type")?l.outlines.unshift(e[n]):(e[n].outline=e[n].get("outline"),e[n].outline_order=e[n].get("outline_order"),l.items.unshift(e[n]),l.items_bak.unshift(e[n]));l.changeFilter(l.filter)})}}),l.saveTableSetting=function(e){c.set("course_view_id",e.id),c.set("course_view_level",e.level),c.set("course_view_structure",e.structure),c.set("course_view_action",e.action),c.save()},l.buttonClass=function(e){return e.get("hide_note")?"grey_bg":void 0},l.hideNote=function(e){e.set("hide_note",!0),e.save()},l.showNote=function(e){e.set("hide_note",!1),e.save()},l.changeFilter=function(e){c.set("course_view_filter",e),c.save(),l.items=[];for(var n=l.items_bak.length-1;n>=0;n--)(l.items_bak[n].get("outline")==e||"all"==e)&&l.items.unshift(l.items_bak[n])},l.saveItemOrder=function(e){var n=Number(e.outline_order);e.set("outline_order",n),e.save()},l.saveItemOutline=function(e){e.set("outline",e.outline),e.save()},l.saveEditOutline=function(){l.outline_data.disable=!0;var e=l.edit_outline;e.set("type","outline"),e.set("name",l.outline_data.name),e.set("level",l.outline_data.level),e.set("course",l.outline_data.course),e.set("user_id",s.user.id),e.save().then(function(){l.outline_data={},l.edit_outline=!1})},l.editOutline=function(e){l.edit_outline=e,l.outline_data={},l.outline_data.name=e.get("name"),l.outline_data.level=e.get("level"),l.outline_data.course=e.get("course")},l.deleteOutline=function(e){var n=l.outlines.indexOf(e);n>-1&&l.outlines.splice(n,1),e.destroy()},l.addOutline=function(){l.outline_data.disable=!0;var e=new d;e.set("type","outline"),e.set("name",l.outline_data.name),e.set("level",l.outline_data.level),e.set("course",l.outline_data.course),e.set("user_id",s.user.id);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){l.outline_data={},l.outlines.unshift(e)})},l.test=function(e,n){e.view=n,r.show({controller:"CourseReviewController",templateUrl:"app/grammar-course/template/course-review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:l.menuClickEvent,locals:{grammar:e,getFocus:!0},focusOnOpen:!1})},l.record=function(){l.view="course"},l.outline=function(){l.view="outline"},l.delete=function(n){var t=r.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));r.show(t).then(function(){var e=l.items.indexOf(n);e>-1&&l.items.splice(e,1),n.destroy()})},l.edit=function(e){o.go("admin-panel.default.edit-data",{id:e.id})},l.add=function(){var e=new d;e.set("onload_summary",!0),e.set("onload_act_1",!0),e.set("onload_act_2",!0),e.set("onload_act_3",!0),e.set("onload_act_4",!0),e.set("onload_act_5",!0),e.set("onload_act_6",!0),e.set("onload_act_7",!0),e.set("onload_act_8",!0),e.set("onload_act_9",!0),e.set("onload_act_10",!0),e.set("onload_act_11",!0),e.set("onload_act_12",!0),e.set("onload_act_13",!0),e.set("system",!0);var n=new Parse.ACL(Parse.User.current());n.setPublicReadAccess(!0),e.setACL(n),e.save().then(function(e){o.go("admin-panel.default.edit-data",{id:e.id})})}}]).controller("EditGrammarController",["CourseReviewService","WordService","WNService","HelperService","$stateParams","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r){var l=Parse.Object.extend("GrammarACTData"),d=Parse.Object.extend("GrammarACTSTC"),c=s.id,m=e.get_grammar_tags();r.dia={},r.dia.check_item=m.dia_check_item,r.dia.check_name=m.dia_check_name,r.dia.check_simple=m.dia_check_simple,r.dia.check_model={},r.sentence={};var m=e.get_grammar_tags();r.sentence.check_item=m.stc_check_item,r.sentence.check_name=m.stc_check_name,r.sentence.check_simple=m.stc_check_simple,r.sentence.check_model={};var p=new Parse.Query(d);p.equalTo("parent_id",c),p.ascending("the_order"),p.limit(100),p.find({success:function(e){r.sentence_list=[],r.dia_list=[],r.vocas=[],r.test_forms=[],r.$apply(function(){for(var n=e.length-1;n>=0;n--){var t=e[n].get("the_order")?e[n].get("the_order"):1;e[n].the_order=Number(t),"sentence"==e[n].get("type")?r.sentence_list.unshift(e[n]):"voca"==e[n].get("type")?r.vocas.unshift(e[n]):"test_form"==e[n].get("type")?r.test_forms.unshift(e[n]):r.dia_list.unshift(e[n])}})}});var p=new Parse.Query(l);p.equalTo("objectId",c),p.first({success:function(n){r.$apply(function(){var t=e.get_grammar_tags();r.grammarACTData=n,r.data=e.set_grammar_data(n),r.data.check_item=t.data_check_item,r.data.check_name=t.data_check_name,r.data.check_model=e.getTypeObj(n,r.data.check_item),r.question_objs=[];for(var a=1;10>=a;a++){var s={},o=n.get("act7_q_"+a)?n.get("act7_q_"+a):"",i=n.get("act7_a_"+a)?n.get("act7_a_"+a):"";s.id=a,s.q=o,s.a=i,s.anwser_index_arr=[],r.question_objs.push(s)}var l=n.get("listen_arr");if(l)var l=n.get("listen_arr");else var d=n.get("listen")?n.get("listen"):"",l=d.split(" ");r.listen_arr=l})}}),r.removeQuestion=function(e){r.question_objs.splice(e,1),r.act7_obj={},r.act7_obj.a="",r.save()},r.editQuestion=function(e){e.is_edit=!0,r.act7_obj=e},r.readingDown=function(e,n){var t=n.indexOf(e);t<n.length-1&&(n.splice(t,1),n.splice(t+1,0,e),r.question_objs=n,r.save())},r.readingUp=function(e,n){var t=n.indexOf(e);t>0&&(n.splice(t,1),n.splice(t-1,0,e),r.question_objs=n,r.save())},r.saveReadingQ=function(){r.act7_obj.is_edit||r.question_objs.push(r.act7_obj),r.act7_obj={},r.act7_obj.a="",r.save()},r.clear=function(e){e.anwser_index_arr=[],e.last_id=!1,e.a=""},r.deleteAnwser=function(e){e.anwser_index_arr=[],e.last_id=!1,e.a="",e.q="",e.show=!1,r.save()},r.anwserGapFill=function(e,n){var t=r.inGapFill(n);if(t)var a=r.data.reading_gapfill_objs.indexOf(t);if(a>-1)r.data.reading_gapfill_objs.splice(a,1);else{var t={};e=e.trim();var s=e.slice(-1);if("."==s||"!"==s||"?"==s||","==s||";"==s)var o=e.substring(0,e.length-1);else o=e;t.lemma=e,t.index=n,t.fixed_lemma=o,t.fixed_leave=e.replace(o,""),r.data.reading_gapfill_objs.push(t)}r.data.reading_gapfill_objs.sort(function(e,n){return e.index<n.index?-1:e.index>n.index?1:0});for(var i=0;i<r.data.reading_gapfill_objs.length;i++)r.data.reading_gapfill_objs[i].anwser_index=i+1;console.log(r.data.reading_gapfill_objs),r.save()},r.inGapFill=function(e){for(var n=!1,t=0;t<r.data.reading_gapfill_objs.length;t++){var a=r.data.reading_gapfill_objs[t];if(a.index==e){n=a;break}}return n},r.anwser=function(e,n,t){t.anwser_index_arr||(t.anwser_index_arr=[]),t.a||(t.a="");var a=!0;if(t.last_id&&t.last_id+1!=n&&(t.answer_message="Plese select word right after the previous word!",a=!1),a){e=e.trim();var s=e.slice(-1);("."==s||"!"==s||"?"==s||","==s||";"==s)&&(e=e.substring(0,e.length-1)),t.a+=" "+e,t.show=!0,t.last_id=n,t.answer_message=!1,t.anwser_index_arr.push(n)}},r.addMore=function(e){var n=e.id;r.question_objs[n].show=!0},r.updateListen=function(){var e=r.data.listen.replace(/\n/g," -breakline- ");r.listen_arr=e.split(" "),r.save()},r.testFormChange=function(){r.use_test_form_disable=!1},r.useTestForm=function(){r.use_test_form_disable=!0,r.type="test_form",i.show({controller:"CourseAddTestFormController",templateUrl:"app/grammar-course/template/course-add-test-form-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.editTestForm=function(e){r.edit_form=e,r.use_test_form_disable=!0,r.type="test_form",i.show({controller:"CourseAddTestFormController",templateUrl:"app/grammar-course/template/course-add-test-form-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.saveOrder=function(e){var n=Number(e.the_order);e.set("the_order",n),e.save()},r.emptyInput=function(e){e.sample=""},r.useSentence=function(){r.use_sentence_disable=!0,r.type="sentence",i.show({controller:"CourseAddSentenecController",templateUrl:"app/grammar-course/template/course-add-sentence-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.useDia=function(){r.use_sentence_disable=!0,r.type="dia",i.show({controller:"CourseAddSentenecController",templateUrl:"app/grammar-course/template/course-add-sentence-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.editSentence=function(e){e.use_sentence_disable=!0,r.type="sentence",r.edit_grammar=e,i.show({controller:"CourseAddSentenecController",templateUrl:"app/grammar-course/template/course-add-sentence-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.editDia=function(e){e.use_sentence_disable=!0,r.type="dia",r.edit_grammar=e,i.show({controller:"CourseAddSentenecController",templateUrl:"app/grammar-course/template/course-add-sentence-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.editVoca=function(e){r.search_category=e.get("lemma");var t=n.searchCatByString(r.search_category);t.then(function(e){r.search_words=e}),r.edit_voca=e},r.useCategory=function(e){i.show({controller:"ViewCategoryWordsController",templateUrl:"app/grammar-course/template/view-category-words-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{word:e,parent_scope:r,getFocus:!0},focusOnOpen:!1})},r.addVocabCategory=function(e){e.disable=!0;var t=Parse.Object.extend("AddCategory"),a=new Parse.Query(t);a.equalTo("parent_cat",e.id),a.find({success:function(e){for(var t=[],a=e.length-1;a>=0;a--)e[a].get("name")==r.search_lemma?r.select_word=e[a]:t.push(e[a]);if(r.select_word){var s=r.select_word.get("define_id"),o=n.getDefineById(s);o.then(function(e){for(var n=e.get("imagesmain"),a=e.get("lemma"),s=e.get("definition"),o=e.get("sentence_main"),i=[],l=r.vocas[0]?r.vocas.length+1:1,c=t.length-1;c>=0;c--)i.push(t[c].get("name"));{var m=new d;r.select_word}m.set("type","voca"),m.set("lemma",a),m.set("lemma_arr",i),m.set("image",n),m.set("the_order",l),m.set("definition",s),m.set("sample",o),m.set("word_id",e.id),m.set("parent_id",r.grammarACTData.id);var p=new Parse.ACL(Parse.User.current());p.setPublicReadAccess(!0),m.setACL(p),m.save().then(function(e){e.the_order=l,r.select_word=!1,r.view_words=!1,r.search_words=!1,r.vocas[0]||(r.vocas=[]),r.vocas.push(e),r.search_words=!1,r.view_words=!1,r.select_word=!1})})}}})},r.searchInputChange=function(e){var t=n.searchCatByLemma(e);t.then(function(n){r.search_words=n,r.search_lemma=e})},r.saveTags=function(){r.grammarACTData=e.saveTypesByObj(r.grammarACTData,r.data.check_item,r.data.check_model),r.grammarACTData.save()},r.saveWriting=function(){if(r.edit_writing)var e=r.edit_writing;else var e={};e.writing_task=r.data.writing_task,e.select_test_forms=r.data.select_test_forms,r.data.select_test_form&&(e.test_form_id=r.data.select_test_form.id),r.edit_writing||r.data.writing_objs.push(e),r.save(),r.data.select_test_forms=[],r.edit_writing=!1,r.data.writing_task=""},r.editWriting=function(e){r.edit_writing=e,r.data.writing_task=e.writing_task,r.data.select_test_forms=e.select_test_forms?e.select_test_forms:[]},r.inSelectForms=function(e){r.data.select_test_forms||(r.data.select_test_forms=[]);var n=r.data.select_test_forms.indexOf(e.id);return 0>n?!1:!0},r.triggerTestForm=function(e){r.data.select_test_forms||(r.data.select_test_forms=[]);var n=r.data.select_test_forms.indexOf(e.id);0>n?r.data.select_test_forms.push(e.id):r.data.select_test_forms.splice(n,1)},r.removeWriting=function(e){r.data.writing_objs.splice(e,1),r.save()},r.writingDown=function(e,n){var t=n.indexOf(e);t<n.length-1&&(n.splice(t,1),n.splice(t+1,0,e),r.data.writing_objs=n,r.save())},r.writingUp=function(e,n){var t=n.indexOf(e);t>0&&(n.splice(t,1),n.splice(t-1,0,e),r.data.writing_objs=n,r.save())},r.save=function(){r.grammarACTData=e.save_grammar_data(r.grammarACTData,r.data),r.grammarACTData.set("listen",r.data.listen),r.grammarACTData.set("listen_arr",r.listen_arr);for(var n=10;n>=1;n--)r.grammarACTData.set("act7_q_"+n,""),r.grammarACTData.set("act7_a_"+n,"");for(var t=1,n=0;n<=r.question_objs.length-1;n++){var a=r.question_objs[n];a.q&&a.a&&(r.grammarACTData.set("act7_q_"+t,a.q),r.grammarACTData.set("act7_a_"+t,a.a),r.grammarACTData.set("act7_arr_"+t,a.anwser_index_arr),t++)}r.grammarACTData.save(),o.show(o.simple().content("Update succeeded!").position("bottom right").hideDelay(5e3))},r.getStcTags=function(){var e=t.get_grammar_tags_by_sentence(r.sentence.sample);e.then(function(e){r.sentence.tags=e.tags,r.sentence.tags_arr=e.tags_arr,r.sentence.lemma_arr=e.lemma_arr})},r.removeVoca=function(e){var n=i.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));i.show(n).then(function(){var n=r.vocas.indexOf(e);n>-1&&r.vocas.splice(n,1),e.destroy()})},r.removeTestForm=function(e){var n=i.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));i.show(n).then(function(){var n=r.test_forms.indexOf(e);n>-1&&r.test_forms.splice(n,1),e.destroy()})},r.removeSentence=function(e){var n=i.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this"));ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No")),i.show(n).then(function(){var n=r.sentence_list.indexOf(e);n>-1&&r.sentence_list.splice(n,1),e.destroy()})},r.removeDia=function(e){var n=i.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));i.show(n).then(function(){var n=r.dia_list.indexOf(e);n>-1&&r.dia_list.splice(n,1),e.destroy()})}}]).controller("CourseAddTestFormController",["parent_scope","$rootScope","WNService","CourseReviewService","HelperService","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r){var l=(Parse.Object.extend("GrammarACTData"),Parse.Object.extend("GrammarACTSTC"));r.options_obj=[],r.current_obj=!1,e.edit_form&&(e.test_form=e.edit_form.get("sample")),r.parent_scope=e;var d=t.get_grammar_tags_by_sentence(e.test_form);d.then(function(e){r.sample_obj=e.tag_objs}),r.changeSample=function(){r.options_obj=[],r.current_obj=!1,r.sample_obj=[];var n=t.get_grammar_tags_by_sentence(e.test_form);n.then(function(e){r.sample_obj=e.tag_objs})},r.selectTagTypeAuto=function(e){e.tag_tag?r.selectTagType("tag_lemma",e):e.tag_lemma?r.selectTagType("tag_space",e):r.selectTagType("tag_tag",e)},r.selectTagType=function(e,n){n.tag_lemma=!1,n.tag_tag=!1,n.tag_space=!1,n[e]=!0,n.tag_type=e,"tag_lemma"==e&&(n.show_tag=n.lemma),"tag_tag"==e&&(n.show_tag=n.tag),"tag_space"==e&&(n.show_tag="*")},r.tagClass=function(e,n){return n[e]?void 0:"bg-grey"},r.addOption=function(e,n){var t=!0;r.current_obj&&r.current_obj.index+1!=n&&(t=!1),t?(r.current_obj=e,e.index=n,e.is_option=!0,e.show_tag=e.tag,r.options_obj.push(e),r.err_message=!1,e.tag_tag=!0,e.tag_type="tag_tag"):r.err_message="Please select word right after the last word!"},r.clear=function(){r.options_obj=[],r.current_obj=!1;for(var e=r.sample_obj.length-1;e>=0;e--)r.sample_obj[e].is_option=!1,r.sample_obj[e].show_tag=""},r.addTestForm=function(){if(e.edit_form)var t=e.edit_form;else{var t=new l,a=new Parse.ACL(Parse.User.current());a.setPublicReadAccess(!0),t.setACL(a)}t.set("sample",e.test_form),t.set("type",e.type),t.set("parent_id",e.grammarACTData.id),t.set("user_id",n.user.id),t.set("tag",r.options_obj[0].show_tag),t.set("tag_type",r.options_obj[0].tag_type);for(var s=[],o=[],d="",c=0;c<=r.options_obj.length-1;c++){var m=r.options_obj[c];s.push(m.show_tag),o.push(m.tag_type),d=m.tag_lemma?d+" "+m.show_tag:d+" ["+m.show_tag+"]"}t.set("tag_arr",s),t.set("tag_type_arr",o),t.set("tag_str",d.trim()),t.save().then(function(n){e.edit_form||e.test_forms.push(n),i.cancel()})},r.checkWordClass=function(e){var n=t.checkWordClass(e.lemma);return n},r.cancel=function(){c()},r.close=function(){c()};var c=function(){e.use_test_form_disable=!1,e.test_form="",e.edit_form=!1,i.cancel()}}]).controller("CourseAddSentenecController",["parent_scope","$rootScope","WNService","CourseReviewService","HelperService","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r){var l=Parse.Object.extend("GrammarACTSTC"),d=e.edit_grammar;r.sentence={};var c=a.get_grammar_tags();if("sentence"==e.type?(r.sample=e.sentence.sample,r.sentence.check_item=c.stc_check_item,r.sentence.check_name=c.stc_check_name,r.sentence.check_simple=c.stc_check_simple,r.sentence.check_model={}):(r.sample=e.dia.sample,r.sentence.check_item=c.dia_check_item,r.sentence.check_name=c.dia_check_name,r.sentence.check_simple=c.dia_check_simple,r.sentence.check_model={}),d){r.sample=d.get("sample"),r.sentence.check_model=a.getTypeObj(d,r.sentence.check_item);var m=d.get("data_objs")?d.get("data_objs"):[],p=d.get("the_order")?d.get("the_order"):10;r.sample_obj=[],r.options_obj=[];for(var u=m.length-1;u>=0;u--){var g=JSON.parse(m[u]);r.sample_obj.unshift(g)}for(var u=r.sample_obj.length-1;u>=0;u--)r.sample_obj[u].is_option&&r.options_obj.unshift(r.sample_obj[u])}else{if(r.sentence.check_model.written=!0,r.sentence.check_model.i=!0,r.sentence.check_model.plus=!0,r.options_obj=[],"dia"==e.type)var p=e.dia_list?e.dia_list.length+1:1;else var p=10;var f=t.get_grammar_tags_by_sentence(r.sample);f.then(function(e){r.sample_obj=e.tag_objs})}r.selectModelChange=function(n,t,a){"written"!=n&&"spoken"!=n||!a[n]||(a.written=!1,a.spoken=!1,a[n]=!0),"i"!=n&&"you"!=n&&"we"!=n&&"they"!=n&&"he"!=n&&"she"!=n&&"it"!=n||!a[n]||(a.i=!1,a.you=!1,a.we=!1,a.they=!1,a.he=!1,a.she=!1,a.it=!1,a[n]=!0),"plus"!=n&&"min"!=n&&"plus_ask"!=n&&"min_ask"!=n||!a[n]||(a.plus=!1,a.min=!1,a.plus_ask=!1,a.min_ask=!1,a[n]=!0),"sentence"==e.type&&(p=a.i?10:a.you?20:a.we?30:a.they?40:a.he?50:a.she?60:a.it?70:10,p+=a.plus?1:a.min?2:a.plus_ask?3:a.min_ask?4:1)},r.saveEditSentence=function(e){r.save_edit_sentence_btn=!0;var n=t.get_grammar_tags_by_sentence(e);n.then(function(n){r.sample_obj=n.tag_objs,r.show_edit_sentence=!1,r.options_obj=[],r.forms=!1,r.sample=e}),d&&(d.set("sample",r.sample),d.save())},r.editSentence=function(){!r.sample&&d&&(r.sample=d.get("sample")),r.show_edit_sentence=!0,r.save_edit_sentence_btn=!1},r.checkWordClass=function(e){var n=t.checkWordClass(e.lemma);return n},r.addSentence=function(){r.add_sentence_disable=!0;e.sentence;if(d)n=d;else{var n=new l,t=new Parse.ACL(Parse.User.current());t.setPublicReadAccess(!0),n.setACL(t),n.set("parent_id",e.grammarACTData.id),n.set("type",e.type)}n.set("sample",r.sample);for(var s=[],o=r.sample_obj.length-1;o>=0;o--){var i=r.sample_obj[o];if(i.false_anwser&&""!=i.false_anwser){for(var c=i.false_anwser.split(","),m=c.length-1;m>=0;m--)c[m]&&(c[m]=c[m].trim());i.false_arr=c}var u=JSON.stringify(i);s.unshift(u)}n.set("the_order",p),n.set("data_objs",s),n=a.saveTypesByObj(n,r.sentence.check_item,r.sentence.check_model),n.save().then(function(t){n.the_order=p,"sentence"!=e.type||d||e.sentence_list.push(t),"dia"!=e.type||d||e.dia_list.push(t),console.log(t.toJSON()),_()})},r.addForm=function(e){r.current_obj.false_anwser?r.current_obj.false_anwser+=", "+e:(r.current_obj.false_anwser="",r.current_obj.false_anwser+=e)},r.addOption=function(e,n){if(e.is_option){e.is_option=!1,e.false_anwser="",e.false_arr=[],e.forms=[];var a=r.options_obj.indexOf(e);r.options_obj.splice(a,1),r.forms=!1}else{r.current_obj=e,e.index=n,e.is_option=!0,r.options_obj.unshift(e);var s=t.get_base_forms([e.lemma]);s.then(function(n){e.forms=n[0],r.forms=e.forms})}console.log(e)},r.cancel=function(){_()},r.close=function(){_()};var _=function(){r.add_sentence_disable=!1,e.use_sentence_disable=!1,e.edit_grammar=!1,e.sentence.sample="",e.dia.sample="",i.cancel()}}]).controller("StudyNoteCourseViewController",["$stateParams","HelperService","$rootScope","$state","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i){var r=Parse.Object.extend("GrammarACTData"),l=e.id;i.match_exercises=n.getCourseExerciseMatch();var d=new Parse.Query(r);d.equalTo("objectId",l),d.first({success:function(e){i.$apply(function(){i.grammar=e})}}),i.test=function(e,n){console.log(n),e.view=n,o.show({controller:"CourseReviewController",templateUrl:"app/grammar-course/template/course-review-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:i.menuClickEvent,locals:{grammar:e,getFocus:!0},focusOnOpen:!1})}}]).controller("ViewCategoryWordsController",["WordService","parent_scope","$mdDialog","word","HelperService","$rootScope","$state","$mdToast","$mdDialog","$scope",function(e,n,t,a,s,o,i,r,l,d){var c=Parse.Object.extend("GrammarACTSTC"),m=a.get("children_data_word_ids"),p=Parse.Object.extend("AddCategory"),u=new Parse.Query(p);u.containedIn("objectId",m),u.find({success:function(e){d.view_words=e}}),n.edit_voca&&(d.edit_voca=n.edit_voca),d.saveEditVoca=function(){for(var e=d.select_word,n=d.edit_voca,t=e.get("imagesmain"),a=e.get("name"),s=[],o=d.view_words.length-1;o>=0;o--)s.push(d.view_words[o].get("name"));n.set("type","voca"),n.set("lemma",a),n.set("definition",e.get("definition")),n.set("sample",e.get("sample")),n.set("word_id",e.id),n.set("lemma_arr",s),n.set("image",t),n.save().then(function(){d.select_word=!1,l.cancel()})},d.addVoca=function(){for(var e=d.select_word,t=e.get("imagesmain"),a=e.get("lemma"),s=e.get("definition"),o=e.get("sentence_main"),i=[],r=n.vocas[0]?n.vocas.length+1:1,m=d.view_words.length-1;m>=0;m--)i.push(d.view_words[m].get("name"));var p=new c,u=new Parse.ACL(Parse.User.current());u.setPublicReadAccess(!0),p.setACL(u);d.select_word;p.set("type","voca"),p.set("lemma",a),p.set("lemma_arr",i),p.set("image",t),p.set("the_order",r),p.set("definition",s),p.set("sample",o),p.set("word_id",e.id),p.set("parent_id",n.grammarACTData.id),p.save().then(function(e){e.the_order=r,d.select_word=!1,d.view_words=!1,d.search_words=!1,n.vocas[0]||(n.vocas=[]),n.vocas.push(e),d.search_words=!1,d.view_words=!1,d.select_word=!1,l.cancel()})},d.cancelSelectWord=function(){d.select_word=!1},d.selectword=function(n){var t=n.get("define_id"),a=e.getDefineById(t);a.then(function(e){d.select_word=e})},d.cancel=function(){l.cancel()},d.close=function(){l.cancel()}}]),angular.module("triGrammarCourseModule").factory("CourseReviewService",["HelperService","ReviewService","$q","WordService","$document","$mdToast","$state","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l){Parse.Object.extend("GrammarACTSTC"),Parse.Object.extend("GrammarProg");return{setAccessCodeObj:function(n){if(!n.is_vocab){var t=n.get("access_code"),a=[];if(t){for(var s=0;s<=t.length-1;s++){var o={};o.lemma=t[s],o.index=s,o.click=!1,a.push(o)}a=e.shuffle(a)}n.access_code_objs=a,n.access_code_click_objs=[],n.click_access_code=""}return n},resetOrder:function(e){for(var n=e.length-1;n>=0;n--){var t,a=e[n];t=a.get("i")?10:a.get("you")?20:a.get("we")?30:a.get("they")?40:a.get("he")?50:a.get("she")?60:a.get("it")?70:10,t+=a.get("plus")?1:a.get("min")?2:a.get("plus_ask")?3:a.get("min_ask")?4:1,a.the_order=t,a.set("the_order",t)}Parse.Object.saveAll(e)},check_hide_button:function(e){var n={};n.show_btns=!0,n.arr=[];var t=["i","you","we","they","he","she","it"];n.all_items=t;for(var a=[],s=e.length-1;s>=0;s--)for(var o=t.length-1;o>=0;o--){var i=t[o];e[s].get(i)&&(a[i]=!0)}for(var s=0;s<=t.length-1;s++){var i=t[s];if(a[i]){var r={};r.lemma=i,r.show=!0,n.arr.push(r)}}return n},set_view:function(e){view=e},getUserCourseData:function(){var e={},n=t.defer(),a=Parse.Object.extend("GrammarProgress"),s=new Parse.Query(a);return s.equalTo("user_id",l.user.id),s.descending("updatedAt"),s.first({success:function(t){progress=t,e.progress=progress;var a=progress.get("structure_id"),s=Parse.Object.extend("GrammarACTData"),o=new Parse.Query(s);o.equalTo("objectId",a),o.first({success:function(t){grammar=t,e.grammar=grammar,n.resolve(e)}})}}),n.promise},getUserOutlineProgressByName:function(e){var n=t.defer(),a=Parse.Object.extend("GrammarProgress"),s=new Parse.Query(a);return s.equalTo("user_id",l.user.id),s.equalTo("course_outline_id",e.id),s.first({success:function(t){if(t)n.resolve(t);else{var t=new a,s=new Parse.ACL(Parse.User.current());s.setPublicReadAccess(!0),t.setACL(s),t.set("user_id",l.user.id),t.set("course_outline_name",e.get("name")),t.set("course_outline_id",e.id);var o=Parse.Object.extend("GrammarACTData"),i=new Parse.Query(o);i.notEqualTo("type","outline"),i.ascending("outline_order"),i.first({success:function(e){e&&(t.set("structure_id",e.id),t.set("structure_name",e.get("name")),t.set("view","act1")),n.resolve(t)}})}}}),n.promise},getCourseOutlineByName:function(e){var n=t.defer(),a=Parse.Object.extend("GrammarACTData"),s=new Parse.Query(a);return s.equalTo("type","outline"),s.equalTo("name",e),s.first({success:function(e){n.resolve(e)}}),n.promise},getGrammarByid:function(e){var n=t.defer(),a=Parse.Object.extend("GrammarACTData"),s=new Parse.Query(a);return s.equalTo("objectId",e),s.first({success:function(e){n.resolve(e)}}),n.promise},clearSentenceData:function(e){for(var n=e.length-1;n>=0;n--)e[n].data={};return e},set_act1_option:function(e){for(var n=this,t=e.length-1;t>=0;t--){e[t].act1_anwser_arr=[];var a=n.get_models_obj(e[t],n.get_grammar_tags().stc_check_item);e[t].check_obj=a}return e},get_select_tags_index_arr:function(e){var n=e.get("select_person_tags"),t=e.get("select_form_tags"),a=e.get("select_verb_tags"),s=e.get("select_adverb_tags"),o=e.get("select_preposition_tags"),i=e.get("tags_arr"),r=[];if(n){var l=i.indexOf(n);l>-1&&r.push(l)}if(t){var l=i.indexOf(t);l>-1&&r.push(l)}if(a){var l=i.indexOf(a);l>-1&&r.push(l)}if(s){var l=i.indexOf(s);l>-1&&r.push(l)}if(o){var l=i.indexOf(o);l>-1&&r.push(l)}return r},get_grammar_tags:function(){var e={},n=[];n.push("present"),n.push("past"),n.push("future"),n.push("recent"),n.push("period"),n.push("temporary"),n.push("permanent"),n.push("repeated"),n.push("sequence"),n.push("action"),n.push("ability"),n.push("activity"),n.push("fact"),n.push("definingclause"),n.push("nondefiningclause"),n.push("notreal"),n.push("plan"),n.push("prediction"),n.push("request"),n.push("offer"),n.push("order"),n.push("rulelaw"),n.push("opinion"),n.push("advice"),n.push("experience"),n.push("sure100"),n.push("sure7080"),n.push("sue6070"),n.push("sure4050"),n.push("sure2040"),n.push("completed"),n.push("uncompleted"),n.push("stresscontrast"),n.push("positive"),n.push("negative"),n.push("countable"),n.push("uncountable"),n.push("possession"),n.push("general"),n.push("specific");var t={};t.present="Now, not yesterday or tomorrow",t.past="Before now e.g. yesterday, last year",t.future="After now e.g. tomorrow, next year",t.recent="Close to now, but not yesterday or last year",t.period="Hours, days or years taken together e.g. Monday to Friday",t.temporary="Possible to change, opposite of permanent",t.permanent="No likely to change, opposite of temporary",t.repeated="Do again and again",t.sequence="First, second, third",t.action="Do something e.g. walk, swim, run",t.ability="Skill or talent e.g. playing the piano",t.activity="Active and dynamic e.g. playing football",t.fact="True, opposite of false or incorrect e.g. The Earth goes round the Sun.",t.definingclause="Extra information about someone or something needed to understand it",t.nondefiningclause="Extra information about someone or something",t.notreal="Imaginary, but not true e.g. an idea, a dream",t.plan="Think about how to do something in the future e.g. a holiday",t.prediction="Seeing into the future i.e. what happens",t.request="Asking for something, opposite of offer",t.offer="Giving something, opposite of request",t.order="Command e.g. Come here!",t.rulelaw="No choice in doing something e.g. You have to pay for a taxi.",t.opinion="What you or others think i.e. your ideas on a subject",t.advice="Words of help for someone else",t.experience="Life and all your memories of it up until the present",t.sure100="Degree of certainly or possibility",t.sure7080="Degree of certainly or possibility",t.sue6070="Degree of certainly or possibility",t.sure4050="Degree of certainly or possibility",t.sure2040="Degree of certainly or possibility",t.completed="Finished action or state",t.uncompleted="An action or state not finished",t.stresscontrast="Emphasis, usually to make clearer or stronger",t.positive="+, opposite of negative (-)",t.negative="-, opposite of positive (+)",t.countable="ne pen, two pens, three pens",t.uncountable="Some water, lots of water, loads of water",t.possession="Ownership e.g. His, her or mine",t.general="Trees, not the tree or a tree",t.specific="The tree or a tree, not trees in general";
var a={};a.present="present",a.past="past",a.future="future",a.recent="recent",a.period="period",a.temporary="temporary",a.permanent="permanent",a.repeated="repeated",a.sequence="sequence",a.action="action",a.ability="ability",a.activity="activity",a.fact="fact",a.definingclause="defining clause",a.nondefiningclause="non-defining clause",a.notreal="not real",a.plan="plan",a.prediction="prediction",a.request="request",a.offer="offer",a.order="order",a.rulelaw="rule/law",a.opinion="opinion",a.advice="advice",a.experience="experience",a.sure7080="70-80% sure",a.sue6070="60-70% sure",a.sure4050="40-50% sure",a.sure2040="20-40% sure",a.sure100="100% sure",a.completed="completed",a.uncompleted="uncompleted",a.stresscontrast="stress/contrast",a.positive="positive",a.negative="negative",a.countable="countable",a.uncountable="uncountable",a.possession="possession",a.general="general",a.specific="specific";var s=[];s.push("model"),s.push("written"),s.push("spoken"),s.push("i"),s.push("you"),s.push("we"),s.push("they"),s.push("he"),s.push("she"),s.push("it"),s.push("plus"),s.push("min"),s.push("plus_ask"),s.push("min_ask");var o=[];o.push("plus"),o.push("min"),o.push("plus_ask"),o.push("min_ask");var i={};i.model="Model",i.written="written",i.spoken="Spoken",i.i="I",i.you="You",i.we="We",i.they="They",i.he="He",i.she="She",i.it="It",i.plus="+",i.min="-",i.plus_ask="+?",i.min_ask="-?";var r={};r.model="M",r.written="W",r.spoken="S",r.i="I",r.you="You",r.we="We",r.they="They",r.he="He",r.she="She",r.it="It",r.plus="+",r.min="-",r.plus_ask="+?",r.min_ask="-?";var l=[];l.push("spoken"),l.push("written"),l.push("plus"),l.push("min"),l.push("plus_ask"),l.push("min_ask");var d=[];d.spoken="Spoken",d.written="Written",d.plus="+",d.min="-",d.plus_ask="+?",d.min_ask="-?";var c=[];return c.spoken="S",c.written="W",c.plus="+",c.min="-",c.plus_ask="+?",c.min_ask="-?",e.data_check_item=n,e.data_check_name=a,e.data_check_tip=t,e.stc_check_item=s,e.stc_check_name=i,e.stc_check_simple=r,e.stc_check_less=o,e.dia_check_item=l,e.dia_check_name=d,e.dia_check_simple=c,e},get_grammar_tags_options:function(e){var n=function(e,n,t){for(var a={},s=e.split(","),o=!1,i=s.length-1;i>=0;i--)t.get(s[i])&&(o=!0,a.anwser_lemma=s[i]);return o&&(a.arr=s,n.push(a)),n},t=[];return t=n("present,past,future",t,e),t=n("completed,uncompleted",t,e),t=n("recent,period,temporary,permanent,repeated,sequence",t,e),t=n("fact,notreal,sure7080",t,e),t=n("state,action,activity ",t,e),t=n("ability,plan,prediction,request,offer,order,rulelaw,opinion,advice,experience",t,e),t=n("sure100,sure7080,sure6070,sure4050,sure2040",t,e),t=n("stresscontrast,positive,negative",t,e),t=n("countable,uncountable,possession",t,e),t=n("general,specific",t,e),t=n("defining clause,nondefiningclause ",t,e)},get_models_obj:function(e,n){for(var t={},a=[],s=[],o=n.length-1;o>=0;o--){var i=n[o];"model"!=i&&"i"!=i&&"you"!=i&&"he"!=i&&"she"!=i&&"they"!=i&&"we"!=i&&(e.get(i)&&a.push(i),s.push(i))}return t.anwser_arr=a,t.option_arr=s,t},get_sentence_form_test_list:function(e){var n=[];if(e.get("form_tags")){var t=this.create_anwser_by_tags("form_tags",e);n.push(t)}if(e.get("verb_tags")){var t=this.create_anwser_by_tags("verb_tags",e);n.push(t)}if(e.get("adverb_tags")){var t=this.create_anwser_by_tags("adverb_tags",e);n.push(t)}if(e.get("preposition_tags")){var t=this.create_anwser_by_tags("preposition_tags",e);n.push(t)}return n[0]||(n[0]={}),n},create_anwser_by_tags:function(e,n){for(var t=(n.get("simple"),n.get("tags_arr")),a=n.get("lemma_arr"),s=[],o=a.length-1;o>=0;o--)s.unshift(a[o]);var i=n.get("select_"+e),r=n.get(e),l=r.split(","),d=t.indexOf(i),c=s[d];s[d]="______";var m=this.clear_tags_for_lemmas(c,i,l);m.push(c),m=this.shuffle(m);var p={};return p.anwser=c,p.lemma_arr=s,p.options=m,p.index=d,p},clear_tags_for_lemmas:function(e,n,t){for(var a=n.replace("['"+e,""),s=t.length-1;s>=0;s--)t[s]=t[s].replace("['",""),t[s]=t[s].replace(a,"");return t},getTypeObj:function(e,n){for(var t={},a=n.length-1;a>=0;a--){var s=n[a];t[s]=e.get(s)?!0:!1}return t},saveTypesByObj:function(e,n,t){for(var a=n.length-1;a>=0;a--){var s=n[a];t[s]?e.set(s,!0):e.set(s,!1)}return e},save_grammar_data:function(e,n){return e.set("the_id",n.the_id),e.set("level",n.level),e.set("name",n.name),e.set("description",n.description),e.set("confused",n.confused),e.set("summary",n.summary),e.set("act7_a_1",n.act7_a_1),e.set("act7_a_2",n.act7_a_2),e.set("act7_a_3",n.act7_a_3),e.set("act7_q_1",n.act7_q_1),e.set("act7_q_2",n.act7_q_2),e.set("act7_q_3",n.act7_q_3),e.set("onload_summary",n.onload_summary),e.set("onload_vocab1",n.onload_vocab1),e.set("onload_act_1",n.onload_act_1),e.set("onload_act_2",n.onload_act_2),e.set("onload_act_3",n.onload_act_3),e.set("onload_act_4",n.onload_act_4),e.set("onload_act_5",n.onload_act_5),e.set("onload_act_6",n.onload_act_6),e.set("onload_act_7",n.onload_act_7),e.set("onload_act_8",n.onload_act_8),e.set("onload_act_9",n.onload_act_9),e.set("onload_act_10",n.onload_act_10),e.set("onload_act_11",n.onload_act_11),e.set("onload_act_12",n.onload_act_12),e.set("onload_act_13",n.onload_act_13),e.set("listen",n.listen),e.set("writing_objs",n.writing_objs),e.set("reading_gapfill_objs",n.reading_gapfill_objs),n.select_test_forms=[],e},set_grammar_data:function(e){var n={};return n.the_id=e.get("the_id"),n.level=e.get("level"),n.name=e.get("name"),n.description=e.get("description"),n.confused=e.get("confused"),n.summary=e.get("summary"),n.listen=e.get("listen"),n.act7_a_1=e.get("act7_a_1"),n.act7_a_2=e.get("act7_a_2"),n.act7_a_3=e.get("act7_a_3"),n.act7_q_1=e.get("act7_q_1"),n.act7_q_2=e.get("act7_q_2"),n.act7_q_3=e.get("act7_q_3"),n.onload_summary=e.get("onload_summary"),n.onload_act_1=e.get("onload_act_1"),n.onload_act_2=e.get("onload_act_2"),n.onload_act_3=e.get("onload_act_3"),n.onload_act_4=e.get("onload_act_4"),n.onload_act_5=e.get("onload_act_5"),n.onload_act_6=e.get("onload_act_6"),n.onload_act_7=e.get("onload_act_7"),n.onload_act_8=e.get("onload_act_8"),n.onload_act_9=e.get("onload_act_9"),n.onload_act_10=e.get("onload_act_10"),n.onload_act_11=e.get("onload_act_11"),n.onload_act_12=e.get("onload_act_12"),n.onload_act_13=e.get("onload_act_13"),n.writing_objs=e.get("writing_objs")?e.get("writing_objs"):[],n.reading_gapfill_objs=e.get("reading_gapfill_objs")?e.get("reading_gapfill_objs"):[],n},set_point:function(e){var n=l.user,t=n.get("grammar_point")?n.get("grammar_point"):0;e?t+=10:t-=10,0>t&&(t=0),n.set("grammar_point",t),n.save()},clearTag:function(e){e=e.replace("['",""),e=e.replace("]","");var n=e.split("'");return n[n.length-1]},act13_get_test_tags:function(e){for(var n=[],t=this,a=e.length-1;a>=0;a--){var s=e[a];if(s.get("select_form_tags")){var o=t.clearTag(s.get("select_form_tags")),i=n.indexOf(o);0>i&&n.push(o)}if(s.get("select_verb_tags")){var o=t.clearTag(s.get("select_verb_tags")),i=n.indexOf(o);0>i&&n.push(o)}if(s.get("select_adverb_tags")){var o=t.clearTag(s.get("select_adverb_tags")),i=n.indexOf(o);0>i&&n.push(o)}if(s.get("select_preposition_tags")){var o=t.clearTag(s.get("select_preposition_tags")),i=n.indexOf(o);0>i&&n.push(o)}}return n},act7_options:function(n,t){var a=n.get("listen"),s=n.get("listen_arr");if(!s){a=a.replace(/\n/g," -breakline- ");var s=a.split(" ")}var o=[];n.get("act7_a_1")&&o.push(n.get("act7_a_1")),n.get("act7_a_2")&&o.push(n.get("act7_a_2")),n.get("act7_a_3")&&o.push(n.get("act7_a_3")),o=e.shuffle(o);var i=n.get("act7_q_"+t),r=n.get("act7_a_"+t),l=n.get("act7_arr_"+t)?n.get("act7_arr_"+t):[];if(i&&r){var d={};d.options=o,d.question=i,d.anwser=r,d.listen_arr=s,d.anwser_index_arr=l,d.page=t,n.act7_obj=d,n.finish=!1}else n.finish=!0;return n.act7_message="",n},act12_input:function(e,n){if(n.question){for(var t=e.length-1;t>=0;t--)e[t].act12_is_question&&(n.question=e[t]),e[t].act12_is_anwser&&(n.anwser=e[t]);var a=n.question.test_obj.anwser.indexOf("'");n.question_input=a>-1?"'":"";var a=n.anwser.test_obj.anwser.indexOf("'");n.anwser_input=a>-1?"'":""}return n},act12_options:function(n,t){for(var a=n.length-1;a>=0;a--)n[a].act12_show=!1,n[a].act12_anwser_show=!1,n[a].act12_divider_show=!1,n[a].act12_is_question=!1,n[a].act12_is_anwser=!1;var s=2*t,o=2*t+1;if(n[s]){n[s].act12_show=!0,n[s].act12_divider_show=!0,n[s].act12_is_question=!0;for(var i=n[s].data_objs,r=i.length-1;r>=0;r--)if(i[r].is_option){i[r].right_lemma=i[r].lemma;var l=i[r].false_anwser.split(",");l=e.shuffle(l),i[r].lemma=l[0]}n[s].act12_options_data=i}if(n[o]){n[o].act12_show=!0,n[o].act12_anwser_show=!0,n[o].act12_is_anwser=!0;for(var i=n[o].data_objs,r=i.length-1;r>=0;r--)if(i[r].is_option){i[r].right_lemma=i[r].lemma;var l=i[r].false_anwser.split(",");l=e.shuffle(l),i[r].lemma=l[0]}n[o].act12_options_data=i}for(var a=n.length-1;a>=0;a--)for(var i=n[a].data_objs,d=1,r=0;r<=i.length-1;r++)i[r].is_option&&(i[r].input_label=d,d++);return n},act11_options:function(e,n){if(e){for(var t=e.length-1;t>=0;t--)e[t].data_objs&&(e[t].act11_show=!1,e[t].act11_anwser_show=!1,e[t].act11_divider_show=!1);var a=2*n,s=2*n+1;e[a].act11_show=!0,e[a].act11_divider_show=!0,e[s]&&(e[s].act11_show=!0,e[s].act11_anwser_show=!0);for(var t=e.length-1;t>=0;t--)for(var o=e[t].data_objs,i=1,r=0;r<=o.length-1;r++)o[r].is_option&&(o[r].input_label=i,i++)}return e},act9_options:function(n,t){for(var a=[],s=n.length-1;s>=0;s--){var o=s%2;0==o?n[s].is_question=!0:(n[s].is_anwser=!0,a.push(n[s])),n[s].act9_show=!1}a=e.shuffle(a);for(var s=n.length-1;s>=0;s--){n[s].act9_options=[],n[s].act9_options.push(n[s+1]);for(var i=a.length-1;i>=0;i--){var r=n[s].act9_options.indexOf(a[i]);0>r&&n[s].act9_options.length<4&&n[s].act9_options.push(a[i])}n[s+1]||(n[s].a9_end=!0),n[s].act9_options=e.shuffle(n[s].act9_options),n[s+1]&&(n[s].next=n[s+1])}var l=2*t;return n[l].act9_show=!0,n},act10_options:function(e,n){for(var t=e.length-1;t>=0;t--)e[t].show=!1,e[t].divider_show=!1,e[t].anwser_show=!1,e[t].act10_message=!1;var a=2*n,s=2*n+1;return e[a].show=!0,e[a].divider_show=!0,e[s]&&(e[s].show=!0,e[s].anwser_show=!0),e},act8_options:function(e){var n={};n.listen=e.get("listen"),n.reading_gapfill_objs=e.get("reading_gapfill_objs");var t=e.get("listen_arr");if(t)var t=e.get("listen_arr");else var a=e.get("listen")?e.get("listen"):"",t=a.split(" ");for(var s=[],o=0;o<t.length;o++){var i={};i.lemma=t[o],i.first=t[o].trim().charAt(0),s.push(i)}for(var o=0;o<n.reading_gapfill_objs.length;o++){var r=n.reading_gapfill_objs[o].index;s[r].option_obj=n.reading_gapfill_objs[o]}return n.listen_arr_objs=s,n},act6_options:function(n){for(var t=n.data_objs,a=[],s=[],o=t.length-1;o>=0;o--){var i={};i.index=o,i.lemma=t[o].lemma,a.unshift(i);var r={};r.index=o,r.lemma=t[o].lemma,r.is_right=!1,s.unshift(r)}return a=e.shuffle(a),n.act6_objs=a,n.act6_anwser_objs=s,n},act4_options:function(n){for(var t=n.data_objs,a=[],s=t.length-1;s>=0;s--)t[s].is_option&&a.push(t[s]);var o=[];t[0].is_right=!0,o.push(t);for(var s=a.length-1;s>=0;s--)if(a[s].false_arr)for(var i=a[s].false_arr.length-1;i>=0;i--){for(var r=[],l=t.length-1;l>=0;l--){var d={};d.lemma=t[l].lemma,d.index=t[l].index,d.false_arr=t[l].false_arr,d.is_option=t[l].is_option,r.unshift(d)}r[a[s].index].lemma!=r[a[s].index].false_arr[i]&&(r[a[s].index].right_lemma=r[a[s].index].lemma,r[a[s].index].lemma=r[a[s].index].false_arr[i],o.push(r))}return o=e.shuffle(o),n.act4_options_data=o,n},act5_options:function(n){for(var t=n.data_objs,a=t.length-1;a>=0;a--)if(t[a].is_option){t[a].right_lemma=t[a].lemma;var s=t[a].false_anwser.split(",");s=e.shuffle(s),t[a].lemma=s[0].trim()}return n.act5_options_data=t,n}}}]),angular.module("triGrammarCourseModule").factory("CourseExerciseService",["HelperService","$q","WordService","$document","$mdToast","$state","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r){var l,d,c,m,p=Parse.Object.extend("GrammarACTSTC"),u=Parse.Object.extend("GrammarProg"),g=Parse.Object.extend("GrammarACTData"),f=[],_=[],h=[],v=[],b=[],y="-",w="",k=[],x="A3XRAnZHjC",C=1,S=[],E=[],P=0,A=0,T=0,j=!1;return{init_data:function(e,n){return e.show_index=0,e.gb_data=n,e.sentences=n.sentences,e.dialogs=n.dialogs,e.vocas=n.vocas,e.point=n.point,e.max_page=e.gb_data.sentences.length-1,e.dia_max_page=Math.ceil(e.dialogs.length/2),e.gb_data.sentences=this.set_sentence_obj_data(e.gb_data.sentences),e.gb_data.dialogs=this.set_sentence_obj_data(e.gb_data.dialogs),e.gb_data.tmp_sentences=this.set_sentence_obj_data(e.gb_data.tmp_sentences),e},load_user_grammars:function(e,t){"dialogue"==e&&(e="dialog"),"reading"==e&&(e="reading_grammar");var a=n.defer(),s=new Parse.Query(g);return s.equalTo("user_id",r.user.id),"target_language"==e&&(s.notEqualTo("dialog",!0),s.notEqualTo("reading_grammar",!0)),"writing_assignment"==e&&(s.equalTo("writing_assignment",!0),s.notEqualTo("reading_grammar",!0)),"writing"==e&&(s.exists("writing"),s.equalTo("writing",!0)),"dialog"==e&&(s.exists("dialog"),s.equalTo("dialog",!0)),"reading_grammar"==e&&(s.exists("reading_grammar"),s.equalTo("reading_grammar",!0)),"progress_test"==e?(s.exists("progress_test"),s.equalTo("progress_test",!0)):s.doesNotExist("progress_test"),"all"!=t&&s.equalTo("outline",t),s.notEqualTo("remove",!0),s.notEqualTo("vocab",!0),s.find({success:function(e){a.resolve(e)}}),a.promise},get_outlines:function(){var e=n.defer(),t=new Parse.Query(g);return t.ascending("outline_order"),t.notEqualTo("remove",!0),t.notEqualTo("teacher_grammar",!0),t.notEqualTo("reading_grammar",!0),t.equalTo("type","outline"),t.find({success:function(){e.resolve(grammarACTDatas)}}),e.promise},createProgress:function(e){console.log(e),T=0,S=e;for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a].id);var s=n.defer(),o=Parse.Object.extend("GrammarACTData"),i=new Parse.Query(o);return i.containedIn("objectId",t),i.find({success:function(n){for(var t=e.length-1;t>=0;t--){e[t].been_test_acts=[];for(var a=n.length-1;a>=0;a--)e[t].id==n[a].id&&(e[t].grammar=n[a])}E=e,s.resolve(E)}}),s.promise},set_sentence_obj_data:function(n){for(var t="______",a=n.length-1;a>=0;a--){for(var s=[],o=n[a].get("data_objs"),i=o.length-1;i>=0;i--){var r=JSON.parse(o[i]);r.false_arr&&""!=r.false_arr&&(r.false_arr.push(r.lemma),r.false_arr=e.shuffle(r.false_arr),r.input_space=t),s.unshift(r)}n[a].data_objs=s}return n},checkWordClass:function(e,n,t){if("act5"==e)var a=t.act5_options_data[n];else if("act12"==e)var a=t.act12_options_data[n];else var a=t.data_objs[n];a.lemma=a.lemma.trim();var s=a.lemma.trim();if("act11"==e&&a.is_option)var s=a.input_space;if("act10"==e&&a.is_option)var s=a.input_space;var o=s.charAt(0),i="";"'"==o&&(i+="back-margin-left-4 "),"n't"==s&&(i+="back-margin-left-4 "),i+="."==s||"?"==s||"!"==s||","==s?"back-margin-left-4 margin-right-4 ":"margin-right-4 ","i"==s.toLowerCase()&&t.get("i")&&(i+="font-pink strong"),"you"==s.toLowerCase()&&t.get("you")&&(i+="font-pink strong"),"she"==s.toLowerCase()&&t.get("she")&&(i+="font-pink strong"),"he"==s.toLowerCase()&&t.get("he")&&(i+="font-pink strong"),"they"==s.toLowerCase()&&t.get("they")&&(i+="font-pink strong"),a.is_option&&(i+="font-pink strong"),s=s.toLowerCase();var r=["my","mine","our","ours","his","her","hers","their","theirs","you","yours","it","its"],l=r.indexOf(s);return l>-1&&(i+="font-pink strong"),i},get_grammar_time:function(){var e=n.defer(),t=new u,a=(r.user?r.user.id:"",new Parse.Query(t));return a.equalTo("user",Parse.User.current()),a.notEqualTo("remove",!0),a.notEqualTo("finish_test",!0),a.descending("next_time"),a.lessThan("next_time",new Date),a.count({success:function(n){e.resolve(n)}}),e.promise},addUserGrammarExercise:function(e,t,a,s){var a={summary:!0,quiz:!0,identification:!0,error_correction:!0,word_order:!0,type:"select_actions"};s.get("writing_objs")&&(a.free_practice=!0);var o=n.defer(),i=Parse.User.current();if("student"==i.get("user_role")&&"grammar"==e){var l=Parse.Object.extend("GrammarProg"),d=new Parse.Query(l);return d.equalTo("user",i),d.equalTo("grammar",s),d.equalTo("grammar_type",e),d.first({success:function(n){if(console.log(n),n)o.resolve(n);else{var l=new Date,n=new u,d=new Parse.ACL(Parse.User.current());d.setPublicReadAccess(!0),n.setACL(d),n.set("user",i),n.set("grammar",s),n.set("grammar_type",e),n.set("select_actions",a),n.set("next_time",l),"act13"==t?(n.set("next_type","act13"),n.set("hide_from_progress",!0)):n.set("next_type","act1"),n.save().then(function(e){console.log(e.toJSON())}),r.$broadcast("add_one_reivew_num"),o.resolve(n)}}}),o.promise}},getRecords:function(e){if(!e)var e=Parse.User.current();var t=n.defer(),a=Parse.Object.extend("GrammarProg"),s=new Parse.Query(a);return s.equalTo("user",e),s.include("grammar"),s.find({success:function(e){t.resolve(e)}}),t.promise},set_progress_obj:function(e){j=e;var n=this.get_gb_data();return n},getSentencesByGrammarId:function(t,a){j=!1,d=a?a:!1;var s=this,o=n.defer();t.view&&(c=t.view),t.type&&(w=t.type),l=t;var i=l.id,r=new Parse.Query(p);return r.equalTo("parent_id",i),r.ascending("the_order"),r.include("the_define_obj"),r.find({success:function(n){h=n,v=[],f=[],_=[],b=[],k=[];for(var t=0;t<h.length;t++)if(h[t].data={},"sentence"==h[t].get("type"))k.push(h[t]),v.push(h[t]);else if("test_form"==h[t].get("type"))b.push(h[t]);else if("voca"==h[t].get("type")){if(!h[t].get("the_define_obj"))continue;_.push(h[t]);var a=h[t].get("lemma_arr"),i=h[t].get("lemma");a=e.shuffle(a);var r=[];r.push(i);for(var l=a.length-1;l>=0;l--){var d=a[l].indexOf(i);if(!(d>-1)&&(r.push(a[l]),r.length>=4))break}r=e.shuffle(r),h[t].lemma_arr=r}else f.push(h[t]);v=e.shuffle(v);var c=s.get_gb_data();o.resolve(c)}}),o.promise},get_gb_data:function(){var e={};return e.vocas=_,e.sentences=v,e.test_forms=b,e.dialogs=f,e.all_sentences=h,e.progress=d,e.grammar=l,e.view=c,e.win_word=m,e.tmp_sentences=k,e.type=w,e.next_view=y,e.progress=d,e.anwser_percentage=C,e.progress_points=T,e.progress_obj=j,e},calculatePercentage:function(e){for(var n=0,t=e.length-1;t>=0;t--)e[t].anwser_wrong&&n++;C=(e.length-n)/e.length,C=C.toFixed(2),P+=n,A+=e.length,T=(A-P)/A,T=100*T.toFixed(2)},check_all_anwser_for_grammar:function(e,n,t){if(!t)for(var a=e.length-1;a>=0;a--)e[a].anwser_wrong=!0,e[a].anwser="wrong";if(t)for(var a=e.length-1;a>=0;a--)e[a].anwser="right";this.check_all_anwser(e,n)},check_all_anwser:function(n){for(var t=!0,a=!0,s=n.length-1;s>=0;s--)n[s].anwser||(t=!1);if(t)for(var s=n.length-1;s>=0;s--)n[s].anwser_wrong&&(a=!1);if(l&&(l.anwser&&"right"==l.anwser&&(t=!0,a=!0),l.anwser&&"wrong"==l.anwser&&(t=!0,a=!1)),this.set_recent_grammar(l),this.calculatePercentage(n),t&&a){this.set_record(c,!0);var o=[];o.push("Great! 10 points."),o.push("You did it! 10 points."),o.push("You're amazing! 10 points."),o.push("Brilliant! 10 points."),o.push("You get 10 points. Great work!"),o.push("10 points! Keep it up!"),e.shuffle(o)}t&&!a&&this.set_record(c,!1)},clearAnwsers:function(){for(var e=h.length-1;e>=0;e--)h[e].anwser=!1,h[e].show_progress_bar=!1,h[e].message="",h[e].anwser_wrong=!1;l&&(l.anwser=!1,l.anwser_wrong=!1)},set_recent_grammar:function(e){var n=e.get("name"),t=10,a=[],s=Parse.User.current(),o=s.get("recent_grammar");if(!o)var o=[];for(var i=0;100>=i;i++){if(o[i]){var r=a.indexOf(o[i]);0>r&&o[i]!=n&&a.push(o[i])}if(a.length>=t-1)break}return a.unshift(n),s.set("recent_grammar",a),s.save(),s},set_record:function(n,t){var a=Parse.User.current(),s=a.get("point")?a.get("point"):0,o=a.get("right")?a.get("right"):0,i=a.get("total")?a.get("total"):0;if(t&&(s+=10,o++,i++),t||(s-=5,i++),0>s&&(s=0),o>i&&(i=o),a.set("point",s),a.set("right",o),a.set("total",i),a.save(),d){var i=d.get("total")?d.get("total"):0,o=d.get("right")?d.get("right"):0;if(t?(d.set(n,"right"),i++,o++,d.set("total",i),d.set("right",o)):(d.set(n,"wrong"),i++,d.set("total",i)),"act13"==n){var p=d.get("repeat_num")?d.get("repeat_num"):0;p++,d.set("repeat_num",p),p>5&&d.set("finish_test",!0)}d.save()}if(t&&"grammar_exercise"==w){var u=[];u.push("Great! 10 points."),u.push("You did it! 10 points."),u.push("You're amazing! 10 points."),u.push("Brilliant! 10 points."),u.push("You get 10 points. Great work!"),u.push("10 points! Keep it up!"),e.shuffle(u),responsiveVoice.speak(u[0],"UK English Male"),m=u[0],r.$broadcast("check_right_anwser",{win_word:u[0]})}else m="";if(j)var g=e.grammar_generate_next_review_type(j);else var g=e.grammar_generate_next_review_type(l);c=g,l.view=c,this.clearAnwsers();var f=this.get_gb_data();r.$broadcast("update_course_gb_data",{gb_data:f}),"load_next"==g&&r.$broadcast("load_next_course_gb_data",{gb_data:f})},getOneGrammrExercise:function(){var e=Parse.User.current(),t=n.defer(),a=Parse.Object.extend("GrammarProg"),s=new Parse.Query(a);return s.equalTo("user",e),s.descending("next_time"),s.lessThan("next_time",new Date),s.include("grammar"),s.notEqualTo("finish_test",!0),s.notEqualTo("remove",!0),s.first({success:function(e){t.resolve(e)}}),t.promise},getLevelTestGrammars:function(){var e=n.defer(),t=new Parse.Query(g);return t.equalTo("outline",x),t.find({success:function(n){e.resolve(n)}}),e.promise}}}]),/**
* Wordfind.js 0.0.1
* (c) 2012 Bill, BunKat LLC.
* Wordfind is freely distributable under the MIT license.
* For all details and documentation:
*     http://github.com/bunkat/wordfind
*/
function(){var e=function(){var e="abcdefghijklmnoprstuvwy",n=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],t={horizontal:function(e,n,t){return{x:e+t,y:n}},horizontalBack:function(e,n,t){return{x:e-t,y:n}},vertical:function(e,n,t){return{x:e,y:n+t}},verticalUp:function(e,n,t){return{x:e,y:n-t}},diagonal:function(e,n,t){return{x:e+t,y:n+t}},diagonalBack:function(e,n,t){return{x:e-t,y:n+t}},diagonalUp:function(e,n,t){return{x:e+t,y:n-t}},diagonalUpBack:function(e,n,t){return{x:e-t,y:n-t}}},a={horizontal:function(e,n,t,a,s){return a>=e+s},horizontalBack:function(e,n,t,a,s){return e+1>=s},vertical:function(e,n,t,a,s){return t>=n+s},verticalUp:function(e,n,t,a,s){return n+1>=s},diagonal:function(e,n,t,a,s){return a>=e+s&&t>=n+s},diagonalBack:function(e,n,t,a,s){return e+1>=s&&t>=n+s},diagonalUp:function(e,n,t,a,s){return a>=e+s&&n+1>=s},diagonalUpBack:function(e,n,t,a,s){return e+1>=s&&n+1>=s}},s={horizontal:function(e,n){return{x:0,y:n+1}},horizontalBack:function(e,n,t){return{x:t-1,y:n}},vertical:function(e,n){return{x:0,y:n+100}},verticalUp:function(e,n,t){return{x:0,y:t-1}},diagonal:function(e,n){return{x:0,y:n+1}},diagonalBack:function(e,n,t){return{x:t-1,y:e>=t-1?n+1:n}},diagonalUp:function(e,n,t){return{x:0,y:t-1>n?t-1:n+1}},diagonalUpBack:function(e,n,t){return{x:t-1,y:e>=t-1?n+1:n}}},o=function(e,n){var t,a,s,o=[];for(t=0;t<n.height;t++)for(o.push([]),a=0;a<n.width;a++)o[t].push("");for(t=0,s=e.length;s>t;t++)if(!i(o,n,e[t]))return null;return o},i=function(e,n,a){var s=r(e,n,a);if(0===s.length)return!1;var o=s[Math.floor(Math.random()*s.length)];return c(e,a,o.x,o.y,t[o.orientation]),!0},r=function(e,n,o){for(var i=[],r=n.height,c=n.width,m=o.length,p=0,u=0,g=n.orientations.length;g>u;u++)for(var f=n.orientations[u],_=a[f],h=t[f],v=s[f],b=0,y=0;r>y;)if(_(b,y,r,c,m)){var w=l(o,e,b,y,h);(w>=p||!n.preferOverlap&&w>-1)&&(p=w,i.push({x:b,y:y,orientation:f,overlap:w})),b++,b>=c&&(b=0,y++)}else{var k=v(b,y,m);b=k.x,y=k.y}return n.preferOverlap?d(i,p):i},l=function(e,n,t,a,s){for(var o=0,i=0,r=e.length;r>i;i++){var l=s(t,a,i),d=n[l.y][l.x];if(d===e[i])o++;else if(""!==d)return-1}return o},d=function(e,n){for(var t=[],a=0,s=e.length;s>a;a++)e[a].overlap>=n&&t.push(e[a]);return t},c=function(e,n,t,a,s){for(var o=0,i=n.length;i>o;o++){var r=s(t,a,o);e[r.y][r.x]=n[o]}};return{validOrientations:n,orientations:t,newPuzzle:function(e,t){var a,s,i=0,r=t||{};a=e.slice(0).sort(function(e,n){return e.length<n.length?1:0});for(var l={height:r.height||a[0].length,width:r.width||a[0].length,orientations:r.orientations||n,fillBlanks:void 0!==r.fillBlanks?r.fillBlanks:!0,maxAttempts:r.maxAttempts||3,preferOverlap:void 0!==r.preferOverlap?r.preferOverlap:!0};!s;){for(;!s&&i++<l.maxAttempts;)s=o(a,l);s||(l.height++,l.width++,i=0)}return l.fillBlanks&&this.fillBlanks(s,l),s},fillBlanks:function(n){for(var t=0,a=n.length;a>t;t++)for(var s=n[t],o=0,i=s.length;i>o;o++)if(!n[t][o]){var r=Math.floor(Math.random()*e.length);n[t][o]=e[r]}},solve:function(e,t){for(var a={height:e.length,width:e[0].length,orientations:n,preferOverlap:!0},s=[],o=[],i=0,l=t.length;l>i;i++){var d=t[i],c=r(e,a,d);c.length>0&&c[0].overlap===d.length?(c[0].word=d,s.push(c[0])):o.push(d)}return{found:s,notFound:o}},print:function(e){for(var n="",t=0,a=e.length;a>t;t++){for(var s=e[t],o=0,i=s.length;i>o;o++)n+=(""===s[o]?" ":s[o])+" ";n+="\n"}return n}}},n="undefined"!=typeof exports&&null!==exports?exports:window;n.wordfind=e()}.call(this);var CrosswordUtils={PATH_TO_PNGS_OF_NUMBERS:"numbers/",toHtml:function(e,n){if(null!=e){var t=[];t.push("<table class='crossword'>");for(var a=1,s=0;s<e.length;s++){t.push("<tr>");for(var o=0;o<e[s].length;o++){var i=e[s][o],r=!1;if(null==i)var l="&nbsp;",d="no-border";else var l=i["char"],d="",r=i.across&&i.across.is_start_of_word||i.down&&i.down.is_start_of_word;if(r){var c=CrosswordUtils.PATH_TO_PNGS_OF_NUMBERS+a+".png";t.push("<td class='"+d+"' title='"+s+", "+o+"' style=\"background-image:url('"+c+"')\">"),a++}else t.push("<td class='"+d+"' title='"+s+", "+o+"'>");t.push(n?l:"&nbsp;")}t.push("</tr>")}return t.push("</table>"),t.join("\n")}}};angular.module("triClassModule",[]).config(["$translatePartialLoaderProvider","$stateProvider",function(e,n){e.addPart("app/class-module"),n.state("admin-panel.default.class",{url:"/class/manage-class",templateUrl:"app/class-module/class.tmpl.html",controller:"ClassController"}).state("admin-panel.default.student",{url:"/class/manage-studnet/:classid/:classname",templateUrl:"app/class-module/student.tmpl.html",controller:"StudentController"}).state("admin-panel.default.classwordlist",{url:"/class/classwordlist",templateUrl:"app/class-module/classwordlist.tmpl.html",controller:"ClasswordlistController"}).state("admin-panel.default.wordlist",{url:"/class/manage-word-list/:classid/:page",templateUrl:"app/class-module/wordlist.tmpl.html",controller:"WordListController"}).state("admin-panel.default.worksheet",{url:"/class/worksheet/:classid/:classname",templateUrl:"app/class-module/worksheet.tmpl.html",controller:"WorksheetController"}).state("admin-panel.default.worksheethome",{url:"/class/worksheethome",templateUrl:"app/class-module/worksheet-home.tmpl.html",controller:"WorksheetHomeController"}).state("worksheet-pronunction",{url:"/class/worksheet/pronunction/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-pronunciation.tmpl.html",controller:"WorksheetPronController"}).state("worksheet-active-use",{url:"/class/worksheet/active-use/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-vocabulary.tmpl.html",controller:"WorksheetActiveUseController"}).state("worksheet-active-open-use",{url:"/class/worksheet/active-open-use/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-vocabulary.tmpl.html",controller:"WorksheetActiveUseController"}).state("worksheet-form-type",{url:"/class/worksheet/form-type/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-conjugation.tmpl.html",controller:"WorksheetFormTypeController"}).state("worksheet-wordfind",{url:"/class/worksheet/wordfind/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-wordfind.tmpl.html",controller:"WorksheetWordfindController"}).state("worksheet-wordfind-pronunciation",{url:"/class/worksheet/worksheet-wordfind-pronunciation/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-wordfind.tmpl.html",controller:"WorksheetWordfindController"}).state("worksheet-crossword",{url:"/class/worksheet/worksheet-crossword/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-crossword.tmpl.html",controller:"WorksheetCrossWordController"}).state("worksheet-crossword-pronunciation",{url:"/class/worksheet/worksheet-crossword-pronunciation/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-crossword.tmpl.html",controller:"WorksheetCrossWordController"}).state("worksheet-crossword-gap-fill",{url:"/class/worksheet/worksheet-crossword-gap-fill/:classid/:date/:teachername",templateUrl:"app/class-module/worksheet/worksheet-crossword.tmpl.html",controller:"WorksheetCrossWordController"})}]),angular.module("triClassModule").controller("ClassController",["$translate","ClassService","$mdToast","$mdDialog","ParseService","$state","$rootScope","$scope","$stateParams",function(e,n,t,a,s,o,i,r){r.class_type="class",r.myClasses=[],r.new_class={},r.new_course={};var l=n.getMyClasses();l.then(function(e){r.myClasses=e}),r.addCourse=function(){n.createCourse(r.new_course).then(function(){n.setUpdateClassData();var e=n.getMyClasses();e.then(function(e){r.myClasses=e,r.new_course={}})}),t.show(t.simple().content("Course added! Access in Study Notes for writing.").position("bottom right").hideDelay(3e3))},r.createClass=function(){n.createClass(r.new_class).then(function(){n.setUpdateClassData();var e=n.getMyClasses();e.then(function(e){r.myClasses=e})}),t.show(t.simple().content("New class added!").position("bottom right").hideDelay(3e3))},r.deleteClass=function(t){var s=a.confirm().title(e.instant("HELP.Do_you_really_want_to_delete_this")).ok(e.instant("HELP.YES_DELETE_IT")).cancel(e.instant("HELP.No"));a.show(s).then(function(){r.myClasses=n.removeClass(t)})},r.editClass=function(e){a.show({controller:["EmailService","$mdToast","$mdDialog","ParseService","$scope",function(n,t,a,s,o){o.cl=e,o.edit_class={},o.edit_class.name=e.get("name"),o.edit_class.level=e.get("level"),o.edit_class.cost=e.get("cost"),o.edit_class.access_code=e.get("access_code"),e.get("is_course")&&(o.edit_class.id=e.id,o.edit_class.dec=e.get("dec"),o.edit_class.live=e.get("live"),o.edit_class.payment_type=e.get("payment_type")),o.contactUs=function(e){console.log(e);var a=Parse.Object.extend("User"),s=new Parse.Query(a);s.equalTo("username","Wordiser"),s.first({success:function(a){console.log(a);var s="Course Activation Request",o="<p>Hi, </p><p>This course has been created by "+i.user.get("username")+". Please click on the link to the course below.</p>";o+="<p><a href='#/study-notes/page/"+e.name+"/"+e.id+"/1'>"+e.name+"</a></p>";var r={content:o,type:"activation_request",subject:s,from:i.user.get("email")};n.sendEmailToPerson([a.id],i.user.id,i.user.get("username"),r),t.show(t.simple().content("Activation request sent!").position("bottom right").hideDelay(3e3))}})},o.editClass=function(){e.set("name",o.edit_class.name),e.set("level",o.edit_class.level),e.get("is_course")&&(e.set("access_code",o.edit_class.access_code),e.set("cost",o.edit_class.cost),e.set("dec",o.edit_class.dec),e.set("live",o.edit_class.live),e.set("payment_type",o.edit_class.payment_type)),console.log(e.toJSON()),e.save(),a.cancel()},o.cancel=function(){a.cancel()},o.closeDialog=function(){a.cancel()}}],templateUrl:"app/class-module/class-edit-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0},focusOnOpen:!1})}}]).controller("StudentController",["HelperService","$mdDialog","$stateParams","ClassService","$mdToast","$scope","ParseService","$rootScope",function(e,n,t,a,s,o,i,r){o.student={},r.searchHelperMsg="",r.searchUserList=[],o.classStudentList=[],o.student_page=1,o.limit=5;var l=a.getStudentList(o.student_page,o.limit);l.then(function(e){o.classStudentList=e}),o.searchStudent=function(){var e=o.search_student;if(e){var n=a.searchClassStudent(o.search_student);n.then(function(e){o.classStudentList=e})}else{o.student_page=1,o.limit=5;var n=a.getStudentList(o.student_page,o.limit);n.then(function(e){o.classStudentList=e})}},o.nextPage=function(){if(o.classStudentList.length==o.limit){o.student_page=o.student_page+1;var e=a.getStudentList(o.student_page,o.limit);e.then(function(e){o.classStudentList=e})}},o.prePage=function(){o.student_page=o.student_page-1,o.student_page=o.student_page>=1?o.student_page:1;var e=a.getStudentList(o.student_page,o.limit);e.then(function(e){o.classStudentList=e})},o.invite=function(){o.student.disable=!0;var e=r.user.get("username"),t=o.student.email,a=t.replace(/@.*$/,""),i="<p>Hi,</p><p>Your teacher "+e+' has invited you to join Wordiser.</p><p>With it you can get class notes, revision and more!</p><p><a href="https://www.wordiser.com">Click to sign up to Wordiser</a></p><p>Thanks!</p><p>The Wordiser Team</p>',l="Invited you to join Wordiser.",d=i.replace(/<(?:.|\n)*?>/gm,"").trim();Parse.Cloud.run("send_email_with_content",{email:t,username:a,content:i,title:l,text:d}).then(function(){s.show(s.simple().content("Have invited "+t).position("bottom right").hideDelay(5e3)),n.cancel()})},o.searchStudentByEmail=function(){if(o.if_email=e.checkEmail(o.student.email),r.searchHelperMsg="Searching---"+o.student.email,""!=o.student.email){var n=a.searchStudentByEmail(o.student.email);n.then(function(e){o.searchUserList=e})}else o.searchUserList=[]},o.addStudentToClass=function(e){a.addStudentToClass(e,o.classStudentList),s.show(s.simple().content("New student added!").position("bottom right").hideDelay(3e3))},o.removeStudentFromClass=function(e){var t=n.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));n.show(t).then(function(){a.removeStudentFromClass(e,o.classStudentList)})},o.back=function(){window.history.back()}}]).controller("ClasswordlistController",["$state","RecordService","$cookies","$mdToast","$mdDialog","ClassService","$rootScope","$scope","ParseService","$timeout","$interval",function(e,n,t,a,s,o,i,r){function l(e,n){var t=r.limit;i.current_class=e;var a=o.getClassStudentsById(e.id,n,t);a.then(function(e){r.hide_process=!1;var e=o.getUserProgressData(e);e.then(function(e){r.studentReports=e})})}r.student_page=1,r.limit=5,r.data={};var d=o.getMyClasses();r.hide_process=!0,d.then(function(e){if(r.myClasses=e,i.current_class){for(var n=!1,t=e.length-1;t>=0;t--)e[t].id==i.current_class.id&&(n=!0);n?(r.myclass=i.current_class,l(r.myclass,r.student_page)):(r.myclass=e[0],l(r.myclass,r.student_page))}else r.myclass=e[0],l(r.myclass,r.student_page)}),r.searchStudent=function(){var e=r.data.search;if(e){var n=o.searchClassStudent(r.data.search,r.myclass.id);n.then(function(e){var e=o.getUserProgressData(e);e.then(function(e){r.studentReports=e})})}else r.student_page=1,l(r.myclass,r.student_page)},r.nextPage=function(){r.studentReports.length==r.limit&&(r.student_page=r.student_page+1,l(r.myclass,r.student_page))},r.prePage=function(){r.student_page=r.student_page-1,r.student_page=r.student_page>=1?r.student_page:1,l(r.myclass,r.student_page)},r.popViewFullDetails=function(e,n){var t={};t.student_id=e.student_id,t.word_create_Date=n.time,s.show({controller:"ReviewViewFullDetails",templateUrl:"app/review-module/dialog-review-full-details.tmpl.html",clickOutsideToClose:!0,targetEvent:r.menuClickEvent,locals:{getFocus:!0,record:t},focusOnOpen:!1})},r.changeClass=function(e){r.student_page=1,r.myclass=e,l(e,r.student_page)},r.composeClick=function(e){e.student_name=e.get("username"),s.show({controller:"EmailToPserionDialogController",templateUrl:"app/email/email-to-persion-dialog.tmpl.html",locals:{student:e}}).then(function(){},function(){a.show(a.simple().content("Message cancelled!").position("bottom right").hideDelay(3e3))})},r.stuAllWordsClick=function(n){e.go("admin-panel.default.review",{user_id:n.get("student_id")})}}]).controller("WordListController",["$mdDialog","$stateParams","$rootScope","ClassService","$scope","ParseService",function(e,n,t,a,s){n.page=Number(n.page),s.classid=n.classid,n.page<=1||isNaN(n.page)?(n.pre=1,n.nex=2):(n.pre=n.page-1,n.nex=n.page+1),s.start=n.start,s.page=n.page,s.nex=n.nex,s.pre=n.pre;var o=t.user;if("teacher"==o.get("user_role")){var i=a.getClassWordList();i.then(function(e){s.empty_result=e[0]?!1:!0,s.classWordList=e})}"student"==o.get("user_role")&&a.getUserWordList(function(e){for(var n=e.length-1;n>=0;n--)e[n].set("origin_obj_lemma",e[n].get("lemma")),e[n].set("adddate",e[n].get("next_time"));s.$apply(function(){s.classWordList=e})}),s.removeWordFromClass=function(n){var t=e.confirm().title($translate.instant("HELP.Do_you_really_want_to_delete_this")).ok($translate.instant("HELP.YES_DELETE_IT")).cancel($translate.instant("HELP.No"));e.show(t).then(function(){a.removeWordFromList(n,s.classWordList)})},s.back=function(){window.history.back()}}]).filter("reverseObj",function(){return function(e){for(var n=_.pluck(e,"time"),t=[],a=n.length-1;a>=0;a--)t.push(e[n[a]]);return t}}).controller("EmptyStudentProcessPopController",["$state","$mdDialog","$stateParams","$rootScope","$scope",function(e,n,t,a,s){s.user=a.user,s.contactUs=function(){var e=Parse.Object.extend("User"),t=new Parse.Query(e);t.equalTo("username","Wordiser"),t.first({success:function(e){e.student_name=e.get("username"),n.show({controller:"EmailToPserionDialogController",templateUrl:"app/email/email-to-persion-dialog.tmpl.html",locals:{student:e}}).then(function(){},function(){$mdToast.show($mdToast.simple().content("Message cancelled!").position("bottom right").hideDelay(3e3))})}})},s.openLink=function(t,s,o){a.link_category_type=t;var o=void 0===o?{}:o;o.parent_cat="GeneralEnglish"==o.parent_cat?"General English":o.parent_cat,o.parent_cat="AcademicEnglish"==o.parent_cat?"Academic English":o.parent_cat,o.parent_cat="BusinessEnglish"==o.parent_cat?"Business English":o.parent_cat,o.parent_cat="GrammarEnglish"==o.parent_cat?"Grammar English":o.parent_cat,e.go(s,o),n.cancel()},s.goToHome=function(){e.go("admin-panel.default.home")},s.cancel=function(){n.cancel()},s.close=function(){n.cancel()},s.closeDialog=function(){n.cancel()}}]).controller("HelpWordiserController",["$mdToast","StudyNotesService","$state","$mdDialog","$stateParams","$rootScope","$scope",function(e,n,t,a,s,o,i){if(i.user=o.user,"student"==o.user.get("user_role"))var r="HELP1515402014579";else var r="TEACHER HELP1515568210409";var l=n.getStudyNoteCategory(r);l.then(function(e){i.studyNotes=e.studyNotes,i.studyNotesCat=e.studyNotesCat});var d=n.getCatById(r);d.then(function(e){e&&(i.stcat=e)}),i.contactUs=function(){var n=Parse.Object.extend("User"),t=new Parse.Query(n);t.equalTo("objectId","OuiqOv8g5w"),t.first({success:function(n){n.student_name=n.get("username"),a.show({controller:"EmailToPserionDialogController",templateUrl:"app/email/email-to-persion-dialog.tmpl.html",locals:{student:n}}).then(function(){},function(){e.show(e.simple().content("Message cancelled!").position("bottom right").hideDelay(3e3))})}})},i.goToHome=function(){t.go("admin-panel.default.home")}}]),angular.module("triClassModule").factory("WorksheetService",["$q","$stateParams","$rootScope","WordService",function(e,n,t,a){{var s=Parse.Object.extend("ClassWord");Parse.Object.extend("Fre60K")}return{getWord:function(n){var t=e.defer(),a=new Parse.Query(s);return a.containedIn("objectId",n),a.addDescending("createdAt"),a.limit(200),a.find({success:function(e){for(var n=0;n<e.length;n++){var a=e[n].get("origin_obj_lemma");a||e[n].set("origin_obj_lemma",e[n].get("lemma"))}t.resolve(e)}}),t.promise},getDisableWord:function(n){var t=e.defer(),a=new Parse.Query(s);return a.containedIn("objectId",n),a.equalTo("isPrintable",!1),a.find({success:function(e){t.resolve(e)}}),t.promise},setAllDisableWords:function(n){var t=e.defer(),a=new Parse.Query(s);return a.containedIn("objectId",n),a.find({success:function(e){for(var n=new Array,a=e.length-1;a>=0;a--)e[a].set("isPrintable",!1),n.push(e[a]);Parse.Object.saveAll(n).then(function(){t.resolve(e)})}}),t.promise},disabledWord:function(n){var t=e.defer(),a=new Parse.Query(s);return a.get(n.id,{success:function(e){void 0!=e&&null!=e&&(e.set("isPrintable",!1),e.save(),t.resolve(e))}}),t.promise},enableWord:function(n){var t=e.defer(),a=new Parse.Query(s);return a.get(n.id,{success:function(e){void 0!=e&&null!=e&&(e.set("isPrintable",!0),e.save(),t.resolve(e))}}),t.promise},getGenerateWordIds:function(n,t){var a=e.defer(),s=this.getDisableWord(n,t);return s.then(function(e){for(var t=0;t<e.length;t++){var s=e[t],o=n.indexOf(s.get("classWordId"));o>-1&&n.splice(o,1)}a.resolve(n)}),a.promise},getPronunction:function(n,t){var s=e.defer(),o=a.getPronByLemmas(n);return o.then(function(e){var a=new Array(n.length);if(t)for(var o=0;o<e.length;o++){var i=e[o],r=n.indexOf(i.get("lemma"));if(r>-1){var l=new Object;l.pron=i.get("us_pron"),l.pron2=i.get("us_change_pron"),l.uk_pron=i.get("uk_pron"),l.uk_change_pron=i.get("uk_change_pron"),l.us_pron=i.get("us_pron"),l.us_change_pron=i.get("us_change_pron"),l.word=i.get("lemma"),a[r]||(a[r]=l)}}else for(var o=0;o<e.length;o++){var i=e[o],r=n.indexOf(i.get("lemma"));if(r>-1){var l=new Object;l.pron=i.get("uk_pron"),l.pron2=i.get("uk_change_pron"),l.uk_pron=i.get("uk_pron"),l.uk_change_pron=i.get("uk_change_pron"),l.us_pron=i.get("us_pron"),l.us_change_pron=i.get("us_change_pron"),l.word=i.get("lemma"),a[r]||(a[r]=l)}}s.resolve(a)}),s.promise},getlemmasByClassIdAndDate:function(n,t){var a=e.defer(),s=Parse.Object.extend("ClassWord"),o=new Parse.Query(s);return o.equalTo("class_id",n),"all"!=t?(o.greaterThanOrEqualTo("createdAt",t),o.lessThan("createdAt",new Date(t.getTime()+864e5))):o.equalTo("isPrintable",!0),o.limit(26),o.addDescending("createdAt"),o.find({success:function(e){for(var n=0;n<e.length;n++){var t=e[n].get("origin_obj_lemma");t||e[n].set("origin_obj_lemma",e[n].get("lemma"));var s=e[n].get("lemma_define");s||e[n].set("lemma_define",e[n].get("define"))}a.resolve(e)}}),a.promise},getWorksheetType:function(){return[{name:"Pronunciation & spelling match",type:"pronunction",uri:"worksheet-pronunction"},{name:"Form & conjugation gap-fill",type:"conjugation",uri:"worksheet-form-type"},{name:"Controlled gap-fill with examples",type:"close-gap-fill",uri:"worksheet-active-use"},{name:"Open gap-fill with examples",type:".open-gap-fill",uri:"worksheet-active-open-use"},{name:"Definition wordsearch",type:"wordsearch",uri:"worksheet-wordfind"},{name:"Pronunciation wordsearch",type:"wordsearch-pronunction",uri:"worksheet-wordfind-pronunciation"},{name:"Definition crossword",type:"crossword",uri:"worksheet-crossword"},{name:"Pronunciation crossword",type:"crossword-pronunction",uri:"worksheet-crossword-pronunciation"},{name:"Gap-fill example crossword",type:"corssword-gap-fill",uri:"worksheet-crossword-gap-fill"}]},parseDate:function(e){if("all"==e)return"all";var n=new Date(parseInt(e));return n<=new Date?n:!1},getPrintableWords:function(e,n){var t=26,a=new Array;if("all"==n)for(var s=0;s<e.length&&a.length<t;s++){var o=e[s];void 0!=o&&0!=o.get("isPrintable")&&"all"==n&&a.push(o.id)}else for(var s=0;s<e.length&&a.length<t;s++)void 0!=e[s]&&a.push(e[s].id);return a}}}]);var app=angular.module("triClassModule");app.controller("WorksheetController",["$cookies","WordService","$q","$mdToast","$mdDialog","ClassService","ReviewService","ParseService","$state","$rootScope","$scope","$stateParams","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p){c.classname=m.classname?m.classname:!1;var u=m.classid?m.classid:myClasses[0].id,g=i.getClassWordDateList(d.user.id,u,t);if("teacher"==d.user.get("user_role")){var f=o.getBelongToClass();f.then(function(e){c.myClasses=e})}g.then(function(e){for(var n=new Map,t=new Array,a=(new Map,new Map),s=0;s<e.length;s++){var o=e[s].createdAt;if(void 0==n.get(o.toLocaleDateString())){t.push(o),n.set(o.toLocaleDateString(),t.length-1);var i=new Array;i.push(e[s].id),a.set(o.toLocaleDateString(),i)}else{var i=a.get(o.toLocaleDateString());i.push(e[s].id),a.set(o.toLocaleDateString(),i)}}c.class_word_date_list=t,c.class_word_list=a}),c.printSubjectAllOpenLink=function(e){if(c.subject_class){var n=new Object;n.teachername=d.user.get("name"),n.classid=c.class.id,n.date="all",g.then(function(t){if(n.wordlist=t.toString(),t.length<3){var a=confirm("This study list has very few words. Do you still want to print it?");1==a&&l.go(e,n)}else l.go(e,n)})}else c.popSelectSubject()},c.openLink=function(n,t){e.put("print_all",!0);var a=c.class_word_list.get(t.toLocaleDateString()),s=new Object;if(s.teachername=d.user.get("name"),s.classid=u,s.date=new Date(t.toLocaleDateString()).getTime(),a.length<3){var o=confirm("This study list has very few words. Do you still want to print it?");1==o&&l.go(n,s)}else l.go(n,s)},c.popSelectSubject=function(){s.show({controller:"PopSelectSubjectController",templateUrl:"app/class-module/worksheet/dialog-select-subject.tmpl.html",clickOutsideToClose:!0,locals:{parent_scope:c,getFocus:!0},focusOnOpen:!1})},c.printAllOpenLink=function(n){e.put("print_all",!1);var a="pronunction",s=i.getClassWordDateList(d.user.id,u,t);s.then(function(e){for(var t=new Array,s=0;s<e.length;s++){var o=e[s];t.push(o.id)}var i=p.getGenerateWordIds(t,a),r=new Object;r.teachername=d.user.get("name"),r.classid=u,r.date="all",i.then(function(e){if(r.wordlist=e.toString(),e.length<3){var t=confirm("This study list has very few words. Do you still want to print it?");1==t&&l.go(n,r)}else l.go(n,r)})})},c.loadWorksheetData=function(){var e="pronunction",n=i.getClassWordDateList(d.user.id,u,t);n.then(function(n){for(var t=new Array,a=0;a<n.length;a++){var o=n[a];t.push(o.id)}s.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),parent_scope:c,type:e,getFocus:!0},focusOnOpen:!1})})},c.selects=p.getWorksheetType()}]).controller("WorksheetWordsController",["$http","WNService","$stateParams","$rootScope","$mdDialog","$scope","ParseService","WorksheetService","wordId","type","parent_scope",function(e,n,t,a,s,o,i,r,l,d,c){o.isChecked=!0,o.isDisabled=!1,o.parent_scope=c;var m=l.split(","),p=d,u=(Parse.Object.extend("ClassWord"),r.getWord(m));u.then(function(e){o.words=e,o.type=p,o.lemmaIds=m,o.countSelect=g(o.words)});var g=function(e){for(var n=0,t=e.length-1;t>=0;t--)e[t].get("isPrintable")&&n++;return n};o.refreshWorksheetDia=function(){o.parent_scope.generateWorksheet(),s.cancel()},o.selectAll=function(){for(var e=0;e<=o.words.length-1&&(o.words[e].set("isPrintable",!0),!(e>=25));e++);var n=o.words;Parse.Object.saveAll(n).then(function(){o.$apply(function(){o.countSelect=g(o.words)})})},o.deSelectAll=function(){for(var e=o.words.length-1;e>=0;e--)o.words[e].set("isPrintable",!1);var n=o.words;o.countSelect=0,Parse.Object.saveAll(n).then(function(){})},o.checkDiable=function(e){for(var n=o.disableWords,t=0;t<n.length;t++){var a=n[t];if(a.id==e.id)return!0}return!1},o.disabled=function(e){o.type,o.lemmaIds;o.countSelect=o.countSelect-1,e.set("isPrintable",!1),e.save()},o.enable=function(e){if(!(o.countSelect<26))return alert("No more than 26 words to prin! Please disable words!"),!0;o.type,o.lemmaIds;e.set("isPrintable",!0),e.save(),o.countSelect=o.countSelect+1},o.cancel=function(){s.cancel()},o.closeDialog=function(){s.cancel()}}]).controller("WorksheetPronController",["$mdDialog","$q","ReviewService","$cookies","WordService","$http","WNService","$stateParams","$rootScope","ClassService","$scope","ParseService","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p){function u(e,n){var t=p.getlemmasByClassIdAndDate(e,n);t.then(function(e){for(var n=new Array,t=new Array,a=e.length-1;a>=0;a--)n.push(e[a].get("origin_obj_lemma")),t.push(e[a]);var o=s.getPronByDefines(e);o.then(function(e){c.words=e,c.checklist=t})})}c.teacherName=l.user.get("username"),c.formdata={},c.formdata.isEn=l.user.get("print_pron")?l.user.get("print_pron"):"uk",c.subject_no=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],c.print_all=a.get("print_all"),c.isEn="us"==l.user.get("spelling")?"true":"false";var g=r.classid;c.generateWorksheet=function(){var e=r.date,n=p.parseDate(e);u(g,n)},c.generateWorksheet(),c.loadWorksheetData=function(){c.in_worksheet=!0;var a="pronunction",s=t.getClassWordDateList(l.user.id,g,n);s.then(function(n){for(var t=new Array,s=0;s<n.length;s++){var o=n[s];t.push(o.id)}e.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),parent_scope:c,type:a,getFocus:!0},focusOnOpen:!1})})},c.toggle=function(e){var n=c.checklistids.indexOf(e.id);if(n>-1)c.checklistids.splice(n,1);else{if(c.checklistids.length>=26)return void alert("You should not select morn than 26 words!");c.checklistids.push(e.id)}},c.exists=function(e){return c.checklistids.indexOf(e.id)>-1},c.refreshWorksheet=function(){l.user.set("print_pron",c.formdata.isEn),l.user.save()},c.print=function(){window.print()}}]).controller("WorksheetHomeController",["$mdDialog","ParseService","$rootScope","ClassService","$scope",function(e,n,t,a,s){if("teacher"==t.user.get("user_role")){var o=a.getBelongToClass();o.then(function(n){s.myClasses=n,n.length<=1&&"My List (Default)"==n[0].get("name")&&e.show({controller:"EmptyWorkSheetPopController",templateUrl:"app/class-module/empty-worksheet-dialog.tmpl.html",clickOutsideToClose:!0,targetEvent:s.menuClickEvent,focusOnOpen:!1})})}s.popSelectSubject=function(){e.show({controller:"PopSelectSubjectController",templateUrl:"app/class-module/worksheet/dialog-select-subject.tmpl.html",clickOutsideToClose:!0,locals:{parent_scope:s,getFocus:!0},focusOnOpen:!1})}}]).controller("EmptyWorkSheetPopController",["$state","$mdDialog","ParseService","$rootScope","ClassService","$scope",function(e,n,t,a,s,o){o.user=a.user,o.openLink=function(t,s,o){a.link_category_type=t;var o=void 0===o?{}:o;o.parent_cat="GeneralEnglish"==o.parent_cat?"General English":o.parent_cat,o.parent_cat="AcademicEnglish"==o.parent_cat?"Academic English":o.parent_cat,o.parent_cat="BusinessEnglish"==o.parent_cat?"Business English":o.parent_cat,o.parent_cat="GrammarEnglish"==o.parent_cat?"Grammar English":o.parent_cat,e.go(s,o),n.cancel()},o.cancel=function(){n.cancel()},o.close=function(){n.cancel()},o.closeDialog=function(){n.cancel()}}]).controller("WorksheetActiveUseController",["$mdDialog","$q","ReviewService","HelperService","WordService","$cookies","$http","WNService","$stateParams","$state","$rootScope","ClassService","$scope","ParseService","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g){function f(e,n){var t=g.getlemmasByClassIdAndDate(h,n);t.then(function(e){for(var t=new Array,a=0;a<e.length;a++){var o=e[a].get("origin_obj_lemma");-1==t.indexOf(o)&&t.push(o)}var i=new Array,r=new Array,l=new Array,c=new Array,m=s.getPronByLemmas(t);m.then(function(t){for(var a=0;a<t.length;a++)for(var s=0;s<e.length;s++)t[a].get("lemma")==e[s].get("origin_obj_lemma")&&(e[s].worddata=t[a]);for(var a=e.length-1;a>=0;a--)if(!(i.indexOf(e[a].worddata.get("lemma"))>=0&&l.indexOf(e[a].get("sample"))>=0)){l.push(e[a].get("sample")),c.push(e[a]);var o=x(e[a]);i.push(o.finalLemma),r.push(o.ary)}for(var m=new Array,u=new Array,a=0;a<i.length;a++)m.push(i[a].charAt(0)),u.push(i[a].trim().split(" "));"worksheet-active-use"==d.current.name&&(k=m,p.firsterLetter=m);for(var a=r.length-1;a>=0;a--){var f=r[a][0];r[a][0]=f.trim().replace(f.substring(0,1),f.substring(0,1).toUpperCase())}w=r,p.dictSentenct=r,b=i,p.dictArry=i,y=u,p.multiAry=u,p.checklist=c,p.checklistids=g.getPrintableWords(c,n),p.refreshWorksheet()})})}p.print_all=o.get("print_all"),p.teacherName=c.user.get("username"),p.subject_no=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"];var _=l.date,h=l.classid,v=g.parseDate(_);f(h,v);var b,y,w,k;p.generateWorksheet=function(){var e=l.date,n=g.parseDate(e);f(h,n)},p.loadWorksheetData=function(){p.in_worksheet=!0;var a="pronunction",s=t.getClassWordDateList(c.user.id,h,n);s.then(function(n){for(var t=new Array,s=0;s<n.length;s++){var o=n[s];t.push(o.id)}e.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),parent_scope:p,type:a,getFocus:!0},focusOnOpen:!1})})},p.toggle=function(e){var n=p.checklistids.indexOf(e.id);if(n>-1)p.checklistids.splice(n,1);else{if(p.checklistids.length>=26)return void alert("You should not select morn than 26 words!");p.checklistids.push(e.id)}},p.exists=function(e){return p.checklistids.indexOf(e.id)>-1},p.refreshWorksheet=function(){var e=new Array,n=new Array,t=new Array,a=new Array;if("worksheet-active-use"==d.current.name){for(var s=0;s<p.checklist.length;s++){var o=p.checklist[s];p.checklistids.indexOf(o.id)>-1&&(e.push(b[s]),n.push(y[s]),t.push(w[s]),a.push(k[s]))}p.firsterLetter=a,p.dictSentenct=t,p.dictArry=e,p.multiAry=n}else{for(var s=0;s<p.checklist.length;s++){var o=p.checklist[s];p.checklistids.indexOf(o.id)>-1&&(e.push(b[s]),n.push(y[s]),t.push(w[s]))}p.dictSentenct=t,p.dictArry=e,p.multiAry=n}},p.print=function(){window.print()};var x=function(e){var n=[],t=e.get("sample"),s=a.replace_lemma_form_sentence(e.get("sample"),e.worddata),o=s.replace_lemma,i=new Array,i=t?t.split(o):!1;if(!i){var i=new Array;
i.push(""),i.push("")}for(var r=0;r<i.length;r++)i[r]=i[r].trim();return n.ary=i,n.finalLemma=o,n}}]).controller("WorksheetWordfindController",["HelperService","$mdDialog","$q","ReviewService","WordService","$cookies","$http","$stateParams","$state","$rootScope","ClassService","$scope","ParseService","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u){function g(n,t){var a=u.getlemmasByClassIdAndDate(h,t);a.then(function(n){var t=s.getPronByDefines(n);t.then(function(n){for(var t=n.length-1;t>=0;t--){var a=e.replace_lemma_form_sentence(n[t].get("sentence_main"),n[t].worddata);n[t].obj=a}f(n)})})}function f(e){for(var n=[],t=[],a=[],s=[],o=[],i=[],r=e.length-1;r>=0;r--)n.unshift(e[r].get("lemma"));for(var r=n.length-1;r>=0;r--){var l=o.indexOf(n[r]);if(0>l){o.push(n[r]);var d={};d.defines=[],d.lemma=n[r],d.defines.push(e[r]),i.push(d)}else i[l].defines.push(e[r])}for(var r=o.length-1;r>=0;r--){var c=o[r];c&&!m.isPron&&""!=c&&(t.unshift(c.replace(/ /g,"")),a.unshift(i[r]),s.unshift(c)),c&&m.isPron&&""!=c&&""!=i[r].uk_change_pron&&""!=i[r].uk_pron&&""!=i[r].us_change_pron&&""!=i[r].us_pron&&(t.unshift(c.replace(/ /g,"")),a.unshift(i[r]),s.unshift(c))}o=s;for(var p,u,g=21,f=g+1;f>g;)p=wordfind.newPuzzle(t),u=wordfind.solve(p,t).found,f=p.length,f>g&&(t.pop(),a.pop());for(var _=new Array,r=0;r<p.length;r++){for(var h=new Array,v=0;v<p[r].length;v++){var b=p[r][v];(void 0==b||""==b.trim())&&(b="X");var d=new Object;d.letter=b,d.isFill=!1,h.push(d)}_.push(h)}for(var r=0;r<u.length;r++)for(var y=u[r],v=0;v<y.overlap;v++){var w=wordfind.orientations[y.orientation](y.x,y.y,v);_[w.y][w.x].isFill=!0}m.puzzle=_,m.wordlist=a}m.teacherName=d.user.get("username"),m.formdata={},m.subject_no=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],m.print_all=o.get("print_all"),m.state_name=l.current.name,m.formdata.isEn=d.user.get("print_pron")?d.user.get("print_pron"):"uk","worksheet-wordfind"==l.current.name&&(m.worksheet_title="Definition Wordsearch",m.is_define=!0,m.is_pron=!1),"worksheet-wordfind-pronunciation"==l.current.name&&(m.worksheet_title="Pronunciation Wordsearch",m.is_define=!1,m.is_pron=!0);var _=r.date,h=r.classid,v=u.parseDate(_);m.isEn="us"==d.user.get("spelling")?"true":"false",g(h,v),m.generateWorksheet=function(){m.isEn="us"==d.user.get("spelling")?"true":"false";var e=r.date,n=u.parseDate(e);g(h,n,!1)},m.loadWorksheetData=function(){m.in_worksheet=!0;var e="pronunction",s=a.getClassWordDateList(d.user.id,h,t);s.then(function(t){for(var a=new Array,s=0;s<t.length;s++){var o=t[s];a.push(o.id)}n.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:a.toString(),parent_scope:m,type:e,getFocus:!0},focusOnOpen:!1})})},m.toggle=function(e){var n=m.checklistids.indexOf(e.id);if(n>-1)m.checklistids.splice(n,1);else{if(m.checklistids.length>=26)return void alert("You should not select morn than 26 words!");m.checklistids.push(e.id)}},m.exists=function(e){return m.checklistids.indexOf(e.id)>-1},m.refreshWorksheet=function(){d.user.set("print_pron",m.formdata.isEn),d.user.save()},m.print=function(){window.print()},m.setClass=function(e){return e?"cellfill":"cell"}}]).controller("WorksheetFormTypeController",["$mdDialog","$q","ReviewService","WordService","$cookies","$http","WNService","$stateParams","$rootScope","ClassService","$scope","ParseService","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p){function u(e,n){var t=p.getlemmasByClassIdAndDate(f,n);t.then(function(e){for(var n=new Array,t=(new Array,new Array),s=(new Array,0);s<e.length;s++){var o=e[s].get("origin_obj_lemma");n.push(o),t.push(e[s])}var i=a.getPronByLemmas(n);i.then(function(e){for(var n=0;n<e.length;n++)for(var a=0;a<t.length;a++)e[n].get("lemma")!=t[a].get("origin_obj_lemma")||t[a].worddata||(t[a].worddata=e[n]);c.wordlist=t})})}c.teacherName=l.user.get("username"),c.subject_no=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],c.print_all=s.get("print_all");var g=r.date,f=r.classid,_=p.parseDate(g);u(f,_);var h;c.generateWorksheet=function(){var e=r.date,n=p.parseDate(e);u(f,n,!1)},c.loadWorksheetData=function(){c.in_worksheet=!0;var a="pronunction",s=t.getClassWordDateList(l.user.id,f,n);s.then(function(n){for(var t=new Array,s=0;s<n.length;s++){var o=n[s];t.push(o.id)}e.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),parent_scope:c,type:a,getFocus:!0},focusOnOpen:!1})})},c.toggle=function(e){var n=c.checklistids.indexOf(e.id);if(n>-1)c.checklistids.splice(n,1);else{if(c.checklistids.length>=26)return void alert("You should not select morn than 26 words!");c.checklistids.push(e.id)}},c.exists=function(e){return c.checklistids.indexOf(e.id)>-1},c.refreshWorksheet=function(){for(var e=new Array,n=0;n<c.checklist.length;n++){var t=c.checklist[n];c.checklistids.indexOf(t.id)>-1&&e.push(h[n])}c.wordlist=e},c.print=function(){window.print()}}]).controller("WorksheetCrossWordController",["$mdDialog","$q","ReviewService","HelperService","WordService","$cookies","$http","WNService","$stateParams","$state","$rootScope","ClassService","$scope","ParseService","WorksheetService",function(e,n,t,a,s,o,i,r,l,d,c,m,p,u,g){function f(e,n){var t=g.getlemmasByClassIdAndDate(b,n);t.then(function(e){var n=s.getPronByDefines(e);n.then(function(e){for(var n=e.length-1;n>=0;n--){var t=a.replace_lemma_form_sentence(e[n].get("sentence_main"),e[n].worddata);e[n].obj=t}_(e,k)})})}function _(e,n){for(var t=[],a=[],s=[],o=[],i=[],r=[],l=e.length-1;l>=0;l--)t.unshift(e[l].get("lemma"));for(var l=t.length-1;l>=0;l--){var d=i.indexOf(t[l]);if(0>d){i.push(t[l]);var c={};c.defines=[],c.lemma=t[l],c.defines.push(e[l]),r.push(c)}else r[d].defines.push(e[l])}for(var l=i.length-1;l>=0;l--){var m=i[l];m&&!p.isPron&&""!=m&&(a.unshift(m.replace(/ /g,"")),s.unshift(r[l]),o.unshift(m)),m&&p.isPron&&""!=m&&""!=r[l].uk_change_pron&&""!=r[l].uk_pron&&""!=r[l].us_change_pron&&""!=r[l].us_pron&&(a.unshift(m.replace(/ /g,"")),s.unshift(r[l]),o.unshift(m))}i=o;for(var u,g,n=23,f=n+1;f>n&&(u=new Crossword(a,s),g=u.getSquareGrid(n),null!=g&&void 0!=g);)f=g.length,f>n&&(a.pop(),s.pop(),i.pop());null==g||void 0==g?alert("These words can not be generated crossword puzzle!"):(p.grid=g,p.lemmas=i,p.wordlist=r,p.legend=h(u.getLegend(g)))}function h(e){var n={across:[],down:[]};if(void 0==e)return n;for(var t=e.across,a=e.down,s=0;s<t.length;s++)n.across[t[s].index]=t[s];for(var s=0;s<a.length;s++)n.down[a[s].index]=a[s];return n}p.formdata={},p.teacherName=c.user.get("username"),p.subject_no=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"],p.state_name=d.current.name,p.worksheet_title="WORKSHEET",p.print_all=o.get("print_all"),"worksheet-crossword"==d.current.name&&(p.worksheet_title="Definition Crossword",p.is_define=!0,p.is_pron=!1,p.is_sentence=!1),p.formdata.isEn=c.user.get("print_pron")?c.user.get("print_pron"):"uk","worksheet-crossword-pronunciation"==d.current.name&&(p.worksheet_title="Pronunciation Crossword",p.is_define=!1,p.is_pron=!0,p.is_sentence=!1),"worksheet-crossword-gap-fill"==d.current.name&&(p.worksheet_title="Meaning & Use Crossword",p.is_define=!1,p.is_pron=!1,p.is_sentence=!0);var v=l.date,b=l.classid,y=g.parseDate(v);p.isEn="us"==c.user.get("spelling")?"true":"false",f(b,y,!1);var w,k=23;p.generateWorksheet=function(){var e=l.date,n=g.parseDate(e);f(b,n,!1)},p.loadWorksheetData=function(){p.in_worksheet=!0;var a="pronunction",s=t.getClassWordDateList(c.user.id,b,n);s.then(function(n){for(var t=new Array,s=0;s<n.length;s++){var o=n[s];t.push(o.id)}e.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:t.toString(),parent_scope:p,type:a,getFocus:!0},focusOnOpen:!1})})},p.toggle=function(e){var n=p.checklistids.indexOf(e.id);if(n>-1)p.checklistids.splice(n,1);else{if(p.checklistids.length>=26)return void alert("You should not select morn than 26 words!");p.checklistids.push(e.id)}},p.exists=function(e){return p.checklistids.indexOf(e.id)>-1},p.refreshWorksheet=function(){c.user.set("print_pron",p.formdata.isEn),c.user.save();for(var e=new Array,n=new Array,t=0;t<p.checklist.length;t++){var a=p.checklist[t];p.checklistids.indexOf(a.id)>-1&&(e.push(p.lemmas[t]),"us"==p.formdata.isEn?(w[t].pron=w[t].us_pron,w[t].pron2=w[t].us_change_pron,n.push(w[t])):(w[t].pron&&(w[t].pron=w[t].uk_pron,w[t].pron2=w[t].uk_change_pron),n.push(w[t])))}_(n,k)},p.print=function(){window.print()}}]).controller("PopSelectSubjectController",["parent_scope","$q","ReviewService","ClassService","WordService","$mdSidenav","$mdDialog","ParseService","AddWordService","$mdToast","$state","$rootScope","$scope",function(e,n,t,a,s,o,i,r,l,d,c,m,p){p.openLink=function(e,n,t){m.link_category_type=e;var t=void 0===t?{}:t;t.parent_cat="GeneralEnglish"==t.parent_cat?"General English":t.parent_cat,t.parent_cat="AcademicEnglish"==t.parent_cat?"Academic English":t.parent_cat,t.parent_cat="BusinessEnglish"==t.parent_cat?"Business English":t.parent_cat,t.parent_cat="GrammarEnglish"==t.parent_cat?"Grammar English":t.parent_cat,c.go(n,t),i.cancel()},p.searchCat=function(){var e=s.searchCatByString(p.search);e.then(function(e){p.searchWordList=e})},p.view=function(e){if(p.tmp_cat==e)e.view_show=!1;else{for(var n=0;n<p.searchWordList.length;n++)p.searchWordList[n].view_show=!1;p.tmp_cat=e,e.view_show=!0}},p.loadWorksheetData=function(o){var r=s.getCatWordsByCatId(o);r.then(function(s){var r=a.saveCatWordsAsClass(o.id,s);r.then(function(a){e.subject_class=a;var s="pronunction",o=t.getClassWordDateList(m.user.id,a.id,n);o.then(function(e){for(var n=new Array,t=0;t<e.length;t++){var a=e[t];n.push(a.id)}i.show({controller:"WorksheetWordsController",templateUrl:"app/class-module/worksheet/dialog-load-word.tmpl.html",clickOutsideToClose:!0,locals:{wordId:n.toString(),parent_scope:p,type:s,getFocus:!0},focusOnOpen:!1})})})})},p.cancel=function(){i.cancel()},p.closeToast=function(){i.cancel()}}]),angular.module("triClassModule").factory("ClassService",["$mdToast","$q","$stateParams","$rootScope",function(e,n,t,a){var s=Parse.Object.extend("MyClass"),o=Parse.Object.extend("ClassStudent"),i=Parse.Object.extend("User"),r=Parse.Object.extend("ClassWord"),l=Parse.Object.extend("StudentWordRecordRate"),d=(a.user,!0),c=[],m=[],p=[];return{init:function(){m=[],p=[],d=!0},getVocabCourse:function(){var e=[],n={};n.name="GENERAL Vocabulary Tester",n.id="general",n.teacher_name="Wordiser",n.teacher_avatar="assets/images/avatars/avatar-default.png",n.is_vocab=!0,n.include_level=["all","A1, Beginner","A2, Elementary","B1, Intermediate","B2, Upper Intermediate"],e.push(n);var n={};n.name="PET Vocabulary Tester",n.id="pet",n.teacher_name="Wordiser",n.teacher_avatar="assets/images/avatars/avatar-default.png",n.is_vocab=!0,n.include_level=["all","A2, Elementary"],e.push(n);var n={};n.name="CECT-4 Vocabulary Tester",n.id="cect4",n.teacher_name="Wordiser",n.teacher_avatar="assets/images/avatars/avatar-default.png",n.is_vocab=!0,n.include_level=["all","B2, Upper Intermediate","C1, Low Advanced","C2, Advanced"],e.push(n);var n={};return n.name="IELTS Vocabulary Tester",n.id="ielts",n.teacher_name="Wordiser",n.teacher_avatar="assets/images/avatars/avatar-default.png",n.is_vocab=!0,n.include_level=["all","B2, Upper Intermediate","C1, Low Advanced","C2, Advanced"],e.push(n),e},setUpdateClassData:function(){d=!0},getFriends:function(){var e=this,t=n.defer();if(!d&&c[0])t.resolve(c);else{var s=e.getBelongToClass();s.then(function(e){for(var n=[],s=0;s<e.length;s++)n.push(e[s].id);var i=new Parse.Query(o);i.containedIn("class_id",n),i.exists("username"),i.find({success:function(e){c=[];for(var n=[],s=a.user,o=0;o<e.length;o++){var i=e[o],r=n.indexOf(i.get("student_id"));0>r&&i.get("student_id")!=s.id&&(n.push(i.get("student_id")),c.push(i))}d=!1,t.resolve(c)}})})}return t.promise},removeClass:function(e){var n=m.indexOf(e);return n>-1&&m.splice(n,1),e.set("remove",!0),e.save(),m},getUserData:function(e){var t=n.defer();return Parse.Cloud.run("getUserData",{ids:e}).then(function(e){t.resolve(e)}),t.promise},getUserById:function(e){var t=n.defer(),a=new Parse.Query(i);return a.equalTo("objectId",e),a.first({success:function(e){t.resolve(e)}}),t.promise},getClassById:function(e){var t=n.defer(),a=new Parse.Query(s);return a.equalTo("objectId",e),a.first({success:function(e){t.resolve(e)}}),t.promise},getClassByIds:function(e){var t=n.defer(),a=new Parse.Query(s);return a.containedIn(e),a.find({success:function(e){t.resolve(e)}}),t.promise},getMyClasses:function(){var e=n.defer(),t=a.user,o=this,i=new Parse.Query(s);i.equalTo("user_id",t.id),i.notEqualTo("type","print_cat");var r=new Parse.Query(s);r.equalTo("createdBy",Parse.User.current());var l=Parse.Query.or(i,r);return l.notEqualTo("name","Temp print category"),l.notEqualTo("remove",!0),l.ascending("createdAt"),l.find({success:function(n){if(n[0])m=n,e.resolve(m);else{m=[];var t=o.createOneDefaultClass();t.then(function(e){m.push(e)}),e.resolve(m)}}}),e.promise},createOneDefaultClass:function(){var e=n.defer(),t=a.user,i=a.user.get("level")?a.user.get("level"):"C2, Advanced",r=new s,l=new Date;r.set("name","My List (Default)"),r.set("level",i),r.set("user_id",t.id),r.set("time",l);var d=new Parse.ACL(Parse.User.current());return d.setPublicReadAccess(!0),r.setACL(d),r.save().then(function(n){var a=new Date,s=new o;s.set("email",t.get("email")),s.set("name",t.get("username")),s.set("student_id",t.id),s.set("class_id",n.id),s.set("time",a);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),r.setACL(i),s.save(),m.push(n),e.resolve(m)}),e.promise},getBelongToClass:function(){var e=n.defer(),t=a.user;if(!d&&p[0])e.resolve(p);else{var i=new Parse.Query(o);i.equalTo("student_id",t.id);var r=new Parse.Query(s);r.matchesKeyInQuery("objectId","class_id",i);var l=new Parse.Query(s);l.equalTo("user_id",t.id);var c=Parse.Query.or(r,l);c.notEqualTo("type","print_cat"),c.notEqualTo("name","Temp print category"),c.notEqualTo("remove",!0),c.ascending("createdAt"),c.find({success:function(n){if("undefined"!=typeof n[0]){for(var i=[],r=!1,l=!1,c=n.length-1;c>=0;c--)"My List (Default)"==n[c].get("name")?(r=n[c],n[c].hide_for_class=!0,n[c].hide_for_note=!0):"My Share"==n[c].get("name")?(n[c].hide_for_class=!0,n[c].share=!0,l=n[c]):i.unshift(n[c]);r&&i.unshift(r),p=i,d=!1,e.resolve(p)}else{var m=a.user.get("level")?a.user.get("level"):"C2, Advanced",u=new s,g=new Date;u.set("name","My List (Default)"),u.set("level",m),u.set("user_id",t.id);var f=new Parse.ACL(Parse.User.current());f.setPublicReadAccess(!0),u.setACL(f),u.set("time",g),u.save().then(function(n){var a=new Date,s=new o;s.set("email",t.get("email")),s.set("name",t.get("username")),s.set("student_id",t.id),s.set("class_id",n.id),s.set("time",a);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.save(),p.push(n),e.resolve(p)})}}})}return e.promise},getDefaultClass:function(){var e=n.defer(),t=new Parse.Query(s);return t.equalTo("user_id",a.user.id),t.equalTo("name","My List (Default)"),t.first({success:function(n){if(n)e.resolve(n);else{var t=a.user,i=a.user.get("level")?a.user.get("level"):"C2, Advanced",r=new s,l=new Date;r.set("name","My List (Default)"),r.set("level",i),r.set("user_id",t.id),r.set("time",l);var d=new Parse.ACL(Parse.User.current());d.setPublicReadAccess(!0),r.setACL(d),r.save().then(function(n){var a=new Date,s=new o;s.set("email",t.get("email")),s.set("name",t.get("username")),s.set("student_id",t.id),s.set("class_id",n.id),s.set("time",a);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.save(),e.resolve(n)})}}}),e.promise},getClassWordList:function(){var e=n.defer(),a=t.page,s=30,o=(a-1)*s,i=t.classid,l=new Parse.Query(r);return l.equalTo("class_id",i),l.addDescending("adddate"),l.limit(s),l.skip(o),l.find({success:function(n){for(var t=0;t<n.length;t++){var a=n[t].get("lemma");a||n[t].set("lemma",n[t].get("origin_obj_lemma"))}e.resolve(n)}}),e.promise},getClassWordListByClassId:function(e){var t=n.defer(),a=new Parse.Query(r);return a.equalTo("class_id",e),a.find({success:function(e){for(var n=0;n<e.length;n++){var a=e[n].get("lemma");a||e[n].set("lemma",e[n].get("origin_obj_lemma"))}t.resolve(e)}}),t.promise},getUserWordList:function(e){var n=t.page,s=30,o=(n-1)*s,i=Parse.Object.extend("StudentProg"),r=new Parse.Query(i);r.equalTo("user_id",a.user.id),r.descending("next_time"),r.limit(s),r.skip(o),r.find({success:function(n){e(n)}})},getStudent:function(e,t){var a=n.defer(),s=new Parse.Query(o);return s.equalTo("class_id",e),s.equalTo("student_id",t),s.first({success:function(e){a.resolve(e)}}),a.promise},getUserProgressData:function(e){for(var t=this,a=n.defer(),s=[],o=e.length-1;o>=0;o--)s.push(e[o].get("student_id"));var i=t.getUserData(s);return i.then(function(n){for(var t=e.length-1;t>=0;t--){for(var s=e[t],o=n.length-1;o>=0;o--)s.get("student_id")==n[o].id&&(s.user=n[o]);if(s.at_rate=s.get("at_no")?s.get("at_r_no")/s.get("at_no"):0,s.sp_rate=s.get("sp_no")?s.get("sp_r_no")/s.get("sp_no"):0,s.ud_rate=s.get("ud_no")?s.get("ud_r_no")/s.get("ud_no"):0,s.pron_rate=s.get("pron_no")?s.get("pron_r_no")/s.get("pron_no"):0,s.user)var i=s.user.get("user_avatar");i||(i="assets/images/avatars/avatar-1.png"),s.user_avatar=i}a.resolve(e)}),a.promise},getClassStudentsById:function(e,t,a){if(!a)var a=25;if(t)var s=(t-1)*a;var i=n.defer(),r=new Parse.Query(o);return r.equalTo("class_id",e),r.descending("createdAt"),r.limit(a),s&&r.skip(s),r.find({success:function(e){i.resolve(e)}}),i.promise},searchClassStudent:function(e,a){var s=n.defer();if(!a)var a=t.classid;var i=new Parse.Query(o);i.equalTo("class_id",a),i.matches("username",".*"+e+".*");var r=new Parse.Query(o);r.equalTo("class_id",a),r.matches("email",".*"+e+".*");var l=Parse.Query.or(i,r);return l.descending("createdAt"),l.find({success:function(e){for(var n=e.length-1;n>=0;n--)e[n].protect_email="*"+e[n].get("email").substring(3);s.resolve(e)}}),s.promise},getStudentList:function(e,s){var i=n.defer(),r=(e-1)*s,l=t.classid;a.classname=t.classname;var d=new Parse.Query(o);return d.equalTo("class_id",l),d.limit(s),d.skip(r),d.descending("createdAt"),d.find({success:function(e){for(var n=e.length-1;n>=0;n--)e[n].protect_email="*"+e[n].get("email").substring(3),e[n].get("username")||e[n].set("username",e[n].get("name"));i.resolve(e)}}),i.promise},getClassStudentReport:function(e){var t=n.defer(),a=new Parse.Query(o);a.equalTo("class_id",e.id);var s=new Parse.Query(r);s.equalTo("class_id",e.id);var i=new Parse.Query(l);return i.matchesKeyInQuery("student_id","student_id",a),i.matchesKeyInQuery("lemma","origin_obj_lemma",s),i.limit(1e3),i.find({success:function(e){t.resolve(e)}}),t.promise},addStudentToClass:function(e,n){var a=new Date,s=new o;s.set("email",e.get("email")),s.set("username",e.get("username")),s.set("name",e.get("username")),s.set("student_id",e.id),s.set("class_id",t.classid),s.set("time",a);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),i.setWriteAccess(e.id,!0),s.setACL(i),s.protect_email="*"+s.get("email").substring(3),n.push(s),s.save()},studentLeaveCourse:function(e){for(var t=this,a=n.defer(),s=Parse.User.current(),i=s.get("course_list")?s.get("course_list"):[],r=i.length-1;r>=0;r--)i[r].id==e.id&&i.splice(r,1);if(s.set("course_list",i),e.is_vocab&&s.set("course",""),s.save(),e.is_vocab)a.resolve(s);else{var l=new Parse.Query(o);l.equalTo("student",s),l.equalTo("course",e),l.find({success:function(n){if(n[0]){for(var o=n.length-1;o>=0;o--)n[o].destroy();d=!0,a.resolve(n)}else{var i=t.getStudent(e.id,s.id);i.then(function(e){e.destroy(),d=!0,a.resolve(e)})}}})}return a.promise},studentJoinCourse:function(e,n){var t=new o;t.set("email",e.get("email")),t.set("username",e.get("username")),t.set("name",e.get("username"));var a=new Parse.ACL(n.get("createdBy"));a.setPublicReadAccess(!0),a.setWriteAccess(e.id,!0),t.setACL(a),t.set("student_id",e.id),t.set("class_id",n.id),t.set("student",e),t.set("course",n),t.save().then(function(e){console.log(e.toJSON()),console.log(n.toJSON())}),d=!0;for(var s=Parse.User.current(),i=s.get("course_list")?s.get("course_list"):[],r=!1,l=i.length-1;l>=0;l--)i[l].id==n.id&&(r=!0);r||(i.push(n),s.set("course_list",i),s.save())},studentJoinVocabCourse:function(e){for(var t=n.defer(),a=Parse.User.current(),s=a.get("course_list")?a.get("course_list"):[],o=!1,i=s.length-1;i>=0;i--)s[i].id==e.id&&(o=!0);return o||(s.push(e),a.set("course_list",s)),a.set("auto_tutorial",!0),a.set("course",e.id),a.save().then(function(){t.resolve(a)}),t.promise},removeStudentFromClass:function(e,n){for(var t=n.length-1;t>=0;t--)n[t]==e&&n.splice(t,1);e.destroy()},removeWordFromList:function(e,n){var t=n.indexOf(e);t>-1&&n.splice(t,1),e.destroy()},getCourseByLevel:function(e){var t=n.defer();return Parse.Cloud.run("getCourseByLevel",{level:e}).then(function(e){t.resolve(e)}),t.promise},createCourse:function(e){var t=n.defer(),i=new s,r=new Date;i.set("name",e.name),i.set("level",e.level),i.set("createdBy",Parse.User.current()),i.set("time",r),i.set("is_course",!0),i.set("access_code",e.access_code),i.set("cost",e.cost),i.set("dec",e.dec),i.set("live",e.live),i.set("payment_type",e.payment_type);var l=new Parse.ACL(Parse.User.current());return l.setPublicReadAccess(!0),i.setACL(l),i.save().then(function(e){t.resolve(e);var n=a.user,s=new o;s.set("email",n.get("email")),s.set("username",n.get("username")),s.set("name",n.get("username")),s.set("student_id",n.id),s.set("class_id",e.id),s.set("teacher",!0);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.save()}),t.promise},createClass:function(e){var t=n.defer(),i=new s,r=new Date;i.set("name",e.name),i.set("level",e.level),i.set("user_id",a.user.id),i.set("time",r);var l=new Parse.ACL(Parse.User.current());return l.setPublicReadAccess(!0),i.setACL(l),i.save().then(function(e){t.resolve(e);var n=a.user,s=new o;s.set("email",n.get("email")),s.set("username",n.get("username")),s.set("name",n.get("username")),s.set("student_id",n.id),s.set("class_id",e.id),s.set("teacher",!0);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),s.setACL(i),s.save()}),t.promise},searchStudentByEmail:function(e){var t=n.defer();return Parse.Cloud.run("searchStudentByEmail",{str:e}).then(function(e){for(var n=e.length-1;n>=0;n--)e[n].protect_email="*"+e[n].get("email").substring(3);t.resolve(e)}),t.promise},saveCatWordsAsClass:function(e,t){for(var o="",i=t.length-1;i>=0;i--)o+=t[i].get("name");var l=n.defer(),d=new Parse.Query(s);return d.equalTo("user_id",a.user.id),d.equalTo("cat_id",e),d.equalTo("link_lemms",o),d.find({success:function(n){if("undefined"!=typeof n[0])l.resolve(n[0]);else{{var i=new s;new Date}i.set("name","Temp print category"),i.set("user_id",a.user.id),i.set("cat_id",e),i.set("type","print_cat"),i.set("link_lemms",o);var d=new Parse.ACL(Parse.User.current());d.setPublicReadAccess(!0),i.setACL(d),i.save().then(function(e){for(var n=[],a=t.length-1;a>=0;a--){var s=t[a],o=new r;o.set("origin_obj_id",s.get("define_id")),o.set("origin_obj_lemma",s.get("name")),o.set("lemma_define",s.get("definition")),o.set("sample",s.get("sample")),o.set("pos",s.get("pos")),o.set("word_id",s.get("define_id")),o.set("define_id",s.get("define_id")),o.set("class_name",e.get("name")),o.set("class_id",e.id);var i=new Parse.ACL(Parse.User.current());i.setPublicReadAccess(!0),o.setACL(i),26>=a?o.set("isPrintable",!0):o.set("isPrintable",!1),n.push(o)}Parse.Object.saveAll(n,function(){l.resolve(e)})})}}}),l.promise}}}]),angular.module("triAngularEmail").factory("InitService",["$translate","$cookies","AddWordService","ClassService","ReviewService","ParseService","SideMenu","EmailService","$mdToast","$state","$stateParams","$rootScope",function(e,n,t,a,s,o,i,r,l,d,c,m){return m.gb={},{init:function(e){m.user=Parse.User.current();{var e=m.user;e.get("user_role")}a.init(),i.addRoleMenu(e),s.get_review_time(),e.get("user_avatar")||e.set("user_avatar","assets/images/avatars/avatar-1.png");var n=e.get("login_time")?e.get("login_time"):0;n+=1,e.set("login_time",n);var o=new Date;e.set("last_login",o),e.save(),m.user_avatar=e.get("user_avatar")?e.get("user_avatar"):"assets/images/avatars/avatar-1.png",m.gb.wordListNum=0,r.setUpdateEmail(),t.updateCache(),t.updateUserStudyListLemma(),s.remove_repeat_spword(),this.createCourse()},createCourse:function(){var e=n.get("timeToAddCourseReview");e||"student"!=m.user.get("user_role")||o.getOneCourseData().then(function(e){if(e){var t=new Date;t.setTime(t.getTime()+216e5),n.put("timeToAddCourseReview",!0,{expires:t}),o.getOneCourseData().then(function(e){e&&o.getOneCourseData().then(function(e){e&&o.getOneCourseData().then(function(e){e&&o.getOneCourseData()})})})}})}}}]),angular.module("triAngular").run(["$templateCache",function(e){e.put("app/class-module/class-edit-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span ng-if = "!cl.get(\'is_course\')">Edit class</span>\n              <span ng-if = "cl.get(\'is_course\')">Edit course</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content ng-if = "!cl.get(\'is_course\')">\n                <p></p>\n                <p></p>\n                <br/>\n                <md-input-container >\n                    <label>Add name for class</label>\n                    <input ng-model= "edit_class.name" type="text">\n                </md-input-container>\n\n                <md-input-container>\n                    <label>Class level</label>\n                    <md-select placeholder="Pick" ng-model="edit_class.level">\n                        <md-option value="A1, Beginner">A1, Beginner</md-option>\n                        <md-option value="A2, Elementary">A2, Elementary</md-option>\n                        <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                        <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                        <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                        <md-option value="C2, Advanced">C2, Advanced</md-option>\n                    </md-select>\n                    \n                </md-input-container>\n\n                <md-button palette-background="pink:400" ng-click="editClass()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">Save</md-button>\n\n            </md-content>\n\n            <md-content ng-if = "cl.get(\'is_course\')">\n                <p></p>\n                <p></p>\n                <br/>\n                \n\n                <md-input-container layout-padding>\n                    <label for="course_title">Add title for course</label>\n                    <input id="course_title" label="course_title" name="course_title" type="text" ng-model="edit_class.name"/>\n                </md-input-container>\n\n                <md-input-container layout-padding>\n                    <label for="course_dec">Add description for course</label>\n\n                    <textarea id="course_dec" label="course_dec" name="course_dec" type="text" ng-model="edit_class.dec"></textarea>\n                </md-input-container>\n\n                <md-radio-group ng-model="edit_class.payment_type">\n                    <md-radio-button value="free">Free</md-radio-button>\n                    <md-radio-button value="paid">Paid</md-radio-button>\n                </md-radio-group>\n\n                <md-input-container layout-padding ng-if = "edit_class.payment_type == \'paid\' ">\n                    <label for="course_cost">Add fee and payment details</label>\n                    <input id="course_cost" label="course_cost" name="course_cost" type="text" ng-model="edit_class.cost"/>\n                </md-input-container>\n\n                <md-input-container layout-padding>\n                    <label for="access_code">Enter an access code</label>\n                    <input id="access_code" label="access_code" name="access_code" type="text" ng-model="edit_class.access_code"/>\n                </md-input-container>\n\n\n                <div ng-if = "!edit_class.live">\n                    <md-button ng-click="contactUs(edit_class)" class="md-raised md-primary" aria-label="request activation">request activation</md-button>\n                    \n                     <p  style = "padding:8px;color:red;">\n                        Your course cannot be published yet! Click the button above to request Wordiser to activate your course.\n                    </p>\n                </div>\n\n               \n\n                <md-input-container>\n                    <label>Class level</label>\n                    <md-select placeholder="Pick" ng-model="edit_class.level">\n                        <md-option value="A1, Beginner">A1, Beginner</md-option>\n                        <md-option value="A2, Elementary">A2, Elementary</md-option>\n                        <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                        <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                        <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                        <md-option value="C2, Advanced">C2, Advanced</md-option>\n                    </md-select>\n                    \n                </md-input-container>\n                <p>Level: {{edit_class.level}}</p>\n\n\n                <md-button palette-background="pink:400" ng-click="editClass()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">Save</md-button>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/class.tmpl.html",'<md-content class="padded-content-page tm">\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n            <div class="pagging">\n                <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n            </div>\n        </div>\n    <div class="" layout="row" layout-align="center center">\n        \n\n        <div class="class">\n\n                \n            <md-card class="md-cyan-theme">\n                <md-toolbar class="md-accent md-cyan-theme">\n                    <div class="md-toolbar-tools">\n                        <h3>Manager</h3>\n                    </div>\n                </md-toolbar>\n                <md-card-content>\n\n                    <table class="md-table class-list">\n                        <thead>\n                            <tr>\n                                <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                                <th style = "width:20%;"><span class = "font-black">CLASS/COURSE</span></th>\n                                <th style = "width:20%;"><span class = "font-black">LEVEL</span></th>\n                                <th ><span class = "font-black">ACTIONS</span></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                           <tr ng-repeat="class in myClasses" ng-if = "!class.hide_for_class" >\n                                <td >{{class.get(\'time\') | date:\'dd-MM-yyyy\'}}</td>\n                                <td >{{class.get(\'name\')}} \n                                    <span ng-if = "class.get(\'live\')" style = "color:green;">Live</span>\n                                    <span ng-if = "class.get(\'is_course\') && !class.get(\'live\')" style = "color:red;">Not live</span>\n                                </td>\n                                <td >{{class.get(\'level\')}}</td>\n                                <td >\n\n                                <md-button  palette-background="pink:400"  class="md-raised md-primary font-white" aria-label="Student list">\n                                    <a ui-sref="admin-panel.default.student({ classid: class.id,classname:class.get(\'name\')})" >\n                                        <span hide-xs hide-sm>MANAGE STUDENTS</span>\n                                        <span hide-gt-sm>STUDENTS</span>\n                                    </a>\n                                </md-button>\n\n                                <md-button palette-background="pink:400"  ng-click = \'editClass(class)\' class="md-raised md-primary" aria-label="Class">EDIT</md-button>\n\n                                <md-button palette-background="pink:400" ng-click = \'deleteClass(class)\' class="md-raised md-primary" aria-label="Delete" ng-if = "class.get(\'name\') != \'My List (Default)\' ">DELETE</md-button>\n\n                                </td>\n                            </tr>\n                            \n                        </tbody>\n                    </table>\n                </md-card-content>\n            </md-card>\n\n\n            <md-card class="md-cyan-theme">\n                <md-toolbar class="md-accent md-cyan-theme">\n                    <div class="md-toolbar-tools">\n                        <h3>Add a class/course</h3>\n                    </div>\n                </md-toolbar>\n\n                <md-card-content>\n\n                    <md-radio-group class = "class_type_radio" ng-model="class_type">\n                        <md-radio-button value="class">\n                            Select, if you want to share class notes and exercies with students\n                        </md-radio-button>\n                        <md-radio-button ng-if = "user.get(\'admin\') || user.get(\'author\')" value="course">\n                            Select, if you want to set up a specific online course\n                        </md-radio-button>\n                    </md-radio-group>\n\n                    <p ng-if = "class_type == \'course\'">\n                        You will need to contact us before your course can go live. Just go to HELP and click the button CONTACT US.\n                    </p>\n\n                    <div class="add-course"  ng-if = "class_type == \'course\' ">\n                        <md-input-container layout-padding>\n                            <label for="course_title">Add title for course</label>\n                            <input id="course_title" label="course_title" name="course_title" type="text" ng-model="new_course.name"/>\n                        </md-input-container>\n\n                        <md-input-container layout-padding>\n                            <label for="course_dec">Add description for course</label>\n                            <textarea id="course_dec" label="course_dec" name="course_dec" type="text" ng-model="new_course.dec"></textarea>\n                        </md-input-container>\n\n                        <md-radio-group ng-model="new_course.payment_type">\n                            <md-radio-button value="free">Free</md-radio-button>\n                            <md-radio-button value="paid">Paid</md-radio-button>\n                        </md-radio-group>\n\n                        <md-input-container layout-padding ng-if = "new_course.payment_type == \'paid\' ">\n                            <label for="course_cost">Add fee and payment details</label>\n                            <input id="course_cost" label="course_cost" name="course_cost" type="text" ng-model="new_course.cost"/>\n                        </md-input-container>\n\n                        <md-input-container>\n                            <label>Class level</label>\n                            <md-select placeholder="Pick" ng-model="new_course.level">\n                                <md-option value="A1, Beginner">A1, Beginner</md-option>\n                                <md-option value="A2, Elementary">A2, Elementary</md-option>\n                                <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                                <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                                <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                                <md-option value="C2, Advanced">C2, Advanced</md-option>\n                            </md-select>\n                            \n                        </md-input-container>\n                        <p>Level: {{new_course.level}}</p>\n\n\n                        <div class = "tile-buttons">\n                            <md-button ng-disabled = "!new_course.name || !new_course.dec || !new_course.level" palette-background="pink:400" ng-click = "addCourse()" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">Save</md-button>\n                        </div>\n                    </div>\n                    \n                    <div class="add-class" ng-if = "class_type == \'class\' ">\n                        <form class="form-horizontal" role="form" ng-submit = "createClass()">\n                            <md-input-container>\n                                <label>Add name for class</label>\n                                <input ng-model="new_class.name" type="text" >\n                            </md-input-container>\n\n                            <md-input-container>\n                                <label>Course level</label>\n                                <md-select placeholder="Pick" ng-model="new_class.level">\n                                    <md-option value="Any level">Any level</md-option>\n                                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                                    <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                                </md-select>\n                                \n                            </md-input-container>\n                            <p>Level: {{new_class.level}}</p>\n\n                            \n\n                            <md-button ng-disabled="!new_class.name || !new_class.level" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="Save classes">Save</md-button>\n                        </form>\n                    </div>\n                    \n                </md-card-content>\n            </md-card>\n        </div>\n    </div>\n</md-content>'),e.put("app/class-module/classwordlist.tmpl.html",'<md-content class="bg-tm padded-content-page review-page classwordlist" style="background:rgba(0, 0, 0, 0) !important">\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <div flex>\n        <md-button ng-if = "class.get(\'name\') != \'My Share\' " ng-click="changeClass(class)" ng-repeat="class in myClasses" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add">{{class.get(\'name\')}}</md-button>\n    </div>\n\n    <div class="loading" ng-if = "hide_process">\n        <h3 style= "margin-left:8px;">Loading...</h3>\n    </div>\n\n    <md-card ng-if = "!hide_process" class="md-cyan-theme">\n        <md-toolbar class="md-accent md-cyan-theme">\n            <div class="md-toolbar-tools">\n                <h3>Class progress</h3>\n            </div>\n        </md-toolbar>\n        <md-card-content>\n            <div style = "margin-bottom: 8px;">\n                <md-button ng-disabled = "student_page <= 1" ng-click = "prePage()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label=""><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <md-button ng-disabled = "studentReports.length < limit" ng-click = "nextPage()" palette-background="pink:400" class="md-raised md-primary" aria-label=""><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n            </div>\n\n            <md-input-container>\n                <label>Search</label>\n                <input ng-change = "searchStudent()" ng-model="data.search" type="text" >\n            </md-input-container>\n\n            <div ng-repeat="stu in studentReports track by $index" class="student-report ">\n                <div layout="row" layout-sm="column">\n                    <div flex=\'20\' flex-sm=\'100\' class = "avatar-progress-outer">\n                        <div class="name-wrap">\n                            <img ng-src="{{stu.user_avatar}}">\n                            \n                        </div>\n                        <div class="user-name">\n                            {{stu.get(\'name\')}}\n                        </div>\n                        <span class="meta">\n                            {{(student_page - 1) * limit + $index + 1}}\n                        </span>\n                    </div>\n                    <div flex>\n                        <div class="title">\n                            <h3 class = "md-subhead">OVERALL LEARNING SUMMARY</h3>\n                        </div>\n                        <div class="points" layout="row" layout-sm="column" >\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="icon-gps-fixed"></md-icon> Total revised : {{stu.user.get(\'total\') ?  stu.user.get(\'total\')  : 0}}</span>\n\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-check"></md-icon> Total revised correctly : {{stu.user.get(\'right\') ? stu.user.get(\'right\') : 0}}</span>\n\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-times"></md-icon> Total revised incorrectly : {{stu.user.get(\'total\') - stu.user.get(\'right\')}}</span>\n                        </div>\n                        <div layout="row" layout-wrap layout-sm="column" layout-align="start start">\n                            <div layout-padding flex flex-sm="100" class="tile" layout-fill >\n                                <div class="md-whiteframe-z1 widget recent" palette-background="white:100" layout-padding>\n                                    <div class = "recent-lemmas">\n                                        <strong class = "font-purlple">VOCABULARY</strong>\n                                        <span class = "lemma" ng-repeat="lemma in stu.user.get(\'recent_lemmas\') track by $index"  >{{lemma}}<span ng-if = "($index+1) != stu.user.get(\'recent_lemmas\').length">,</span> </span>\n                                    </div>\n\n                                    <div class = "recent-lemmas" style = "margin-top:16px;">\n                                        <strong class = "font-purlple">GRAMMAR</strong>\n                                        <span class = "lemma" ng-repeat="lemma in stu.user.get(\'recent_grammar\') track by $index"  >{{lemma}}<span ng-if = "($index+1) != stu.user.get(\'recent_grammar\').length">,</span> </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <md-button palette-background="pink:400" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add"><span ng-click="stuAllWordsClick(stu)">View full progress</span></md-button>\n                    <md-button palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add" ng-click="composeClick(stu.user)">send message</md-button>\n                </div>\n                <md-divider class="margin-bottom-10 margin-top-10"></md-divider>\n            </div>\n        </md-card-content>\n    </md-card>\n</md-content>'),e.put("app/class-module/empty-student-process-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Help</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <h3>There is no progress yet!</h3>\n            <p>Progress comes from students doing revision. To send your students revision, you must first set up a class for them.</p>\n            <h3>Do you want to do this now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.class">YES</span></md-button>\n            <p>When you have set up classes for your students, you can send them revision in two ways:</p>\n            <p>1). Open a Study Note and save class vocabulary there, along with any notes, grammar points, etc.</p>\n            <p>2). Create a Study List by clicking on the <md-button style = "font-size:20px;" palette-background="pink:400" class="md-raised md-primary" aria-label="Add">+</md-button> button, where you see it. You can add more than one revision item to your list.</p>\n            <h3>Do you want to open a Study Note now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.study-notes({parent_cat_name:\'Class study notes\',parent_cat:\'root\',page:1})">YES</span></md-button>\n\n            <h3>Do you want to find words to add to the Study List now?</h3>\n\n\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1})>YES</span></md-button>\n\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/empty-worksheet-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Help</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <h3>There are no printable worksheets yet!</h3>\n            <p>Worksheets are generated from saved Study Lists, matching exactly what you teach in class.</p>\n            <p>To begin, you should set up class/es for your students first.</p>\n            <h3>Do you want to do this now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.class">YES</span></md-button>\n            <p>Your students will want something to study. You can give this to them in two ways:</p>\n            <p>1). Open a Study Note and save class vocabulary there, along with any notes, grammar points, etc.</p>\n            <p>2). Create a Study List by clicking on the <md-button style = "font-size:20px;" palette-background="pink:400" class="md-raised md-primary" aria-label="Add">+</md-button> button, where you see it. You can add more than one revision item to your list.</p>\n            <h3>Do you want to open a Study Note now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.study-notes({parent_cat_name:\'Class study notes\',parent_cat:\'root\',page:1})">YES</span></md-button>\n\n            <h3>Do you want to find words to add to the Study List now?</h3>\n\n\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1})>YES</span></md-button>\n\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/student-new-top-wordiser-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Help</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content style = "overflow:hidden;" >\n            <h3>How to Use Wordiser!</h3>\n\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed//H9-dNv0mNrE\' frameborder=\'0\' allowfullscreen></iframe></div>\n\n            <p>To begin, use the  <md-button style = "font-size:20px;" palette-background="pink:400" class="md-raised md-primary" aria-label="Add">+</md-button> button next to words and phrases. In your Study List, you can add things to study.</p>\n            <p>When ready, click the Study List icon and SAVE NEW LIST button. Then Wordiser will send you tests. Also, your teacher can send you revision too. So, why not ask them!?</p>\n            <h3>Do you want to study something now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1})>YES</span></md-button>\n\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/student.tmpl.html",'<md-content class="padded-content-page" style="background:rgba(255,255,255,0.1)!important">\n    <div class="" layout="row" layout-align="center center">\n        <div class="class">\n            <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n                <div class="pagging">\n                    <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n                </div>\n            </div>\n            <md-card class="md-cyan-theme">\n                <md-toolbar class="md-accent md-cyan-theme">\n                    <div class="md-toolbar-tools">\n                        <h3>Manage students</h3>\n                    </div>\n                </md-toolbar>\n                <md-card-content>\n                    <p><strong>Note:</strong> Ask your students to sign up and join first. Then add them to the class. If not here, then you can invite them by using their email.</p>\n\n                    <md-input-container>\n                        <label>Search</label>\n                        <input ng-change = "searchStudent()" ng-model="search_student" type="text" >\n                    </md-input-container>\n\n\n\n                    <table class="md-table class-list">\n                        <thead>\n                            <tr>\n                                <th style="width:5%;"><span class="font-black">ID</span></th>\n                                <th style="width:20%;"><span class="font-black">DATE</span></th>\n                                <th style="width:25%;"><span class="font-black">NAME</span></th>\n                                <th style="width:20%;" hide-sm><span class="font-black">EMAIL</span></th>\n                                <th style="width:20%;"><span class="font-black">CLASS</span></th>\n                                <th style="width:10%;"><span class="font-black">ACTION</span></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat="student in classStudentList track by $index" ng-if = "student.get(\'student_id\') != user.id">\n                                <td>{{(student_page-1) * limit + $index + 1}}</td>\n                                <td>{{student.get(\'createdAt\') | date:\'dd-MM-yyyy\'}}</td>\n                                <td>{{student.get(\'username\') }}</td>\n                                <td hide-sm>{{student.protect_email}}</td>\n                                <td>{{classname}}</td>\n                                <td>\n                                    <md-button palette-background="pink:400" ng-click=\'removeStudentFromClass(student)\' class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n\n                    <div style = "margin-top:8px;padding:0;overflow: auto;width: 100%" >\n                        <md-button ng-disabled = "classStudentList.length < limit" ng-click = "nextPage()" style = "float:right;" palette-background="pink:400" class="md-raised md-primary" aria-label=""><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n\n                        <md-button ng-disabled = "student_page <= 1" ng-click = "prePage()" style = "float:right;" palette-background="pink:400" class="md-raised md-primary" aria-label=""><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n                    </div>\n\n                    \n                </md-card-content>\n            </md-card>\n            <md-card class="md-cyan-theme">\n                <md-toolbar class="md-accent md-cyan-theme">\n                    <div class="md-toolbar-tools">\n                        <h3>Add a student</h3>\n                    </div>\n                </md-toolbar>\n                <md-card-content>\n                    <form class="form-horizontal" role="form">\n                        <md-input-container>\n                            <label>Enter name or email</label>\n                            <input ng-change=\'searchStudentByEmail()\' ng-model-options=\'{ debounce: 1500 }\' ng-model="student.email" type="text">\n                        </md-input-container>\n                    </form>\n\n                    <div class="invited-student-signup" ng-if = "student.email && !searchUserList[0] && if_email">\n                        <p><strong>{{student.email}}</strong> has not joined Wordiser yet. Invite them to join!</p>\n\n                        <md-button style = "margin-left: 0" ng-disabled = "student.disable" palette-background="pink:400" ng-click=\'invite()\' class="md-raised md-primary" aria-label="Invite">Invite</md-button>\n                    </div>\n\n                    <table class="md-table class-list" ng-if = "searchUserList[0]">\n                        <thead>\n                            <tr>\n                                <th style="width:30%;"><span class="font-black">NAME</span></th>\n                                <th style="width:30%;"><span class="font-black">EMAIL</span></th>\n                                <th><span class="font-black">ACTION</span></th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat="user in searchUserList">\n                                <td>{{user.get(\'username\')}}</td>\n                                <td>{{user.protect_email}}</td>\n                                <td>\n                                    <md-button palette-background="pink:400" ng-click=\'addStudentToClass(user)\' class="md-raised md-primary" aria-label="Delete">ADD</md-button>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </md-card-content>\n            </md-card>\n        </div>\n    </div>\n</md-content>'),e.put("app/class-module/teacher-new-top-wordiser-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Help</span>\n            </h2>\n            \n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content style = "overflow:hidden;">\n            <h3>How to Use Wordiser!</h3>\n            <p>Wordiser let\'s teachers save class notes and vocabulary revision lists. These are then used to send students automated revision tests, and/or for printable class worksheets.</p>\n\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed//9iOHSMGPgsY\' frameborder=\'0\' allowfullscreen></iframe></div>\n            \n\n            <p>To begin, you should set up class/es for your students first.</p>\n            <h3>Do you want to do this now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.class">YES</span></md-button>\n            <p>Your students will want something to study. You can give this to them in two ways:</p>\n            <p>1). Open a Study Note and save class vocabulary there, along with any notes, grammar points, etc.</p>\n            <p>2). Create a Study List by clicking on the <md-button style = "font-size:20px;" palette-background="pink:400" class="md-raised md-primary" aria-label="Add">+</md-button> button, where you see it. You can add more than one revision item to your list.</p>\n            <h3>Do you want to open a Study Note now?</h3>\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click="cancel()" ui-sref="admin-panel.default.study-notes({parent_cat_name:\'Class study notes\',parent_cat:\'root\',page:1})">YES</span></md-button>\n\n            <h3>Do you want to find words to add to the Study List now?</h3>\n\n\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1})>YES</span></md-button>\n\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/wordlist.tmpl.html",'<md-content class="padded-content-page " style="background:rgba(255,255,255,0.1) !important">\n\n    <div class="" layout="row" layout-align="center center">\n        <div class="class">\n        \n        	<div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n	        <div class="pagging">\n	            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n	        </div>\n\n	    </div>\n           <md-card class="md-cyan-theme">\n	            <md-toolbar class="md-accent md-cyan-theme">\n	                <div class="md-toolbar-tools">\n	                    <h3>Class study list</h3>\n	                </div>\n	            </md-toolbar>\n\n	            <md-card-content>\n	            <div class="pagging">\n		            <md-icon class = "hand" md-font-icon="icon-chevron-left" ui-sref="admin-panel.default.wordlist({classid:classid,page:pre})"></md-icon>\n		            <md-icon class = "hand" md-font-icon="icon-chevron-right" ui-sref="admin-panel.default.wordlist({classid:classid,page:nex})"></md-icon>\n		        </div>\n	                <table class="md-table class-list" ng-if = "classWordList[0]">\n	                    <thead>\n	                        <tr>\n	                        	<th style = "width:10%;"><span class = "font-black">ID</span></th>\n	                            <th style = "width:30%;"><span class = "font-black">DATE</span></th>\n	                            <th style = "width:30%;"><span class = "font-black">WORD / PHRASE</span></th>\n	                            <th ><span class = "font-black">ACTION</span></th>\n	                        </tr>\n	                    </thead>\n	                    <tbody >\n	                       <tr ng-repeat="word in classWordList track by $index" >\n	                       		<td>{{$index + 1 +(page -1 )* 30 }}</td>\n	                            <td >{{word.get(\'adddate\') | date:\'dd-MM-yyyy\'}}</td>\n	                            <td class = "hand font-purple"  ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})">{{word.get(\'lemma\')}}</td>\n	                            <td >\n	                            	<md-button ng-click = \'removeWordFromClass(word)\' palette-background="pink:400" class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n	                            </td>\n	                        </tr>\n	                        \n	                    </tbody>\n	                    <tbody>\n	                    	<p ng-if = "empty_result && !classWordList[0]">Empty result! Please go back.</p>\n	                    </tbody>\n	                    \n	                </table>\n\n	            </md-card-content>\n	        </md-card>\n        </div>\n    </div>\n</md-content>'),e.put("app/class-module/worksheet-home.tmpl.html",'<md-content class="padded-content-page  notic-category tm">\n	\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <div>\n        <md-button ng-repeat="cls in myClasses" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]"  aria-label="{{cls.get(\'name\')}}"><div  ui-sref="admin-panel.default.worksheet({classid:cls.id,classname:cls.get(\'name\')})">{{cls.get(\'name\')}}</div></md-button>\n    </div>\n\n\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start" >\n        \n        <div class="tile" layout-fill >\n            <div class = "white-bg" layout-margin palette-background="myPurple:500">                \n                <h3 class="md-display-1 white-bg" layout-padding layout-align="start start" >\n                        <md-icon class = "md-display-1 text-shadow" md-font-icon="fa fa-print"></md-icon>\n                         <md-button palette-background="pink:400" ng-click=\'popSelectSubject()\' class="md-raised md-primary" aria-label="SELECT SUBJECTs"> SELECT SUBJECTs</md-button>\n                </h3>\n                <div class="fixed-height work-sheet-print-select" layout-padding >\n                        \n                </div>\n            </div>\n        </div>\n\n\n        <div class = "tile hand" layout-fill ng-repeat="cls in myClasses"  >\n            \n            <div  ng-if = "!cls.get(\'is_course\')" class = "white-bg" layout-margin palette-background="myPurple:500" ui-sref="admin-panel.default.worksheet({classid:cls.id,classname:cls.get(\'name\')})">\n               \n               <h3  class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "text-shadow md-display-1" md-font-icon="fa fa-folder"></md-icon><span class = "text-shadow">{{cls.get(\'name\')}}</span></h3>\n\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n            </div>\n            \n        </div>\n\n    </div>\n</md-content>   '),e.put("app/class-module/worksheet.tmpl.html",'<md-content class="padded-content-page  notic-category tm">\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n            <span ng-if="classname" style="font-size: 20px;">{{classname}}</span>\n        </div>\n    </div>\n    <div>\n        <md-button ng-if = "!cls.hide_for_class" ng-repeat="cls in myClasses" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="{{cls.get(\'name\')}}">\n            <div ui-sref="admin-panel.default.worksheet({classid:cls.id,classname:cls.get(\'name\')})">{{cls.get(\'name\')}}</div>\n        </md-button>\n    </div>\n    <div layout="row" layout-wrap layout-sm="column" layout-align="start start">\n\n\n     <div class="tile" layout-fill >\n        <div class = "white-bg" layout-margin palette-background="myPurple:500">                \n            <h3 class="md-display-1 white-bg" layout-padding layout-align="start start" >\n                    <md-icon class = "md-display-1 text-shadow" md-font-icon="fa fa-print"></md-icon>\n                     <md-button class="md-raised md-hue-2 md-button md-ink-ripple"  style="background:purple;height:40px;vertical-align:middle;" ng-click=\'popSelectSubject()\'>\n                            SELECT SUBJECTs\n                     </md-button>\n            </h3>\n            <div class="fixed-height work-sheet-print-select" layout-padding >\n                    \n            </div>\n        </div>\n    </div>\n\n     <div class="tile" layout-fill >\n            <div class = "white-bg" layout-margin palette-background="myPurple:500">                \n                <h3 class="md-display-1" layout-padding layout-align="start start" >\n                        <md-icon class = "md-display-1 text-shadow" md-font-icon="fa fa-print"></md-icon>\n                         <md-button class="md-raised md-hue-2 md-button md-ink-ripple"  style="background:purple;height:40px;vertical-align:middle;" ng-click=\'loadWorksheetData()\'>\n                                SELECT WORDS\n                         </md-button>\n                </h3>\n                <md-select class="work-sheet-print-select" layout-padding placeholder="---SELECT WORKSHEET TO PRINT---" ng-model="select_class">\n                        <md-option ng-repeat="option in selects" class = "font-purple" ng-click="printAllOpenLink(option.uri)">\n                        <!-- \n                              <span  ng-click="printAllOpenLink(option.uri,\'\',option.type)"> -->\n                                {{option.name}}<!-- \n                            </span>\n                            <md-button class="md-warn md-raised md-hue-2 md-button md-ink-ripple" ng-click=\'loadWorksheetData(option.type)\'>\n                                LOAD\n                            </md-button> -->\n                    </md-option>\n                </md-select>\n            </div>\n        </div>\n\n        <div class="tile" layout-fill ng-repeat="dateTime in class_word_date_list">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500">\n                \n                <h3 class="md-display-1" layout-padding layout-align="start start" ><md-icon class = "text-shadow md-display-1" md-font-icon="fa fa-list-alt"></md-icon><span class = "text-shadow">  {{dateTime|date:"dd/MM/yyyy"}}</span></h3>\n                <md-select class="font-purple work-sheet-print-select" layout-padding placeholder="---SELECT WORKSHEET TO PRINT---" ng-model="select_class">\n                        <md-option class = " font-purple" ng-repeat="option in selects" ng-click="openLink(option.uri,dateTime,option.type)">\n                                {{option.name}}\n                    </md-option>\n                </md-select>\n            </div>\n        </div>\n    </div>\n</md-content>'),e.put("app/email/email-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="60" flex-sm="100">\n    <md-toolbar  palette-background="myPurple:500" class="toolbar-default">\n        <div class="md-toolbar-tools">\n            <h2>\n                <span>Notices</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n<md-dialog-content class="sticky-container">\n    <div>\n        <md-content>\n            <form name="emailForm" novalidate>\n                <md-input-container ng-if = "user.get(\'user_role\') == \'teacher\' ">\n                    <label>Select a class</label>\n                    <md-select placeholder="Select a class" ng-model="email.classid">\n                        <md-option ng-click = "addSentToClass(class)" value="{{class.id}}" ng-repeat="class in ownClasses">{{class.get(\'name\')}}</md-option>\n                    </md-select>\n                </md-input-container>\n\n                <md-input-container>\n                    <label  >{{select_text}}</label>\n                    <md-select  placeholder="{{select_text}}" ng-model="email.classid">\n                        <md-option ng-click = "addSentToUser(friend)" value="{{friend.id}}" ng-repeat="friend in friends">{{friend.get(\'username\')}}</md-option>\n                    </md-select>\n                </md-input-container>\n\n                <div class="sent-to">\n                    <p>SEND TO:</p>\n\n                    <md-button ng-if = "sent_to_class" palette-background="pink:400" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="{{sent_to_class.get(\'name\')}}" ng-click = "removeSentToClass(sent_to_class)" >{{sent_to_class.get(\'name\')}}</md-button>\n\n                    <md-button ng-repeat="user in sent_to_users" palette-background="pink:400" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="{{user.get(\'username\')}}"  ng-repeat="user in sent_to_users" ng-click = "removeSentToUser(user)" >{{user.get(\'username\')}}</md-button>\n                </div>\n\n                <md-input-container>\n                    <label for="subject">Subject</label>\n                    <input ng-model="email.subject" name="subject" required>\n                    <div ng-messages="emailForm.subject.$error">\n                        <div ng-message when="required">\n                            Please enter a subject for the message.\n                        </div>\n                    </div>\n                </md-input-container>\n\n                <md-input-container flex>\n                    <text-angular name="emailBody" ng-model="email.content" ta-target-toolbars="editor-toolbar"></text-angular>\n                </md-input-container>\n            </form>\n        </md-content>\n    </div>\n\n</md-dialog-content>\n\n<div class="md-actions" layout="row">\n    <text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n    <span flex></span>\n    <md-button ng-if = "sent_to_class" ng-click="sendToCLass()" palette-background="myPurple:400" class="md-primary"  ng-disabled="checkSendDisabled()" aria-label="send">\n    {{\'EMAIL.COMPOSE.SEND\' | translate}}\n    </md-button>\n\n    <md-button ng-if = "!sent_to_class" ng-click="sendToUsers()" palette-background="myPurple:400" class="md-primary"  ng-disabled="checkSendDisabled()" aria-label="send">\n    {{\'EMAIL.COMPOSE.SEND\' | translate}}\n    </md-button>\n</div>'),e.put("app/email/email-to-persion-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="60" flex-sm="100">\n    <md-toolbar  palette-background="myPurple:500" class="toolbar-default">\n        <div class="md-toolbar-tools">\n            <h2>\n                <span>Notices</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n<md-dialog-content class="sticky-container">\n    <div>\n        <md-content>\n            <form name="emailForm" novalidate>\n                <md-input-container>\n                    <label>To:  &nbsp; {{email.persion_name}}</label>\n                </md-input-container>\n\n                <md-input-container>\n                    <label for="subject">Subject</label>\n                    <input ng-model="email.subject" name="subject" required>\n                    <div ng-messages="emailForm.subject.$error">\n                        <div ng-message when="required">\n                            Please enter a subject for the message.\n                        </div>\n                    </div>\n                </md-input-container>\n\n                <md-input-container flex>\n                    <text-angular name="emailBody" ng-model="email.content" ta-target-toolbars="editor-toolbar"></text-angular>\n                </md-input-container>\n            </form>\n        </md-content>\n    </div>\n\n</md-dialog-content>\n\n<div class="md-actions" layout="row">\n    <text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n    <span flex></span>\n    <md-button ng-click="send()" palette-background="myPurple:400" class="md-primary"  ng-disabled="\n    !email.subject || !email.content" aria-label="send">\n    {{\'EMAIL.COMPOSE.SEND\' | translate}}\n    </md-button>\n</div>'),e.put("app/email/email.tmpl.html",'<md-content class="email-single md-padding">\n    <md-card flex style="background:rgba(255,255,255,0.4)">\n        <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}">\n            <div layout="row" layout-align="space-between start">\n                <div class="email-single-title" flex = 80>\n                    <h3 class="md-title" flex>{{email.get(\'fromname\')}}</h3>\n                    <span class="md-body-2"><span  style="font-weight: bold;">Subject: </span><span>{{email.get(\'subject\')}}</span></span>\n                    <span class="md-caption" am-time-ago="email.createdAt"></span>\n                    \n                </div>\n                <div layout="row" layout-align="space-between center" flex = 20>\n                    \n                    <md-menu>\n                        <md-button class="md-icon-button" aria-label="Open email interactions menu" ng-click="menuClick($event);$mdOpenMenu();">\n                            <md-icon md-font-icon="icon-more-vert"></md-icon>\n                        </md-button>\n                        <md-menu-content width="3">\n                            <md-menu-item>\n                                <md-button ng-click="remove(email)">\n                                    <md-icon md-font-icon="icon-close"></md-icon>\n                                    Remove\n                                </md-button>\n                            </md-menu-item>\n                            <md-menu-divider></md-menu-divider>\n                            \n                            <md-menu-item  ng-if="(pageCurrent==\'inbox\'&&!email.get(\'define_id\'))  && !email.get(\'noreply\') ">\n                                <md-button ng-click="replyEmailAction(email)" aria-label="{{\'EMAIL.REPLY\' | translate}}">\n                                    <md-icon md-font-icon="icon-reply"></md-icon>\n                                    {{\'EMAIL.REPLY\' | translate}}\n                                </md-button>\n                            </md-menu-item>\n                            \n                            \n                        </md-menu-content>\n                    </md-menu>\n                </div>\n            </div>\n        </md-toolbar>\n        <md-divider></md-divider>\n\n        \n        \n        <div class = "notices-outer" style="background:#fff;">\n            <md-card-content ng-if="email && !email.get(\'define_id\') && email.get(\'type\') != \'extra\'" class = "normal-email">\n\n\n                <div ng-if="(pageCurrent==\'inbox\'&&!email.get(\'define_id\'))  && !email.get(\'noreply\') && email.get(\'userType\') != \'system\' ">\n                    <md-button palette-background="pink:400" ng-click="replyEmailAction(email)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="{{\'EMAIL.REPLY\' | translate}}">{{\'EMAIL.REPLY\' | translate}}</md-button>\n                </div>\n                <p ng-bind-html="email.get(\'content\')"></p>\n            </md-card-content>\n\n\n\n            <md-card-content class="ask-form-mail" ng-if="email.get(\'type\') == \'extra\' && (email.get(\'sub_type\') == \'vote_sentence\' || email.get(\'sub_type\') == \'vote_define\' || email.get(\'sub_type\') == \'vote_relate_word\') ">\n                <p>Hi {{user.get("name")}},</p>\n                </br>\n                <p>A Wordiser user has updated \'{{define.get(\'lemma\')}}\'. This update has not been checked, so your students could be given something with a mistake.</p>\n\n                <div class="defines-data">\n                    <p style = "margin:8px 0;"><span class = "font-purple" style = "font-weight: bold;">{{define.get(\'lemma\')}}</span></p>\n                    <p ng-if = "!vote.get(\'sentence\') && !vote.get(\'relate_word\')" style = "font-weight: bold;margin:8px 0;">(Definition) {{define.get(\'definition\')}}</p>\n\n                    <p ng-if = "!vote.get(\'definition\') && !vote.get(\'relate_word\')" style = "font-weight: bold;margin:8px 0;">{{define.get(\'sentence_main\')}}</p>\n\n                    <p ng-if = "!vote.get(\'definition\') && !vote.get(\'sentence\')" style = "margin:8px 0;"><span ng-repeat="value in define.get(\'synsetlemma\') track by $index" ng-if = "define.get(\'synsetlemma_status\')[$index] != \'disable\' && value != define.get(\'lemma\')">{{value}}<span ng-hide="$last">, </span></span></p>\n                </div>\n\n                <p style = "margin-top:8px;">Could you take a second to check it? </p>\n                \n                <div class="defines-data" style = "font-weight: bold;">\n                    Is this correct and well written for students? Click YES or NO.\n                </div>\n\n                <p>\n                    <md-button ng-disabled = "userInVoteList(vote)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Edit"><span ng-click="yesVote(vote)">Yes</span></md-button>\n\n                    <md-button ng-disabled = "userInVoteList(vote)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Edit"><span ng-click="noVote(vote)">No</span></md-button>\n                </p>\n                </br>\n                <p>Thank you!</p>\n                <p style="font-weight:bold;">The Wordiser Team</p>\n            </md-card-content>\n\n            <md-card-content class="ask-form-mail" ng-if="email.get(\'type\') == \'extra\' && (email.get(\'sub_type\') == \'relate_word\' || email.get(\'sub_type\') == \'spelling\' || email.get(\'sub_type\') == \'pron\' || email.get(\'sub_type\') == \'form\') ">\n                <p>Hi {{user.get("name")}},</p>\n                <p>A user has asked that you fix : \'{{email.get("content")}}\'.</p>\n\n\n                <p style = "margin-top:8px;">Could you please take a second to check and update it?</p>\n                </br>\n\n                <p >\n                    <md-button class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Edit"><span ng-click="updateEntry(email)">UPDATE ENTRY</span></md-button>\n\n                    <md-button ng-disabled = "email.disabled" class="md-raised md-primary" palette-background="pink:400" aria-label="send reply" ng-click="sendUpdateReply(email)">send reply</md-button>\n                </p>\n\n\n\n                </br>\n                <p>Thank you!</p>\n                <p style="font-weight:bold;">The Wordiser Team</p>\n            </md-card-content>\n\n\n            <md-card-content class="ask-form-mail" ng-if="email.get(\'define_id\') && email.get(\'define_type\')==\'askFor\'">\n                <p>Hi {{user.get("name")}},</p>\n                <p>A user has requested to study this: \'{{email.get("content")}}\'. Unfortunately, the dictionary entry is incomplete and needs updating.</p>\n\n                <p style = "margin-top:8px;">Could you please take a second to check and update it?</p>\n                </br>\n                <p>\n                    <md-button class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Edit"><span ng-click="updateEntry(email)">UPDATE ENTRY</span></md-button>\n\n                    <md-button ng-disabled = "email.disabled" class="md-raised md-primary" palette-background="pink:400" aria-label="send reply" ng-click="sendUpdateReply(email)">send reply</md-button>\n                </p>\n                </br>\n                <p>Thank you!</p>\n                <p style="font-weight:bold;">The Wordiser Team</p>\n            </md-card-content>\n            <md-card-content ng-if="email.get(\'define_id\')&&(email.get(\'define_type\')==\'newNote\')">\n                <p>Hi &nbsp; {{user.get("name")}} ,</p>\n                <p>There is a new study note waiting for you!</p>\n                <p style="font-weight:bold;">The Wordiser Team</p>\n            </md-card-content>\n            <md-list ng-if = "replys[0]">\n                <md-list-item ng-repeat="reply in replys">\n                    <div class="md-list-item-text" layout="column">\n                        <p ng-bind-html="reply.get(\'content\')"></p>\n                        <p>\n\n                            <span style="font-weight:bold;" ng-bind-html="reply.get(\'fromname\')"></span>\n                            - <span  am-time-ago="reply.createdAt"></span>\n                        </p>\n\n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n    </md-card>\n</md-content>'),e.put("app/email/inbox.tmpl.html",'<style>\nmd-list.md-purple-theme md-list-item button {\n    background: rgba(255, 255, 255, 0.9);\n}\n\n</style>\n<div class="pagging inbox">\n    <md-icon hide-xs hide-sm class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n\n    <md-icon hide-gt-sm ui-sref = "admin-panel-no-scroll.email.inbox" class=\'hand\' md-font-icon="icon-chevron-left"></md-icon>\n</div>\n<div class="inbox-functions">\n\n    <md-button palette-background="pink:400" ng-click="reverse()" class="margin-left-0 md-raised md-primary" aria-label="{{\'EMAIL.Select_all\' | translate}}">{{\'EMAIL.Select_all\' | translate}}</md-button>\n    <md-button palette-background="pink:400" ng-click="readSelect()" class="margin-left-0 md-raised md-primary" aria-label="{{\'EMAIL.Mark_as_read\' | translate}}">{{\'EMAIL.Mark_as_read\' | translate}}</md-button>\n    <md-button palette-background="pink:400" ng-click="removeSelect()" class="margin-left-0 md-raised md-primary" aria-label="{{\'EMAIL.Remove_selected\' | translate}}">{{\'EMAIL.Remove_selected\' | translate}}</md-button>\n</div>\n<div class="email-inbox full-height overflow-hidden" layout="row" flex>\n    <md-button ng-click="composeClick($event)" class="clock-send-email-pop md-fab md-accent md-fab-top-right" aria-label="{{\'EMAIL.COMPOSE_EMAIL\' | translate}}">\n        <md-icon md-font-icon="icon-create"></md-icon>\n    </md-button>\n    <div class="email-inbox-list" flex="100" flex-gt-sm="50" flex-gt-md="50" flex-gt-lg="40" layout="column" ng-show="showEmailList">\n        <md-content style="background:rgba(255,255,255,0)">\n            <section class="email-inbox-list-animate-repeat" ng-show="emails">\n                <md-list>\n                    <md-list-item class="email-inbox-list-item email-inbox-list-animate-repeat md-3-line" ng-repeat="email in emails" ng-class="emailStatusClass(email)">\n                        <md-checkbox ng-model="email.done"></md-checkbox>\n                        <img ng-if="!email.get(\'user_avatar\')" class="md-avatar animate" ng-src="assets/images/avatars/avatar-4.png" alt="{{email.get(\'fromname\')}}">\n                        <img ng-if="email.get(\'user_avatar\')" class="md-avatar animate" ng-src="{{email.get(\'user_avatar\')}}" alt="{{email.get(\'fromname\')}}">\n                        <div class="md-list-item-text" ng-click="openMail(email)">\n                            <div class="email-inbox-list-item-name-time" layout-sm="column" layout-xs="column" layout="row" layout-align="space-between start">\n                                <h3 class="font-purple">{{email.get(\'fromname\')}}</h3>\n                                <p class="md-caption" am-time-ago="email.createdAt"></p>\n                            </div>\n                            <h4 style="line-height: 1.2em;">{{email.get(\'subject\')}}</h4>\n                            <!-- <p ng-bind-html="email.get(\'content\')"></p> -->\n                        </div>\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n            </section>\n            <h2 ng-show="!emails" style="color:#fff;text-align:center;">{{\'EMAIL.NO_EMAILS_FOUND\' | translate}}</h2>\n        </md-content>\n    </div>\n    <div class="animate-wrapper" layout="column" layout-align="top top" flex="100" flex-gt-sm="50" flex-gt-md="50" flex-gt-lg="40">\n        <div flex id="ui-admin-email" ui-view layout="column" layout-align="top top" class="overflow-auto">\n            <div flex class="email-inbox-no-email-selected" layout="column" layout-align="top top">\n                <h2 hide-sm>No message selected</h2>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("app/email/reply-email-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="60" flex-sm="100">\n<md-toolbar  palette-background="myPurple:500" class="toolbar-default">\n<div class="md-toolbar-tools">\n<h2>\n<span>Reply</span>\n</h2>\n<span flex></span>\n<md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n<md-icon md-font-icon="icon-close"></md-icon>\n</md-button>\n</div>\n</md-toolbar>\n<md-divider></md-divider>\n\n<md-dialog-content class="sticky-container">\n<div>\n<md-content>\n<form class = "emailForm" name="emailForm" novalidate>\n	<md-input-container>\n	<label><strong>Notice :</strong> <span style="text-transform: capitalize;">{{email.type}}</span> </label>\n	\n	</md-input-container>\n        <md-input-container>\n            <input disabled="disable" name="subject" value = "{{email.subject}}">\n        </md-input-container>\n\n        <md-input-container flex>\n            <text-angular name="emailBody" ng-model="email.content" ta-target-toolbars="editor-toolbar"></text-angular>\n        </md-input-container>\n    </form>\n</md-content>\n</div>\n\n</md-dialog-content>\n\n<div class="md-actions" layout="row">\n<text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n<span flex></span>\n<md-button ng-click="reply()" palette-background="myPurple:400" class="md-primary"  ng-disabled="!email.content || email.content == \'\' " aria-label="send">\n{{\'EMAIL.COMPOSE.SEND\' | translate}}\n</md-button>\n</div>'),e.put("app/email/toolbar.tmpl.html",'<div class="md-toolbar-tools relative">\n        <md-button class="md-icon-button" hide-gt-md ng-click="openSideNav(\'left\')" aria-label="side navigation">\n            <md-icon md-font-icon="icon-menu"></md-icon>\n        </md-button>\n\n        <h2 breadcrumbs="menu" flex></h2>\n\n        <md-button class="md-icon-button" ng-click="toggleSearch()" aria-label="{{\'ADMIN.TOOLBAR.SIDEBAR_TOGGLE\' | translate}}">\n            <md-icon md-font-icon="icon-search"></md-icon>\n        </md-button>\n\n\n\n        <input class="toolbar-search" ng-show="showSearch" ng-model="emailSearch" ng-change="filterEmailList(emailSearch)" type="text" placeholder="{{\'EMAIL.TOOLBAR.SEARCH\' | translate}}">\n\n        <md-button class="md-icon-button" ng-repeat="menu in toolbarMenu" ui-sref="{{menu.state}}" aria-label="{{menu.name}}">\n            <md-icon md-font-icon="{{menu.icon}}"></md-icon>\n            <md-tooltip>{{menu.name}}</md-tooltip>\n        </md-button>\n</div>\n\n'),e.put("app/notice-module/class-category-home.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    \n    <!-- others category -->\n    \n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n\n    <div >\n\n        <md-button ng-repeat="cls in myClasses"  class="md-raised md-primary"  ng-class="[buttonClass, buttonHue]"  aria-label="{{cls.get(\'name\')}}"><div ng-click = openLink(\'class\',\'admin-panel.default.notice-category\',{parent_cat:cls.id,page:1})  >{{cls.get(\'name\')}}</div></md-button>\n    </div>\n\n\n    <!-- if root  -->\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start">\n        \n\n        <div class = "tile hand" layout-fill ng-repeat="cls in myClasses"  >\n            \n            <div  layout-margin palette-background="myPurple:500" ng-click = openLink(\'class\',\'admin-panel.default.notice-category\',{parent_cat:cls.id,page:1}) >\n               \n\n                <h3  class = "md-display-1" layout-padding layout-align="start start" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'AcademicEnglish\',page:1}) ><md-icon class = "md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span>{{cls.get(\'name\')}}</span></h3>\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    {{cls.get(\'level\')}}\n                </div>\n                \n            </div>\n            \n        </div>\n\n    </div>\n    <!-- end root -->\n\n</md-content>   '),e.put("app/notice-module/edit-category-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit category</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content >\n               <md-input-container>\n                    <label for="category_title">Category title</label>\n                    <input id="category_title" label="category_title" name="category_title" type="text" ng-model="cat.name"/>\n                </md-input-container>\n\n                <md-select placeholder="---SELECT LEVEL---" ng-model="cat.level">\n                    <md-select-header style = "padding: 0 16px 0 16px;">\n                      <span>---SELECT LEVEL---</span>\n                    </md-select-header>\n                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                    <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                </md-select>\n\n                <md-input-container>\n                    <label for="parent-cat-id">Parent category id</label>\n                    <input id="parent-cat-id" label="parent-cat-id" name="parent-cat-id" type="text" ng-model="cat.parent_cat"/>\n                </md-input-container>\n\n                <md-input-container>\n                    <label for="copy-cat-id">Copy category id</label>\n                    <input id="copy-cat-id" label="copy-cat-id" name="copy-cat-id" type="text" ng-model="cat.copy_cat_id"/>\n                </md-input-container>\n\n                <md-button palette-background="pink:400" ng-click = "save()"  class="md-raised md-primary" aria-label="Clear">Update</md-button>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/notice-module/edit-word-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit definition</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content >\n               <md-input-container>\n                    <label for="word_title">Word</label>\n                    <input disabled="disabled" id="word_title" label="word_title" name="word_title" type="text" ng-model="word.name"/>\n                </md-input-container>\n\n                <md-input-container>\n                    <label for="parent-cat-id">Parent category id</label>\n                    <input ng-change = "changeParentCat()" id="parent-cat-id" label="parent-cat-id" name="parent-cat-id" type="text" ng-model="word.parent_cat"/>\n                </md-input-container>\n\n                <md-button palette-background="pink:400" ng-if  ="word.change_parent_cat" ng-click = "saveParentCat()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save parent cat">Save parent cat</md-button>\n\n                <md-select ng-change = "wordLevelUpdate()" placeholder="---SELECT LEVEL---" ng-model="word.level">\n                    <md-select-header style = "padding: 0 16px 0 16px;">\n                      <span>---SELECT LEVEL---</span>\n                    </md-select-header>\n                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                    <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                </md-select>\n\n                <p ng-if = "word.definition">\n                    <span ng-if = "word.pos == \'v\'">(Verb)</span> \n                    <span ng-if = "word.pos == \'n\'">(Noun)</span> \n                    <span ng-if = "word.pos == \'j\'">(Adjective)</span> \n                    <span ng-if = "word.pos == \'a\'">(Adjective)</span> \n                    <span ng-if = "word.pos == \'s\'">(Adjective)</span> \n                    <span ng-if = "word.pos == \'r\'">(Adverb)</span> \n                    {{word.definition}}\n                    <strong ng-if = "word.sentence_main">e.g. {{word.sentence_main}}</strong>\n\n                     <md-button palette-background="pink:400" ng-if  ="word.define_id" ng-click = "goDetailsPage(word)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                </p>\n\n                <p ng-if = "!word.definition">\n                    Please select word definition\n                </p>\n\n                <md-divider></md-divider>\n\n                <h3>\n                    <span ng-if = "popDefinesShow">Select word type</span>\n                    <span ng-if = "definesDetailsShow">Select definition</span>\n                </h3>\n\n\n                <div class="words popDefinesShow " ng-if = "popDefinesShow && !add_define_box">\n                    <p class = "md-headline" ng-if = "types_option.v">\n                        \n                        <md-checkbox ng-model="type.v" ng-change = "changeTypeSelect(\'v\')" aria-label="Default Checkbox">\n                           Verb\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" ng-if = "types_option.n">\n                         <md-checkbox ng-model="type.n" ng-change = "changeTypeSelect(\'n\')" aria-label="Default Checkbox">\n                           Noun\n                        </md-checkbox>\n                    </p>\n\n                    <p class = "md-headline" ng-if = "types_option.j">\n                        <md-checkbox ng-model="type.j" ng-change = "changeTypeSelect(\'j\')" aria-label="Default Checkbox">\n                        Adjective\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" ng-if = "types_option.r">\n                        <md-checkbox ng-model="type.r" ng-change = "changeTypeSelect(\'r\')" aria-label="Default Checkbox">\n                            Adverb\n                        </md-checkbox>\n                    </p>\n\n                    <md-button  ng-disabled="!type.v && !type.n && !type.j && !type.r" ng-click="changeTyle()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Select definition</md-button>\n\n\n                </div>\n\n                <div ng-show = \'add_define_box\'>\n                    <h3 class="sum-header">Definition</h3>\n                    <md-input-container>\n                        <input  label="lemma" name="definition" type="text" ng-model="definition" />\n                    </md-input-container>\n\n                    <p class = "md-headline" >\n                        \n                        <md-checkbox ng-model="newDefineType.v" aria-label="Default Checkbox">\n                           Verb\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" >\n                         <md-checkbox ng-model="newDefineType.n" aria-label="Default Checkbox">\n                           Noun\n                        </md-checkbox>\n                    </p>\n\n                    <p class = "md-headline" >\n                        <md-checkbox ng-model="newDefineType.j" aria-label="Default Checkbox">\n                        Adjective\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" >\n                        <md-checkbox ng-model="newDefineType.r" aria-label="Default Checkbox">\n                            Adverb\n                        </md-checkbox>\n                    </p>\n\n                    <md-button   ng-click="saveNewDefine()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Save</md-button>\n                    <md-button   ng-click="backSelectDefine()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Back</md-button>\n                </div>\n\n                <div ng-show = \'definesDetailsShow\'  class="defines-list-details trans-bg"> <md-list>\n                    <md-list>\n                        <md-list-item  ng-repeat="define in defines">\n                            \n\n                            <p>\n                                <span ng-if = "define.get(\'pos\') == \'v\'">(Verb)</span> \n                                <span ng-if = "define.get(\'pos\') == \'n\'">(Noun)</span> \n                                <span ng-if = "define.get(\'pos\') == \'j\'">(Adjective)</span> \n                                <span ng-if = "define.get(\'pos\') == \'r\'">(Adverb)</span> \n                                {{define.get(\'definition\')}}\n                                <strong ng-if = "define.get(\'sentence_main\')">e.g. {{define.get(\'sentence_main\')}}</strong>\n                            </p>\n\n                            <md-button palette-background="pink:400" ng-click = "useDefine(define)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Use">Use</md-button>\n\n                            <md-button palette-background="pink:400" ng-click = "goDetailsPage(define)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                        </md-list-item>\n                    </md-list>\n                </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/notice-module/exam-home-page.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    <!-- others category -->\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n            <span style  = "font-size:20px;height:35px;">EXAMS</span>\n        </div>\n    </div>\n\n    \n\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start" ng-if = "parent_cat != \'root\'">\n       \n        <div class = "tile hand" layout-fill>\n            \n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ui-sref="admin-panel.default.exam-cect4-page({parent_cat:\'General English\',page:1})">\n               \n               <h3  class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder"></md-icon><span class = "text-shadow">CECT-4</span></h3>\n\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n            </div>\n            \n        </div>\n\n         <div class = "tile hand" layout-fill>\n            \n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ui-sref="admin-panel.default.exam-pet-page({parent_cat:\'General English\',page:1})">\n               \n               <h3  class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder"></md-icon><span class = "text-shadow">PET</span></h3>\n\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n            </div>\n            \n        </div>\n\n        <div class = "tile hand" layout-fill>\n            \n            <div  class = "white-bg" layout-margin palette-background="myPurple:500" ui-sref="admin-panel.default.exam-ielts-page({parent_cat:\'General English\',page:1})">\n               \n               <h3  class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder"></md-icon><span class = "text-shadow">IELTS</span></h3>\n\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n            </div>\n            \n        </div>\n\n    </div>\n\n</md-content>   '),e.put("app/notice-module/exam-page.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    <!-- others category -->\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n            <span class = "hand" ng-click = "openLink({parent_cat:\'General English\',page:1})" ng-if="exam_title" style="font-size:20px;height:35px;"> {{exam_title}}</span>\n            <span ng-if="current_category" style="font-size:20px;height:35px;"> {{current_category.get(\'name\')}}</span>\n        </div>\n    </div>\n    <div class="cat-nav-wrap" layout-margin>\n        \n    </div>\n\n    <div layout="row" layout-wrap layout-sm="column" layout-align="start start">\n        <div class="tile cat " layout-fill ng-repeat="cat in categorys" ng-class="catClass(cat) " ng-if = "((cat.get(\'children_data_cat\')[0] || cat.get(\'children_data_word\')[0]) && cat.get(\'level\') != \'No level\' ) ||  user.get(\'admin\')">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ng-if="cat.get(\'type\') == \'category\'">\n                <h3 ng-if="!cat.get(\'copy_cat_id\')" class="md-display-1 hand" layout-padding layout-align="start start" ng-click = "openLink({parent_cat:cat.id,page:1})"><md-icon class = " text-shadow md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span class = "text-shadow" title="{{cat.get(\'name\')}}">{{cat.get(\'name\')}}</span>\n\n\n                <h3   ng-if = "cat.get(\'copy_cat_id\')" class = "md-display-1 hand" layout-padding layout-align="start start" ng-click = "openLink({parent_cat:cat.get(\'copy_cat_id\'),page:1})"><md-icon class = " text-shadow md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span class = "text-shadow" title="{{cat.get(\'name\')}}">{{cat.get(\'name\')}}</span>\n                   \n                </h3>\n                <div ng-if="cat.get(\'imagesmain\') &&user.get(\'admin\')" class="imagesmain hand" ng-click="popImageEdit(cat.worddata)">\n                    <img ng-src="{{cat.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n                <div ng-if="cat.get(\'imagesmain\') && !user.get(\'admin\') " class="imagesmain">\n                    <img ng-src="{{cat.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n                <div class="white-bg-60" style="min-height:160px;">\n                    <div class="cat-titles" class="md-subhead">\n                        <span ng-click = "openLink({parent_cat:cat.get(\'children_data_cat_ids\')[$index],page:1})" class="hand white-bg-80 cats-lemma cat" ng-repeat="value in cat.get(\'children_data_cat\') track by $index" title="{{value}}">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            {{value}}\n                        </span>\n                        <span> </span>\n                    </div>\n                    \n                </div>\n                <div ng-if="user.get(\'admin\') " palette-background="myPurple:700" class="tile-buttons">\n                    <md-button palette-background="myPurple:900" ng-click="editCateogry(cat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                    <md-button ng-if="user.get(\'admin\')" palette-background="pink:400" ng-click="popImageEdit(cat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit Image</md-button>\n                    <md-button palette-background="pink:400" ng-click=\'deleteCategory(cat)\' class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n                </div>\n            </div>\n        </div>\n\n\n\n        <div class="tile" layout-fill ng-repeat="word in catWords">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ng-if="word.get(\'type\') == \'word\'">\n                <h3 class="md-display-1" layout-padding layout-align="start start">\n                     \n                    \n\n\n                    <div>\n                        <span style = "font-size:40px;"  class = "text-shadow lemma"  title="{{word.get(\'name\')}} ">{{word.get(\'name\')}} </span>\n\n                         <i ng-if = "inStudyList(word.get(\'name\'))"  class="fa fa-check-circle"></i>\n\n                    </div>\n\n                    <div class = "prons-icons" ng-if = "!word.get(\'uk_pron_ext\')">\n                        <span class = "hand"  ng-click = "speak(word,\'UK English Male\')" >UK <md-icon class = "md-display-1" md-font-icon="hand fa fa-volume-off"></md-icon></span>\n                    \n\n                        <span  ng-click = "speak(word,\'US English Female\')" class = "hand" style = "margin-left:5px;">US <md-icon  class = "md-display-1" md-font-icon="hand fa fa-volume-off"></md-icon></span>\n                    </div>\n                    \n\n            </h3>\n                <div ng-if="word.get(\'imagesmain\') && user.get(\'admin\')" class="imagesmain hand" ng-click="popImageEdit(word)">\n                    <img ng-src="{{word.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n                <div ng-if="word.get(\'imagesmain\') && !user.get(\'admin\')" class="imagesmain ">\n                    <img ng-src="{{word.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n                <div class="white-bg-60" style="min-height:160px;font-weight:bold;">\n                    <p class="tiledata" layout-align="start start" ng-if="word.get(\'definition\')" title="{{word.get(\'definition\')}}">\n                        <span>(Definition)</span> {{word.get(\'definition\')}}\n                    </p>\n                    <p class="tiledata" layout-align="start start" ng-if="word.get(\'sample\')" title="{{word.get(\'definition\')}}">\n                        <i class="fa fa-quote-left"></i> {{word.get(\'sample\')}}\n                    </p>\n                    <div class="word-forms">\n                        <p ng-if="word.worddata.get(\'form_n\') && word.get(\'pos\') == \'n\'">\n                            <span style="margin-right:8px;" class="pos">Noun</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_n_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_n_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'n\' && word.get(\'pos\') == \'n\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_v\') && word.get(\'pos\') == \'v\' ">\n                            <span style="margin-right:8px;" class="pos">Verb</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_c\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_d\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_e\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'v\' && word.get(\'pos\') == \'v\'">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_c\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_d\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_e\')}}</span>\n\n                        </p>\n\n\n                        \n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'j\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n\n\n\n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'s\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'a\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'a\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'j\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'s\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n\n                        <p ng-if="word.worddata.get(\'form_r\') && word.get(\'pos\') == \'r\'">\n                            <span style="margin-right:8px;" class="pos">Adverb</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_r_a\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'r\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                        </p>\n                    </div>\n                    <p ng-if="!word.get(\'definition\')">Please edit definition</p>\n                    <p class="level hand" style="padding-left:16px;font-weight:bold;"  ng-if = "word.get(\'level\') != \'No level\' ">\n                        {{word.get(\'level\') ? word.get(\'level\') : \'A1, Beginner\'}}\n                        <md-icon ui-sref="admin-panel.default.word-page({lemma:word.get(\'name\'),originlemma:word.get(\'name\')})" md-font-icon="icon-keyboard-arrow-right" class="md-primary"></md-icon>\n                    </p>\n                </div>\n                <div class="md-subhead" layout="column" layout-padding layout-align="start start" ui-sref="admin-panel.default.word-page({lemma:word.get(\'name\'),originlemma:word.get(\'name\')})">\n                </div>\n                <div palette-background="myPurple:700" class="tile-buttons" style="overflow:auto;">\n                    <md-button ng-if="user.get(\'admin\')" palette-background="myPurple:900" ng-click="editWord(word)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                    <md-button ng-if="user.get(\'admin\')" palette-background="pink:400" ng-click="popImageEdit(word)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit Image</md-button>\n                    <md-button ng-if="user.get(\'admin\')" palette-background="pink:400" ng-click=\'deleteWord(word)\' class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n                    <md-button ng-disabled = "word.disabled" style="float:right;" ng-disabled="!word.get(\'definition\')" ng-click="addWordByDefineId(word)" palette-background="pink:400" class="md-raised md-primary glowing" aria-label="Add"><md-icon md-font-icon="icon-add"></md-icon>study</md-button>\n                </div>\n                <div ng-if="false " style="min-height:200px;padding-left:8px;">\n                    <p> <span style="margin-right:8px;" ng-repeat="wd in word.dfdata.get(\'synsetlemma\')">{{wd}}</span></p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <ad4game></ad4game>\n</md-content>'),e.put("app/notice-module/help-wordiser.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    \n    <!-- others category -->\n    \n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            \n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n            <span  style  = "font-size:20px;">HELP</span>\n        </div>\n    </div>\n\n    \n\n    <div >\n        <md-button ng-click="contactUs()" class="md-raised md-primary" aria-label="Contact us">Contact us</md-button>\n    </div>\n\n\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start" ng-if = "parent_cat != \'root\'">\n\n        <div class = "tile hand" layout-fill ng-repeat="cat in studyNotesCat"   >\n            <div class = "white-bg layout-margin palette-background="myPurple:500" ng-if = "cat.get(\'type\') == \'category\'">\n                <h3 ng-class = "catTypeClass(cat)" class = "md-display-1" layout-padding layout-align="start start" ui-sref="admin-panel.default.study-notes({parent_cat_name:cat.get(\'name\'),parent_cat:cat.get(\'cat_id\'),page:1})"><md-icon class = "md-display-1" md-font-icon="text-shadow fa fa-folder"></md-icon><span class = "text-shadow">{{cat.get(\'name\')}}</span></h3>\n\n\n                <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n            </div>\n        </div>\n\n        <div ng-if = "user.id == note.get(\'user\') || !note.hide "  class = "tile hand" layout-fill ng-repeat="note in studyNotes.slice().reverse()"   >\n\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ng-if = "note.get(\'type\') == \'note\'">\n                \n\n               <h3  class = "md-display-1" layout-padding layout-align="start start"  ui-sref="admin-panel.default.study-notes-view({note_id:note.id})" >\n\n                <md-icon class = "md-display-1" md-font-icon="text-shadow fa fa-info-circle"></md-icon>\n\n                <span class = "text-shadow">{{note.get(\'cat_title\')}}</span></h3>\n\n                <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    {{note.get(\'class_name\')}}\n                </div>\n                \n            </div>\n            \n\n        </div>\n    </div>\n\n</md-content>   '),e.put("app/notice-module/home-page.tmpl.html",'<md-content  class="notice-home padded-content-page notic-category tm" layout="column">\n\n\n    <div ng-if = "user.get(\'alert_message\')" class="md-whiteframe-z1 course-box"  layout-padding >\n        \n\n        <div>\n            <p >{{user.get(\'alert_message\')}}</p>\n\n            <div layout="row"  layout-align="end center">\n                <md-button class="md-raised md-primary margin-right-0" ng-click="closeAlertMessage()" palette-background="pink:400" >\n                    <i class="fa fa-times ng-scope"></i>\n                    Close\n                </md-button>\n            </div>\n            \n        </div>\n    </div>\n\n    \n\n\n    <div ng-if = "user.get(\'user_role\') == \'student\' && (course_list[0] || vocab_list[0])" class = "course-outer overflow" style = "margin-bottom:8px;">\n        <span class = "course-span" style = "background: green;color:#fff;">\n            <md-icon md-font-icon="fa fa-angle-double-right" style = "color:#fff;position: relative;top: -2px;"></md-icon>\n        </span>\n\n        <span ng-if = "course.get(\'name\')" ui-sref="admin-panel.default.study-notes({parent_cat_name:course.get(\'name\'),parent_cat:course.id,page:1})" class = "course-span hand"  ng-repeat="course in course_list track by $index">\n            <md-icon md-font-icon="fa fa-institution"></md-icon>\n            {{course.get(\'name\')}}\n        </span>\n\n        <span ng-click = "goProgress()" ng-if = "vocab.name" class = "course-span hand"  ng-repeat="vocab in vocab_list track by $index">\n            <md-icon md-font-icon="fa fa-institution"></md-icon>\n            {{vocab.name}}\n        </span>\n\n        \n    </div>\n\n    <div ng-if = "user.get(\'user_role\') == \'student\' " layout = "row" class = "hand" layout-wrap layout-align="start start">\n\n        \n\n        <div class="clear"></div>\n\n        <div ng-if = "userNeedReviewNumber > 0" flex = \'50\'  flex-sm = \'100\' layout-padding >\n            <div ng-class = "reviewTileClass(userNeedReviewNumber)" class="home-frame center box-shadow relative " layout-padding ng-click = "popReview()">\n                <span class = "num" ng-if = "userNeedReviewNumber > 0">{{userNeedReviewNumber}}</span>\n                <md-icon class="font-size-5" md-font-icon="fa fa-history"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.STUDY\' | translate}}</h3>\n            </div>\n        </div>\n        \n        <div flex = \'50\'  flex-sm = \'100\' layout-padding>\n            <div ng-click = "openCourseHome()" class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-institution"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.COURSES\' | translate}}</h3>\n            </div> \n        </div>\n\n        \n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ng-click = openLink(\'general\',"admin-panel.default.notice-category",{parent_cat:\'GeneralEnglish\',page:1}) >\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-sitemap"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.REFERENCE\' | translate}}</h3>\n            </div>\n        </div>\n\n\n        <div flex = \'50\' flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.study-notes({parent_cat:\'root\',page:1})">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-pencil"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.STUDY_NOTES\' | translate}}</h3>\n            </div>\n        </div>\n\n        <div flex = \'50\' flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.review">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-bar-chart-o"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.MY_PROGRESS\' | translate}}</h3>\n            </div>\n        </div>\n    </div>\n\n    <div ng-if = "user.get(\'user_role\') == \'teacher\' " layout = "row" class = "hand" layout-wrap layout-align="start start">\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ng-click = openLink(\'general\',"admin-panel.default.notice-category",{parent_cat:\'GeneralEnglish\',page:1}) >\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-sitemap"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.REFERENCE\' | translate}}</h3>\n            </div>\n        </div>\n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding>\n            <div ng-click = "openCourseHome()" class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-institution"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.COURSES\' | translate}}</h3>\n            </div> \n        </div>\n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.study-notes({parent_cat_name:\'Class study notes\',parent_cat:\'root\',page:1})">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-pencil"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.STUDY_NOTES\' | translate}}</h3>\n            </div>\n        </div>\n\n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.classwordlist">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-bar-chart-o"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.PROGRESS\' | translate}}</h3>\n            </div>\n        </div>\n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.worksheethome">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-print"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.WORKSHEETS\' | translate}}</h3>\n            </div>\n        </div>\n\n        <div flex = \'50\'  flex-sm = \'100\' layout-padding ui-sref="admin-panel.default.class">\n            <div class="home-frame center box-shadow" layout-padding>\n                <md-icon class="font-size-5" md-font-icon="fa fa-users"></md-icon>\n                <h3 style = "margin-bottom: 0;">{{\'HOME.MANAGER\' | translate}}</h3>\n            </div>\n        </div>\n    </div>\n    \n</<md-content>\n\n'),e.put("app/notice-module/notice-category.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    <!-- others category -->\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n            \n            <span hide-xs hide-sm hide-md ng-if="current_category" style="font-size:20px;height:35px;"> {{current_category.get(\'name\')}}</span>\n        </div>\n\n        \n    </div>\n\n    <span hide-gt-md ng-if="current_category" class = "mobile-category-title"> {{current_category.get(\'name\')}}</span>\n\n    <div class="cat-nav-wrap" layout-margin>\n        <md-button ng-if="user.get(\'author\') || user.get(\'admin\') || ownClass() " palette-background="pink:400" ng-click="showAddCategory()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add category">\n            <md-icon md-font-icon="fa fa-folder-o"></md-icon> Add category</md-button>\n        <md-button ng-if="user.get(\'author\') || user.get(\'admin\') || ownClass() " palette-background="pink:400" ng-click="showAddWord()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add word/phrases">\n            <md-icon md-font-icon="fa fa-sitemap"></md-icon>Add word/phrase</md-button>\n        <md-button ng-if="( link_category_type == \'class\' || user.get(\'user_role\') == \'teacher\' ) && catWords[0]" palette-background="pink:400" ng-click="showPrint()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add word/phrases">\n            <md-icon md-font-icon="fa fa-print"></md-icon>Print WORKSHEETS</md-button>\n    </div>\n    <div id="add-tile" layout="row" layout-wrap layout-align="start start">\n        <div flex=50 class="tile" ng-if="showAddCategoryForm">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500">\n                <md-input-container layout-padding>\n                    <label for="category_title">Add title for category</label>\n                    <input id="category_title" label="category_title" name="category_title" type="text" ng-model="addCat.name" />\n                </md-input-container>\n                <md-select layout-padding placeholder="---SELECT LEVEL---" ng-model="addCat.level">\n                    <md-select-header style = "padding: 0 16px 0 16px;">\n                      <span>---SELECT LEVEL---</span>\n                    </md-select-header>\n                    <md-option value="No level">No level</md-option>\n                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                    <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                </md-select>\n                <div palette-background="myPurple:700" class="tile-buttons">\n                    <md-button palette-background="myPurple:900" ng-click="showAddCategory()" class="md-raised md-primary" aria-label="Close">Close</md-button>\n                    <md-button palette-background="pink:400" ng-click="addCategory()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">Save</md-button>\n                </div>\n            </div>\n        </div>\n        <div flex ng-if="showPrintTile">\n            <div class="tile" layout-fill>\n                <div class = "white-bg" layout-margin palette-background="myPurple:500">\n                    <h3 class="md-display-1" layout-padding layout-align="start start">\n                        <md-icon class = "md-display-1 text-shadow" md-font-icon="fa fa-print"></md-icon>\n                         <md-button class="md-raised md-hue-2 md-button md-ink-ripple"  style="background:purple;height:40px;vertical-align:middle;" ng-click=\'loadWorksheetData()\'>\n                                SELECT WORDS\n                         </md-button>\n                </h3>\n                    <md-select class="work-sheet-print-select" layout-padding placeholder="---SELECT WORKSHEET TO PRINT---" ng-model="select_class">\n                        <md-option ng-repeat="option in selects" ng-click="printAllOpenLink(option.uri)">\n                            {{option.name}}\n                        </md-option>\n                    </md-select>\n                </div>\n            </div>\n        </div>\n        <div flex=50 flex class="tile" ng-if="showAddWordForm">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500">\n                <md-input-container layout-padding>\n                    <label for="word_name">Add word/phrase for card</label>\n                    <input id="word_name" label="word_name" name="word_name" type="text" ng-model="word.name" />\n                </md-input-container>\n                <md-select layout-padding placeholder="---SELECT LEVEL---" ng-model="word.level">\n                    <md-select-header style = "padding: 0 16px 0 16px;">\n                      <span>---SELECT LEVEL---</span>\n                    </md-select-header>\n                    <md-option value="No level">No level</md-option>\n                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                    <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                </md-select>\n                <div class="margin-top-10"></div>\n                <div palette-background="myPurple:700" class="tile-buttons">\n                    <md-button palette-background="myPurple:900" ng-click="showAddWord()" class="md-raised md-primary" aria-label="Close">Close</md-button>\n                    <md-button ng-disabled = "word.btn_disable" palette-background="pink:400" ng-click="addWord()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">Save</md-button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n\n    <div layout="row" layout-wrap layout-sm="column" layout-align="start start" ng-if="parent_cat != \'root\'">\n        <div class="tile cat " layout-fill ng-repeat="cat in categorys" ng-class="catClass(cat) " ng-if = "((cat.get(\'children_data_cat\')[0] || cat.get(\'children_data_word\')[0]) && cat.get(\'level\') != \'No level\' && !cat.hide ) ||  user.get(\'admin\')">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" ng-if="cat.get(\'type\') == \'category\'">\n                <div class="imagesmain hand" ng-click="popImageView(cat)" ng-if = "cat.get(\'imagesmain\')">\n                    <img check-image type = "cat" imagesmain = "{{cat.get(\'imagesmain\')}}" lemma = "{{cat.get(\'name\')}}" parent_cat = "{{cat.get(\'parent_cat\')}}" obj-id = "{{cat.id}}" ng-src="{{cat.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n\n\n                <h3 ng-if="!cat.get(\'copy_cat_id\')" class="md-display-1 hand" layout-padding layout-align="start start" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})"><md-icon class = " text-shadow md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span class = "text-shadow" title="{{cat.get(\'name\')}}">{{cat.get(\'name\')}}</span>\n\n                <h3   ng-if = "cat.get(\'copy_cat_id\')" class = "md-display-1 hand" layout-padding layout-align="start start" ui-sref="admin-panel.default.notice-category({parent_cat:cat.get(\'copy_cat_id\'),page:1})"><md-icon class = " text-shadow md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span class = "text-shadow" title="{{cat.get(\'name\')}}">{{cat.get(\'name\')}}</span>\n                   \n                </h3>\n                \n                <div class="white-bg-60" style="min-height:160px;">\n                    <div class="cat-titles" class="md-subhead">\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:cat.get(\'children_data_cat_ids\')[$index],page:1})" class="hand white-bg-80 cats-lemma cat" ng-repeat="value in cat.get(\'children_data_cat\') track by $index" title="{{value}}">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            {{value}}\n                        </span>\n                        <span> </span>\n                    </div>\n                    <div class="cat-titles" style="display: -webkit-box;" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" class="md-subhead">\n                        <span class="lemma white-bg-80 cats-lemma hand" ng-repeat="value in cat.get(\'children_data_word\') track by $index " ng-if="$index < 15" title="{{value}}">{{value}}</span><span> </span>\n                    </div>\n                </div>\n                <div layout="row" layout-align="space-between center" ng-if="user.get(\'admin\') " palette-background="myPurple:700" class="tile-buttons">\n                    <div flex-sm=100>\n                        <md-button palette-background="myPurple:900" ng-click="editCateogry(cat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                        <md-button ng-if="user.get(\'author\') || user.get(\'admin\')" palette-background="pink:400" ng-click="popImageEdit(cat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit Image</md-button>\n                        <md-button palette-background="pink:400" ng-click=\'deleteCategory(cat)\' class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n                    </div>\n\n                    <div class="study-note-switch">\n                        <md-switch ng-model="cat.hide" ng-true-value="true" ng-false-value="false"  ng-click="toggleCategoryHide(cat)" aria-label="Hide" >\n                            Hide\n                        </md-switch>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-if="parent_cat == \'General English\'" class="tile cat hand" layout-fill>\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" style = "position: relative;">\n                <h3 ui-sref="admin-panel.default.exam-home-page" class="md-display-1" layout-padding layout-align="start start"><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder-o"></md-icon><span class = "text-shadow">EXAM VOCABULARY</span></h3>\n\n                <div class="imagesmain">\n                    <img src="//cdn.morguefile.com/imageData/public/files/s/seemann/med/fldr_2009_11_09/file7691257815721.jpg">\n                </div>\n\n                <div class="white-bg-60" style="min-height:160px;font-weight:bold;">\n                    <div class="cat-titles" class="md-subhead">\n                        <span class = "hand white-bg-80 cats-lemma cat" title="CECT-4" ui-sref="admin-panel.default.exam-cect4-page({parent_cat:\'General English\',page:1})">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            CECT-4\n                        </span>\n\n                        \n                        <span class = "hand white-bg-80 cats-lemma cat" title="PET" ui-sref="admin-panel.default.exam-pet-page({parent_cat:\'General English\',page:1})">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            PET\n                        </span>\n\n                        <span class = "hand white-bg-80 cats-lemma cat" title="IELTS" ui-sref="admin-panel.default.exam-ielts-page({parent_cat:\'General English\',page:1})">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            IELTS\n                        </span>\n                        <span> </span>\n                    </div>\n\n                    <div class="cat-titles" style="display: -webkit-box;"  class="md-subhead">\n                    </div>\n\n                </div>\n            </div>\n\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" style = "position: relative;" >\n                <h3 ui-sref="admin-panel.default.notice-category({parent_cat:\'Englishgrammar\',page:1})"  class="md-display-1" layout-padding layout-align="start start"><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder-o"></md-icon><span class = "text-shadow">GRAMMAR</span></h3>\n\n                 <div class="imagesmain">\n                    <img src="//cdn.morguefile.com/imageData/public/files/l/lauramusikanski/12/m/1451295005e221k.jpg">\n                </div>\n\n                <div class="white-bg-60" style="min-height:160px;font-weight:bold;">\n                    <div class="cat-titles" class="md-subhead">\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:\'eEfsUXDvOe\',page:1})" class="hand white-bg-80 cats-lemma cat" title="Connecting Words/Phrases">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            Connecting Words/Phrases\n                        </span>\n\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:\'TgGzZt4930\',page:1})" class="hand white-bg-80 cats-lemma cat" title="Adjectives">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            Adjectives\n                        </span>\n\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:\'H4Hl0jTFub\',page:1})" class="hand white-bg-80 cats-lemma cat" title="Prepositions">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            Prepositions\n                        </span>\n\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:\'rqoP9LRS7Z\',page:1})" class="hand white-bg-80 cats-lemma cat" title="Adverbs">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            Adverbs\n                        </span>\n\n                        <span ui-sref="admin-panel.default.notice-category({parent_cat:\'Dpg8PqdpVk\',page:1})" class="hand white-bg-80 cats-lemma cat" title="Verbs">\n                            <md-icon md-font-icon="fa fa-folder-o"></md-icon>\n                            Verbs\n                        </span>\n                    </div>\n\n                    <div class="cat-titles" style="display: -webkit-box;"  class="md-subhead">\n                    </div>\n\n                </div>\n            </div>\n\n            \n        </div>\n\n\n\n        \n        <div class="tile cat word" layout-fill ng-repeat="word in catWords">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" >\n                \n                <div ng-click="popImageView(word.definedata)" ng-if="word.definedata.get(\'imagesmain\')" class="hand imagesmain">\n                    <img check-image type = "word" imagesmain = "{{word.definedata.get(\'imagesmain\')}}" lemma = "{{word.get(\'name\')}}" parent_cat = "{{word.get(\'parent_cat\')}}" obj-id = "{{word.definedata.id}}" ng-src="{{word.definedata.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                </div>\n\n\n                <h3   class = "md-display-1 hand" layout-padding layout-align="start start">\n\n                    <div>\n                        <span class = "md-display-1 text-shadow lemma"  title="{{word.get(\'name\')}} ">{{word.get(\'name\')}} </span>\n\n                     <i ng-if = "inStudyList(word.get(\'name\'))"  class="fa fa-check-circle"></i>\n\n                    </div>\n                    <div class = "prons-icons">\n                        <span class = "hand"  ng-click = "speak(word,\'UK English Male\')" >UK <md-icon class = "" md-font-icon="hand fa fa-volume-off"></md-icon></span>\n                    \n\n                        <span  ng-click = "speak(word,\'US English Female\')" class = "hand" style = "margin-left:5px;">US <md-icon  class = "" md-font-icon="hand fa fa-volume-off"></md-icon></span>\n                    </div>\n\n                    <div class = "prons-icons" ng-if = "word.get(\'uk_pron_ext\')" style = "height: 45px;">\n                        \n                    </div>\n                </h3>\n                \n\n                <div class="white-bg-60" style="min-height:160px;font-weight:bold;">\n                    <p ng-class = "checkDataClass(word.get(\'definition\'),\'(\')" class="tiledata" layout-align="start start" ng-if="word.get(\'definition\')" title="{{word.get(\'definition\')}}">\n                        <span>(Definition)</span> {{word.get(\'definition\')}}\n                    </p>\n                    <p class="tiledata" layout-align="start start" ng-if="word.get(\'sample\')" title="{{word.get(\'definition\')}}">\n                        <i class="fa fa-quote-left"></i> {{word.get(\'sample\')}}\n                    </p>\n                    <div class="word-forms">\n                        <p ng-if="word.worddata.get(\'form_n\') && word.get(\'pos\') == \'n\'">\n                            <span style="margin-right:8px;" class="pos">Noun</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_n_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_n_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'n\' && word.get(\'pos\') == \'n\'">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n                        \n\n\n                        <p ng-if="word.worddata.get(\'form_v\') && word.get(\'pos\') == \'v\' ">\n                            <span style="margin-right:8px;" class="pos">Verb</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_c\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_d\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_v_e\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'v\' && word.get(\'pos\') == \'v\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_c\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_d\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_e\')}}</span>\n                        </p>\n\n                        \n\n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'j\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n\n                        \n\n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'s\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n\n\n\n                        <p ng-if="word.worddata.get(\'form_j\') && word.get(\'pos\') == \'a\'">\n                            <span style="margin-right:8px;" class="pos">Adj</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_b\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_j_c\')}}</span>\n                        </p>\n\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'a\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'j\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'j\' && word.get(\'pos\') == \'s\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_b\')}}</span>\n                        </p>\n                        \n\n                        <p ng-if="word.worddata.get(\'form_r\') && word.get(\'pos\') == \'r\'">\n                            <span style="margin-right:8px;" class="pos">Adverb</span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_r_a\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'r\' ">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                        </p>\n\n                        <p ng-if="word.worddata.get(\'form_ext\') && word.worddata.get(\'form_ext_type\') == \'r\' && word.get(\'pos\') == \'r\'">\n                            <span style="margin-right:8px;" class="pos">Irreg. </span>\n                            <span style="margin-right:8px;">{{word.worddata.get(\'form_ext_a\')}}</span>\n                        </p>\n                    </div>\n                    <div ng-if="!word.get(\'definition\')" class = "word-forms ask_edit_define">\n                        <p ng-if = "!word.shw_edit" style = "color:red">Please click SELECT DEFINITION!</p>\n                        \n                        <div ng-if = "word.shw_edit">\n                            <p style = "color:red">Please click EDIT to check data for word / phrase is correct!</p>\n                            <p><strong>image</strong> (visual association to word / phrase)</p>\n                            <p><strong>pronunciation</strong> (phonemes / IPA) & spelling (UK or US)</p>\n                            <p><strong>form conjugation</strong> (word type, e.g. singular / plural)</p>\n                            <p><strong>definition</strong> (category, any similar words / phrases and/or difference to them)</p>\n                            <p><strong>related word/s </strong>(non-direct synonym/s)</p>\n                            <p><strong>example sentence</strong> (use of word / phrase in common context)</p>\n                            <p><strong>collocation/s</strong> (e.g. verb + noun)</p>\n                            \n                        </div>\n                    </div>\n\n\n                    <p class="level hand" style="padding-left:16px;font-weight:bold;" ng-if = "word.get(\'level\') != \'No level\' ">\n                        {{word.get(\'level\') ? word.get(\'level\') : \'A1, Beginner\'}}\n                        <md-icon ui-sref="admin-panel.default.word-page({lemma:word.get(\'name\'),originlemma:word.get(\'name\')})" md-font-icon="icon-keyboard-arrow-right" class="md-primary"></md-icon>\n                    </p>\n                </div>\n                <div class="md-subhead" layout="column" layout-padding layout-align="start start" ui-sref="admin-panel.default.word-page({lemma:word.get(\'name\'),originlemma:word.get(\'name\')})">\n                </div>\n                <div palette-background="myPurple:700" class="tile-buttons" style="overflow:auto;">\n                    <md-button ng-if="(user.get(\'author\') || user.get(\'admin\')) && !word.get(\'define_obj\')" palette-background="pink:400" ng-click="editWord(word)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="select definition">select definition</md-button>\n\n                    <md-button ng-if="word.get(\'definition\') && (user.get(\'author\') || user.get(\'admin\')) && word.get(\'define_obj\')" palette-background="pink:400" ng-click="editWord(word)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="edit / check data">edit / check data</md-button>\n\n                    <md-button ng-if="user.get(\'author\') || user.get(\'admin\')" palette-background="pink:400" ng-click=\'deleteWord(word)\' class="md-raised md-primary" aria-label="Delete">Delete</md-button>\n                    <md-button ng-if="user.get(\'user_role\') == \'student\' "  ng-disabled = "word.disabled" style="float:right;" ng-disabled="!word.get(\'definition\')" ng-click="addWordByDefineId(word)" palette-background="pink:400" class="md-raised md-primary glowing" aria-label="Add"><md-icon md-font-icon="icon-add"></md-icon>study</md-button>\n                </div>\n                <div ng-if="false " style="min-height:200px;padding-left:8px;">\n                    <p> <span style="margin-right:8px;" ng-repeat="wd in word.dfdata.get(\'synsetlemma\')">{{wd}}</span></p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <ad4game></ad4game>\n</md-content>\n\n<style type="text/css">\n    #admin-panel-content-view > md-content {\n        overflow: hidden;\n    }\n</style>'),e.put("app/notice-module/notice-english-category-page.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    \n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start">\n        <div class = "tile hand" layout-fill >\n            <div layout-margin palette-background="myPurple:500" >\n                <h3  class = "md-display-1" layout-padding layout-align="start start" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1}) ><md-icon class = "md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span>General</span></h3>\n\n\n                <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n            </div>\n        </div>\n\n        <div class = "tile hand" layout-fill >\n            <div layout-margin palette-background="myPurple:500" >\n                <h3  class = "md-display-1" layout-padding layout-align="start start" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'BusinessEnglish\',page:1}) ><md-icon class = "md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span>Business</span></h3>\n\n\n                <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n            </div>\n        </div>\n\n        <div class = "tile hand" layout-fill >\n            <div layout-margin palette-background="myPurple:500" >\n                <h3  class = "md-display-1" layout-padding layout-align="start start" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'AcademicEnglish\',page:1}) ><md-icon class = "md-display-1" md-font-icon="fa fa-folder-o"></md-icon><span>Academic</span></h3>\n\n\n                <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n            </div>\n        </div>\n\n    </div>\n\n</md-content>   '),e.put("app/notice-module/notice-page.tmpl.html",'<md-content  class="notice-home padded-content-page notic-category tm" layout="column">\n    <div class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n        <widget class = "hand"  ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1}) class = "full-width" style = "background:rgba(93, 0, 187,0.9);color:#fff;" content-layout="row" content-layout-align="space-between center" content-padding>\n            <div>\n                <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-sitemap"></md-icon>\n            </div>\n            <div layout="column" layout-align="center end" >\n                <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >ENGLISH VOCABULARY</p>\n                <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">General, Business, Exam (PET, IELTS, CECT-4) lists</p>\n            </div>\n        </widget>\n    </div>\n\n     <div class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n        <widget class = "hand" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'Englishgrammar\',page:1})  class = "full-width" style = "background:rgba(93, 0, 187,0.9);color:#fff;" content-layout="row" content-layout-align="space-between center" content-padding>\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-puzzle-piece"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end" >\n                    <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis"  >ENGLISH GRAMMAR</p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">Word types & structures</p>\n                </div>\n         </widget>\n\n    </div>\n\n           \n    <div ng-if = "user.get(\'user_role\') == \'teacher\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin>\n        \n            <widget class = "hand purple-90" ui-sref="admin-panel.default.class"  class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding>\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-users"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end" >\n                    <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >CLASS MANAGER</p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0"></p>\n                </div>\n            </widget>\n        </div>\n\n        \n        <div ng-if = "user.get(\'user_role\') == \'teacher\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n\n        <widget class = "hand purple-90"  class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding ui-sref="admin-panel.default.study-notes({parent_cat_name:\'Class study notes\',parent_cat:\'root\',page:1})" >\n            <div>\n                <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-pencil"></md-icon>\n            </div>\n            <div layout="column" layout-align="center end" >\n                <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >CLASS STUDY NOTES</p>\n                <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">Web whiteboard</p>\n            </div>\n        </widget>\n\n    </div>\n        <div ng-if = "user.get(\'user_role\') == \'teacher\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n\n            <widget class = "hand purple-90"  class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding ui-sref="admin-panel.default.classwordlist">\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-bar-chart-o"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end" >\n                    <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >CLASS PROGRESS</p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0"></p>\n                </div>\n            </widget>\n        \n    </div>\n\n\n\n    <div ng-if = "user.get(\'user_role\') == \'teacher\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n        \n        <widget class = "hand purple-90"  class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding  ui-sref="admin-panel.default.worksheethome">\n            <div>\n                <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-print"></md-icon>\n            </div>\n            <div layout="column" layout-align="center end" >\n                <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >PRINTABLE WORKSHEETS</p>\n                <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">Gap-fills, matches, wordsearches & crosswords</p>\n            </div>\n        </widget>\n\n    </div>\n\n\n    <div ng-if = "user.get(\'user_role\') == \'student\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n            <widget class = "hand purple-90"class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding ui-sref="admin-panel.default.review">\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-bar-chart-o"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end" >\n                    <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis"  >MY PROGRESS</p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0"></p>\n                </div>\n            </widget>\n        \n    </div>\n\n    <div ng-if = "user.get(\'user_role\') == \'student\' " class = "margin-0" layout = "row" layout-wrap layout-sm = "column" layout-align="start start"  layout-margin >\n       \n        <widget class = "hand purple-90"class = "full-width" palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding  ui-sref="admin-panel.default.study-notes({parent_cat:\'root\',page:1})">\n\n            <div>\n                <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-pencil"></md-icon>\n            </div>\n            <div layout="column" layout-align="center end" >\n                <p class="md-subhead-display-2 font-weight-700 margin-top-0 margin-bottom-0 text-ellipsis" >MY STUDY NOTES</p>\n                <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">Web notebook</p>\n            </div>\n        </widget>\n    </div>\n    \n</<md-content>\n\n'),e.put("app/notice-module/student-new-wordiser.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                How to Use Wordiser!</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button style="margin-left:0;" ng-click="contactUs()" class="md-raised md-primary" aria-label="Contact us">Contact us</md-button>\n\n            <p>WORDISER FOR THE FIRST TIME</p>\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed/6dVNqR6Nwt8\' frameborder=\'0\' allowfullscreen></iframe></div>\n            <br>\n            <p>WORDISER\'S SOUNDS AND PRONUNCIATION SYSTEM</p>\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed/tqhqXFqcg0o\' frameborder=\'0\' allowfullscreen></iframe></div>\n\n            <md-button style="margin-left:0;width:100%;" palette-background="pink:400" ng-click="goToHome()" class="md-raised md-primary" aria-label="Click to save revision list">Go to homepage</md-button>\n        </md-card-content>\n    </md-card>\n</md-conten'),e.put("app/notice-module/teacher-new-wordiser.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    \n\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                How to Use Wordiser!</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button style="margin-left:0;" ng-click="contactUs()" class="md-raised md-primary" aria-label="Contact us">Contact us</md-button>\n        \n            <p>With Wordiser you can save class notes. All of your saved word lists are used to generate printable worksheets for your classes and to give students automated revision exercises.</p>\n\n            <p>WORDISER FOR THE FIRST TIME</p>\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed/_EsVYg9LgFM\' frameborder=\'0\' allowfullscreen></iframe></div>\n            \n            <p>ADDING AND USING CLASS STUDY NOTES</p>\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed/4O2hQnqXS2E\' frameborder=\'0\' allowfullscreen></iframe></div>           \n          \n            <p>SOUNDS AND PRONUNCIATION SYSTEM</p>\n            <div class=\'embed-container\'><iframe src=\'https://www.youtube.com/embed/41NjTMrHFMA\' frameborder=\'0\' allowfullscreen></iframe></div>\n\n            <md-button style="margin-left:0;width:100%;" palette-background="pink:400" ng-click="goToHome()" class="md-raised md-primary" aria-label="Click to save revision list">Go to homepage</md-button>\n\n        </md-card-content>\n    </md-card>\n    </md-conten>'),e.put("app/notice-module/widget.tmpl.html",'<div class="widget md-whiteframe-z1" ng-class="{\'widget-overlay-title\': overlayTitle}" flex ng-attr-layout="{{widgetLayout}}">\n\n    <div class="widget-title" ng-if="title || subtitle" layout="row" layout-padding layout-align="space-between center" ng-attr-flex-order="{{titleOrder}}">\n        <div layout="column" ng-if="avatar">\n            <img ng-src="{{avatar}}" class="widget-avatar"/>\n        </div>\n        <div flex layout="column">\n            <h3 class="md-subhead" ng-if="title" ng-bind-html="title"></h3>\n            <p class="md-body-1" ng-if="subtitle" ng-bind-html="subtitle"></p>\n        </div>\n        <md-menu ng-if="menu">\n            <md-button class="widget-button md-icon-button" ng-click="$mdOpenMenu()">\n                <md-icon md-font-icon="{{menu.icon}}"></md-icon>\n            </md-button>\n            <md-menu-content>\n                <md-menu-item ng-repeat="item in menu.items">\n                    <md-button ng-click="item.click($event)">\n                        <md-icon ng-if="item.icon" md-font-icon="{{item.icon}}"></md-icon>\n                        {{item.title | translate}}\n                    </md-button>\n                </md-menu-item>\n            </md-menu-content>\n        </md-menu>\n    </div>\n\n    <div class="widget-content" ng-attr-layout="{{contentLayout}}" ng-attr-layout-align="{{contentLayoutAlign}}" ng-attr-layout-padding="{{contentPadding}}" ng-transclude ng-attr-flex-order="{{contentOrder}}"></div>\n\n    <div class="widget-loading ng-hide" ng-show="loading" layout layout-fill layout-align="center center">\n        <div class="widget-loading-inner" ng-show="loading">\n            <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n        </div>\n    </div>\n\n</div>'),e.put("app/review-module/dialog-disclaimer.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Disclaimer</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content>\n            <div >   \n        <h3>In developing and building Wordiser, WordNet 3.0 was employed as a framework to provide a lexical scaffold for the project.</h3>\n        <p>Here is the original copyright notice:</p>\n        <p>WordNet 3.0 Copyright 2006 by Princeton University. All rights reserved.\nTHIS SOFTWARE AND DATABASE IS PROVIDED "AS IS" AND PRINCETON UNIVERSITY MAKES NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED. BY WAY OF EXAMPLE, BUT NOT LIMITATION, PRINCETON UNIVERSITY MAKES NO REPRESENTATIONS OR WARRANTIES OF MERCHANT- ABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE LICENSED SOFTWARE, DATABASE OR DOCUMENTATION WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.</p>\n    </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button  ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/review-module/dialog-review-full-details.tmpl.html",'<md-dialog class="dialog-view-progress-details" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Progress details</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content>\n                <md-card-content>\n                    <div class="list" layout="row" layout-wrap layout-sm="column" layout-align="start start">\n                        <div >\n                            <ul class=" pie-legend" style = "text-align: left;">\n                                <li><span style="background-color:rgb(255,87,34)"></span>Pronunciation</li>\n                                <li><span style="background-color:rgb(255,193,7)"></span>Spelling and form</li>\n                                <li><span style="background-color:rgb(93,0,187)"></span>Understanding</li>\n                                <li><span style="background-color:rgb(234,128,252)"></span>Active use</li>\n                                <li><span style="background-color:lightblue"></span>Further practice</li>\n                            </ul>\n                            <div class="pagging">\n                                <md-icon class="hand" md-font-icon="icon-chevron-left" ng-click = "PrePageClick()"></md-icon>\n                                <md-icon class="hand" md-font-icon="icon-chevron-right" ng-click = "NextPageClick()" ></md-icon>\n                            </div>\n                        </div>\n                        <table class="md-table class-list">\n                            <thead>\n                                <tr>\n                                    <th hide-xs hide-sm><span class="font-black"></span></th>\n                                    <th hide-xs style="width:20%;"><span class="font-black">LAST TESTED</span></th>\n                                    <th style="width:70%;"><span class="font-black">PROGRESS</span></th>\n                                    \n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr ng-repeat="word in reviewWordList track by $index" ng-class="checkDoneClass(word)">\n                                    <td hide-xs hide-sm style="width:5%;font-weight:bold;">\n\n                                        <div><strong>{{$index + 1 +(page -1 )* 30 }}</strong></div>\n                                        \n                                    </td>\n                                    <td style="width:20%;">\n                                    \n                                        <div><span class="font-purple hand" ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})">{{word.get(\'lemma\')}}</span></div>\n                                        <div>{{word.updatedAt|date:\'dd-MM-yyyy\'}}</div>\n                                    </td>\n                                    <td style="width:40%;padding-right:20px;">\n                                        <div class="points" style = "overflow: auto;" layout="row" layout-sm="column" >\n                                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="icon-gps-fixed"></md-icon> Revised : {{word.get(\'total\') ?  word.get(\'total\')  : 0}}</span>\n\n                                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-check"></md-icon> Correctly : {{word.get(\'right\') ? word.get(\'right\') : 0}}</span>\n\n                                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-times"></md-icon> Incorrectly : {{word.get(\'total\') - word.get(\'right\')}}</span>\n                                        </div>\n\n                                        <!--  1, a1\n                                // 2, a7\n                                // 3,a3,\n                                // 4, a6\n                                // 5,a2\n                                // 6,a8\n                                //7,a5 -->\n\n                                        <ul class=" pie-legend revie-act">\n                                            <li><span ng-class="setActClass(\'a1\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a7\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a3\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a6\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a2\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a8\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a4\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a5\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a9\',word)"></span></li>\n                                            <li><span ng-class="setActClass(\'a10\',word)"></span></li>\n                                        </ul>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </md-card-content>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button  ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/review-module/finalgame.tmpl.html",'<div class="wrapper final-game">\n\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            \n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n\n        </div>\n    </div>\n\n    <game></game>\n</div>\n\n<style type="text/css">\n    #footer{\n        display: none;\n    }\n</style>'),e.put("app/review-module/my-process-empty-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Help</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <h3>There is no progress yet!</h3>\n            <p>Progress comes from doing revision. To do revision, select the + button where you see it. You can also ask your teacher to send you revision.</p>\n            \n            <h3>Do you want to study something now?</h3>\n            <p>If yes, click YES. If not click CLOSE.</p>\n\n\n            <md-button class = "margin-left-0"   palette-background="pink:400" class="md-raised md-primary" aria-label="YES"><span ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1})>YES</span></md-button>\n\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/review-module/review-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span></span>\n            </h2>\n            <span flex></span>\n            <md-buttonclass="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n\n        <div>\n            <md-content ng-if="rs.game_show">\n                <mingame></mingame>\n                <div class="md-actions review-footer" layout="row">\n\n                    <md-button palette-background="pink:400" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="Continue review"  ng-click = "continueReview()" ><md-icon md-font-icon="fa fa-mail-forward"></md-icon> study more</md-button>\n                </div>\n            </md-content>\n\n            <md-content ng-if="next_type && !rs.game_show" class = "{{next_type}}_content">\n                <div id="score" class="row" ng-if="!finish_reivew && next_type != \'summary\' && next_type != \'spelling\'">\n                    <div class="data-point-outer">\n                        <div layout="row" layout-align="space-between center" flex="100" palette-background="myPurple:300" class="points border padding-10 md-headline">\n                            <div class="data-point {{rs.progress_class}}">\n                                \n                            </div>\n                            <div class="data-point-number">\n                                <span><i class="fa fa-star opacity-50"></i></span>\n                                <span class="num">{{rs.points}}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n                \n\n                <div ng-switch="next_type" class = "{{next_type}}_content_switch">\n                    <div ng-switch-when="spelling">\n                            <spellingaty></spellingaty>\n                    </div>\n                    <div ng-switch-when="summary" class = "summary">\n                        <summayaty></summayaty>\n                    </div>\n                    <div ng-switch-when="a1">\n                         <a1aty></a1aty>\n                    </div>\n                    <div ng-switch-when="a2">\n                        <a2aty></a2aty>\n                    </div>\n                    <div ng-switch-when="a3">\n                        <a3aty></a3aty>\n\n                    </div>\n                    <div ng-switch-when="a4">\n                         <a4aty></a4aty>\n\n                    </div>\n                    <div ng-switch-when="a5">\n                        <a5aty></a5aty>\n                    </div>\n\n                    <div ng-switch-when="a6">\n                        <a6aty></a6aty>\n\n                    </div>\n                    <div ng-switch-when="a7">\n                        <a7aty></a7aty>\n\n                    </div>\n                    <div ng-switch-when=\'a8\' class = "a8-type">\n                        <a8aty></a8aty>\n                    </div>\n                    <div ng-switch-when="a9">\n                        <a9aty></a9aty>\n\n                    </div>\n\n                    <div ng-switch-when="a10">\n                        <a10aty></a10aty>\n                    </div>\n\n                    <div ng-switch-when = \'act1\'">\n                        <act1course>\n                        </act1course>\n                    </div>\n\n                    <div ng-switch-when = \'act2\'">\n                        <act2course>\n                        </act2course>\n                    </div>\n\n                    <div ng-switch-when = \'act3\'">\n                        <act3course>\n                        </act3course>\n                    </div>\n\n                    <div ng-switch-when = \'act4\'">\n                        \n                        <act4course>\n                        </act4course>\n                        \n                    </div>\n\n                    <div ng-switch-when = \'act5\'">\n                        <act5course>\n                        </act5course>\n                    </div>\n                    <div ng-switch-when = \'act6\'">\n                        <act6course>\n                        </act6course>\n                    </div>\n\n                    <div ng-switch-when = \'act13\'">\n                        <act13course>\n                        </act13course>\n                    </div>\n\n                    <div ng-switch-when = \'go_to_game\'">\n                        <h1 style = "text-align: center;"><md-icon style = "font-size: 30px;position: relative;bottom: 4px;" md-font-icon="fa fa-warning"></md-icon> All exercises finished!</h1>\n                        <div style = "background: lightgrey;padding:8px;">\n                            <h3><strong>Well done!</strong></h3>\n                            <p>As a reward for your work, you can play a game.</p>\n                        </div>\n                        <md-button style = "margin-right:0;margin-left:0;margin-top:8px;width:100%;" ng-click = "goToGame()" class = "margin-left-0" palette-background="pink:400" class="md-raised md-primary" aria-label="go to game page" >go to game page</md-button>\n                    </div>\n\n                    \n\n                    <div ng-switch-when="end">\n                        <h3 class="margin-top-30">There is nothing more to review...</h3>\n\n\n                        <md-button style = "width:100%;" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'GeneralEnglish\',page:1}) class = "margin-left-0" palette-background="pink:400"class="md-raised md-primary" aria-label="General english" >General english</md-button>\n\n                        <md-button style = "width:100%;" ng-click = openLink(\'general\',\'admin-panel.default.exam-pet-page\',{parent_cat:\'GeneralEnglish\',page:1}) class = "margin-left-0" palette-background="pink:400"class="md-raised md-primary" aria-label="PET" >PET</md-button>\n\n                        <md-button style = "width:100%;" ng-click = openLink(\'general\',\'admin-panel.default.exam-cect4-page\',{parent_cat:\'GeneralEnglish\',page:1}) class = "margin-left-0" palette-background="pink:400"class="md-raised md-primary" aria-label="CECT-4" >CECT-4</md-button>\n\n                        <md-button style = "width:100%;" ng-click = openLink(\'general\',\'admin-panel.default.exam-ielts-page\',{parent_cat:\'GeneralEnglish\',page:1}) class = "margin-left-0" palette-background="pink:400"class="md-raised md-primary" aria-label="IELTS" >IELTS</md-button>\n\n                        <md-button style = "width:100%;" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:\'ohKatGuqhR\',page:1}) class = "margin-left-0" palette-background="pink:400"class="md-raised md-primary" aria-label="BUSINESS" >BUSINESS</md-button>\n\n                    </div>\n                    <div>\n                        <!-- end ng-swhitch -->\n\n                        \n                    <md-progress-linear  ng-if = "rs.result_message" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n                </md-content>\n                </div>\n\n                <div ng-show = "rs.ads_show_div">\n                    <ad4game></ad4game>\n                </div>\n                \n            </md-dialog-content>\n\n            <div class="md-actions review-footer" layout="row" layout-wrap>\n                <span flex></span>\n                <md-button  ng-if = "rs.game_show" ng-click="continueReview()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n                    <i class="fa fa-times"></i> Continue review\n                </md-button>\n\n\n                <md-button palette-background="pink:400" ng-if="!grammar_testing &&  next_type != \'a9\' && next_type != \'summary\' &&  next_type != \'spelling\'" ng-click="nextWord()" palette-background="myPurple:900" class="md-primary" aria-label="Do later" ng-disabled = "rs.disable_do_later">\n                    <i class="fa fa-mail-forward"></i> {{\'REVIEWPAGE.skip\' | translate}}\n                </md-button>\n\n                <md-button palette-background="pink:400" ng-if="!grammar_testing && next_type != \'a9\' &&  next_type != \'spelling\' " ng-click="removeWord()"  class="md-primary" aria-label="Stop testing" ng-disabled = "rs.disable_action">\n                    <i class="fa fa-minus-circle"></i> {{\'REVIEWPAGE.remove\' | translate}}\n                </md-button>\n\n                <md-button ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n                    {{\'REVIEWPAGE.close\' | translate}}\n                </md-button>\n\n                \n\n                \n            </div>\n</md-dialog>'),e.put("app/review-module/review.tmpl.html",'<md-content class="bg-tm padded-content-page review-page" style="background: rgba(255, 255, 255, 0)!important;">\n    <div class="pagging" style = "margin-bottom: 16px;">\n        <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n    </div>\n\n\n    <div layout="row" layout-sm = "column" layout-xs = "column" layout-align="space-around none">\n        <div flex = 70 flex-sm = 100 flex-xs = 100 >\n            <widget chartjs-line-widget flex title="{{\'REVIEWPAGE.Revision_by_month\' | translate}}" subtitle="" content-padding style="background: rgba(255, 255, 255, 0.9);">\n                <div>\n                    <ul class=" pie-legend">\n                        <li><span style="background-color:#c8bfe7"></span>{{\'REVIEWPAGE.Revision_total_done\' | translate}}</li>\n                        <li><span style="background-color:#3f0180"></span>{{\'REVIEWPAGE.Progress_total_correct\' | translate}}</li>\n                        <li><span style="background-color:#ec407a"></span>{{\'REVIEWPAGE.Problems_total_incorrect\' | translate}}</li>\n                    </ul>\n                </div>\n                <div flex>\n                    <canvas class="chart-line" colours="reviewChart.colours" data="reviewChart.data" labels="reviewChart.labels" legend="false" series="reviewChart.series" options="reviewChart.options"></canvas>\n                </div>\n            </widget>\n        </div>\n\n        <div flex = 30 flex-sm = 100 flex-xs = 100>\n            <div class = "user-points" layout="column" layout-align="space-between none" style = "margin-left:16px;">\n                <widget style = "margin-bottom:16px;" palette-background="myPurple:500" background="primary" content-layout="row" content-layout-align="space-between center" content-padding>\n                    <div>\n                        <md-icon class="font-size-5 opacity-50" md-font-icon="icon-gps-fixed"></md-icon>\n                    </div>\n                    <div layout="column" layout-align="center end">\n                        <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis">{{totalrevised>0?totalrevised:0}}</p>\n                        <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'REVIEWPAGE.Total_reviews\' | translate}}</p>\n                    </div>\n                </widget>\n                <widget style = "margin-bottom:16px;" palette-background="myPurple:500" background="primary" content-layout="row" content-layout-align="space-between center" content-padding>\n                    <div>\n                        <md-icon class="font-size-5 opacity-50" md-font-icon="fa fa-check"></md-icon>\n                    </div>\n                    <div layout="column" layout-align="center end">\n                        <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis"> {{correct>0?correct:0}}</p>\n                        <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'REVIEWPAGE.Total_revised_correctly\' | translate}}</p>\n                    </div>\n                </widget>\n                <widget style = "margin-bottom:16px;" palette-background="myPurple:500" background="primary" content-layout="row" content-layout-align="space-between center" content-padding>\n                    <div>\n                        <md-icon class="font-size-5 opacity-50" md-font-icon="fa fa-times"></md-icon>\n                    </div>\n                    <div layout="column" layout-align="center end">\n                        <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0">{{incorrect>0?incorrect:0}}</p>\n                        <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'REVIEWPAGE.Total_revised_incorrectly\' | translate}}</p>\n                    </div>\n                </widget>\n                <widget palette-background="myPurple:500" background="primary" content-layout="row" content-layout-align="space-between center" content-padding>\n                    <div>\n                        <md-icon class="font-size-5 opacity-50" md-font-icon="fa fa-star"></md-icon>\n                    </div>\n                    <div layout="column" layout-align="center end">\n                        <p class="md-display-1 font-weight-100 margin-top-0 margin-bottom-0">{{point>0?point:0}}</p>\n                        <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'REVIEWPAGE.Total_points\' | translate}}</p>\n                    </div>\n                </widget>\n            </div>\n        </div>\n        \n    </div>\n\n    <md-tabs style = "margin-top: 18px;" palette-background="myPurple:500" md-dynamic-height md-border-bottom>\n        <md-tab label="{{\'REVIEWPAGE.VOCABULARY\' | translate}}">\n            <md-content class="md-padding">\n                <div class="list" layout="row" layout-wrap layout-sm="column" layout-align="start start">\n                <div class="pagging">\n                    <md-icon ng-if = "page > 1" class="hand" md-font-icon="icon-chevron-left" ng-click = "prePage()"></md-icon>\n                    <md-icon ng-if = "reviewWordList.length == limit" class="hand" md-font-icon="icon-chevron-right" ng-click = "nextPage()"></md-icon>\n\n                    <strong class = "font-purple">{{page}}</strong>\n                </div>\n                <div class="user-list-intro">\n                    <ul class=" pie-legend" style = "text-align:left;margin-left: 0;">\n                        <li><span style="background-color:rgb(255,87,34)"></span>{{\'REVIEWPAGE.Pronunciation\' | translate}}</li>\n                        <li><span style="background-color:rgb(255,193,7)"></span>{{\'REVIEWPAGE.Spelling_and_form\' | translate}}</li>\n                        <li><span style="background-color:rgb(93,0,187)"></span>{{\'REVIEWPAGE.Understanding\' | translate}}</li>\n                        <li><span style="background-color:rgb(234,128,252)"></span>{{\'REVIEWPAGE.Active_use\' | translate}}</li>\n                        <li><span style="background-color:lightblue"></span>{{\'REVIEWPAGE.Further_practice\' | translate}}</li>\n                    </ul>\n                    \n                </div>\n                \n                <table class="md-table class-list fix-review">\n                    <thead hide-xs hide-sm hide-md hide-lg>\n                        <tr hide-xs hide-sm hide-md hide-lg>\n                            <th hide-xs hide-sm hide-md hide-lg><span class="font-black"></span></th>\n                            <th hide-xs hide-sm hide-md hide-lg style="width:20%;"><span class="font-black">{{\'REVIEWPAGE.LAST_TESTED\' | translate}}</span></th>\n                            <th hide-xs hide-sm hide-md hide-lg style="width:70%;"><span class="font-black">{{\'REVIEWPAGE.PROGRESS\' | translate}}</span></th>\n                            <th hide-xs hide-sm hide-md hide-lg ng-if = "!teacher_view_student"><span class="font-black">{{\'REVIEWPAGE.ACTIONS\' | translate}}</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="word in reviewWordList track by $index" ng-class="checkDoneClass(word)">\n                            <td hide-xs hide-sm hide-md hide-lg style="width:5%;font-weight:bold;">\n\n                                <div><strong>{{$index + 1 +(page -1 )* 30 }}</strong></div>\n                                \n                            </td>\n                            <td hide-xs hide-sm hide-md hide-lg style="width:20%;">\n                            \n                                <div><span class="font-purple hand md-headline" ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})">{{word.get(\'lemma\')}}</span></div>\n                                <div>{{word.createdAt|date:\'dd/MM/yyyy\'}}</div>\n                            </td>\n                            \n                            <td hide-gt-lg ng-if = "!teacher_view_student">\n                                <div>\n                                    <span class = "font-purple" style = "margin-right: 18px;font-size: 20px;">{{word.get(\'lemma\')}}</span> \n                                    <span>{{word.createdAt|date:\'dd/MM/yyyy\'}}</span>\n                                </div>\n\n                                <div ng-if = "!word.get(\'finish_test\')">\n                                        <md-button style = "margin-left: 0;" ng-if="!word.get(\'remove\')" palette-background="myPurple:700" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Disable\' | translate}}</md-button>\n                                    <md-button  ng-if="word.get(\'remove\')" style="margin-left: 0;background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Enable\' | translate}}</md-button>\n                                    <md-button palette-background="pink:400" ng-click=\'deleteRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.DELETE\' | translate}}</md-button>\n                                </div>\n                                \n                            </td>\n                            <td style="width:40%;">\n                                <div class="points" style = "overflow: auto;" layout="row" layout-xm="column" layout-sm="row" layout-md="row" >\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="icon-gps-fixed"></md-icon><span hide-xs hide-sm> {{\'REVIEWPAGE.Revised\' | translate}}</span> {{word.get(\'total\') ?  word.get(\'total\')  : 0}}</span>\n\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-check"></md-icon><span hide-xs hide-sm> {{\'REVIEWPAGE.Correctly\' | translate}}</span> {{word.get(\'right\') ? word.get(\'right\') : 0}}</span>\n\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-times"></md-icon><span hide-xs hide-sm> {{\'REVIEWPAGE.Incorrectly\' | translate}}</span> {{word.get(\'total\') - word.get(\'right\')}}</span>\n                                </div>\n\n                                <ul class=" pie-legend revie-act">\n                                    <li><span ng-class="setActClass(\'a1\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a7\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a3\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a6\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a2\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a8\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a4\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a5\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a9\',word)"></span></li>\n                                    <li><span ng-class="setActClass(\'a10\',word)"></span></li>\n                                </ul>\n                            </td>\n                            <td  hide-xs hide-sm hide-md hide-lg ng-if = "!teacher_view_student">\n                                \n                                <div ng-if = "!word.get(\'finish_test\')">\n                                    <md-button ng-if="!word.get(\'remove\')" palette-background="myPurple:700" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Disable\' | translate}}</md-button>\n                                    <md-button ng-if="word.get(\'remove\')" style="background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Enable\' | translate}}</md-button>\n                                    <md-button palette-background="pink:400" ng-click=\'deleteRecoard(word)\' class="md-raised md-primary" aria-label="remove">{{\'REVIEWPAGE.remove\' | translate}}</md-button>\n                                </div>\n                                \n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            </md-content>\n        </md-tab>\n        <md-tab label="{{\'REVIEWPAGE.GRAMMAR\' | translate}}">\n            <md-content class="md-padding">\n                <div class="list" layout="row" layout-wrap layout-sm="column" layout-align="start start">\n        \n                <div class="user-list-intro">\n                    <ul class=" pie-legend" style = "text-align:left;">\n                        <li><span style="background-color:rgb(93,0,187)"></span>{{\'REVIEWPAGE.Understanding\' | translate}}</li>\n                        <li><span style="background-color:rgb(255,193,7)"></span>{{\'REVIEWPAGE.Form\' | translate}}</li>\n                        <li><span style="background-color:lightblue"></span>{{\'REVIEWPAGE.Further_practice\' | translate}}</li>\n                        <li><span style="background-color:rgb(234,128,252)"></span>{{\'REVIEWPAGE.Active_use\' | translate}}</li>\n                    </ul>\n                    \n                </div>\n                <table class="md-table class-list fix-review">\n                    <thead>\n                        <tr hide-xs hide-sm hide-md hide-lg>\n                            <th hide-xs hide-sm><span class="font-black"></span></th>\n                            <th hide-xs style="width:20%;"><span class="font-black">{{\'REVIEWPAGE.LAST_TESTED\' | translate}}</span></th>\n                            <th style="width:70%;"><span class="font-black">{{\'REVIEWPAGE.PROGRESS\' | translate}}</span></th>\n                            <th ><span class="font-black">{{\'REVIEWPAGE.ACTIONS\' | translate}}</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="word in records track by $index" ng-class="checkDoneClass(word)">\n                            <td hide-xs hide-sm hide-md hide-lg style="width:5%;font-weight:bold;">\n\n                                <div><strong>{{$index + 1 +(page -1 )* 30 }}</strong></div>\n                                \n                            </td>\n                            <td hide-xs hide-sm hide-md hide-lg style="width:20%;">\n                            \n                                <div>\n                                    <span class="font-purple" ng-if="word.get(\'grammar\').get(\'progress_name\')">{{word.get(\'grammar\').get(\'progress_name\')}}</span>\n\n                                    <span class="font-purple" ng-if="!word.get(\'grammar\').get(\'progress_name\')">{{word.get(\'grammar\').get(\'name\')}}</span>\n\n                                </div>\n                                <div>{{word.updatedAt|date:\'dd/MM/yyyy\'}}</div>\n                            </td>\n                            \n                            <td hide-gt-lg>\n                                <div><span class = "font-purple" style = "margin-right: 18px;">{{word.get(\'lemma\')}}</span> <span>{{word.updatedAt|date:\'dd/MM/yyyy\'}}</span></div>\n                                <md-button style = "margin-left: 0;" ng-if="!word.get(\'remove\')" palette-background="myPurple:900" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Disable\' | translate}}</md-button>\n                                <md-button  ng-if="word.get(\'remove\')" style="margin-left: 0;background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Enable\' | translate}}</md-button>\n                                <md-button palette-background="pink:400" ng-click=\'deleteGrammarRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.DELETE\' | translate}}</md-button>\n                            </td>\n                            <td style="width:40%;padding-right:20px;">\n                                <div class="points" style = "overflow: auto;" layout="row" layout-xm="row" layout-sm="column"  >\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="icon-gps-fixed"></md-icon> {{\'REVIEWPAGE.Revised\' | translate}}{{word.get(\'total\') ?  word.get(\'total\')  : 0}}</span>\n\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-check"></md-icon> {{\'REVIEWPAGE.Correctly\' | translate}}{{word.get(\'right\') ? word.get(\'right\') : 0}}</span>\n\n                                    <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-times"></md-icon> {{\'REVIEWPAGE.Incorrectly\' | translate}}{{word.get(\'total\') - word.get(\'right\')}}</span>\n                                </div>\n\n                                \n                                <ul class=" pie-legend revie-act">\n\n                                    <li ><span ng-class="setGrammarActClass(\'act1\',word)"></span></li>\n                                    <li><span ng-class="setGrammarActClass(\'act3\',word)"></span></li>\n                                    <li><span ng-class="setGrammarActClass(\'act4\',word)"></span></li>\n                                    <li><span ng-class="setGrammarActClass(\'act5\',word)"></span></li>\n                                    <li><span ng-class="setGrammarActClass(\'act6\',word)"></span></li>\n\n                                    <li style = "padding-left:0">\n                                        <md-icon ng-if = "!word.get(\'finish_test\')" style = "font-size: 26px!important;position: relative;top: -5px;" class="font-size-5" md-font-icon="fa fa-history"></md-icon>\n\n\n                                        <md-icon ng-if = "word.get(\'finish_test\')" style = "font-size: 26px!important;position: relative;top: -5px;" class="font-size-5" md-font-icon="fa fa-ban"></md-icon>\n                                    </li>\n                                </ul>\n                            </td>\n                            <td  hide-xs hide-sm hide-md hide-lg>\n                                \n                                <md-button ng-if="!word.get(\'remove\')" palette-background="myPurple:900" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Disable\' | translate}}</md-button>\n                                <md-button ng-if="word.get(\'remove\')" style="background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.Enable\' | translate}}</md-button>\n                                <md-button palette-background="pink:400" ng-click=\'deleteGrammarRecoard(word)\' class="md-raised md-primary" aria-label="Delete">{{\'REVIEWPAGE.DELETE\' | translate}}</md-button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            </md-content>\n        </md-tab>\n\n        <md-tab label="{{\'REVIEWPAGE.COURSE_S\' | translate}}">\n            <md-content class="md-padding">\n                <md-button ng-disabled = "show_course == course" ng-repeat="course in course_list track by $index" palette-background="pink:400" ng-click=\'showCourse(course)\' class="margin-left-0 md-raised md-primary" aria-label="{{course.get(\'name\')}}">{{course.get(\'name\')}}</md-button>\n\n\n                <div class="course-outer">\n                    <h3>{{show_course.get(\'name\')}}</h3>\n\n                    <div ng-if = "study_note.record" ng-repeat="study_note in study_notes.slice().reverse() track by $index" class="progress_card relative margin-bottom-20" flex content-layout="column" content-layout-align="start start" content-padding layout-padding>\n                        <div>\n                            <span class = "order_id md-title">{{$index + 1}}</span> \n                            <span class = "title md-title">{{study_note.get(\'cat_title\')}}</span>\n                        </div>\n\n                        <div >\n                            <h3 class = "font-purple md-title">{{\'REVIEWPAGE.Progress\' | translate}}</h3>\n                            <div class="process course-progress" style="padding:0">\n                                <span class="value">{{study_note.progress <= 100 ? study_note.progress : 100}}%</span>\n                                <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value="{{study_note.progress <= 100 ? study_note.progress : 100}}"></md-progress-linear>\n                            </div>\n                        </div>\n                        \n                        \n\n                        <div ng-if = "study_note.record.get(\'progress_point\') > 0">\n                            <h3 class = "font-purple md-title">{{\'REVIEWPAGE.Progress_test\' | translate}}</h3>\n                            <div class="process course-progress" ng-class = "progressClass(study_note.record.get(\'progress_point\'))" style="padding:0;margin-bottom:8px;">\n                                <span class="value">{{study_note.record.get(\'progress_point\') ? study_note.record.get(\'progress_point\') : 0}}%</span>\n                                <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value="{{study_note.record.get(\'progress_point\') ? study_note.record.get(\'progress_point\') : 0}}"></md-progress-linear>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n            </md-content>\n        </md-tab>\n\n        <md-tab label="{{\'REVIEWPAGE.My_exercises\' | translate}}">\n            <md-content class="md-padding">\n\n                <md-button ng-class = "exerciseClass(\'quiz\')" ng-click = "loadExercises(\'quiz\')" palette-background="pink:400" class="md-raised md-primary" aria-label="My quizzes">My quizzes</md-button>\n\n                <md-button ng-class = "exerciseClass(\'gap_fill\')" ng-click = "loadExercises(\'gap_fill\')" palette-background="pink:400" class="md-raised md-primary" aria-label="My quizzes">My gap-fills</md-button>\n\n                <md-button ng-class = "exerciseClass(\'errors\')" ng-click = "loadExercises(\'errors\')" palette-background="pink:400" class="md-raised md-primary" aria-label="My quizzes">My errors</md-button>\n\n                <md-button ng-class = "exerciseClass(\'writing\')" ng-click = "loadExercises(\'writing\')" palette-background="pink:400" class="md-raised md-primary" aria-label="My quizzes">My writing</md-button>\n\n\n                <md-list>\n                    <md-list-item ng-repeat="quiz in quizs track by $index">\n                        <p  ng-if = "view == \'quiz\' || view == \'gap_fill\'" class = "hand">{{$index + 1}}. {{quiz.get(\'quiz_title\')}}</p>\n                        <p ng-if = "view == \'errors\' "  class = "hand">{{$index + 1}}. {{quiz.get(\'mistake_st\')}}</p>\n\n                        <p  ng-if = "view == \'writing\' "  class = "hand">{{$index + 1}}. {{quiz.get(\'instructions\')}}</p>\n\n                        <md-button palette-background="pink:400" ng-click = "openLink(quiz)" class="md-raised md-primary" aria-label="view"><md-icon md-font-icon="fa fa-play"></md-icon></md-button>\n\n                        <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n            </md-content>\n        </md-tab>\n    </md-tabs>\n</md-content>'),e.put("components/Directive/Ad4GameNew.tmpl.html","<div></div>"),e.put("components/Directive/GoToAddCategory.tmpl.html",'<div>\n	<p>This word / phrase is currently not in categories and so cannot be loaded for use in your exercise. You will need to manually add it from the link below.</p>\n\n    <md-button ng-click="goToAddWordCategory()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="add word / phrase">\n        add word / phrase\n    </md-button>\n</div>'),e.put("components/Directive/mingame.tmpl.html",'<div class="wrapper final-game mingame">\n    <div class="top-infos" layout="column" content-layout-align="space-between center" >\n        <div class="Actions" flex>\n\n                <md-button palette-background="pink:400" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="tips"  ng-click = "tips()" >\n                    <span ng-if = "!showanwsers">See matches</span>\n                    <span ng-if = "showanwsers">See game</span>\n                </md-button>\n\n                 <md-button ng-if = "gameData.showStartButton" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="startGame"  ng-click = "startGame()" >Start</md-button>\n\n                 \n        </div>\n        <div class="action-info font-purple text-left" flex>\n            <span class = "title-name">YOU : {{gameData.personPoint}}/{{gameData.endPoint}}</span>\n            <span>LEVEL : {{gameData.level}} </span>\n            <span>Time : {{gameData.timeCount}} secs</span>\n        </div>\n        \n    </div>\n\n    <div class="resutes-messages" ng-if = "gameData.results">\n        <h3 style= "margin-left:8px;"> {{gameData.results}}</h3>\n    </div>\n\n    <div class="point-to-win process">\n        <span class="process-tips">POINTS TO WIN</span>\n        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{(gameData.personPoint/gameData.endPoint) * 100}}" ></md-progress-linear>\n    </div>\n\n    <div class="game-process process">\n        <span class="process-tips">TIME LEFT</span>\n        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{(gameData.timeCount/gameData.countTimeEnd) * 100}}" ></md-progress-linear>\n    </div>\n\n    <div class="game-area" ng-if = "!showanwsers && !gameData.results">\n        <div class="gcell" ng-repeat="word in wordList track by $index" ng-class = "returnClass(word)" ng-click = "personOneStep(word)" ng-disabled = "word.clicked">\n            \n            <span ng-if = "!word.anwser_word">{{word.lemma}}</span>\n            <span ng-if = "word.anwser_word"  ng-bind-html = "word.anwser_word"></span>\n        </div>\n    </div>\n\n    <div class="anwser-area" ng-if = "showanwsers">\n        <span ng-repeat="word in gameData.anwser_words track by $index" >{{word}}</span>      \n    </div>\n</div>'),e.put("components/addword/add-word-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span ng-if = "popDefinesShow">Select word type</span>\n              <span ng-if = "definesDetailsShow">Select definition</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content >\n                <div ng-if = "defines && !defines[0]">\n                        <p>No results!</p>\n                        <p>Perhaps you selected the wrong word type or this is not in Wordiser. Why not try again?</p>\n                    </div>\n\n                     <div class="words popDefinesShow " ng-if = "popDefinesShow">\n                    <p class = "md-headline" ng-if = "types_option.v">\n                        \n                        <md-checkbox ng-model="type.v" ng-change = "changeTypeSelect(\'v\')" aria-label="Default Checkbox">\n                           Verb\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" ng-if = "types_option.n">\n                         <md-checkbox ng-model="type.n" ng-change = "changeTypeSelect(\'n\')" aria-label="Default Checkbox">\n                           Noun\n                        </md-checkbox>\n                    </p>\n\n                    <p class = "md-headline" ng-if = "types_option.j">\n                        <md-checkbox ng-model="type.j" ng-change = "changeTypeSelect(\'j\')" aria-label="Default Checkbox">\n                        Adjective\n                        </md-checkbox>\n                    </p>\n                    <p class = "md-headline" ng-if = "types_option.r">\n                        <md-checkbox ng-model="type.r" ng-change = "changeTypeSelect(\'r\')" aria-label="Default Checkbox">\n                            Adverb\n                        </md-checkbox>\n                    </p>\n\n                    <md-button  ng-disabled="!type.v && !type.n && !type.j && !type.r" ng-click="changeTyle()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Select definition</md-button>\n\n                </div>\n\n                <div ng-show = \'definesDetailsShow\'  class="defines-list-details trans-bg"> <md-list>\n                    <md-list ng-if = "defines">\n                        <md-list-item  ng-repeat="define in defines">\n                            \n\n                            <p>\n                                <span ng-if = "define.get(\'pos\') == \'v\'">(Verb)</span> \n                                <span ng-if = "define.get(\'pos\') == \'n\'">(Noun)</span> \n                                <span ng-if = "define.get(\'pos\') == \'j\'">(Adjective)</span> \n                                <span ng-if = "define.get(\'pos\') == \'r\'">(Adverb)</span> \n                                {{define.get(\'definition\')}}\n                                <strong ng-if = "define.get(\'sentence_main\')">e.g. {{define.get(\'sentence_main\')}}</strong>\n                            </p>\n\n                            <md-button palette-background="pink:400" ng-click = "addWordByDefine(define)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add">Add</md-button>\n\n                            <md-button palette-background="pink:400" ng-if = "hide_for_the_moment" ng-click = "popVoteSentenceEdit(define)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n\n                        </md-list-item>\n                    </md-list>\n\n                    <md-button    ng-if = "user.get(\'user_role\') == \'teacher\' "  class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition"> <span ui-sref="admin-panel.default.word-page({lemma:lemma,originlemma:lemma})" >add new definition</span></md-button>\n                </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("components/addword/addword.tmpl.html",'<div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start" palette-background="myPurple:700">\n		<md-button ng-disabled = "diabled_add_word" class="md-raised md-warn" ng-click="popDefines(lemma)" \n		style="background:rgb(236, 64, 122);position: absolute;right: 5%; bottom: 15%;height:43px;">\n			<md-icon md-font-icon="icon-add" class=" icon-add" aria-hidden="false" \n			style="color:rgba(255,255,255,0.87)"></md-icon>study\n		</md-button>\n</div>'),e.put("components/addword/editdefine.tmpl.html",'<div id = "edit-define" style = "display:inline;">\n<md-button ng-click = "popVoteSentenceEdit(defineid)" class="md-raised md-primary" palette-background="pink:400" aria-label="Edit"><div ng-transclude></div></md-button>\n</div>'),e.put("components/addword/select-class-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>{{\'ADMIN.Select\' | translate}}</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    \n\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content >\n                    <div >\n                        <table class="md-table">\n                             <thead>\n                                <th ng-if = "rs.user.get(\'user_role\') == \'teacher\'" style = "width:70%">\n                                    CLASS NAME\n                                </th>\n                                <th ng-if = "rs.user.get(\'user_role\') == \'student\'" style = "width:70%">\n                                    WORD LIST\n                                </th>\n                                <th>\n                                    ACTION\n                                </th>\n                             </thead>\n                             <tbody>\n                                <tr ng-repeat="class in myClasses" >\n                                    <td style = "width:70%">\n                                        <span class="name">{{class.get(\'name\')}}</span>\n                                    </td>\n                                    <td>\n                                        <md-button palette-background="pink:400" ng-click = "selectClass(class)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="{{\'ADMIN.Select\' | translate}}">{{\'ADMIN.Select\' | translate}}</md-button>\n                                    </td>\n                                </tr>\n                             </tbody>\n                        </table>\n                    </div>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button class="md-primary" aria-label="Next">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("components/addword/sidebar-add-word.tmpl.html",'<md-content id = "search-wrapper" flex layout layout-padding class="admin-notifications add-word-wrapper">\n    <div class = "outer">\n            <md-button style = "margin-left: 0;" palette-background="pink:400" ng-click="openSideNav(\'sidebar-addword\')"  class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="close"><md-icon  md-font-icon="fa fa-times"></md-icon></md-button>\n\n\n            <md-input-container>\n                <label class = "md-title">{{\'ADMIN.Search\' | translate}}</label>\n                <input ng-change = "inputChangeSearch()" ng-model =\'search_word\' type="text">\n            </md-input-container>\n\n            \n             <p>\n                <md-checkbox  ng-model="view_save_list" ng-click = "getClass()" aria-label="Default Checkbox">\n                    {{\'ADMIN.View_saved_list\' | translate}}\n                </md-checkbox>\n            </p>\n\n            <div ng-if = "view_save_list && user.get(\'user_role\') == \'teacher\' ">\n                <md-button ng-repeat="class in myClasses"   palette-background="myPurple:900" class="md-raised md-primary full-width margin-left-0 margin-right-0"  ui-sref="admin-panel.default.wordlist({ classid: class.id,page:1})" aria-label="{{class.get(\'name\')}}">{{class.get(\'name\')}}</md-button>\n            </div>\n\n            <div ng-if = "view_save_list && user.get(\'user_role\') == \'student\' ">\n                <md-button palette-background="myPurple:900" class="md-raised md-primary full-width margin-left-0 margin-right-0"  ui-sref="admin-panel.default.review({student_id:user.id,page:1})" aria-label="View My List (Default)">View My List (Default)</md-button>\n            </div>\n        <div>\n\n            <md-list>\n                <md-list-item  ng-repeat="word in customziedWords">\n                    <p class="text-ellipsis" >{{word.get(\'lemma\')}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = removeWordFromCustomWords(word)   class="md-raised md-primary" aria-label="Delete">{{\'ADMIN.REMOVE\' | translate}}</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n\n            </md-list>\n\n            <md-button ng-click = "save_add_list_cat()" class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" aria-label="Save list">{{\'ADMIN.Save_new_list\' | translate}}</md-button>\n\n        </div>\n    </div>\n</md-content>'),e.put("components/footer/footer.tmpl.html",'<md-toolbar id="footer" md-theme="{{triSkin.elements.toolbar}}" ng-controller="FooterController">\n    <div class="md-toolbar-tools md-body-1" layout="row" layout-align="space-between center">\n    	<div class = "footer-box">\n    		<h2 ng-if = "user.get(\'user_role\') == \'student\' " class = "first padding-10 disclaimer footer-points" style = "margin-left:16px;">\n        	<span><i class="fa fa-star"></i>{{ user.get(\'point\') | number : fractionSize}}</span></h2>\n\n	        <h2 class = "second bg-tm padding-10 disclaimer" style = "margin-left:16px;">&copy; {{footerInfo.date | amDateFormat:\'YYYY\'}} wordiser.com | <span>v{{footerInfo.version}}</span></h2>\n    		\n    	</div>\n        <h2></h2>\n    </div>\n</md-toolbar>\n'),e.put("components/side-menu/side-menu-divider.tmpl.html","<md-divider></md-divider>"),e.put("components/side-menu/side-menu-dropdown.tmpl.html",'<style>\n	li .side-menu-icon{\n		font-size: 28px!important;\n	}\n</style>\n<md-button ng-click="toggleMenu()" class="md-raised md-primary side-menu-link">\n    <md-icon ng-if="item.icon !== undefined" class="side-menu-icon" md-font-icon="{{item.icon}}"></md-icon>\n    {{item.name | translate}}\n    <md-icon class="menu-toggle-icon" md-font-icon="icon-keyboard-arrow-right" ng-class="{ open: item.open }"></md-icon>\n</md-button>\n<ul class="drop-down-list" ng-show="item.open">\n    <li ng-repeat="child in item.children | orderBy:\'priority\'">\n        <side-menu-item item="child"></side-menu-item>\n    </li>\n</ul>'),e.put("components/side-menu/side-menu-link.tmpl.html",'<md-button ng-if = "item.name == \'HELP\' || item.name == \'REFERENCE\' || item.name == \'COURSES\'" ng-click="openLink()" class="font-pink side-menu-item md-primary md-raised side-menu-link" ng-class="activeClass()">\n    <md-icon ng-if="item.icon !== undefined" class="side-menu-icon {{item.icon}}" md-font-icon="{{item.icon}}"></md-icon>\n    {{item.name | translate}}\n    <small ng-if="item.badge || item.badge == 0" theme-background="accent" class="side-menu-badge">{{item.badge}}</small>\n</md-button>\n\n<md-button ng-if = "item.name != \'HELP\' && item.name != \'REFERENCE\' && item.name != \'COURSES\'" ng-click="openLink()" class=" side-menu-item md-primary md-raised side-menu-link" ng-class="activeClass()">\n    <md-icon ng-if="item.icon !== undefined" class="side-menu-icon {{item.icon}}" md-font-icon="{{item.icon}}"></md-icon>\n    {{item.name | translate}}\n    <small ng-if="item.badge || item.badge == 0" theme-background="accent" class="side-menu-badge">{{item.badge}}</small>\n</md-button>'),e.put("components/sidebar-filter/sidebar-filter.tmpl.html",'<md-content flex layout class="admin-notifications">\n    <md-tabs flex md-stretch-tabs="always" md-selected="notificationsTab">\n        <md-tab>\n            <md-tab-label>\n                A-Z\n            </md-tab-label>\n            <md-tab-body>\n                <md-content>\n                    <div class="letters" id="letters">\n                    <ol>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'a\'})">A</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'b\'})">B</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'c\'})">C</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'d\'})">D</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'e\'})">E</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'f\'})">F</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'g\'})">G</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'h\'})">H</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'i\'})">I</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'j\'})">J</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'k\'})">K</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'l\'})">L</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'m\'})">M</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'n\'})">N</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'o\'})">O</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'p\'})">P</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'q\'})">Q</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'r\'})">R</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'s\'})">S</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'t\'})">T</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'u\'})">U</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'v\'})">V</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'w\'})">W</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'x\'})">X</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'y\'})">Y</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'z\'})">Z</button></li>\n                        <li><button ui-sref="admin-panel.default.notice-list({page:1,startwith:\'all\'})">*</button></li>\n                        <div class="clr"></div>\n                    </ol>\n                </div>\n                </md-content>\n            </md-tab-body>\n        </md-tab>\n        <md-tab>\n            <md-tab-label>\n                Sounds\n            </md-tab-label>\n            <md-tab-body>\n                <md-content>\n                    <div class="letters pronounce" id="produnce">\n                        <div class="white-bg">\n                        <p>Individual sounds for words are shown as phonemes and IPA. Consonants are the same as the English Alphabet, as well as the vowels A, E, I and O. Pronunciation is for connected speech and not stressed words in isolation.</p>\n                        <br>\n                        <p>Symbols for long vowel sounds:</p>\n                        <ol>\n                        <li><button ng-click = "changePro(\'A\')" >A [ eɪ ] <span>a</span>ble</button></li>\n                        <li><button ng-click = "changePro(\'E\')" >E [ i: ] <span>e</span>ven</button></li>\n                        <li><button ng-click = "changePro(\'I\')" >I [ aɪ ] <span>i</span>ce</button></li>\n                        <li><button ng-click = "changePro(\'O\')" >O [ əʊ ] <span>o</span>pen</button></li>\n                        <li><button ng-click = "changePro(\'uw\')" >uw [ u: ] sch<span>oo</span>l</button></li>\n                        </ol>\n                        <p>Symbols for very short vowel sounds:</p>\n                        <ol>\n                        <li><button ng-click = "changePro(\'a\')" >a [ æ ] <span>a</span>t</button></li>\n                        <li><button ng-click = "changePro(\'e\')" >e [ e ] <span>e</span>gg</button></li>\n                        <li><button ng-click = "changePro(\'ih\')" >ih [ ɪ ] <span>i</span>t</button></li>\n                        <li><button ng-click = "changePro(\'o\')" >o [ ɒ ] <span>o</span>ff</button></li>\n                        <li><button ng-click = "changePro(\'ah\')" >ah [ ʌ ] <span>u</span>gly</button></li>\n                        </ol>\n                        <p>Symbols for longer, short vowel sounds:</p>\n                        <ol>\n                        <li><button ng-click = "changePro(\'aa\')" >aa [ ə ] <span>a</span>go</button></li>\n                        <li><button ng-click = "changePro(\'eh\')" >eh [ e ] h<span>e</span>lp</button></li>\n                        <li><button ng-click = "changePro(\'uuh\')" >uuh [ ʊ ] b<span>oo</span>k</button></li>\n                        </ol>\n                        <p>Combined sounds:</p>\n                        <ol>\n                        <li><button ng-click = "changePro(\'aw\')" >aw [ aʊ ] <span>ou</span>ter</button></li>\n                        <li><button ng-click = "changePro(\'aa r\')" >aa r [ a: ] c<span>ar</span></button></li>\n                        <li><button ng-click = "changePro(\'er\')" >er [ ɜ: ] w<span>or</span>d</button></li>\n                        <li><button ng-click = "changePro(\'e r\')" >e r [ eə ] squ<span>are</span></button></li>\n                        <li><button ng-click = "changePro(\'ia\')" >ia [ ɪə ] n<span>ear</span></button></li>\n                        <li><button ng-click = "changePro(\'or\')" >or [ ɔ: ] f<span>or</span></button></li>\n                        <li><button ng-click = "changePro(\'oy\')" >oy [ ɔɪ ] b<span>oy</span></button></li>\n                        <li><button ng-click = "changePro(\'ua\')" >ua [ ʊə ] p<span>oor</span></button></li>\n                        <li><button ng-click = "changePro(\'ch\')" >ch [ tʃ ] <span>ch</span>urch</button></li>\n                        <li><button ng-click = "changePro(\'jh\')" >jh [ dʒ ] en<span>j</span>oy</button></li>\n                        <li><button ng-click = "changePro(\'sh\')" >sh [ ʃ ] <span>sh</span>ut</button></li>\n                        <li><button ng-click = "changePro(\'zh\')" >zh [ ʒ ] plea<span>s</span>ure</button></li>\n                        <li><button ng-click = "changePro(\'th\')" >th [ θ ] <span>th</span>in</button></li>\n                        <li><button ng-click = "changePro(\'dh\')" >dh [ ð ] <span>th</span>ere</button></li>\n                        <li><button ng-click = "changePro(\'ng\')" >ng [ ŋ ] goi<span>ng</span></button></li>\n                        </ol>\n                        <p>Particular US sound:</p>\n                        <ol>\n                        <li><button ng-click = "changePro(\'ae\')" >ae [ aa ] <span>a</span>t</button></li>\n                        </div>\n                        </div>\n                </md-content>\n            </md-tab-body>\n        </md-tab>\n    </md-tabs>\n</md-content>\n'),e.put("components/sidebar-left/sidebar-left.tmpl.html",'<md-toolbar class="sidebar-left-toolbar" md-theme="{{triSkin.elements.logo}}">\n    <div class="md-toolbar-tools" layout="row" layout-align="start center">\n\n\n        <md-button class="md-icon-button sidebar-left-icon" ng-click="toggleMenuLock()" aria-label = "Botton">\n            <md-icon md-font-icon ng-class="isMenuLocked == true ? \'icon-unfold-less\': \'icon-unfold-more\'"></md-icon>\n        </md-button>\n\n    </div>\n</md-toolbar>\n\n<side-menu md-theme="{{triSkin.elements[\'sidebar\']}}" flex></side-menu>\n'),e.put("components/sidebar-right/sidebar-right.tmpl.html",'<md-content id = "search-wrapper" class = "email-search" flex layout layout-padding class="admin-notifications add-word-wrapper" style = "padding:0;">\n\n\n     <div class = "outer">\n        <div>\n            <md-button hide-xs hide-sm hide-md  palette-background="pink:400" ng-click="toggleNotificationsTab(0)"  class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="close"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n\n            <md-button hide-gt-md style = "margin-left:16px;margin-top:14px;"  palette-background="pink:400" ng-click="toggleNotificationsTab(0)"  class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="close"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n        </div>\n        \n\n        <md-input-container>\n            <label class = "md-title">Search</label>\n            <input ng-change = "inputChangeSearchEmail()" ng-model =\'search_word\' type="text">\n        </md-input-container>\n        \n\n        <md-list>\n            <md-list-item class="md-3-line" ng-repeat="email in emails"  ng-class = "emailStatusClass(email)" >\n                <div class="md-list-item-text" ng-click="openMail(email)">\n                    <div class="email-inbox-list-item-name-time" layout="row" layout-align="space-between start">\n                        <h3>{{email.get(\'fromname\')}}</h3>\n                        \n                    </div>\n                    <h4 style = "line-height: 1.2em;">{{email.get(\'subject\')}}</h4>\n                    <p  style = "font-size: 12px;" class="md-caption" am-time-ago="email.createdAt"></p>\n                </div>\n                <md-divider ng-hide="$last"></md-divider>\n            </md-list-item>\n        </md-list>\n    </div>\n</md-content>\n'),e.put("components/sidebar-search/sidebar-search.tmpl.html",'<style>\n    .open-filter {\n    background: rgba(0, 0, 0, 0.3);\n    display: inline-block;\n    padding: 5px 10px;\n}\n.fa-share-square-o:before{    \n    color: #fff;\n}\n</style>\n<md-content id = "search-wrapper" flex layout layout-padding class="admin-notifications">\n    <div class = "outer">\n        <md-button hide-xs hide-sm hide-md style = "margin-left: 0;"  palette-background="pink:400" ng-click="openSideNav(\'sidebar-search\')"   class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="close"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n\n        <md-button hide-gt-md style = "margin-left: 8px;"  palette-background="pink:400" ng-click="openSideNav(\'sidebar-search\')"   class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="close"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n        \n        <div>\n            <md-input-container>\n                <label class = "md-title">Search</label>\n                <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchInputChange()" ng-model = search_word type="text"></md-input-container>\n        </div>\n\n        \n\n\n        <div>\n            <p ng-if = "user.get(\'user_role\') != \'student\' ">\n                <md-checkbox ng-change = "searchChange(\'word\')" ng-model="words_check" aria-label="Default Checkbox">\n                    Words / Phrases\n                </md-checkbox>\n            </p>\n            <p>\n                <md-checkbox ng-change = "searchChange(\'cat\')" ng-model="cat_check"  aria-label="Default Checkbox">\n                    Subjects / Topics\n                </md-checkbox>\n            </p>\n            <p>\n                 <md-button ng-if = "user.get(\'admin\')" ng-click = "popAddNewWord()" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                        Add new word\n                </md-button>\n            </p>\n        </div>\n          <div ng-show = "search_word && words_check" >\n            <md-list>\n                <md-list-item class = "hand" ng-repeat="word in searchWordList">\n                    <p class="text-ellipsis" ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})">{{word.get(\'lemma\')}}</p>\n                    <md-icon ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})"  md-font-icon="icon-keyboard-arrow-right" class="md-primary"></md-icon>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n\n        <div ng-show = "search_word && cat_check" >\n            <md-list>\n                <md-list-item class = "hand" ng-repeat="cat in searchWordList">\n                    <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                     <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n\n                    \n                    <md-icon style = "color:#fff" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" md-font-icon="icon-keyboard-arrow-right" class="md-primary"></md-icon>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n   \n    </div>\n</md-content>'),e.put("components/tables/table-directive.tmpl.html",'<table class="md-table">\n    <thead>\n        <tr>\n            <th ng-repeat="column in columns" ng-click="sortClick(column.field)" ng-class="headerClass(column.field)">\n                <md-icon ng-show="showSortOrder(column.field, true)" class="icon-rotate-90" md-font-icon="icon-arrow-back"></md-icon>\n                <md-icon ng-show="showSortOrder(column.field, false)" class="icon-rotate-270" md-font-icon="icon-arrow-back"></md-icon>\n                <span>\n                    {{column.title}}\n                </span>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat="content in contents | filter:filters | startFrom:page * pageSize | limitTo: pageSize">\n            <td ng-repeat="column in columns" ng-bind-html="cellContents(column, content)" ng-class="column.field + \'-cell\'"></td>\n        </tr>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td colspan="{{columns.length}}">\n                <div class="md-table-footer" layout="row" layout-align="end center">\n                    <div class="md-table-page-select" layout="row" layout-align="center center">\n                        <span>Rows per page:</span>\n                        <md-select ng-model="pageSize" ng-change="refresh(true)">\n                            <md-option value="5">5</md-option>\n                            <md-option value="10">10</md-option>\n                            <md-option value="25">25</md-option>\n                            <md-option value="50">50</md-option>\n                            <md-option value="100">100</md-option>\n                        </md-select>\n                    </div>\n                    <span class="md-table-info">\n                        {{pageStart()}}\n                        -\n                        {{pageEnd()}}\n                        {{\'TABLES.OF\' | translate}}\n                        {{numberOfPages()}}\n                    </span>\n                    <div class="md-table-page-nav">\n                        <md-button ng-disabled="page == 0" ng-click="page = page - 1" aria-label="{{\'TABLES.PREV\' | translate}}" class="md-primary md-icon-button">\n                            <md-icon md-font-icon="icon-chevron-left"></md-icon>\n                        </md-button>\n                        <md-button ng-disabled="page == numberOfPages() - 1" ng-click="page = page + 1" aria-label="{{\'TABLES.NEXT\' | translate}}" class="md-primary md-icon-button">\n                            <md-icon md-font-icon="icon-chevron-right"></md-icon>\n                        </md-button>\n                    </div>\n                </div>\n            </td>\n        </tr>\n    </tfoot>\n</table>'),e.put("components/toolbars/default.tmpl.html",'<div class="md-toolbar-tools" style="overflow: hidden;max-width: 100vw;">\n    <md-button class="md-icon-button top-nav-btn" ng-click="openSideNav(\'left\')" aria-label="side navigation">\n        <md-icon md-font-icon="icon-menu" style = "font-size: 3rem;"></md-icon>\n    </md-button>\n\n    <img show-sm hide-gt-sm ng-show=\'user\' ui-sref="admin-panel.default.profile" class="toolbar-user-avatar hand" ng-src="{{user_avatar}}">\n\n    <div hide-sm id="user-avatar" ui-sref="admin-panel.default.profile">\n        <md-button aria-label="Open user menu">\n            <img ng-show=\'user\' ui-sref="admin-panel.default.profile" class="toolbar-user-avatar" ng-src="{{user_avatar}}">\n            <span  ng-show=\'user\'  ui-sref="admin-panel.default.profile">{{user.get(\'username\')}}</span>\n            <span ng-show=\'!user\' ng-click="login()">Login</span>\n        </md-button>\n    </div>\n\n    \n\n    <div hide-gt-md class="center-logo-2">\n        <img  ui-sref="admin-panel.default.home" class = "hand toolbar-user-avatar" ui-sref="admin-panel.default.home" ng-src="assets/images/icons/144-2.png" alt="Wordiser">\n    </div>   \n\n    <div hide-sm hide-md  class="center-logo">\n        \n\n        <img class = "hand" ui-sref="admin-panel.default.home" ng-src="assets/images/logo.png" alt="Wordiser" width="150px" src="assets/images/logo.png">\n    </div>\n    <span flex></span>\n    <md-button class="md-icon-button review-pop" ng-click="openSideNav(\'sidebar-search\')" aria-label="Search">\n        <md-icon md-font-icon="fa fa-search"></md-icon>\n        <md-tooltip>{{\'ADMIN.SEARCH\' | translate}}</md-tooltip>\n    </md-button>\n\n    \n    <md-button ng-if = "gb.new_emails > 0" class="md-icon-button toolbar-button review-pop" ng-click="toggleNotificationsTab(0)" ng-class="{buttonpink : gb.new_emails > 0}">\n        <md-icon md-font-icon="fa fa-envelope"></md-icon>\n        <md-tooltip>\n            <div class="view-email-tip">{{\'ADMIN.NOTICES\' | translate}}</div>\n        </md-tooltip>\n        <span hide-sm class="toolbar-button-badge" theme-background="accent" ng-if=\'gb.new_emails > 0\'>{{gb.new_emails}}</span>\n    </md-button>\n    <md-button ng-if = "gb.wordListNum > 0" ng-class="{buttonpink : gb.wordListNum > 0}" class="md-icon-button review-pop" ng-click="openSideNav(\'sidebar-addword\')" aria-label="AddWord">\n        <md-icon md-font-icon="fa fa-list-alt"></md-icon>\n        <md-tooltip>\n            <div class="view-study-list-tip">{{\'ADMIN.STUDY_LIST\' | translate}}</div>\n        </md-tooltip>\n        <span hide-sm class="toolbar-button-badge" theme-background="accent" ng-if=\'gb.wordListNum!=0\'>{{gb.wordListNum}}</span>\n    </md-button>\n\n    <md-button ng-if="(userNeedReviewNumber > 0 && user.get(\'user_role\') == \'student\') || ( user.get(\'testaccount\')  && userNeedReviewNumber > 0)" ng-class="{buttonpink : userNeedReviewNumber > 0}" class="md-icon-button toolbar-button review-pop" ng-click="popReview()">\n        <md-icon md-font-icon="fa fa-history"></md-icon>\n        <md-tooltip>{{\'ADMIN.STUDY\' | translate}}</md-tooltip>\n        <span hide-sm class="toolbar-button-badge" theme-background="accent" ng-if=\'userNeedReviewNumber > 0\'>{{userNeedReviewNumber}}</span>\n    </md-button>\n</div>\n'),e.put("components/toolbars/email-toast-template.tmpl.html",'<md-toast class = "tutorial-toast">\n  {{msg}}\n  <md-button ng-click="openEmail()" palette-background="pink:400"  class="md-raised md-primary open-read-email" aria-label="view">view</md-button>\n</md-toast>'),e.put("components/toolbars/tutorial-toast-template.tmpl.html",'<md-toast class = "tutorial-toast">\n  <md-icon md-font-icon="icon-menu"></md-icon>Tutorials...\n\n  <md-button ng-click="studyNoteOpenNow()" palette-background="pink:400"  class="md-raised md-primary" aria-label="Save now! ">Save now! </md-button>\n</md-toast>'),e.put("app/authentication/forgot/forgot.tmpl.html",'<div layout="row" flex layout-padding layout-fill layout-align="center center">\n    <div flex="40" flex-lg="50" flex-md="70" flex-sm="100">\n        <md-card>\n            <md-toolbar>\n                <div class="padding-20 text-center" palette-background="myPurple:500">\n                    <h1 class="md-headline">\n                        {{\'FORGOT.TITLE\' | translate}}\n                    </h1>\n                </div>\n            </md-toolbar>\n\n            <md-content class="md-padding">\n                <p>{{\'FORGOT.ENTER_EMAIL\' | translate}}</p>\n                <form name="forgot">\n                    <md-input-container>\n                        <label for="email">{{\'FORGOT.EMAIL.LABEL\' | translate}}</label>\n                        <input id="email" label="email" name="email" type="email" ng-model="user.email" required/>\n                        <div ng-messages="login.email.$error">\n                            <div ng-message when="required">\n                                {{\'FORGOT.EMAIL.PLEASE_ENTER\' | translate}}\n                            </div>\n                            <div ng-message when="email">\n                                {{\'FORGOT.EMAIL.PLEASE_VALID\' | translate}}\n                            </div>\n                        </div>\n                    </md-input-container>\n\n                    <md-button class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" ng-click="resetClick()" ng-disabled="lock.$invalid">{{\'FORGOT.RESET\' | translate}}</md-button>\n\n                    <md-button  class="md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" href="#/login">{{\'FORGOT.LOGIN\' | translate}}</md-button>\n\n                </form>\n            </md-content>\n        </md-card>\n\n    </div>\n</div>'),e.put("app/authentication/layouts/authentication.tmpl.html",'<div class="authentication-page" layout="row" layout-fill>\n    <div class="animate-wrapper" flex layout="row">\n        <div id="ui-login" class="login-frame" ui-view flex layout="row">\n        </div>\n    </div>\n</div>'),e.put("app/authentication/lock/lock.tmpl.html",'<div layout="row" flex layout-padding layout-fill layout-align="center center">\n    <div flex="40" flex-lg="50" flex-md="70" flex-sm="100">\n        <md-card>\n            <md-toolbar>\n                <div class="padding-20 text-center">\n                    <div><img src="assets/images/logo.png" alt="{{appName}}"></div>\n                    <h1 class="md-headline">\n                        {{\'LOCK.TITLE\' | translate}} {{user.name}}\n                    </h1>\n                </div>\n            </md-toolbar>\n\n            <md-content class="md-padding">\n\n                <p class="margin-top-20 margin-bottom-20">{{\'LOCK.LOGGED_OUT\' | translate}}</p>\n\n                <form name="lock">\n                    <md-input-container>\n                        <label for="password">{{\'LOCK.PASSWORD.LABEL\' | translate}}</label>\n                        <input  id="password" label="password" name="password" type="password" ng-model="user.password" required/>\n                        <div ng-messages for="login.password.$error">\n                            <div ng-message when="required">\n                                {{\'LOCK.PASSWORD.PLEASE_ENTER\' | translate}}\n                            </div>\n                        </div>\n                    </md-input-container>\n\n                    <md-button class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" ng-click="loginClick()" ng-disabled="lock.$invalid">{{\'LOCK.LOGIN\' | translate}}</md-button>\n\n\n                    <md-button  class="md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" ng-click="logoutClick()">{{\'LOCK.LOGOUT\' | translate}}</md-button>\n\n                </form>\n\n            </md-content>\n\n        </md-card>\n    </div>\n</div>'),e.put("app/authentication/login/cookies-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Cookies</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:18px;">\n        <h1>Cookie Policy for Wordiser</h1>\n\n<p>This is the Cookie Policy for Wordiser, accessible from https://app.wordiser.com</p>\n\n<p><strong>What Are Cookies</strong></p>\n\n<p>As is common practice with almost all professional websites this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it and why we sometimes need to store these cookies. We will also share how you can prevent these cookies from being stored however this may downgrade or \'break\' certain elements of the sites functionality.</p>\n\n<p>For more general information on cookies see the Wikipedia article on HTTP Cookies.</p>\n\n<p><strong>How We Use Cookies</strong></p>\n\n<p>We use cookies for a variety of reasons detailed below. Unfortunately in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site. It is recommended that you leave on all cookies if you are not sure whether you need them or not in case they are used to provide a service that you use.</p>\n\n<p><strong>Disabling Cookies</strong></p>\n\n<p>You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit. Disabling cookies will usually result in also disabling certain functionality and features of the this site. Therefore it is recommended that you do not disable cookies.</p>\n\n<p><strong>The Cookies We Set</strong></p>\n\n<ul>\n\n<li>\n<p>Account related cookies</p>\n<p>If you create an account with us then we will use cookies for the management of the signup process and general administration. These cookies will usually be deleted when you log out however in some cases they may remain afterwards to remember your site preferences when logged out.</p>\n</li>\n\n<li>\n<p>Login related cookies</p>\n<p>We use cookies when you are logged in so that we can remember this fact. This prevents you from having to log in every single time you visit a new page. These cookies are typically removed or cleared when you log out to ensure that you can only access restricted features and areas when logged in.</p>\n</li>\n\n<li>\n<p>Orders processing related cookies</p>\n<p>This site offers e-commerce or payment facilities and some cookies are essential to ensure that your order is remembered between pages so that we can process it properly.</p>\n</li>\n\n<li>\n<p>Forms related cookies</p>\n<p>When you submit data to through a form such as those found on contact pages or comment forms cookies may be set to remember your user details for future correspondence.</p>\n</li>\n\n<li>\n<p>Site preferences cookies</p>\n<p>In order to provide you with a great experience on this site we provide the functionality to set your preferences for how this site runs when you use it. In order to remember your preferences we need to set cookies so that this information can be called whenever you interact with a page is affected by your preferences.</p>\n</li>\n\n</ul>\n\n<p><strong>Third Party Cookies</strong></p>\n\n<p>In some special cases we also use cookies provided by trusted third parties. The following section details which third party cookies you might encounter through this site.</p>\n\n<ul>\n\n<li>\n<p>This site uses Google Analytics which is one of the most widespread and trusted analytics solution on the web for helping us to understand how you use the site and ways that we can improve your experience. These cookies may track things such as how long you spend on the site and the pages that you visit so we can continue to produce engaging content.</p>\n<p>For more information on Google Analytics cookies, see the official Google Analytics page.</p>\n</li>\n\n<li>\n<p>From time to time we test new features and make subtle changes to the way that the site is delivered. When we are still testing new features these cookies may be used to ensure that you receive a consistent experience whilst on the site whilst ensuring we understand which optimisations our users appreciate the most.</p>\n</li>\n\n<li>\n<p>We use adverts to offset the costs of running this site and provide funding for further development. The behavioural advertising cookies used by this site are designed to ensure that we provide you with the most relevant adverts where possible by anonymously tracking your interests and presenting similar things that may be of interest.</p>\n</li>\n\n<li>\n<p>We also use social media buttons and/or plugins on this site that allow you to connect with your social network in various ways. For these to work the social media sites will set cookies through our site which may be used to enhance your profile on their site or contribute to the data they hold for various purposes outlined in their respective privacy policies.</p>\n</li>\n\n</ul>\n\n<p><strong>More Information</strong></p>\n\n<p>Hopefully that has clarified things for you and as was previously mentioned if there is something that you aren\'t sure whether you need or not it\'s usually safer to leave cookies enabled in case it does interact with one of the features you use on our site. </p>\n\n<p>However if you are still looking for more information then you can contact us through one of our preferred contact methods:</p>\n\n<ul>\n<li>Email: wordiser@gmail.com</li>\n\n</ul>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button  ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/authentication/login/cookies-toast-template.tmpl.html",'<md-toast class = "tutorial-toast login" style = "max-height:100px;overflow: auto;height: 100%;">\n  {{\'LOGIN.we_use_cookies\' | translate}}\n  <md-button ng-click="openCookiesDialog()" palette-background="pink:400"  class="md-raised md-primary open-read-email" aria-label="{{\'LOGIN.View\' | translate}}">{{\'LOGIN.View\' | translate}}</md-button>\n  <md-button ng-click="closeDialog()" palette-background="pink:400"  class="md-raised md-primary open-read-email" aria-label="{{\'LOGIN.Close\' | translate}}">{{\'LOGIN.Close\' | translate}}</md-button>\n</md-toast>'),e.put("app/authentication/login/login.tmpl.html",'<div layout="row" flex layout-padding layout-fill layout-align="center center">\n    <div flex="40" flex-lg="50" flex-md="70" flex-sm="100">\n        <md-card>\n            <md-toolbar palette-background="myPurple:500">\n                <div class="padding-20 text-center">\n                    <h1 class="md-headline">\n                         {{\'LOGIN.Join_or_Login\' | translate}}\n                    </h1>\n                </div>\n            </md-toolbar>\n\n\n            <md-content class="md-padding">\n\n                <md-button ng-click = "useTranslate(\'sp\')" palette-background="pink:400" class="margin-left-0" style = "color:#fff" >{{\'LOGIN.SPANISH\' | translate}}</md-button>\n\n                <md-button ng-click = "useTranslate(\'en\')" palette-background="pink:400" class="margin-left-0" style = "color:#fff" >{{\'LOGIN.English\' | translate}}</md-button>\n\n                <form name="login">\n                    \n                    <md-button palette-background="pink:400" class="join-btn md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10"  href="#/signup" style = "color:#fff" >{{\'LOGIN.JOIN\' | translate}}</md-button>\n\n                    <md-button  class="md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" href="#/signup"> {{\'LOGIN.dont_have_an\' | translate}}</md-button>\n                    \n                    <md-input-container>\n                        <label for="name"> {{\'LOGIN.Username_or_email\' | translate}}</label>\n                        <input id="name" label="name" name="name" ng-model="account.name" required/>\n                        <div ng-messages="login.name.$error">\n                            <div ng-message when="required">\n                                {{\'LOGIN.EMAIL.PLEASE_ENTER\' | translate}}\n                            </div>\n                            <div ng-message when="name">\n                                {{\'LOGIN.EMAIL.PLEASE_VALID\' | translate}}\n                            </div>\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="password">{{\'LOGIN.PASSWORD.LABEL\' | translate}}</label>\n                        <input  id="password" label="password" name="password" type="password" ng-model="account.password" required/>\n                        <div ng-messages for="login.password.$error">\n                            <div ng-message when="required">\n                                {{\'LOGIN.PASSWORD.PLEASE_ENTER\' | translate}}\n                            </div>\n                        </div>\n                    </md-input-container>\n\n                    <div layout="row" layout-align="space-between center">\n\n                        <md-input-container>\n                            <md-button flex class="md-primary" href="#/forgot">{{\'LOGIN.FORGOT\' | translate}}</md-button>\n                        </md-input-container>\n\n                    </div>\n\n\n                    <md-button class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10"  ng-click="loginClick()" ng-disabled="login.$invalid">{{\'LOGIN.BUTTON\' | translate}}</md-button>\n\n\n\n                </form>\n            </md-content>\n        </md-card>\n    </div>\n</div>\n'),e.put("app/authentication/profile/edit-avatar-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Pick avatar</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <div class = "my-avatar" style = "overflow:auto;">\n                    <div class="hand avatar-images">\n                        <img  ng-src="{{rs.user_avatar}}" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                </div>\n\n\n\n                <div class="upload">\n                    <md-button palette-background="pink:400" ngf-select ng-model="file" ngf-multiple="false" ng-disabled = "data.uploading" class="margin-left-0 md-raised md-primary">Select file</md-button>\n\n                    <p ng-if = "upload_obj.message">{{upload_obj.message}}</p>\n                    <p ng-if = "data.uploading">You can only upload copyright free images!</p>\n                </div>\n\n                <div >\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-default.png\')">\n                        <img src="assets/images/avatars/avatar-default.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-1.png\')">\n                        <img src="assets/images/avatars/avatar-1.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-2.png\')">\n                        <img src="assets/images/avatars/avatar-2.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-3.png\')">\n                        <img src="assets/images/avatars/avatar-3.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-4.png\')">\n                        <img src="assets/images/avatars/avatar-4.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    \n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-5.png\')">\n                        <img src="assets/images/avatars/avatar-5.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n            </div>\n            <div >\n                 <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/avatar-6.png\')">\n                        <img src="assets/images/avatars/avatar-6.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-blonde-eyes-brown-skin-light.png\')">\n                        <img src="assets/images/avatars/hair-blonde-eyes-brown-skin-light.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                   \n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-black-eyes-blue-green-skin-tanned.png\')">\n                        <img src="assets/images/avatars/hair-black-eyes-blue-green-skin-tanned.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-black-eyes-brown-skin-dark.png\')">\n                        <img src="assets/images/avatars/hair-black-eyes-brown-skin-dark.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                     <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-grey-eyes-dark-skin-tanned.png\')">\n                        <img src="assets/images/avatars/hair-grey-eyes-dark-skin-tanned.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n            </div>\n            <div >\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-black-eyes-brown-skin-tanned-2.png\')">\n                        <img src="assets/images/avatars/hair-black-eyes-brown-skin-tanned-2.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-black-eyes-brown-skin-tanned.png\')">\n                        <img src="assets/images/avatars/hair-black-eyes-brown-skin-tanned.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-black-eyes-dark-skin-dark.png\')">\n                        <img src="assets/images/avatars/hair-black-eyes-dark-skin-dark.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-blonde-eyes-blue-green-skin-light.png\')">\n                        <img src="assets/images/avatars/hair-blonde-eyes-blue-green-skin-light.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n                    <div class="hand avatar-images" ng-click = "changeAvatar(\'assets/images/avatars/hair-blonde-eyes-brown-skin-tanned.png\')">\n                        <img src="assets/images/avatars/hair-blonde-eyes-brown-skin-tanned.png" alt="girl-avatar" class="make-round" width="150" />\n                    </div>\n            </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n\n\n</md-dialog>\n\n\n<style type="text/css">\n    .button {\n    -moz-appearance: button;\n    /* Firefox */\n    -webkit-appearance: button;\n    /* Safari and Chrome */\n    padding: 10px;\n    margin: 10px;\n    width: 70px;\n}\n.drop-box {\n    background: #F8F8F8;\n    border: 5px dashed #DDD;\n    width: 200px;\n    height: 65px;\n    text-align: center;\n    padding-top: 25px;\n    margin: 10px;\n}\n.dragover {\n    border: 5px dashed blue;\n}\n</style>'),e.put("app/authentication/profile/profile.tmpl.html",'<md-content class="padded-content-page tm">\n\n\n    <div layout-gt-lg="row" layout-margin class="margin-0 profile-top" ng-if="user.get(\'user_role\') == \'student\' ">\n        <div flex flex-gt-lg="70">\n            <div class="margin-right-20 avatar">\n                <img  ng-src="{{user_avatar}}" alt="girl-avatar" class="make-round" width="100" height="100"/>\n               <div class="edit_avatar">\n                    <md-button class="md-raised md-primary" ng-click="popEditAvatar()">{{\'PROFILE.Pick\' | translate}}</md-button>\n                    <md-button class="md-raised md-primary" ng-click="logout()" palette-background="pink:400" >{{\'PROFILE.Logout\' | translate}}</md-button>\n\n                </div>\n            </div>\n            <div class="text-light bg-tm padding-10">\n                <h3 class="font-weight-600 margin-bottom-0 text-light">{{scuser.name}}</h3>\n                <div class="">\n                    <p class="md-subhead">{{scuser.bio}}</p>\n                </div>\n            </div>\n        </div>\n        <div flex layout="column" style="margin-bottom:0">\n            <widget palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding>\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-star"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end">\n                    <p class="md-display-3 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis" countupto="scuser.point" decimals="0"></p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'PROFILE.Points\' | translate}}</p>\n                </div>\n            </widget>\n            <widget palette-background="myPurple:500" content-layout="row" content-layout-align="space-between center" content-padding>\n                <div>\n                    <md-icon class="font-size-5 opacity-50 margin-left-10" md-font-icon="fa fa-history"></md-icon>\n                </div>\n                <div layout="column" layout-align="center end">\n                    <p class="md-display-3 font-weight-100 margin-top-0 margin-bottom-0 text-ellipsis" countupto="scuser.total" decimals="0"></p>\n                    <p class="md-body-2 opacity-60 margin-top-0 margin-bottom-0">{{\'PROFILE.Total_reviews\' | translate}}</p>\n                </div>\n            </widget>\n        </div>\n    </div>\n    <div layout-gt-lg="row" layout-margin class="margin-0 profile-top" ng-if="user.get(\'user_role\') == \'teacher\' ">\n        <div flex>\n            <div class="margin-right-20 avatar">\n                <img  ng-src="{{user_avatar}}" alt="girl-avatar" class="make-round" width="100" height = "100" />\n                <div class="edit_avatar">\n                    <md-button class="md-raised md-primary" ng-click="popEditAvatar()">{{\'PROFILE.Pick\' | translate}}</md-button>\n                    <md-button class="md-raised md-primary" ng-click="logout()" palette-background="pink:400" >{{\'PROFILE.Logout\' | translate}}</md-button>\n                </div>\n            </div>\n            <div class="text-light bg-tm padding-10">\n                <h3 class="font-weight-600 margin-bottom-0 text-light">{{scuser.name}}</h3>\n                <div class="">\n                    <p class="md-subhead">{{scuser.bio}}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <div layout="row" class="profile profile-bottom" layout-wrap>\n        <div flex="100" flex-gt-md="100">\n            <md-tabs palette-background="myPurple:500" md-dynamic-height md-border-bottom>\n                <md-tab label="{{\'PROFILE.Profile\' | translate}}">\n                    <md-content class="md-padding">\n\n                        <div ng-if="scuser.user_role != \'teacher\'">\n                             <md-button ng-click = "useTranslate(\'sp\')" palette-background="pink:400" class="margin-left-0" style = "color:#fff" >{{\'LOGIN.SPANISH\' | translate}}</md-button>\n\n                            <md-button ng-click = "useTranslate(\'en\')" palette-background="pink:400" class="margin-left-0" style = "color:#fff" >{{\'LOGIN.English\' | translate}}</md-button>\n                        </div>\n                       \n                \n                        <form name="profile">\n                            <md-input-container>\n                                <label for="email">{{\'PROFILE.Email\' | translate}}</label>\n                                <input id="email" label="email" name="email" type="text" ng-model="scuser.email" disabled="disabled" />\n                            </md-input-container>\n                            <md-input-container>\n                                <label for="name">{{\'PROFILE.Name\' | translate}}</label>\n                                <input id="name" label="name" name="name" type="text" ng-model="scuser.name" required/>\n                                <div ng-messages="profile.name.$error">\n                                    <div ng-message when="required">\n                                        {{\'PROFILE.NAME.PLEASE_ENTER\' | translate}}\n                                    </div>\n                                </div>\n                            </md-input-container>\n                            <md-input-container>\n                                <label for="location">{{\'PROFILE.Location\' | translate}}</label>\n                                <input id="location" label="location" name="location" type="text" ng-model="scuser.location" />\n                            </md-input-container>\n                            <md-input-container>\n                                <label for="school">{{\'PROFILE.School\' | translate}}</label>\n                                <input id="school" label="school" name="school" type="text" ng-model="scuser.school" />\n                            </md-input-container>\n\n                            <md-input-container>\n                                <label for="website">{{\'PROFILE.Website_or_blog\' | translate}}</label>\n                                <input id="website" label="website" name="website" type="text" ng-model="scuser.website" />\n                            </md-input-container>\n                            <md-input-container>\n                                <label for="twitter">{{\'PROFILE.Twitter\' | translate}}</label>\n                                <input id="twitter" label="twitter" name="twitter" type="text" ng-model="scuser.twitter" />\n                            </md-input-container>\n                            <md-input-container>\n                                <label for="bio">{{\'PROFILE.Personal_description\' | translate}}</label>\n                                <textarea id="bio" label="bio" name="bio" ng-model="scuser.bio" />\n                            </md-input-container>\n\n                            <p><md-button class="md-raised md-primary margin-left-0" ng-click="resetToturial()">{{\'PROFILE.Reset_TUTORIAL\' | translate}}</md-button></p>\n\n                            <md-button class="md-raised md-primary margin-left-0" ng-click="updateSettingsClick()" ng-disabled="profile.$invalid">{{\'PROFILE.Update\' | translate}}</md-button>\n\n\n                        </form>\n                    </md-content>\n                </md-tab>\n                <md-tab label="{{\'PROFILE.Settings\' | translate}}">\n                    <md-content class="md-padding">\n                        <md-list>\n                            <div>\n                                <form name="signup">\n                                    <md-list>\n                                        <md-subheader class="md-accent padding-left-0">{{\'PROFILE.Membership_type\' | translate}}</md-subheader>\n                                        <md-list-item>\n                                            <md-input-container>\n                                                <input id="account_type" label="account_type" name="account_type" type="text" ng-model="scuser.user_role" disabled="disabled" />\n                                            </md-input-container>\n                                        </md-list-item>\n                                    </md-list>\n                                    <md-list>\n                                        <md-subheader class="md-accent padding-left-0">{{\'PROFILE.Language\' | translate}}</md-subheader>\n                                        <md-list-item layout-wrap>\n                                            <md-select placeholder="Pick" ng-model="scuser.native" flex-xs="100" flex-sm="100">\n                                                <md-option value={{language.key}} ng-repeat="language in languages">{{language.name}}</md-option>\n                                            </md-select>\n                                            <p flex-xs="100" flex-sm="100">{{\'PROFILE.Native\' | translate}} language: {{languages[scuser.native].name}}</p>\n                                        </md-list-item>\n                                    </md-list>\n                                    <md-list>\n                                        <md-subheader class="md-accent padding-left-0">{{\'PROFILE.English_options\' | translate}}</md-subheader>\n                                        <md-list-item>\n                                            <md-radio-group ng-model="scuser.spelling">\n                                                <md-radio-button value="uk">{{\'PROFILE.UK_spelling_pronunciation\' | translate}}</md-radio-button>\n                                                <md-radio-button value="us">{{\'PROFILE.US_spelling_pronunciation\' | translate}}</md-radio-button>\n                                            </md-radio-group>\n                                        </md-list-item>\n                                    </md-list>\n                                    <div ng-if="scuser.user_role == \'student\'">\n                                        <md-subheader class="md-accent padding-left-0">{{\'PROFILE.Level\' | translate}}</md-subheader>\n                                        <md-list>\n                                            <md-list-item layout-wrap>\n                                                <md-select placeholder="Pick" ng-model="scuser.level" flex-xs="100" flex-sm="100">\n                                                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                                                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                                                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                                                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                                                    <md-option value="C1, Low Advanced">C1, Low Advance</md-option>\n                                                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                                                </md-select>\n                                                <p flex-xs="100" flex-sm="100">English level: {{scuser.level}}</p>\n                                            </md-list-item>\n                                        <md-list>\n\n\n\n                                    </div>\n                                    <div ng-if="scuser.user_role == \'teacher\'">\n                                        <md-list>\n                                            <md-subheader class="md-accent padding-left-0">{{\'PROFILE.English_level\' | translate}}</md-subheader>\n                                            <md-list-item>\n                                                <p>C2, Advanced</p>\n                                            </md-list-item>\n                                            <md-list>\n                                    </div>\n                                    <md-list>\n                                        <md-subheader class="md-accent padding-left-0">{{\'PROFILE.Rest_password\' | translate}}</md-subheader>\n                                        <p class="pass-tip">{{\'PROFILE.If_you_want_to_change_your_password\' | translate}}</p>\n                                        <md-list-item>\n                                            <md-button ng-click="resetPasswordClick()" class="md-raised md-primary" aria-label="Rest Password">{{\'PROFILE.RESET\' | translate}}</md-button>\n                                        </md-list-item>\n                                    </md-list>\n\n                                    <div>\n                                        <md-switch ng-model="scuser.receive_review_emails" ng-true-value="true" ng-false-value="false"  ng-click="toggleEmailsSettings()" aria-label="Receive email notifications" >\n                                            {{\'PROFILE.Receive_email_notifications\' | translate}}\n                                        </md-switch>\n\n\n\n                                    </div>\n                                    <md-button class="md-raised md-primary" ng-click="updateSettingsClick()" ng-disabled="profile.$invalid">{{\'PROFILE.Update\' | translate}}</md-button>\n                                </form>\n                            </div>\n                            </md-list>\n                    </md-content>\n                </md-tab>\n            </md-tabs>\n        </div>\n    </div>\n</md-content>\n\n'),e.put("app/authentication/signup/password.messages.html","<div ng-message when=\"required\">\n    {{'SIGNUP.PASSWORD.PLEASE_ENTER' | translate}}\n</div>\n<div ng-message when=\"minlength\">\n    {{'SIGNUP.PASSWORD.MIN_LENGTH' | translate}}\n</div>\n<div ng-message when=\"samePassword\">\n    {{'SIGNUP.PASSWORD.SAME_PASSWORD' | translate}}\n</div>\n"),e.put("app/authentication/signup/privacy-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Privacy</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n\n    <md-dialog-content>\n    	<div class="privacy">\n        <h3>privacy</h3>\n        <p>1 Who are Wordiser?</p>\n        <p>www.wordiser.com is a site operated by Wordiser Ltd, Wordiser Ltd is a company limited in liability registered in England with Companies House as Company No. 10619999 and registered office at 19 Park Central, Bow Quarter, 60 Fairfield Road, London Bow E32US. We are regulated by English Company &amp; Civil Law</p>\n        <p>2 Privacy Policy &amp; Cookies</p>\n        <p>Cookies are collected, stored, managed and used on our website.</p>\n        <p>2.1 Personal Data &amp; Communication</p>\n        <p>Your personal data will be used to provide the information and services offered through our website to you, for service fulfillment and enhanced learnig of the English Language and any specialist subsets thereof. If you sign up to our email newsletter we may use your email address to send you information about products or services. You can opt out of the newsletter at any point. We will correspond with you through a Facebook Group or Facebook Messenger, should there be any particular issues.</p>\n        <p>2.2 Cookies &amp; Monitoring</p>\n        <p>We monitor student page impressions from individual students to provide control data against data produced by advertisers on these same pages. We use Google Analytics and other tracking software to provide controls for the work we do and to support the work that Business Associates do bringing browser traffic to the site.</p>\n        <p>2.2.1 Types of Cookies</p>\n        <p>A cookie is a small text file that we store on your device. Our website uses cookies to distinguish from other users of you website. Cookies also provide us with information about how this website is used so we can keep it as up to date, relevant and error-free as possible.</p>\n        <p>Strictly necessary cookies - These are cookies that are essential to the operation of our website.</p>\n        <p>Analytical/performance cookie - These cookies allow us to recognise and count the number of visitors to our website.</p>\n        <p>Functionality cookies - These cookies are used to recognise you when you return to our website.</p>\n        <p>Targeting Cookies - These cookies record your visit to our website, the pages you have visited and the links you have followed.</p>\n        <p>We may monitor traffic to our site and collect the following optional information:</p>\n        <p>- The IP address of your computer</p>\n        <p>- The referring website from which you came to our website</p>\n        <p>The reasons for this are:</p>\n        <p>- To make ongoing improvements to our website based on this data</p>\n        <p>- To see our most popular sources of business</p>\n        <p>2.3 Disclosure of Personal</p>\n        <p>We may disclose your personal data: To other companies within our group If we sell our business To agents and service providers In cases where we are required by law to pass on information or if we believe action is necessary for fraud, cyber crime or to protect the website, rights, personal safety of person/s. We may also disclose aggregate statistics about visitors to our website (customers and sales) in order to describe our services to prospective partners (advertisers, sponsors) to other reputable third parties and for other lawful purposes. These statistics will include no personally identifiable information. If you are concerned about your data, you have the right, subject to the payment of a small fee to request access to personal data which we may hold or process about you. Users have the option to disclose their responses to exercises to their colleagues in class.</p>\n        <p>2.4 Loss of Personal Data</p>\n        <p>Wordiser will make every endeavour to keep personal data secure and safe against basic and medium level cyber threats. Wordiser cannot indemnify users against loss of data to the most sophisticated of cyber threats. Wordiser will maintain an evolving definition of cyber threats, and the level of those threats, since new threats emerge on a regular basis.</p>\n        <p>3 Restriction of Use</p>\n        <p>Wordiser.com can be used as a stand alone App for students or in conjunction with teachers assigned to schools. Both students and teachers can query Wordiser functionality by finding Wordiser Pages and Groups located on Facebook. Wordiser is not responsible for relationships or agreements reached between teachers and students. Wordiser will not engage in or agree to resolve any long running disputes between students, between teachers, or between teachers and students. Wordiser reserve the right to remove user names that could cause offence, or remove users who are behaving disrespectfully through the site towards other Wordiser users. In instances of potential user disrespect, Wordiser will offer a negotiation and communication process explaining actions that could be and are taken.</p>\n        <p>3.1 Notice of Changes to Terms</p>\n        <p>30 Days Notice will be given to users in respect of any future changes to Terms of Use</p>\n        <p>4 Right to Cancel</p>\n        <p>Wordiser do not ask any long term commitments from Users Access to Wordiser will continue to be by email and password access</p>\n        <p>5 Notices</p>\n        <p>All notices you send us must be sent via the contact form and/or contact details on the <a href="http://www.wordiser.com">www.wordiser.com</a> & external site. We may give notice to you at either the email or postal address you provide to us when making a purchase. Notice will be deemed received and properly served 24 hours after an email is sent or three days after the date of posting of any letter. In providing the service of any notice, it will be sufficient to prove, in the case of a letter, that the letter was properly addressed, stamped and placed in the post and, in the case of an email that the email was sent to the specified email address of the addressees.</p>\n        <p>Wordiser will encourage users to support one another via the Facebook Pages and Groups Wordiser will maintain a listening presence on Facebook in case of any long standing issues regarding usage that cannot be resolved in community. Wordiser will use best endeavours to resolve any long standing issues, or issues which prevent usage for extended periods of time. Wordiser will respond to Notices from Users within one working week.</p>\n        <p>6 Conclusion</p>\n        <p>These terms are governed by English law. Any contract for the purchase of goods from this site and any dispute or claim arising out of or in connection with any such contract will be governed by English law. You and we both agree that the courts of England and Wales will have non-exclusive jurisdiction. However, if you are a resident in Northern Ireland you may also bring proceedings in Northern Ireland, and if you are a resident in Scotland you may also bring proceedings in Scotland.</p>\n        <p>BY CLICKING ON ACCEPT, YOU AGREE TO ACCEPT THE ABOVE TERMS AND AGREEMENT</p>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/authentication/signup/signup.tmpl.html",'<style type="text/css">\n    .full-height{\n        overflow: auto;\n    }\n</style>\n\n\n\n<div class = "sign-up-page" layout="row" flex layout-padding layout-fill layout-align="center center">\n    <div flex="60" flex-lg="60" flex-md="70" flex-sm="100">\n        <md-card>\n            <md-toolbar>\n                <div class="padding-20 text-center" palette-background="myPurple:500">\n                    <h1 class="md-headline">\n                        {{\'SIGNUP.TITLE\' | translate}}\n                    </h1>\n                </div>\n            </md-toolbar>\n            <md-content class="md-padding">\n                <form name="signup">\n                    <md-input-container>\n                        <label for="name">{{\'SIGNUP.Username\' | translate}}</label>\n                        <input id="name" label="name" name="name" type="text" ng-change = "checkUserName()" ng-model-options=\'{ debounce: 1500 }\' ng-model="user.username" required/>\n                        <div ng-messages="signup.name.$error">\n                            <div ng-message when="required">\n                                {{\'SIGNUP.NAME.PLEASE_ENTER\' | translate}}\n                            </div>\n                        </div>\n\n                         <div class = "ng-message" ng-if = "show_username_error" >\n                            {{\'SIGNUP.Username_has_been_taken\' | translate}}\n                        </div>\n\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="email">{{\'SIGNUP.EMAIL.LABEL\' | translate}}</label>\n                        <input id="email" label="email" name="email" type="email" ng-model="user.email"  ng-change = "checkEmail()" ng-model-options=\'{ debounce: 1500 }\' required/>\n                        <div ng-messages="signup.email.$error">\n                            <div ng-message when="required">\n                                {{\'SIGNUP.EMAIL.PLEASE_ENTER\' | translate}}\n                            </div>\n                            <div ng-message when="email">\n                                {{\'SIGNUP.EMAIL.PLEASE_VALID\' | translate}}\n                            </div>\n                        </div>\n                        <div class = "ng-message" ng-if = "show_email_error" >\n                            {{\'SIGNUP.Email_in_use\' | translate}}\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="password">{{\'SIGNUP.PASSWORD.LABEL\' | translate}}</label>\n                        <input id="password" label="password" name="password" type="password" ng-model="user.password" same-password="signup.confirm" ng-minlength="8" required/>\n                        <ng-messages for="signup.password.$error" ng-include="\'app/authentication/signup/password.messages.html\'"></ng-messages>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="password">{{\'SIGNUP.PASSWORD_CONFIRM.LABEL\' | translate}}</label>\n                        <input id="confirm" label="confirm" name="confirm" type="password" ng-model="user.confirm" same-password="signup.password" ng-minlength="8" required/>\n                        <ng-messages for="signup.confirm.$error" ng-include="\'app/authentication/signup/password.messages.html\'"></ng-messages>\n                    </md-input-container>\n\n                    <div class = "sign-up-role">\n                        \n\n                        <md-radio-group name = "role" ng-model="user.role" required >\n                            <md-radio-button value="student">{{\'SIGNUP.Student\' | translate}}</md-radio-button>\n\n                            <md-radio-button value="teacher">{{\'SIGNUP.Teacher\' | translate}}</md-radio-button>\n                            \n                        </md-radio-group>\n                        <div class="clear"></div>\n                    </div>\n\n                    \n\n                    <div class = "select-ng-message" ng-if = "!user.role" >\n                        {{\'SIGNUP.Please_select_a_role\' | translate}}\n                    </div>\n\n                    <div ng-if = "!auto_set_language">\n                    \n                        <label for = "native">{{\'SIGNUP.My_first_language\' | translate}}</label>\n                        <md-select name = "native" placeholder="{{\'SIGNUP.Pick\' | translate}}" ng-model="user.native">\n                            <md-option value={{language.key}} ng-repeat="language in languages">{{language.name}}</md-option>\n                        </md-select>\n\n                    </div>\n                    \n\n                    <div  ng-if="user.role == \'teacher\'">\n                        <md-input-container>\n                        <label for="school">{{\'SIGNUP.School_you_work_at\' | translate}}</label>\n                        <input id="school" label="school" name="school" type="school" ng-model="user.school"  required/>\n                        \n                    </md-input-container>\n\n                    </div>\n\n\n\n                    <div class="privacy" hide-xs hide-sm>\n                        <h3>{{\'SIGNUP.privacy\' | translate}}</h3>\n                        <p>{{\'SIGNUP.Who_are_Wordiser\' | translate}}</p>\n                        <p>{{\'SIGNUP.www_wordiser_com_is_a_site\' | translate}}</p>\n                        <p>{{\'SIGNUP.Privacy_Policy_Cookies\' | translate}}</p>\n                        <p>{{\'SIGNUP.Cookies_are_collected\' | translate}}</p>\n                        <p>{{\'SIGNUP.Personal_Data\' | translate}}</p>\n                        <p>{{\'SIGNUP.Your_personal_data\' | translate}}</p>\n                        <p>{{\'SIGNUP.Cookies_Monitoring\' | translate}}</p>\n                        <p>{{\'SIGNUP.We_monitor_student\' | translate}}</p>\n                        <p>{{\'SIGNUP.Types_of_Cookies\' | translate}}</p>\n                        <p>{{\'SIGNUP.A_cookie_is_a_small\' | translate}}</p>\n                        <p>{{\'SIGNUP.Strictly_necessary_cookies\' | translate}}</p>\n                        <p>{{\'SIGNUP.Analytical_performance_cookie\' | translate}}</p>\n                        <p>{{\'SIGNUP.Functionality_cookies\' | translate}}</p>\n                        <p>{{\'SIGNUP.Targeting_Cookies\' | translate}}</p>\n                        <p>{{\'SIGNUP.We_may_monitor_traffic\' | translate}}</p>\n                        <p>{{\'SIGNUP.he_IP_address\' | translate}}</p>\n                        <p>{{\'SIGNUP.The_referring_website\' | translate}}</p>\n                        <p>{{\'SIGNUP.The_reasons_for\' | translate}}</p>\n                        <p>{{\'SIGNUP.To_make_ongoing\' | translate}}</p>\n                        <p>{{\'SIGNUP.To_see_our\' | translate}}</p>\n                        <p>{{\'SIGNUP.Disclosure_of_Personal\' | translate}}</p>\n                        <p>{{\'SIGNUP.We_may_disclose\' | translate}}</p>\n                        <p>{{\'SIGNUP.Loss_of_Personal\' | translate}}</p>\n                        <p>{{\'SIGNUP.Wordiser_will_make_every_endeavour\' | translate}}</p>\n                        <p>{{\'SIGNUP.Restriction_of_Use\' | translate}}</p>\n                        <p>{{\'SIGNUP.can_be_used_as_a_stand\' | translate}}</p>\n                        <p>{{\'SIGNUP.Notice_of_Changes\' | translate}}</p>\n                        <p>{{\'SIGNUP.Days_Notice_will_be_given\' | translate}}</p>\n                        <p>{{\'SIGNUP.Right_to_Cancel\' | translate}}</p>\n                        <p>{{\'SIGNUP.Wordiser_do_not\' | translate}}</p>\n                        <p>{{\'SIGNUP.Notices_f\' | translate}}</p>\n                        <p>{{\'SIGNUP.All_notices_you\' | translate}}<a href="http://www.wordiser.com">www.wordiser.com</a>{{\'SIGNUP.external_site\' | translate}}</p>\n                        <p>{{\'SIGNUP.Wordiser_will_encourage\' | translate}}</p>\n                        <p>{{\'SIGNUP.Conclusion_six\' | translate}}</p>\n                        <p>{{\'SIGNUP.These_terms_are\' | translate}}</p>\n                        <p>{{\'SIGNUP.BY_CLICKING_ON\' | translate}}</p>\n                    </div>\n\n\n                    <md-button  hide-gt-sm class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" ng-click="popPrivacy()">{{\'SIGNUP.View_agreement\' | translate}}</md-button>\n\n\n                    <div class="check-boxed">\n                        <p class="check-box">\n                            <md-checkbox ng-model="agree" ng-change="agreeYes()" aria-label="ACCEPT">\n                                {{\'SIGNUP.ACCEPT\' | translate}}\n                            </md-checkbox>\n                        </p>\n\n                        <p class="check-box">\n                            <md-checkbox ng-model="agreeno" ng-change="agreeNO()" aria-label="DON\'T ACCEPT">\n                                {{\'SIGNUP.DONT_ACCEPT\' | translate}}\n                            </md-checkbox>\n                        </p>\n\n                    </div>\n\n                    <md-button ng-disabled="!agree || signup.$invalid || show_username_error || show_email_error" class="md-raised md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" ng-click="signupClick()">{{\'SIGNUP.BUTTON\' | translate}}</md-button>\n                    <md-button class="md-primary full-width margin-left-0 margin-right-0 margin-top-10 margin-bottom-10" href="#/login">{{\'SIGNUP.HAVE_LOGIN\' | translate}}</md-button>\n                </form>\n            </md-content>\n        </md-card>\n    </div>\n</div>'),e.put("app/class-module/print_edit_template/worksheet-pronuciation.html",'<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8" />\n<title>WORKSHEET</title>\n</head>\n<body>\n<style type="text/css">\n</style>\n\n</body>\n</html>\n<div class="worksheet">\n  <h1>WORKSHEET</h1>\n  <h2>by Robert F. Cola</h2>\n  <div class="sheet">\n    <div class="example"></div>\n    <div class="ques"></div>\n  </div>\n  <div class="foot">\n    <div class="parline"></div>\n    <div class="ans"></div>\n    <div class="logo"></div>\n  </div>\n</div>'),e.put("app/class-module/print_edit_template/worksheet2.html",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>::WORKSHEET-2::</title>\n<!-- <link rel="stylesheet" type="text/css" media="print" href="style.css"> -->\n<style type="text/css" media="all">\n	body{font-family:arial;}\n	.work-sheet{border-radius:10px;width:600px;padding:20px 50px;margin:auto;}\n	.title{text-align:center;font-weight:500;background-color:#666;color:#fff;padding:10px 0px;border-radius:5px;margin:22px 0px;font-size:1.5em;}\n	/*.title:before{position:absolute;background:#999;color:#FFF;padding:2px 3px;content:\'1/1\';display:table;font-size:18px;margin-top:-10px;border-radius:4px;}*/\n	.sheet{background:rgb(234, 234, 234);padding:10px 5%;width:90%;border:1px solid lightgray;}\n	.example{background:#888;padding:2px 17px;text- width:100%;border-radius:5px;}\n	.example div{display:inline-table;width:auto;margin:2px 10px;padding:0px;}\n	.example div input{height:35px;width:70px;padding:0px 4px;border-radius:0px 5px 5px 0px;background-color:#FFF;border:none;margin-right:-13px;line-height:35px;}\n    .example1 .ans{color:rgb(84, 84, 84)}\n	.example div span{padding:0px 14px;background:#DBDBDB;border-radius:5px 0 0 5px;color:white;font-weight:700;float:left;line-height:35px;}\n	\n	.option{display:inline-table;margin:2px 0px;}\n	.option span{padding:0px 14px;background:#DBDBDB;border-radius:5px 0 0 5px;color:white;font-weight:700;float:left;line-height:35px;}\n	.option .ans{height:35px;width:70px;padding:0px 4px;border-radius:0px 5px 5px 0px;background-color:#FFF;border:none;margin-right:10px;line-height:35px;color:rgb(84, 84, 84)}\n	.option .ans:focus{outline:none;}\n	.question{margin:2px 0px;display:inline-table;padding-left:28px;}\n	.ques{border-radius:5px;padding:6px 0px;text-align:center;border:1px solid rgb(197, 191, 191);font-weight:700;width:93px;margin:2px 0px;font-size:large;background:transparent;}\n	\n	.serial{position:absolute;padding:0px 8px;margin-top:10px;margin-left:-32px;font-weight:bold}\n	.logo-section{margin:15px 0px;float:left;width:100%;}\n	.logo{float:right;margin-top:10px;}.logo img{width:150px;}\n	.answers{float:left;border: 1px solid lightgray;width:50%;border-radius:10px;padding:0px 8px;font-weight:bold;color:lightgray;}\n	.sign {\n  display: table;\n  content: \'by Robert F. Coles\';\n  background: #999;\n  color: #FFF;\n  position:absolute;\n  padding: 2px 3px;\n  font-size: 18px;\n  \n  transform:rotate(-90deg);\n  -webkit-transform:rotate(-90deg);\n  -moz-transform:rotate(-90deg);\n  -ms-transform:rotate(-90deg);\n  -o-transform:rotate(-90deg);\n  width:200px;\n  text-align:center;\n  margin-right:-146px;\n  float:right;\n  top: 0px;\n  margin-left: 512px;\n  margin-top:211px;\n}\n\n.example1 .ans {\n    height: 35px;\n    width: 70px;\n    padding: 0px 4px;\n    border-radius: 0px 5px 5px 0px;\n    background-color: #FFF;\n    border: none;\n    margin-right: 10px;\n    line-height: 35px;\n    color: rgb(84, 84, 84);\n}\n\n@media print {\n  .sheet,.title ,.example1,.example div span,.option span,.option .ans,.example1 .ans,.question{\n     position: relative;\n     overflow: hidden; /* this might not work well in all situations */\n  }\n\n  .sheet * , .title *,.example1 *,.example div span *,.option span *,.option .ans *,.example1 .ans *{\n    /* was required in my situation */\n    position: relative;\n    z-index: 1;\n  }\n\n  .sheet:before,.title:before ,.example1:before,.example div span:before,.option span:before,.option:before,.option .ans:before,.example1 .ans:before{\n     content: \'\';\n     position: absolute;\n     top: 0;\n     right: 0;\n     left: 0;\n     bottom: 0;\n     z-index: 0; /* was required in my situation */\n  }\n\n  .sheet:before {\n    /* and here it is, the background color */\n    border: 602px rgb(234, 234, 234) solid;\n  }\n\n  .title:before{\n    border: 602px #666 solid;\n    \n  }\n\n  .title{\n    color:#ffffff!important;\n  }  \n\n  .example1:before{\n    border: 540px #888 solid;\n    height: 82px;\n    border-radius: 0 5px 5px 0;\n    \n  }\n\n  .option .ans:before{\n    border: 540px #fff solid;\n    border-radius: 0 5px 5px 0;\n\n  }\n\n  .example1 .ans:before{\n    border: 540px #fff solid;\n    border-radius: 0 5px 5px 0;\n  }\n\n  .option .ans{\n    border-radius: 0 5px 5px 0;\n    color:rgb(84, 84, 84);\n  }\n\n  .example div span:before,.option span:before{\n    border: 540px #DBDBDB solid;\n    border-radius: 5px 0 0 5px;\n    color: white;\n\n  }\n\n\n  .example div input{\n    /*border-top: 1px #DBDBDB solid;\n    border-right: 1px #DBDBDB solid;\n    border-bottom: 1px #DBDBDB solid;*/\n    border-radius: 0 5px 5px 0;\n    height: 35px;\n  }\n\n  .serial{position:absolute;padding:0px 8px;margin-top:10px;margin-left:-32px;font-weight:bold}\n  .title span{\n    color:#fff!important;\n  }\n\n}\n\n\n\n\n</style>\n</head>\n\n<body class="body">\n	<div class="work-sheet">\n    	<h1 class="title"><span style = "color:#fff">WORKSHEET</span></h1>\n        </hr>\n    	<div class="sheet">\n        	<div class="example example1">\n            	<div><span><i>1</i></span><span class = "ans"><i>go</i></span></div>\n                <div><span><i>1</i></span><span class = "ans"><i>goes</i></span></div>\n                <div><span><i>1</i></span><span class = "ans"><i>going</i></span></div>\n                <div><span><i>1</i></span><span class = "ans"><i>went</i></span></div>\n                <div><span><i>1</i></span><span class = "ans"><i>gone</i></span></div>\n            </div>\n            <div class="questions">\n            	<div>\n                	\n                	<div class="question">\n                    	<input type="text" disabled="disabled" value="mean" class="ques"><br />\n                        \n                        <div class="serial">A</div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                    </div>\n                    <div class="question">\n                    	<input type="text" disabled="disabled" value="have" class="ques"><br />\n                        \n                        <div class="serial">B</div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                    </div>\n                    <div class="question">\n                    	<input type="text" disabled="disabled" value="meet" class="ques"><br />\n                        \n                        <div class="serial">C</div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                    </div>\n                    <div class="question">\n                    	<input type="text" disabled="disabled" value="do" class="ques"><br />\n                        \n                        <div class="serial">D</div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                    </div>\n                    <div class="question">\n                    	<input type="text" disabled="disabled" value="go" class="ques"><br />\n                        \n                        <div class="serial">E</div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                        <div class="option">\n                        	<span><i>1</i></span>\n                        	<span class = "ans"></span>\n                        </div>\n                    </div>\n                </div>\n            	\n            </div>\n          \n        </div>  \n         <div class="logo-section">\n          		<div class="answers">\n                	<p style="font-size:10px !important;">ANSWERS</p>\n                    <p style="font-size:8px !important;">A. 1x,2x,3x,4x,5x |B. 1x,2x,3x,4x,5x |C. 1x,2x,3x,4x,5x |D. 1x,2x,3x,4x,5x |E. 1x,2x,3x,4x,5x | </p>\n                </div>\n            	<div class="logo"><img src="logo-workshete.png" width="200" height="auto" alt="logo" name="logo_img" /></div>\n            </div>\n        <div class="sign">by Robert F. Coles</div>\n    </div>\n</body>\n</html>\n'),e.put("app/class-module/print_edit_template/worksheet3.html",'\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n<title>::WORKSHEET-3::</title>\n<style type="text/css">\n	body{font-family:arial;}\n	.work-sheet{border-radius:10px;width:600px;padding:20px 50px;margin:auto;}\n	.title{text-align:center;font-weight:500;background-color:#666;color:#fff;padding:10px 0px;border-radius:5px;margin:22px 0px;font-size:1.5em;}\n	.sheet{background:rgb(236,236,236);border:1px solid lightgray;padding:10px 5%;width:90%;}\n	.example{background:#888;padding:2px 0px;width:100%;border-radius:5px;}\n	.example div{width:auto;margin:3px 10px;padding:1px 0px;}\n	.ques{background:#FFF;padding:10px;margin:0px;font-size:large;border-radius:5px;color:#908E8E;min-height:18px;}\n	.ans{background:#FFF;padding:6px 10px;margin:0px;border-radius:5px;min-height:18px;width:82%;display:inline-table;float:right;border:1px solid lightgray;}\n	\n	.serial{padding:6px 8px;display:inline-table;background:rgb(171, 171, 171);vertical-align:top;border-radius:5px;color:white;}\n	\n	input.ans{margin-left:24px;}\n	.question{margin:10px 0px;padding:0px 10px;}\n	.question div{margin:10px 0px;}\n	\n	.cls_label2{width:34px;height:20px;background:rgb(205, 202, 202);padding:0px 12px;vertical-align:middle;color:white;border-radius:5px;}\n	.logo-section{margin:15px 0px;float:left;width:100%;}\n	.logo{float:right;margin-top:32px;}.logo img{width:150px;}\n	.answers{float:left;background: rgb(249, 249, 249);border: 1px solid lightgray;width:414px;border-radius:10px;padding:0px 8px;font-weight:bold;color:lightgray;}\n		.sign {\n  display: table;\n  content: \'by Robert F. Coles\';\n  background: #999;\n  color: #FFF;\n  position:absolute;\n  padding: 2px 3px;\n  font-size: 18px;\n  \n  transform:rotate(-90deg);\n  -webkit-transform:rotate(-90deg);\n  -moz-transform:rotate(-90deg);\n  -ms-transform:rotate(-90deg);\n  -o-transform:rotate(-90deg);\n  width:200px;\n  text-align:center;\n  margin-right:-146px;\n  float:right;\n  top: 0;\n  margin-left: 512px;\n  margin-top:210px;\n}\n\n\n\n@media print {\n  .sheet,.title,.example1,.white-div,.grey-div{\n     position: relative;\n     overflow: hidden; /* this might not work well in all situations */\n  }\n\n  .sheet * , .title *,.example1 *,.white-div *,.grey-div *{\n    /* was required in my situation */\n    position: relative;\n    z-index: 1;\n  }\n\n  .sheet:before,.title:before,.example1:before,.white-div:before, .grey-div:before{\n     content: \'\';\n     position: absolute;\n     top: 0;\n     right: 0;\n     left: 0;\n     bottom: 0;\n     z-index: 0; /* was required in my situation */\n  }\n\n  .sheet:before{\n    /* and here it is, the background color */\n    border: 602px rgb(234, 234, 234) solid;\n  }\n\n  .title:before{\n    border: 602px #666 solid;\n    \n  }\n\n  .white-div:before{\n    border: 150px #fff solid;\n\n  }\n\n  .grey-div:before{\n    border: 150px rgb(171, 171, 171) solid;\n  }\n\n  .white-div{\n    border-radius: 5px;\n  }\n\n\n  .example1:before{\n    border: 602px #888 solid;\n  }\n\n  .cls_label2{\n    border: 1px rgb(205, 202, 202) solid;\n  }\n  .serial{\n    border: 1px rgb(205, 202, 202) solid;\n  }\n\n  .title{\n    color:#ffffff!important;\n  }  \n\n  .title span{\n    color:#fff!important;\n  }\n\n  .ans.white-div{\n    height: 20px;\n    display: inline-block;\n    overflow: hidden;\n  }\n\n}\n\n\n</style>\n</head>\n\n<body class="body">\n	<div class="work-sheet">\n    	<h1 class="title"><span style = "color:#fff">WORKSHEET</span></h1>\n    	<div class="sheet">\n        	<div class="example example1">\n            	<div class = "white-div"><p class="ques">Quiet can <label class="cls_label2">?</label> to either not make any noise or be shy.</p></div>\n                <div><span class="serial"><i>answer</i></span><p class="ans white-div"><span >mean</span></p></div>\n            </div>\n            <div class="questions">\n            	<div>\n                	<div class="question">\n                    	<div class = "white-div"><p class="ques">Quiet can <label class="cls_label2">?</label> to either not make any noise or be shy.</p></div>\n                        <div><span class="serial"><i>A</i></span><p class="ans white-div"></p></div>\n                    </div>\n                    <div class="question">\n                    	<div class = "white-div"><p class="ques">Quiet can <label class="cls_label2">?</label> to either not make any noise or be shy.</p></div>\n                        <div><span class="serial"><i>B</i></span><p class="ans white-div"></p></div>\n                    </div>\n                </div>\n            	\n            </div>\n           \n        </div> \n         <div class="logo-section">\n          		<div class="answers">\n                	<p>ANSWERS</p>\n                    <p>A. 1x,2x,3x,4x,5x |B. 1x,2x,3x,4x,5x |C. 1x,2x,3x,4x,5x |D. 1x,2x,3x,4x,5x |E. 1x,2x,3x,4x,5x | </p>\n                </div>\n            	<div class="logo"><img src="logo-workshete.png" width="200" height="auto" alt="logo" name="logo_img" /></div>\n            </div>\n        <div class="sign">by Robert F. Coles</div>\n    </div>\n</body>\n</html>\n'),e.put("app/class-module/worksheet/dialog-load-word.tmpl.html",'<style>\n      .md-button.md-companyX-theme.disable{  \n        background: purple;\n        color:#fff!important;\n   }\n .md-button.md-companyX-theme.disable.md-raised:not([disabled]):hover{\n    background: purple;\n}\n\n    .md-button.md-companyX-theme.enable{  \n        background: gray;\n   }\n .md-button.md-companyX-theme.enable.md-raised:not([disabled]):hover{\n    background: gray;\n}\n</style>\n<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Study list ({{countSelect}}/{{words.length}})</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content>\n                 <md-card-content>\n                        <div>\n                            <md-button class="md-raised  md-button  md-companyX-theme disable" ng-click="selectAll()">\n                                                Select all\n                                </md-button>\n                                <md-button class="md-raised  md-button md-companyX-theme enable" ng-click="deSelectAll()" >\n                                    DeSelect all\n                                </md-button>\n\n                                <md-button class="md-raised md-primary" ng-if = "parent_scope.in_worksheet" ng-click="refreshWorksheetDia()"> REFRESH</md-button>\n                        </div>\n                        <table class="md-table class-list">\n                            <thead>\n                                <tr>\n                                    <th></th>\n                                    <th style = "width:20%;"><span class = "font-black">LAST TESTED</span></th>\n                                    <th style = "width:20%;"><span class = "font-black">WORD / PHRASE</span></th>\n                                    <th style = "width:40%;"><span class = "font-black">ACTION</span></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                               <tr ng-repeat="word in words track by $index" >           \n                                    <td>{{$index + 1}}</td>\n                                    <td style = "width:20%;">{{word.createdAt|date:\'dd-MM-yyyy\'}}</td>\n                                    <td style = "width:20%;">{{word.get(\'lemma\')}}</td>\n                                    <td  style = "width:40%;padding-right:20px;">\n                                            <md-checkbox ng-if="word.get(\'isPrintable\')" ng-click="disabled(word)" ng-checked="true"  aria-label="Default Checkbox">\n                                            </md-checkbox>\n\n                                            <md-checkbox ng-if="!word.get(\'isPrintable\')"  ng-click="enable(word)" ng-checked="false"  aria-label="Default Checkbox">\n                                            </md-checkbox>\n                                    </td>\n                                </tr>\n                                \n                            </tbody>\n                        </table>\n                    </md-card-content>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button  ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/worksheet/dialog-select-subject.tmpl.html",'<md-dialog class="select-subject-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Select subject</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container">\n        <div>\n            <md-content>\n                <md-card-content>\n                    <md-input-container class="margin-top-20">\n                        <label>Enter words, phrases or title</label>\n                        <input id="search" label="search" name="search" type="text" ng-model="search" ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchCat()"/>\n                    </md-input-container>\n\n\n                    <md-list ng-if = "searchWordList">\n                        <md-list-item flex-wrap  class = "flex-wrap hand" ng-repeat="cat in searchWordList track by $index" ng-if = "cat.get(\'children_data_word\')[0]">\n                            <p class = "text-ellipsis" style = "margin:0">{{cat.get(\'name\')}}</p>\n\n                            <md-button palette-background="pink:400" ng-click = "view(cat)"  class="md-raised md-primary" aria-label="View">View</md-button>\n\n                            <md-button palette-background="pink:400" ng-click = openLink(\'general\',\'admin-panel.default.notice-category\',{parent_cat:cat.id,page:1}) class="md-raised md-primary" aria-label="use">WORKSHEETS</md-button>\n\n                            <div flex = 100 class="remove-ask" ng-if = "cat.view_show">\n                                <div  class = "text-ellipsis" style = "overflow: auto;margin:0;padding:0 8px;background: rgb(160, 160, 160);"><span style = "margin-right: 16px;float:left;color:#fff;" ng-repeat="word in cat.get(\'children_data_word\') track by $index">{{word}}</span></div>\n                            </div>\n\n                            <md-divider ng-hide="$last"></md-divider>\n                        </md-list-item>\n                    </md-list>\n\n                </md-card-content>\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button  ng-click="cancel()" palette-background="myPurple:900" class="md-primary" aria-label="Close">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/class-module/worksheet/worksheet-conjugation.tmpl.html",'<style type="text/css">\n\n@media print {\n    .page-avoid{page-break-inside: avoid;}\n\n}\n\n@page {\n    margin-top: 30px;\n    margin-bottom: 30px;\n}\n    body{font-family:arial;background:#fff!important;}\n body{font-family:arial;background:#fff!important;}\n   .work-sheet{width:800px;padding:20px 50px;margin:auto;}\n    h1{text-align:center;font-weight:bold;padding:10px 0px ;font-size:xx-large;margin:22px 0px 0px 0px; line-height:normal;}\n    h2{text-align:center;font-size: medium; margin: 0px 0px 5px; padding: 0px 0px 22px 0px;line-height:normal}\n    .sheet{border:6px solid lightgray;padding:10px 5%;width:90%;}\n    .example{\n      padding:10px 10px;\n      border-radius:5px;\n      height:auto; \n      border:4px dashed lightgray;\n    }\n\n.example div{\n  display:inline-table;\n  padding:5px 0px;\n}\n\n.example div span{\n      border-radius:10px;\n      border:4px solid darkgrey;\n      padding: 5px 7px;\n      margin-right: 5px;\n      color:darkgrey;\n}\n.example .ans{\n      border-radius:10px;\n      border:4px solid #000000;\n      text-align:center;\n      line-height:25px;\n      background:#fff;\n      width:118px;\n}\n\n\n.question{\n  margin-top:20px;\n}\n.question .ques{\n  \n}\n\n.question .ques .serial{ \n    font-weight: bold;\n    padding: 0px;\n    margin:15px 0px 0px 0px;\n   float:left; \n}\n.question  .ques p{\n    float:right;\n    margin:5px 0px 5px 5px;\n    padding: 2px; \n    text-align:left;\n    border:4px solid darkgrey;\n    width:93%;\n    height:25px;\n  \n}    \n.question  .word{\n    padding-left: 5px;\n    font-weight:bold;\n}\n.question  .pos{\n    color:gray;\n}\n\n.question .ans{\n  margin:15px 0px 0px 23px;\n}\n.question .ans input{\n    margin:5px 0px 0px 15px;\n    padding:2px 0px 2px 5px;\n    margin-right: 0px!important;\n    padding-right:0px!important; \n    height:25px;\n    width:318.2px;\n    border:4px solid #000000;\n    color:gray;\n}\n\n    .logo-section{margin:15px 0px;width:100%;padding: 0px 5px}\n      #footer{display: none;}\n    .split-line{text-align: right; }\n    .split-hint{font-size: smaller;}\n    .answers{border: 1px dotted lightgray;border-radius: 0px;padding:0px 8px;font-weight:bold;color:lightgray;}\n    @media   print{    \n       \n        .noprint{display:none;}                  \n        #footer{\n                display: block;\n                position: fixed;\n                bottom: 0pt;\n                right: 0pt;\n                left: 0pt;\n                text-align: center;\n        }\n    }\n    .select{\n        width: 808px;\n        background: rgba(0,0,0,0.15);\n        font-weight: bold;\n    }\n    .select div{\n        display: -moz-box;  /* Firefox */ \n          display: -ms-flexbox;    /* IE10 */ \n          display: -webkit-box;    /* Safari */  \n          display: -webkit-flex;    /* Chrome, WebKit */ \n          display: box;  \n          display: flexbox;  \n          display: flex;   \n          flex-wrap: wrap;\n    }\n   .select md-checkbox{\n        width: 250px;\n   }\n\n   #a4g-mta-wrapper{\n\n  display:none;\n}\n</style>\n<div class="work-sheet">\n  <div class="noprint" style="width:600px;">\n        <p  ng-if = "print_all != \'false\' ">Select which to print  ({{checklistids.length}}/{{checklist.length}})</p>\n        <div   class="select">\n              <div ng-if = "print_all != \'false\' ">\n                     <md-checkbox md-no-ink aria-label="{{word.get(\'origin_obj_lemma\')}}" class="md-primary" ng-repeat="word in checklist track by $index"   ng-checked="exists(word)" ng-click="toggle(word)">\n                       {{word.get(\'origin_obj_lemma\')}}\n                      </md-checkbox>\n              </div>\n\n              <div style = "padding-left:6px">\n                        <md-checkbox ng-model="hideAnwser" ng-change="hideAnwserFunc()" aria-label="Hide answer">\n                           Hide answer\n                        </md-checkbox>\n              </div>\n              <div>\n              <md-button class="noprint md-raised md-primary" onClick="history.go(-1);return true;"><md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>back</md-button>\n                <md-button class="md-raised md-primary" ng-click=\'loadWorksheetData()\'>\n                        SELECT WORDS\n                 </md-button>\n                 \n                <md-button class="md-raised md-primary" ng-click="print()">PRINT</md-button>            \n            </div>\n        </div>\n    </div>\n    <div id = "log-image" style = "text-align:center;margin-top:20px;" class = "page-avoid">\n      <img src="assets/images/worksheet_logo.jpg">\n    </div>\n  <h1>Form & Conjugation Gap-Fill</h1>\n  <h2>by {{teacherName}}</h2>\n  <div class="sheet">\n    <div class="example">\n      <div>\n        <span>1.</span>\n        <input type="text" class="ans" value="go" disabled="disabled" />\n      </div>\n      <div>\n        <span>2.</span>\n        <input type="text" class="ans" value="goes" disabled="disabled" />\n      </div>\n      <div>\n        <span>3.</span>\n        <input type="text" class="ans" value="going" disabled="disabled" />\n      </div>\n      <div>\n        <span>4.</span>\n        <input type="text" class="ans" value="went" disabled="disabled" />\n      </div>\n      <div>\n        <span>5.</span>\n        <input type="text" class="ans" value="gone" disabled="disabled" />\n      </div>\n    </div>\n    <div class="question">\n      <div style = "page-break-inside: avoid;" ng-repeat="word in wordlist track by $index">\n        <div class="ques">\n          <span class="serial">{{subject_no[$index]}}.</span>\n          <p>\n            <span class="word">{{word.get(\'origin_obj_lemma\')}}</span>\n             <span class="pos"  ng-if = "word.get(\'pos\') == \'v\'">(Verb)</span> \n            <span class="pos"  ng-if = "word.get(\'pos\') == \'n\'">(Noun)</span> \n            <span class="pos"  ng-if = "word.get(\'pos\') == \'j\'">(Adjective)</span> \n            <span class="pos"  ng-if = "word.get(\'pos\') == \'r\'">(Adverb)</span> \n            <span class="pos"  ng-if = "word.get(\'pos\') == \'s\'">(Adjective)</span> \n            <span class="pos"  ng-if = "word.get(\'pos\') == \'a\'">(Adjective)</span> \n          </p>\n        </div>\n        <div class="ans" ng-if="word.get(\'pos\')==\'n\'">\n            <input type="text"  placeholder="1." value="1. {{word.worddata.get(\'lemma\')}}" /> \n             <input type="text"  placeholder="2."/> \n        </div>\n        <div class="ans" ng-if="word.get(\'pos\')==\'j\'||word.get(\'pos\')==\'a\'||word.get(\'pos\')==\'s\'">\n            <input type="text"  placeholder="1." value="1. {{word.get(\'origin_obj_lemma\')}}" /> \n            <input type="text"  placeholder="2." value="2. more"  ng-if="word.worddata.get(\'form_j_b\').trim().indexOf(\'more\')==0"/>\n            <input type="text"  placeholder="2." ng-if="word.worddata.get(\'form_j_b\').trim().indexOf(\'more\')!=0"/>\n\n            <input type="text"  placeholder="3." value="3. most"  ng-if="word.worddata.get(\'form_j_c\').trim().indexOf(\'most\')==0"/>\n            <input type="text"  placeholder="3." ng-if="word.worddata.get(\'form_j_c\').trim().indexOf(\'most\')!=0"/>\n        </div>\n        <div class="ans" ng-if="word.get(\'pos\')==\'r\'">\n            <div class="clear"></div>\n        </div>\n        <div class="ans" ng-if="word.get(\'pos\')==\'v\'">\n            <input type="text" placeholder="1."/>\n            <input type="text" placeholder="2."/>\n            <input type="text" placeholder="3."/>\n            <input type="text" placeholder="4."/>\n            <input type="text" placeholder="5."/>\n            <input type="text" ng-if="word.worddata.get(\'form_ext_type\')==\'v\'" placeholder="6."/>\n            <input type="text" ng-if="word.worddata.get(\'form_ext_type\')==\'v\'" placeholder="7."/>\n        </div>\n      </div>\n    </div>\n    <div  ng-if = "!hideAnwser">\n      <div class = "split-line page-avoid">\n        <div class="split-hint"><strong>ANSWERS</strong></div>\n        <div>\n          <hr style=" height:2px;border:none;border-top:6px dashed lightgray;" />\n        </div>\n      </div>\n      <div class="answers" >\n        <div class = "page-avoid" style="page-break-inside: avoid;font-size:10px!important">\n          <p class = "pron-print-p" ng-repeat = "word in wordlist track by $index">\n            <span>{{subject_no[$index]}}.&nbsp;</span>\n\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'r\' ">{{word.worddata.get(\'lemma\')}}</span>\n\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'n\' ">{{word.worddata.get(\'lemma\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'n\'">/{{word.worddata.get(\'form_ext_a\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'n\' ">{{word.worddata.get(\'form_n_b\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'n\'">/{{word.worddata.get(\'form_ext_b\')}}</span></span>\n            \n\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'v\' ">{{word.worddata.get(\'lemma\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'v\'">/{{word.worddata.get(\'form_ext_a\')}}</span>,</span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'v\' ">{{word.worddata.get(\'form_v_b\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'v\'">/{{word.worddata.get(\'form_ext_b\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'v\' ">{{word.worddata.get(\'form_v_c\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'v\'">/{{word.worddata.get(\'form_ext_c\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'v\' ">{{word.worddata.get(\'form_v_d\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'v\'">/{{word.worddata.get(\'form_ext_d\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'v\' ">{{word.worddata.get(\'form_v_e\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'v\'">/{{word.worddata.get(\'form_ext_e\')}}</span></span>\n\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'a\' || word.get(\'pos\') == \'s\' || word.get(\'pos\') == \'j\'">{{word.worddata.get(\'lemma\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'j\'">/{{word.worddata.get(\'form_ext_a\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'a\' || word.get(\'pos\') == \'s\' || word.get(\'pos\') == \'j\'">{{word.worddata.get(\'form_j_b\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'j\'">/{{word.worddata.get(\'form_ext_b\')}}</span>, </span>\n            <span style = "margin-right:4px;"  ng-if = "word.get(\'pos\') == \'a\' || word.get(\'pos\') == \'s\' || word.get(\'pos\') == \'j\'">{{word.worddata.get(\'form_j_c\')}}<span ng-if = "word.worddata.get(\'form_ext_type\') == \'j\'">/{{word.worddata.get(\'form_ext_c\')}}</span></span>\n\n            <br>\n          </p>\n        </div>\n      </div>\n      \n    </div>\n  </div>\n</div>'),e.put("app/class-module/worksheet/worksheet-crossword.tmpl.html",'<style type="text/css">\n@media print {\n    .page-avoid {\n        page-break-inside: avoid;\n    }\n}\n\n.go {\n    color: green;\n}\n\nbody {\n    font-family: arial;\n    background: #fff!important;\n}\n\nbody {\n    font-family: arial;\n    background: #fff!important;\n}\n\n.work-sheet {\n    width: 800px;\n    padding: 20px 50px;\n    margin: auto;\n}\n\nh1 {\n    text-align: center;\n    font-weight: bold;\n    padding: 10px 0px;\n    font-size: xx-large;\n    margin: 22px 0px 0px 0px;\n    line-height: normal;\n}\n\nh2 {\n    text-align: center;\n    font-size: medium;\n    margin: 0px 0px 5px;\n    padding: 0px 0px 22px 0px;\n    line-height: normal\n}\n\n.sheet {\n    border: 6px solid lightgray;\n    padding: 10px 5%;\n    width: 90%;\n    float: left;\n}\n\n.example {\n    padding: 10px 10px;\n    text-align: center;\n    border-radius: 5px;\n    height: auto;\n    border: 4px dashed lightgray;\n}\n\n.row {\n    display: -moz-box;\n    /* Firefox */\n    display: -ms-flexbox;\n    /* IE10 */\n    display: -webkit-box;\n    /* Safari */\n    display: -webkit-flex;\n    /* Chrome, WebKit */\n    display: box;\n    display: flexbox;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    background-color: gray;\n    background: #fff!important;\n    justify-content: center;\n    flex-wrap: nowrap;\n}\n\n.cell {\n    width: auto;\n    flex-grow: 0;\n}\n\n.cell input {\n    width: 28px;\n}\n\n.across_hint,\n.down_hint {\n    font-size: 8px;\n    line-height: 15px;\n    color: lightgray;\n    position: absolute;\n}\n\n.across_hint {\n    margin: 0px;\n    padding: 0px;\n    padding-top: 5px;\n}\n\n.down_hint {\n    padding: 0px;\n    margin: 0px;\n    padding-left: 11px;\n}\n\n.hint p {\n    margin: 0px;\n    padding: 20px 0px 0px 0px;\n    font-weight: bold;\n    font-size: 19px;\n}\n\n.ipa {\n    font-weight: bold;\n    font-family: verdana;\n}\n\nul {\n    list-style-type: square;\n}\n\nul li {\n    font-size: 15px;\n    margin-left: 47px;\n    margin-top: 10px;\n}\n\n.logo-section {\n    margin: 15px 0px;\n    width: 100%;\n    padding: 0px 5px;\n}\n\n#footer {\n    display: none;\n}\n\n.split-line {\n    text-align: right;\n}\n\n.split-hint {\n    font-size: smaller;\n}\n\n.answers {\n    border: 1px dotted lightgray;\n    border-radius: 0px;\n    padding: 0px 8px;\n    font-weight: bold;\n    color: lightgray;\n}\n\n@media print {\n    @page {\n        margin: 30px auto;\n    }\n    .noprint {\n        display: none;\n    }\n    #footer {\n        display: block;\n        position: fixed;\n        bottom: 0pt;\n        right: 0pt;\n        left: 0pt;\n        text-align: center;\n    }\n}\n\n.select {\n    width: 808px;\n    background: rgba(0, 0, 0, 0.15);\n    font-weight: bold;\n}\n\n.select div {\n    display: -moz-box;\n    /* Firefox */\n    display: -ms-flexbox;\n    /* IE10 */\n    display: -webkit-box;\n    /* Safari */\n    display: -webkit-flex;\n    /* Chrome, WebKit */\n    display: box;\n    display: flexbox;\n    display: flex;\n    flex-wrap: wrap;\n}\n\n.select md-checkbox {\n    width: 180px;\n}\n\n#a4g-mta-wrapper{\n\n  display:none;\n}\n\n.wdisable {}\n</style>\n<div class="work-sheet">\n    <div class="noprint" style="width:600px;">\n        <p ng-if="print_all != \'false\'">Select which to print ({{checklistids.length}}/{{checklist.length}})</p>\n        <div class="select">\n            <div ng-if="print_all != \'false\'">\n                <md-checkbox md-no-ink aria-label="{{word.get(\'origin_obj_lemma\')}}" class="md-primary" ng-repeat="word in checklist track by $index" ng-checked="exists(word)" ng-click="toggle(word)">\n                    {{word.get(\'origin_obj_lemma\')}}\n                </md-checkbox>\n            </div>\n            <div style="padding-left:6px">\n                <md-checkbox ng-model="hideAnwser" ng-change="hideAnwserFunc()" aria-label="Hide answer">\n                    Hide answer\n                </md-checkbox>\n            </div>\n            <div class="pron_select" ng-if="state_name == \'worksheet-crossword-pronunciation\'">\n                <md-radio-group ng-model="formdata.isEn" ng-change="refreshWorksheet()">\n                    <md-radio-button value="uk" class="md-primary"> UK Pronuncation </md-radio-button>\n                    <md-radio-button value="us">US Pronuncation</md-radio-button>\n                </md-radio-group>\n            </div>\n            <div>\n                <md-button class="noprint md-raised md-primary" onClick="history.go(-1);return true;">  <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n                    back\n                </md-button>\n                 <md-button class="md-raised md-primary" ng-click=\'loadWorksheetData()\'>\n                        SELECT WORDS\n                 </md-button>\n                <md-button class="md-raised md-primary" ng-click="print()">PRINT</md-button>\n            </div>\n        </div>\n    </div>\n    <div id="log-image" style="text-align:center;margin-top:20px;" class="page-avoid">\n        <img src="assets/images/worksheet_logo.jpg">\n    </div>\n    <h1>{{worksheet_title}}</h1>\n    <h2>by {{teacherName}}</h2>\n    <div class="sheet">\n        <!-- \n    <div class="example">\n            \n    </div> -->\n        <div class="question">\n            <div class="row" ng-repeat="row in grid ">\n                <div class="cell" ng-repeat="cell in row track by $index">\n                    <input type="text" ng-if="cell==undefined" disabled class="wdisable">\n                    <div class="input">\n                        <span class="across_hint" ng-if="cell.across!=undefined&&cell.across.is_start_of_word">\n                                      {{subject_no[cell.across.index]}}\n                                  </span>\n                        <span class="down_hint" ng-if="cell.down!=undefined&&cell.down.is_start_of_word">\n                                      {{subject_no[cell.down.index]}}\n                                  </span>\n                        <input type="text" ng-if="cell!=undefined">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="hint">\n            <p ng-if="legend.across !=undefined&&legend.across .length!=0">Across：</p>\n            <ul>\n                <li class="page-avoid" ng-repeat="across in legend.across track by $index" ng-if="across!=undefined" style = "overflow: auto;">\n                    <span>{{subject_no[across.index]}}. </span>\n                    <span ng-repeat="define in across.clue.defines track by $index">\n                        <span ng-if="is_sentence" style= "display: block;">\n                            <span ng-if="define.get(\'pos\') == \'v\' && !is_pron">(Verb)</span>\n                            <span ng-if="define.get(\'pos\') == \'n\' && !is_pron">(Noun)</span>\n                            <span ng-if="define.get(\'pos\') == \'j\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'r\' && !is_pron">(Adverb)</span>\n                            <span ng-if="define.get(\'pos\') == \'s\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'a\' && !is_pron">(Adjective)</span>\n                            {{define.obj.sentence_no_first_letter_no_html}}\n                        </span>\n\n                        <span ng-if="is_define" style= "display: block;">\n                            <span ng-if="define.get(\'pos\') == \'v\' && !is_pron">(Verb)</span>\n                            <span ng-if="define.get(\'pos\') == \'n\' && !is_pron">(Noun)</span>\n                            <span ng-if="define.get(\'pos\') == \'j\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'r\' && !is_pron">(Adverb)</span>\n                            <span ng-if="define.get(\'pos\') == \'s\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'a\' && !is_pron">(Adjective)</span>\n                            {{define.get(\'definition\')}}\n                        </span>\n\n\n                        <span ng-if="is_pron && formdata.isEn == \'uk\' " class="ipa">&nbsp;{{define.uk_pron_ext ? define.uk_pron_ext : define.get(\'uk_pron\')}}</span>\n                        <span ng-if="is_pron && formdata.isEn == \'uk\' ">[{{define.uk_change_pron_ext ? define.uk_change_pron_ext : define.get(\'uk_change_pron\')}}]</span>\n\n                        <span ng-if="is_pron && formdata.isEn == \'us\' " class="ipa">&nbsp;{{define.us_pron_ext ? define.us_pron_ext : define.get(\'us_pron\')}}</span>\n                        <span ng-if="is_pron && formdata.isEn == \'us\' ">[{{define.us_change_pron_ext ? define.us_change_pron_ext : define.get(\'us_change_pron\')}}]</span>\n                        <span ng-if="is_pron" ng-hide="$last" style = "margin:0 18px;font-weight: bold;display: inline-block;">/</span>\n                    </span>\n\n                    \n\n                </li>\n            </ul>\n            <p ng-if="legend.down!=undefined&&legend.down.length!=0">Down：</p>\n            <ul>\n                <li class="page-avoid" ng-repeat="down in legend.down track by $index" ng-if="down!=undefined">\n                    <span>{{subject_no[down.index]}}. </span>\n                    \n\n                    <span ng-repeat="define in down.clue.defines track by $index">\n                        <span ng-if="is_sentence" style= "display: block;">\n                            <span ng-if="define.get(\'pos\') == \'v\' && !is_pron">(Verb)</span>\n                            <span ng-if="define.get(\'pos\') == \'n\' && !is_pron">(Noun)</span>\n                            <span ng-if="define.get(\'pos\') == \'j\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'r\' && !is_pron">(Adverb)</span>\n                            <span ng-if="define.get(\'pos\') == \'s\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'a\' && !is_pron">(Adjective)</span>\n                            {{define.obj.sentence_no_first_letter_no_html}}\n                        </span>\n\n                        <span ng-if="is_define" style= "display: block;">\n                            <span ng-if="define.get(\'pos\') == \'v\' && !is_pron">(Verb)</span>\n                            <span ng-if="define.get(\'pos\') == \'n\' && !is_pron">(Noun)</span>\n                            <span ng-if="define.get(\'pos\') == \'j\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'r\' && !is_pron">(Adverb)</span>\n                            <span ng-if="define.get(\'pos\') == \'s\' && !is_pron">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'a\' && !is_pron">(Adjective)</span>\n                            {{define.get(\'definition\')}}\n                        </span>\n\n                        <span ng-if="is_pron && formdata.isEn == \'uk\' " class="ipa">&nbsp;{{define.uk_pron_ext ? define.uk_pron_ext : define.get(\'uk_pron\')}}</span>\n                        <span ng-if="is_pron && formdata.isEn == \'uk\' ">[{{define.uk_change_pron_ext ? define.uk_change_pron_ext : define.get(\'uk_change_pron\')}}]</span>\n\n                        <span ng-if="is_pron && formdata.isEn == \'us\' " class="ipa">&nbsp;{{define.us_pron_ext ? define.us_pron_ext : define.get(\'us_pron\')}}</span>\n                        <span ng-if="is_pron && formdata.isEn == \'us\' ">[{{define.us_change_pron_ext ? define.us_change_pron_ext : define.get(\'us_change_pron\')}}]</span>\n                        <span ng-if="is_pron" ng-hide="$last" style = "margin:0 18px;font-weight: bold;display: inline-block;">/</span>\n                    </span>\n                    \n                </li>\n            </ul>\n        </div>\n\n\n        <p ng-if = "is_pron" class="pron-symbol">\n          <span>. Syllable marker</span> <span>* Main syllable stress</span> <span>\' Secondary syllable stress</span>\n        </p>\n    </div>\n    <div class="logo-section page-avoid " ng-if="!hideAnwser">\n        <div class="page-avoid split-line" style="page-break-before:always;">\n            <div class="split-hint" style="margin-top:10px;"><strong>ANSWERS</strong></div>\n            <div>\n                <hr style=" height:2px;border:none;border-top:6px dashed lightgray;" />\n            </div>\n        </div>\n        <div class="answers">\n            <p style="font-size:10px!important">\n                <span style="margin-right:8px;" ng-repeat="lemma in lemmas track by $index">{{subject_no[$index]}}.&nbsp;{{lemma}}</span>\n            </p>\n        </div>\n    </div>\n</div>'),e.put("app/class-module/worksheet/worksheet-pronunciation.tmpl.html",'\n    <style type="text/css">\n\n    @media print {\n    .page-avoid{page-break-inside: avoid;}\n\n}\n\n@page {\n    margin-top: 30px;\n    margin-bottom: 30px;\n}\n    body{font-family:arial;background:#fff!important;}\n   .work-sheet{width:800px;padding:20px 50px;margin:auto;}\n    h1{text-align:center;font-weight:bold;padding:10px 0px ;font-size:xx-large;margin:22px 0px 0px 0px; line-height:normal;}\n    h2{text-align:center;font-size: medium; margin: 0px 0px 5px; padding: 0px 0px 22px 0px;line-height:normal}\n    .sheet{border:6px solid lightgray;padding:10px 5%;width:90%;}\n    .example{padding:15px 10px;text-align:center;border-radius:5px;height:25px; border:4px dashed lightgray;}\n    .example div{float:left;width:auto;margin:0px 0px 0px 165px;}\n    .example div:last-child{margin-left:50px;}\n    .example div label{padding:8px;vertical-align:middle;border-radius:5px; border:4px solid gray;}\n    .example div span{margin:5px;padding:8px;border-radius:5px;vertical-align:middle; border:4px solid gray;}\n    .questions{margin-top: 22px;}\n    .questions div{display:inline-table;}\n    .question{margin:2px 0px;}\n    .question span{\nfloat:left;\nmargin-top:20px;\ncolor:gray;\nfont-weight:bold;\nfont-size:large;  \nmargin-left: 0px;\nwidth: 20px;}\n    \n.ques{\nborder-radius:0px;\n/*padding:10px 5px;*/\ntext-align:center;\nbackground:transparent;\nborder:4px solid darkgrey;\ncolor:gray;\nmargin-left: 30px!important;\nmargin-top: 15px;\nmargin-bottom:-10px;\nwidth: 304.5px;\n}\n\n.ques{\n    min-height: 42px;\n    font-size: 14px;\n    vertical-align: middle;\n    margin-bottom: 3px;\n}\n/*.ques span{    \n    margin: 0px;\n    padding:0px;\n    font-size: 14px;\n    vertical-align: middle;\n    min-height: 42px;\n}\n.ques :first-child{    \n    font-family:Verdana;\n    font-weight: bold;\n    width: 149px;\n    text-align: right;\n    margin-right: 10px;\n}    \n.ques :last-child{\n    font-weight: normal;\n    width: 145px;\n    text-align: left;\n}    */\n\n.ans{\npadding:10px 7px;\nborder-radius:0px;\nbackground-color:#FFF;\ntext-align:center;\nmargin:5px 10px 0px 10px;\nborder:4px solid #000000;\nwidth: 290px;\n}\n\n\n    .logo-section{margin:15px 0px;width:100%;padding: 0px 5px}\n    #footer{display: none;}\n    .split-line{text-align: right; }\n    .split-hint{font-size: smaller;}\n    .answers{border: 1px dotted lightgray;border-radius: 0px;padding:0px 8px;font-weight:bold;color:lightgray;}\n    @media   print{    \n       \n\n        .question{\n            page-break-inside: avoid;\n        }\n\n        .noprint{display:none;}                  \n        #footer{\n                display: block;\n                position: fixed;\n                bottom: 0pt;\n                right: 0pt;\n                left: 0pt;\n                text-align: center;\n        }\n    }\n    .select{\n        width: 808px;\n        background: rgba(0,0,0,0.15);\n        font-weight: bold;\n    }\n    .select div{\n        display: -moz-box;  /* Firefox */ \n          display: -ms-flexbox;    /* IE10 */ \n          display: -webkit-box;    /* Safari */  \n          display: -webkit-flex;    /* Chrome, WebKit */ \n          display: box;  \n          display: flexbox;  \n          display: flex;   \n          flex-wrap: wrap;\n    }\n   .select md-checkbox{\n        width: 180px;\n   }\n\n\n\n</style>    \n    <div class="work-sheet">\n    <div class="noprint" style="width:600px;">\n        <p ng-if = "print_all != \'false\' ">Select which to print  ({{checklistids.length}}/{{checklist.length}})</p>\n        <div class="select">\n            <div  ng-if = "print_all != \'false\' ">\n                     <md-checkbox md-no-ink aria-label="{{word.get(\'origin_obj_lemma\')}}" class="md-primary" ng-repeat="word in checklist track by $index"   ng-checked="exists(word)" ng-click="toggle(word)">\n                       {{word.get(\'origin_obj_lemma\')}}\n                      </md-checkbox>\n              </div>\n\n              <div class = "pron_select">\n                <md-radio-group ng-model="formdata.isEn" ng-change="refreshWorksheet()" >\n                        <md-radio-button value="uk"> UK Pronuncation </md-radio-button>\n                        <md-radio-button value="us" class="md-primary">US Pronuncation</md-radio-button>\n                          \n                    </md-radio-group>\n\n              </div>\n              <div style = "padding-left:6px">\n                        <md-checkbox ng-model="hideAnwser" ng-change="hideAnwserFunc()" aria-label="Hide answer">\n                           Hide answer\n                        </md-checkbox>\n              </div>\n              \n\n              <div>\n                <md-button class="noprint md-raised md-primary" onClick="history.go(-1);return true;"><md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>back</md-button>\n\n                <md-button class="md-raised md-primary" ng-click=\'loadWorksheetData()\'>\n                        SELECT WORDS\n                 </md-button>\n\n                <md-button class="md-raised md-primary" ng-click="print()">PRINT</md-button>\n\n            </div>\n        </div>\n    </div>\n    <div id = "log-image" style = "text-align:center;margin-top:20px;" class = "page-avoid">\n      <img src="assets/images/worksheet_logo.jpg">\n    </div>\n         <h1>Pronunciation & Spelling Match</h1>\n        <h2>by {{teacherName}}</h2>\n        <div class="sheet">\n            <div class="example">\n                <div>\n                <label><b>d uw </b>[d u:] </label>\n                    <span>do</span>\n                </div>\n                <div>\n                    <label><b>g O</b> [g əʊ]</label>\n                    <span>go</span>\n                </div>\n            </div>\n            <div  class="questions">\n                <div class="question" style = "page-break-inside: avoid;" ng-repeat = "word in words track by $index">\n                    <!-- <input type="text" disabled="disabled" value="{{word.pron}}&nbsp[{{word.pron2}}]" class="ques"> -->\n                   <div class="ques" ng-if = "formdata.isEn == \'uk\' ">\n                        <strong>{{word.uk_pron_ext ? word.uk_pron_ext : word.get(\'uk_pron\')}}</strong>[{{word.uk_change_pron_ext ? word.uk_change_pron_ext : word.get(\'uk_change_pron\')}}]\n                   </div>\n                   <div class="ques" ng-if = "formdata.isEn == \'us\' ">\n                        <strong>{{word.us_pron_ext ? word.us_pron_ext : word.get(\'us_pron\')}}</strong>[{{word.us_change_pron_ext ? word.us_change_pron_ext : word.get(\'us_change_pron\')}}]\n                   </div>\n                    <br />\n                    <span>{{subject_no[$index]}}.</span>\n                    <input type="text" class="ans" />\n                </div>\n\n                <div ng-if = "$index == 18" style = "page-break-after:always;"></div>\n                \n            </div>\n\n            \n            <p class="pron-symbol">\n              <span>. Syllable marker</span> <span>* Main syllable stress</span> <span>\' Secondary syllable stress</span>\n            </p>\n        </div>\n        <div class="logo-section page-avoid" ng-if = "!hideAnwser">\n            <div class = "split-line" >\n              <div class="split-hint"><strong>ANSWERS</strong></div>\n              <div><hr style=" height:2px;border:none;border-top:6px dashed lightgray;" /></div>\n            </div>\n            <div class="answers">\n                <p style="font-size:10px!important">\n                    <span style = "margin-right:8px;" ng-repeat = "word in words track by $index">{{subject_no[$index]}}.&nbsp;{{word.get(\'lemma\')}}</span>\n                </p>\n            </div>\n            \n        </div>\n    </div>\n'),e.put("app/class-module/worksheet/worksheet-vocabulary.tmpl.html",'<style type="text/css">\n\n@media print {\n    .page-avoid{page-break-inside: avoid;}\n\n}\n\n@page {\n    margin-top: 30px;\n    margin-bottom: 30px;\n}\n\n    body{font-family:arial;background:#fff!important;}\n body{font-family:arial;background:#fff!important;}\n   .work-sheet{width:800px;padding:20px 50px;margin:auto;}\n    h1{text-align:center;font-weight:bold;padding:10px 0px ;font-size:xx-large;margin:22px 0px 0px 0px; line-height:normal;}\n    h2{text-align:center;font-size: medium; margin: 0px 0px 5px; padding: 0px 0px 22px 0px;line-height:normal}\n    .sheet{border:6px solid lightgray;padding:10px 5%;width:90%;}\n    .example{\n      padding:10px 10px;\n      text-align:center;\n      border-radius:5px;\n      height:auto; \n      border:4px dashed lightgray;\n    }\n    .example .ques{ \n      margin:2px; \n      padding: 2px 2px 2px 10px;\n      text-align:left;\n      border-radius:5px;\n      border:4px solid darkgrey;\n      color:gray;\n    }\n\n      .example .ques  input{\n        width: 70px;\n      }\n    .example .ans{\n      margin:2px; \n      padding:2px 2px 2px 10px;\n      text-align:left;\n      border-radius:5px;\n      border:4px solid #000000;\n      font-weight: bold;\n}\n .question{\n  margin-top:20px;\n  width:100%;\n}\n.question .ques p{\n    float:right;\n    margin:5px 0px 5px 5px;\n    padding: 2px 2px 2px 10px; \n    text-align:left;\n    border:4px solid darkgrey;\n    color:gray;\n    width:91%;\n    height:auto;\n  }\n\n  .question .ques .serial{\n    font-weight: bold;\n    padding: 0px;\n    margin:10px 0px 0px 0px;\n   float:left; \n  }\n   .question .ques input{\n    width: 70px;\n    margin-right: 3px;\n  }\n.question .ans{\n    margin: 0px;\n    padding: 0px;\n    margin-left: 45px;\n}\n.question .ans input{\n    margin: 0px;\n    padding: 2px 2px 2px 10px;\n    height: 25px;\n    border: 4px solid #000000;\n    color: gray;\n    width: 97%;\n}\n\n\n    .logo-section{margin:15px 0px;width:100%;padding: 0px 5px}\n    #footer{display: none;}\n    .split-line{text-align: right; }\n    .split-hint{font-size: smaller;}\n    .answers{border: 1px dotted lightgray;border-radius: 0px;padding:0px 8px;font-weight:bold;color:lightgray;}\n    @media   print{    \n        \n      .ques{\n        page-break-inside: avoid;\n      }\n        .noprint{display:none;}                  \n        #footer{\n                display: block;\n                position: fixed;\n                bottom: 0pt;\n                right: 0pt;\n                left: 0pt;\n                text-align: center;\n        }\n    }\n    .select{\n        width: 808px;\n        background: rgba(0,0,0,0.15);\n        font-weight: bold;\n    }\n    .select div{\n        display: -moz-box;  /* Firefox */ \n          display: -ms-flexbox;    /* IE10 */ \n          display: -webkit-box;    /* Safari */  \n          display: -webkit-flex;    /* Chrome, WebKit */ \n          display: box;  \n          display: flexbox;  \n          display: flex;   \n          flex-wrap: wrap;\n    }\n   .select md-checkbox{\n        width: 180px;\n   }\n\n   #a4g-mta-wrapper{\n\n  display:none;\n}\n  \n</style>\n<div class="work-sheet">\n     <div class="noprint" style="width:600px;">\n        <p ng-if = "print_all != \'false\' ">Select which to print  ({{checklistids.length}}/{{checklist.length}})</p>\n        <div class="select">\n        <div ng-if = "print_all != \'false\' ">\n                    <md-checkbox md-no-ink aria-label="{{word.get(\'origin_obj_lemma\')}}" class="md-primary" ng-repeat="word in checklist track by $index"   ng-checked="exists(word)" ng-click="toggle(word)">\n                       {{word.get(\'origin_obj_lemma\')}}\n                      </md-checkbox>\n              </div>\n\n               <div style = "padding-left:6px">\n                        <md-checkbox ng-model="hideAnwser" ng-change="hideAnwserFunc()" aria-label="Hide answer">\n                           Hide answer\n                        </md-checkbox>\n              </div>\n\n              <div>\n              <md-button class="noprint md-raised md-primary" onClick="history.go(-1);return true;"><md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>back</md-button>\n                 <md-button class="md-raised md-primary" ng-click=\'loadWorksheetData()\'>\n                        SELECT WORDS\n                 </md-button>\n                <md-button class="md-raised md-primary" ng-click="print()">PRINT</md-button>            \n            </div>\n        </div>\n    </div>\n    <div id = "log-image" style = "text-align:center;margin-top:20px;" class = "page-avoid">\n      <img src="assets/images/worksheet_logo.jpg">\n    </div>\n    <h1>Meaning & Use Gap-Fill</h1>\n  <h2>by {{teacherName}}</h2>\n  <div class="sheet">\n    <div class="example">\n      <div>\n        <p class="ques">Quiet can <input type="text" disabled="true"> to either not make any noise or be shy.</p>\n        <p class="ans">mean</p>\n      </div>\n    </div>\n    <div class="question">\n      <div class  = "page-avoid" ng-repeat="ques in dictArry track by $index">\n        <div class="ques">\n          <span class="serial">{{subject_no[$index]}}.</span>\n          <p ng-if="firsterLetter">\n            {{dictSentenct[$index][0]}} {{firsterLetter[$index]}} <input type="text" disabled="true" ng-repeat="ary in multiAry[$index]"> {{dictSentenct[$index][1]}}\n          </p>      \n          <p ng-if="!firsterLetter">\n            {{dictSentenct[$index][0]}} <input type="text" disabled="true" ng-repeat="ary in multiAry[$index]"> {{dictSentenct[$index][1]}}\n          </p>\n        </div>\n        <div class="ans">\n          <input type="text"></div>\n      </div>\n    </div>\n  </div>\n  <div class="logo-section page-avoid" ng-if = "!hideAnwser">\n    <div class = "split-line">\n      <div class="split-hint"><strong>ANSWERS</strong></div>\n      <div>\n        <hr style=" height:2px;border:none;border-top:6px dashed lightgray;" />\n      </div>\n    </div>\n    <div class="answers">\n      <p style="font-size:10px!important">\n        <span style = "margin-right:8px;" ng-repeat = "ques in dictArry track by $index">{{subject_no[$index]}}.&nbsp;{{dictArry[$index]}}</span>\n      </p>\n    </div>\n    \n  </div>\n</div>'),e.put("app/class-module/worksheet/worksheet-wordfind.tmpl.html",'<style type="text/css">\n@media print {\n    .page-avoid{page-break-inside: avoid;}\n\n}\n\n@page {\n    margin-top: 30px;\n    margin-bottom: 30px;\n}\n    body{font-family:arial;background:#fff!important;}\n body{font-family:arial;background:#fff!important;}\n   .work-sheet{width:800px;padding:20px 50px;margin:auto;}\n    h1{text-align:center;font-weight:bold;padding:10px 0px ;font-size:xx-large;margin:22px 0px 0px 0px; line-height:normal;}\n    h2{text-align:center;font-size: medium; margin: 0px 0px 5px; padding: 0px 0px 22px 0px;line-height:normal}\n    .sheet{border:6px solid lightgray;padding:10px 5%;width:90%; float:left;}\n    .example{\n      padding:10px 10px;\n      text-align:center;\n      border-radius:5px;\n      height:auto; \n      border:4px dashed lightgray;\n    }\n    .example .puzzle{ \n      margin: 0px;\n      padding: 0px;     \n      float:none;\n      border:4px solid darkgrey;\n    }\n    .example .puzzle .cell,.example .puzzle .cellfill{      \n      font: 1em sans-serif!important;\n      width: 30px;\n      height: 30px;\n      margin: 0px;\n      padding: 0px;\n    }\n    .example .puzzle .cell{            \n      font: 1em sans-serif!important;\n    }\n    .example .puzzle .cellfill{      \n      border:1px solid darkgrey;\n      background:#fff;\n    }\n\n.question{}\n.sheet{\n  float:left;\n}\n .puzzle{\n    border: 1px solid black;\n    padding: 20px;\n    margin: 30px 0px;\n    text-align: center;\n    /*float: left;*/\n}\n.puzzle .row{\n    /*width: 100%;*/\n    margin: 0 auto;\n}  \n \n.puzzle .row .cell{\n    height: 30px;\n    width: 30px;\n    text-transform: uppercase;\n    background-color: white;\n    border: 0;\n    font: 1em sans-serif;\n    \n}\n.question #words{\n  /*float:right;*/\n    padding-top: 20px;\n    -moz-column-count: 1;\n    -moz-column-gap: 20px;\n    -webkit-column-count: 1;\n    -webkit-column-gap: 20px;\n    column-count: 1;\n    column-gap: 20px;\n    /*width: 170px;*/\n    line-height: 1em;\n}\n\n#words li{\n  padding-bottom: 5px;\n  float: left;\n   width: 45%;\n   overflow: hidden;\n   margin-right:5px;\n   margin-bottom: 5px;\n}\n#words li span{\n  font-size: 15px;\n}\n.answers{\n\n}\n.ipa{\n  font-weight: bold;\n  font-family: verdana;\n  /*display: block;*/\n}\n\n\n.answers .puzzle{\n    float: none;    \n    margin: 5px;\n    padding: 5px;    \n    border: 1px solid lightgray;\n    text-align: left;\n}\n.answers .puzzle .row{}    \n.answers .puzzle .row .cellfill,.answers .puzzle .row .cell{\n  height: 20px !important;\n  width: 20px!important;\n  font-size: 0.7em;\n}    \n.answers .puzzle .row .cellfill{  \n  border:1px solid darkgrey;\n  background:#fff;\n  margin: 0px;\n  padding: 0px;\n}\n    \n\n    .logo-section{margin:15px 0px;width:100%;padding: 0px 5px;}\n    #footer{display: none;}\n    .split-line{text-align: right; }\n    .split-hint{font-size: smaller;}\n    .answers{border: 1px dotted lightgray;border-radius: 0px;padding:0px 8px;font-weight:bold;color:lightgray;}\n    @media   print{    \n       \n        .noprint{display:none;}                  \n      #footer{\n                display: block;\n                position: fixed;\n                bottom: 0pt;\n                right: 0pt;\n                left: 0pt;\n                text-align: center;\n        }\n    }\n    .select{\n        width: 808px;\n        background: rgba(0,0,0,0.15);\n        font-weight: bold;\n    }\n    .select div{\n        display: -moz-box;  /* Firefox */ \n          display: -ms-flexbox;    /* IE10 */ \n          display: -webkit-box;    /* Safari */  \n          display: -webkit-flex;    /* Chrome, WebKit */ \n          display: box;  \n          display: flexbox;  \n          display: flex;   \n          flex-wrap: wrap;\n    }\n   .select md-checkbox{\n        width: 180px;\n   }\n\n\n   #a4g-mta-wrapper{\n\n  display:none;\n}\n  \n</style>\n<div class="work-sheet">\n  <div class="noprint" style="width:600px;">\n        <p ng-if = "print_all != \'false\' ">Select which to print  ({{checklistids.length}}/{{checklist.length}})</p>\n        <div class="select">\n              <div ng-if = "print_all != \'false\' ">\n                     <md-checkbox md-no-ink aria-label="{{word.get(\'origin_obj_lemma\')}}" class="md-primary" ng-repeat="word in checklist track by $index"   ng-checked="exists(word)" ng-click="toggle(word)">\n                       {{word.get(\'origin_obj_lemma\')}}\n                      </md-checkbox>\n              </div>\n\n             <div class = "pron_select" ng-if = "state_name == \'worksheet-wordfind-pronunciation\' ">\n                <md-radio-group ng-model="formdata.isEn" ng-change="refreshWorksheet()" >\n                      <md-radio-button value="uk" class="md-primary"> UK Pronuncation </md-radio-button>\n                        <md-radio-button value="us" >US Pronuncation</md-radio-button>\n                          \n                    </md-radio-group>\n              </div>\n\n              <div style = "padding-left:6px">\n                        <md-checkbox ng-model="hideAnwser" ng-change="hideAnwserFunc()" aria-label="Hide answer">\n                           Hide answer\n                        </md-checkbox>\n              </div>\n\n              <div>\n\n                \n                <md-button class="noprint md-raised md-primary" onClick="history.go(-1);return true;"><md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>back</md-button>\n                <md-button class="md-raised md-primary" ng-click=\'loadWorksheetData()\'>\n                        SELECT WORDS\n                 </md-button>\n                <md-button class="md-raised md-primary" ng-click="print()">PRINT</md-button>            \n            </div>\n        </div>\n    </div>\n    <div id = "log-image" style = "text-align:center;margin-top:20px;" class = "page-avoid">\n      <img src="assets/images/worksheet_logo.jpg">\n    </div>\n    <h1>{{worksheet_title}}</h1>\n  <h2>by {{teacherName}}</h2>\n  <div class="sheet">\n    <div class="example">\n      <div class =\'puzzle\'>\n        <div class="row">\n          <button class="cell">f</button>\n          <button class="cell">r</button>\n          <button class="cell">e</button>\n          <button class="cell">s</button>\n          <button class="cell">h</button>\n          <button class="cell">j</button>\n          <button class="cell">r</button>\n          <button class="cell">s</button>\n          <button class="cell">p</button>\n          <button class="cell">z</button>\n          <button class="cell">y</button>\n        </div>\n        <div class="row">\n          <button class="cellfill">w</button>\n          <button class="cellfill">o</button>\n          <button class="cellfill">r</button>\n          <button class="cellfill">d</button>\n          <button class="cellfill">s</button>\n          <button class="cellfill">e</button>\n          <button class="cellfill">a</button>\n          <button class="cellfill">r</button>\n          <button class="cellfill">c</button>\n          <button class="cellfill">h</button>\n          <button class="cell">k</button>\n        </div>\n        <div class="row">\n          <button class="cell">t</button>\n          <button class="cell">l</button>\n          <button class="cell">n</button>\n          <button class="cell">t</button>\n          <button class="cell">e</button>\n          <button class="cell">e</button>\n          <button class="cell">w</button>\n          <button class="cell">s</button>\n          <button class="cell">a</button>\n          <button class="cell">n</button>\n          <button class="cell">d</button>\n        </div>\n      </div>\n    </div>\n    <div class="question">\n      <div class =\'puzzle\'>\n        <div class="row" ng-repeat="letterrow in puzzle">\n          <button class="cell" ng-repeat="letter in letterrow track by $index">{{letter.letter}}</button>\n        </div>\n      </div>\n      <div id=\'words-find\'>\n        <ul>\n          <li style = "margin-bottom: 16px;" class  ="is_define" ng-if="!is_pron" ng-repeat="word in wordlist  track by $index">{{subject_no[$index]}}. \n            \n          <span ng-repeat="define in word.defines track by $index" style= "display: block;" >\n            <span class="pos"  ng-if = "define.get(\'pos\') == \'v\'">(Verb)</span> \n            <span class="pos"  ng-if = "define.get(\'pos\') == \'n\'">(Noun)</span> \n            <span class="pos"  ng-if = "define.get(\'pos\') == \'j\'">(Adjective)</span> \n            <span class="pos"  ng-if = "define.get(\'pos\') == \'r\'">(Adverb)</span> \n            <span class="pos"  ng-if = "define.get(\'pos\') == \'s\'">(Adjective)</span> \n            <span class="pos"  ng-if = "define.get(\'pos\') == \'a\'">(Adjective)</span>\n            <span >{{define.get(\'definition\')}}</span>\n          </span>\n          </li>       \n\n          <li ng-if="is_pron" ng-repeat="word in wordlist track by $index">\n            <span>{{subject_no[$index]}}. </span>\n            <span ng-repeat="define in word.defines track by $index">\n\n              <span ng-if="is_pron && formdata.isEn == \'uk\' " class="ipa">&nbsp;{{define.uk_pron_ext ? define.uk_pron_ext : define.get(\'uk_pron\')}}</span>\n              <span ng-if="is_pron && formdata.isEn == \'uk\' ">[{{define.uk_change_pron_ext ? define.uk_change_pron_ext : define.get(\'uk_change_pron\')}}]</span>\n\n              <span ng-if="is_pron && formdata.isEn == \'us\' " class="ipa">&nbsp;{{define.us_pron_ext ? define.us_pron_ext : define.get(\'us_pron\')}}</span>\n              <span ng-if="is_pron && formdata.isEn == \'us\' ">[{{define.us_change_pron_ext ? define.us_change_pron_ext : define.get(\'us_change_pron\')}}]</span>\n              <span ng-if="is_pron" ng-hide="$last" style = "margin:0 18px;font-weight: bold;display: inline-block;">/</span>\n          </span>\n              \n          </li>\n        </ul>\n      </div>\n\n      <p class="pron-symbol">\n              <span>. Syllable marker</span> <span>* Main syllable stress</span> <span>\' Secondary syllable stress</span>\n            </p>\n    </div>\n  </div>\n  <div class="logo-section" ng-if = "!hideAnwser">\n    <div class = "split-line"  style = "page-break-before:always;">\n      <div class="split-hint"><strong>ANSWERS</strong></div>\n      <div>\n        <hr style="height:2px;border:none;border-top:6px dashed lightgray;" />\n      </div>\n    </div>\n    <div class="answers" style = " margin-top:20px;">\n      <div class=\'puzzle\'>\n        <div class="row" ng-repeat="letterrow in puzzle">\n          <button ng-class="setClass(letter.isFill)" ng-repeat="letter in letterrow track by $index">{{letter.letter}}</button>\n        </div>\n      </div>\n    </div>\n    \n    \n  </div>\n</div>'),e.put("app/grammar-course/Directive/act1.tmpl.html",'<div>\n	<p>{{show_index+1 > gb_data.sentences.length ? gb_data.sentences.length : show_index+1}}/{{gb_data.sentences.length}}</p>\n	\n    <div class="sentences-list" ng-if = "$index == show_index" ng-repeat="sentence in gb_data.sentences track by $index" style="margin-bottom: 24px;">\n\n        <div class="white border padding-10 md-headline" style="margin-bottom: 16px;">\n            <span class="sentence-font" ng-class="checkWordClass($index,sentence)" style="margin-rigobjpx;" ng-repeat="obj in sentence.data_objs track by $index">{{obj.lemma}}</span>\n        </div>\n        <div>\n            <md-button ng-click="act1CheckModel(item,sentence)" ng-repeat="item in sentence.act1_anwser_arr" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="{{item}}" ng-if="item" ng-class="act1AnwserClass(item,sentence)">\n                <i class="fa fa-pencil-square-o" ng-if="item == \'written\' "></i>\n                <i class="fa fa-comments-o" ng-if="item == \'spoken\' "></i>\n                <span ng-if="item == \'written\' ">long form</span>\n                <span ng-if="item == \'spoken\' ">short form</span>\n                <span ng-if="item != \'spoken\' && item != \'written\' ">{{item_tags.stc_check_simple[item]}}</span>\n            </md-button>\n        </div>\n        \n        <p style="margin:0;"><strong>Is this spoken or written English?</strong></p>\n        <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'spoken\',sentence)" ng-click="act1CheckModel(\'spoken\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="spoken">\n            <i class="fa fa-comments-o"></i> short form\n        </md-button>\n        <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'written\',sentence)" ng-click="act1CheckModel(\'written\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="written">\n            <i class="fa fa-pencil-square-o"></i> long form\n        </md-button>\n\n        <p style="margin:0;margin-bottom: 16px!important" class = "font-purple">Note: Short forms are standard spoken English. Long forms are generally more for written English.</p>\n\n        <p style="margin:0;"><strong>Is that a sentence, question, positive or negative?</strong></p>\n        <div>\n            <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'plus\',sentence)" ng-click="act1CheckModel(\'plus\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="plus">\n                +\n            </md-button>\n            <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'min\',sentence)" ng-click="act1CheckModel(\'min\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="min">\n                -\n            </md-button>\n            <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'plus_ask\',sentence)" ng-click="act1CheckModel(\'plus_ask\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="plus_ask">\n                +?\n            </md-button>\n            <md-button style="margin-left: 0;" ng-disabled="anwser_in_array(\'min_ask\',sentence)" ng-click="act1CheckModel(\'min_ask\',sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="min_ask">\n                -?\n            </md-button>\n            <div class="clear"></div>\n        </div>\n        <p ng-if="sentence.message">{{sentence.message}} <i ng-if="sentence.message == \'You are right!\'"  class="fa fa-check-circle"></i></p>\n        <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act10.tmpl.html",'<div>\n    <p><strong>Complete the conversation.</strong></p>\n    <p>{{show_index+1 > dia_max_page ? dia_max_page : show_index+1}}/{{dia_max_page}}</p>\n    \n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-repeat="sentence in dialogs track by $index">\n            <div ng-if="sentence.show && !sentence.anwser_show">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span class="sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.data_objs track by $index">{{obj.is_option ? obj.input_space : obj.lemma}}</span>\n\n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'written\')">\n                        <i  class="fa fa-pencil-square-o"></i>\n                </span>\n                \n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'spoken\')">\n                    <i  class="fa fa-comments-o"></i>\n                </span>\n\n\n                <span class = "dialog-plus-icon">  \n                    <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>  \n                </span>\n            </div>\n            <div ng-repeat="obj in sentence.data_objs" ng-if="sentence.show && !sentence.anwser_show"" class = "word-break">\n                <md-button ng-class = "act10Class(option,obj)" ng-repeat="option in obj.false_arr" ng-click="act10CheckForm(option,obj,sentence)" class="md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{option}}">\n                    {{option}}\n                </md-button>\n            </div>\n            <p ng-if="sentence.act10_message && !sentence.anwser_show">{{sentence.act10_message}} <i ng-if="sentence.act10_message == \'You are right!\' && !sentence.anwser_show"  class="fa fa-check-circle"></i>\n            </p>\n\n            <div ng-if="sentence.show && sentence.anwser_show">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span class="sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.data_objs track by $index">{{obj.is_option ? obj.input_space : obj.lemma}}</span>\n\n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'written\')">\n                        <i  class="fa fa-pencil-square-o"></i>\n                </span>\n                \n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'spoken\')">\n                    <i  class="fa fa-comments-o"></i>\n                </span>\n\n\n                <span class = "dialog-plus-icon">  \n                    <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>  \n                </span>\n            </div>\n            <md-divider ng-if="sentence.divider_show" style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n            <div ng-repeat="obj in sentence.data_objs" ng-if="sentence.show && sentence.anwser_show" class = "word-break">\n                <md-button ng-class = "act10Class(option,obj)" ng-repeat="option in obj.false_arr" ng-click="act10CheckForm(option,obj,sentence)" class="md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{option}}">\n                    {{option}}\n                </md-button>\n            </div>\n            <p ng-if="sentence.act10_message && sentence.anwser_show">{{sentence.act10_message}} <i ng-if="sentence.act10_message == \'You are right!\' && sentence.anwser_show"  class="fa fa-check-circle"></i></p> \n            <md-progress-linear  ng-if = "sentence.show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        </div>\n\n\n\n        <div ng-if = "showNext()" >\n\n            <md-divider style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n            \n            <md-button ng-disabled = "next_btn_disable" ng-click="act10Next()" style = "margin:0;width:100%" class="md-raised md-primary" palette-background="pink:400" aria-label="Next">\n                Next\n            </md-button>\n        </div>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act11.tmpl.html",'<div>\n    <p><strong>Complete the conversation.</strong></p>\n    <p>{{show_index+1 > dia_max_page ? dia_max_page : show_index+1}}/{{dia_max_page}}</p>\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-repeat="sentence in dialogs track by $index">\n            <div ng-if="sentence.act11_show && !sentence.act11_anwser_show">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span class="sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.data_objs track by $index">{{obj.lemma}}</span>\n            </div>\n            <div ng-if="sentence.act11_show && sentence.act11_anwser_show" class = "word-break">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span class="sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.data_objs track by $index"><span ng-if = "obj.is_option && !obj.hide_label">{{obj.input_label}} </span>{{obj.is_option ? obj.input_space : obj.lemma}}</span>\n\n\n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'written\')">\n                    <i  class="fa fa-pencil-square-o"></i>\n                </span>\n                \n                <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.get(\'spoken\')">\n                    <i  class="fa fa-comments-o"></i>\n                </span>\n\n\n                <span class = "dialog-plus-icon">  \n                    <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>  \n                </span>\n            </div>\n            <md-divider ng-if="sentence.act11_divider_show" style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n            <md-input-container ng-repeat="obj in sentence.data_objs track by $index" class="" ng-if="obj.is_option && sentence.act11_show && sentence.act11_anwser_show">\n                <label for="anwser{{obj.input_label}}">{{obj.input_label}}</label>\n                <input ng-change="act11ChangeLemma(obj,sentence)" ng-model-options=\'{ debounce: 500 }\' id="anwser{{obj.input_label}}" label="anwser{{obj.input_label}}" name="anwser{{obj.input_label}}" type="text" ng-model="obj.act11_input" />\n            </md-input-container>\n            <p ng-if="sentence.act11_message && sentence.act11_anwser_show">{{sentence.act11_message}} <i ng-if="sentence.act11_message == \'You are right!\'"  class="fa fa-check-circle"></i></p>\n            <md-progress-linear  ng-if = "sentence.show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n\n\n        </div>\n\n        <md-button ng-disabled = "next_btn_disable" ng-if = "showNext()" ng-click="act11Next()" style = "margin:0;width:100%" class="md-raised md-primary" palette-background="pink:400" aria-label="Next">\n            Next\n        </md-button>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act12.tmpl.html",'<div class="act12_course">\n    <p><strong>Correct and complete the conversation. There are many errors!</strong></p>\n    <p>{{show_index+1 > dia_max_page ? dia_max_page : show_index+1}}/{{dia_max_page}}</p>\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-repeat="sentence in dialogs track by $index">\n            <div ng-if="sentence.act12_show && !sentence.act12_anwser_show">\n                <div class="word-break">\n                    <md-icon md-font-icon="fa fa-user"></md-icon>\n                    <span ng-click="act12SelectWord(sentence,obj)" class="hand sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.act12_options_data track by $index">{{obj.lemma}}</span>\n                </div>\n                <md-input-container ng-repeat="obj in sentence.act12_inputs track by $index" class="">\n                    <label>lemma</label>\n                    <input ng-change="act12ChangeLemma(obj,sentence)" ng-model-options=\'{ debounce: 1500 }\' id="lemma" label="lemma" name="lemma" type="text" ng-model="obj.input" />\n                </md-input-container>\n                <p ng-if="sentence.act12_message">\n                    {{sentence.act12_message}} <i ng-if="sentence.act12_message == \'You are right!\'" class="fa fa-check-circle"></i>\n                </p>\n            </div>\n            <div ng-if="sentence.act12_show && sentence.act12_anwser_show">\n                <div class="word-break">\n                    <md-icon md-font-icon="fa fa-user"></md-icon>\n                    <span ng-click="act12SelectWord(sentence,obj)" class="hand sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.act12_options_data track by $index">{{obj.lemma}}</span>\n                    <span class="sentence-font dialog-sw-icon" ng-if="sentence.get(\'written\')">\n                            <i  class="fa fa-pencil-square-o"></i>\n                    </span>\n                    <span class="sentence-font dialog-sw-icon" ng-if="sentence.get(\'spoken\')">\n                        <i  class="fa fa-comments-o"></i>\n                    </span>\n                    <span class="dialog-plus-icon">  \n                        <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>\n                    </span>\n                </div>\n                <md-divider ng-if="sentence.act12_divider_show" style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n                <md-input-container ng-repeat="obj in sentence.act12_inputs track by $index" class="">\n                    <label>lemma</label>\n                    <input ng-change="act12ChangeLemma(obj,sentence)" ng-model-options=\'{ debounce: 1500 }\' id="lemma" label="lemma" name="lemma" type="text" ng-model="obj.input" />\n                </md-input-container>\n                <p ng-if="sentence.act12_message">{{sentence.act12_message}} <i ng-if="sentence.act12_message == \'You are right!\'" class="fa fa-check-circle"></i></p>\n                <md-progress-linear ng-if="sentence.show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n            </div>\n        </div>\n        <md-divider ng-if="showNext()" style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n        <md-button ng-disabled="next_btn_disable" ng-if="showNext()" ng-click="act12Next()" style="margin:0;width:100%" class="md-raised md-primary" palette-background="pink:400" aria-label="Next">\n            Next\n        </md-button>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act13.tmpl.html",'<div>\n    \n\n    <div ng-if = "!show_infos">\n        <p>{{show_index + 1 }}/{{max_page + 1}}</p>\n        <div>\n            <p><strong>{{writing_task}}</strong></p>\n    \n    \n            <p ng-if="grammar_wrong" class="border-purple">There\'s something wrong. Check your answer and try again!</p>\n            <md-input-container>\n                <label for="writing">Write here</label>\n                <textarea label="writing" name="writing" ng-model="input.act13writing">\n                </textarea>\n            </md-input-container>\n\n            <md-button ng-disabled = "!input.act13writing || input.act13writing.length < 1 || btn_disable" ng-click="act13WritingCheck(input.act13writing)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="check">\n                show on {{check_time ? check_time : 0}}/4\n            </md-button>\n        </div>\n\n        <p ng-if="act13_no_tag_message && !grammar_wrong" class="border-purple">{{act13_no_tag_message}} <span ng-if = "act13_no_tag_message == \'You are right!\' && show_index < max_page"> Loading next...</span></p>\n\n        <!-- show select tags -->\n        <div ng-if  = "check_time >= 3 && select_forms">\n            <span style = "padding:0 8px;display: inline-block;margin-right:16px;" ng-repeat="form in select_forms track by $index" palette-background="myPurple:700">\n                {{form.get(\'tag_str\')}}\n            </span>\n        </div>\n\n        <div class="teacher-feedback" ng-if="grammar_wrong">\n            <div ng-if="act13_grammar">\n                <div class="border-purple" style="color:#000;overflow: auto;">\n                    <p>{{act13_grammar.get(\'sentence\')}}</p>\n                    <p><span class = "font-purple">Errors : </span>{{act13_grammar.get(\'error_grammar_percent\')}}</p>\n                    <div class="repeat-grammar" ng-repeat="suggestion in act13_grammar.get(\'feedback_grammar_suggestion\') track by $index">\n                        <p><span class="font-purple">Problem : </span>{{act13_grammar.get(\'error_grammar\')[$index]}}</p>\n                        <p><span class="font-purple">Suggestion : </span>{{act13_grammar.get(\'feedback_grammar\')[$index]}}</p>\n                    </div>\n                </div>\n            </div>\n            <p style = "font-size: 14px;">\n                {{act13_obj.sentence_number}}/{{act13_obj.limit}} (sentence total)\n            </p>\n            <div class="border-purple">\n                <span class="sentence-outer" ng-repeat="sentence in act13_obj.sentences track by $index">\n                    {{sentence}}\n                    <span ng-if = "checkShowClick(sentence,act13_obj)" class = "pop-click-here hand" ng-click = "act13SentenceDetail(sentence)"> #Click</span>\n                </span>\n            </div>\n        </div>\n        \n    </div>\n\n    \n    \n\n    <div class="show-infos" ng-if = "show_infos">\n        <md-button ng-click="showWriting()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="I understand this">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon>\n        </md-button>\n\n        <p style = "font-purple">Summary of language point</p>\n        \n        <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n            <div>\n                <span style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;">Form</span>\n            </div>\n            <div class = "filter-option-btns" ng-if = "show_hide.show_btns">\n                <md-button ng-if = "item.show" ng-class="summaryClass(item)" ng-click="fliterShow(item,gb_data.sentences)" class="md-raised md-primary magin-left-0" aria-label="I" ng-repeat="item in show_hide.arr track by $index">\n                    {{item.lemma}}\n                </md-button>\n            </div>\n            <div>\n                <md-list class="search-list">\n                    <md-list-item class="hand" ng-if="!the_sentence.hide" ng-repeat="the_sentence in gb_data.tmp_sentences track by $index">\n                        <span ng-click="speak(the_sentence.get(\'sample\'))" class="sentence-font" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                    <i  class="hand fa fa-volume-off"></i>\n                                </span>\n                        <span class="sentence-font" ng-if="the_sentence.get(\'written\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                    <i  class="fa fa-pencil-square-o"></i>\n                                </span>\n                        <span class="sentence-font" ng-if="the_sentence.get(\'spoken\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                    <i  class="fa fa-comments-o"></i>\n                                </span>\n                        <span style="background: rgb(93, 0, 187);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                    \n                            <span class = "sentence-font"   ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "the_sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>\n                        </span>\n                        <p><span class="sentence-font" ng-class="checkWordClass($index,the_sentence)" ng-repeat="obj in the_sentence.data_objs track by $index">{{obj.lemma}}</span></p>\n                    </md-list-item>\n                </md-list>\n            </div>\n        </div>\n\n        <p><strong>We use this for talking about this.</strong></p>\n\n        <div ng-repeat="obj in anwser_list">\n\n            <md-button style = "margin-left: 0px;"  ng-repeat="item in obj.arr" class="md-raised md-primary" palette-background="pink:400" aria-label="{{item}}" ng-class = "checkClass(item, obj)">\n                \n                <md-tooltip ng-if = "item == \'present\' " >Now, not yesterday or tomorrow</md-tooltip>\n                <md-tooltip ng-if = "item == \'past\' " >Before now e.g. yesterday, last year</md-tooltip>\n                <md-tooltip ng-if = "item == \'future\' " >After now e.g. tomorrow, next year</md-tooltip>\n                <md-tooltip ng-if = "item == \'recent\' " >Close to now, but not yesterday or last year</md-tooltip>\n                <md-tooltip ng-if = "item == \'period\' " >Hours, days or years taken together e.g. Monday to Friday</md-tooltip>\n                <md-tooltip ng-if = "item == \'temporary\' " >Possible to change, opposite of permanent</md-tooltip>\n                <md-tooltip ng-if = "item == \'permanent\' " >No likely to change, opposite of temporary</md-tooltip>\n                <md-tooltip ng-if = "item == \'repeated\' " >Do again and again</md-tooltip>\n                <md-tooltip ng-if = "item == \'sequence\' " >First, second, third</md-tooltip>\n                <md-tooltip ng-if = "item == \'action\' " >Do something e.g. walk, swim, run\n                </md-tooltip>\n                <md-tooltip ng-if = "item == \'ability\' " >Skill or talent e.g. playing the piano</md-tooltip>\n                <md-tooltip ng-if = "item == \'activity\' " >Active and dynamic e.g. playing football</md-tooltip>\n                <md-tooltip ng-if = "item == \'fact\' " >True, opposite of false or incorrect e.g. The Earth goes round the Sun.</md-tooltip>\n                <md-tooltip ng-if = "item == \'definingclause\' " >Extra information about someone or something needed to understand it</md-tooltip>\n                <md-tooltip ng-if = "item == \'nondefiningclause\' " >Extra information about someone or something</md-tooltip>\n                <md-tooltip ng-if = "item == \'notreal\' " >Imaginary, but not true e.g. an idea, a dream</md-tooltip>\n                <md-tooltip ng-if = "item == \'plan\' " >Think about how to do something in the future e.g. a holiday</md-tooltip>\n                <md-tooltip ng-if = "item == \'prediction\' " >Seeing into the future i.e. what happens</md-tooltip>\n                <md-tooltip ng-if = "item == \'request\' " >Asking for something, opposite of offer</md-tooltip>\n                <md-tooltip ng-if = "item == \'offer\' " >Giving something, opposite of request</md-tooltip>\n                <md-tooltip ng-if = "item == \'order\' " >Command e.g. Come here!</md-tooltip>\n                <md-tooltip ng-if = "item == \'rulelaw\' " >No choice in doing something e.g. You have to pay for a taxi.</md-tooltip>\n                <md-tooltip ng-if = "item == \'opinion\' " >What you or others think i.e. your ideas on a subject</md-tooltip>\n                <md-tooltip ng-if = "item == \'advice\' " >Words of help for someone else</md-tooltip>\n                <md-tooltip ng-if = "item == \'experience\' " >Life and all your memories of it up until the present</md-tooltip>\n                <md-tooltip ng-if = "item == \'sure100\' " >Degree of certainly or possibility</md-tooltip>\n                <md-tooltip ng-if = "item == \'sure7080\' " >Degree of certainly or possibility</md-tooltip>\n                <md-tooltip ng-if = "item == \'sure6070\' " >Degree of certainly or possibility</md-tooltip>\n                <md-tooltip ng-if = "item == \'sure4050\' " >Degree of certainly or possibility</md-tooltip>\n                <md-tooltip ng-if = "item == \'sure2040\' " >Degree of certainly or possibility</md-tooltip>\n                <md-tooltip ng-if = "item == \'completed\' " >Finished action or state</md-tooltip>\n                <md-tooltip ng-if = "item == \'uncompleted\' " >An action or state not finished</md-tooltip>\n                <md-tooltip ng-if = "item == \'stresscontrast\' " >Emphasis, usually to make clearer or stronger</md-tooltip>\n                <md-tooltip ng-if = "item == \'positive\' " >+, opposite of negative (-)</md-tooltip>\n                <md-tooltip ng-if = "item == \'negative\' " >-, opposite of positive (+)</md-tooltip>\n                <md-tooltip ng-if = "item == \'countable\' " >One pen, two pens, three pens</md-tooltip>\n                <md-tooltip ng-if = "item == \'uncountable\' " >Some water, lots of water, loads of water</md-tooltip>\n                <md-tooltip ng-if = "item == \'possession\' " >Ownership e.g. His, her or mine</md-tooltip>\n                <md-tooltip ng-if = "item == \'general\' " >Trees, not the tree or a tree</md-tooltip>\n                <md-tooltip ng-if = "item == \'specific\' " >The tree or a tree, not trees in general</md-tooltip>\n\n                {{item_tags.data_check_name[item]}}\n\n            </md-button>\n        </div>\n\n\n        \n    </div>\n\n\n</div>\n'),e.put("app/grammar-course/Directive/act14.tmpl.html",'<div>\n    <md-button ng-click="act14ChangeView(\'act14_view_a\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        A\n    </md-button>\n\n    <md-button ng-click="act14ChangeView(\'act14_view_b\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        B\n    </md-button>\n\n    <md-button ng-click="act14ChangeView(\'act14_view_c\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        C\n    </md-button>\n\n    <md-button ng-click="act14ChangeView(\'act14_view_d\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        D\n    </md-button>\n\n    <md-button ng-click="act14ChangeView(\'act14_view_e\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        E\n    </md-button>\n\n    <md-button ng-click="act14ChangeView(\'act14_view_f\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="act1">\n        F\n    </md-button>\n</div>\n\n\n<div ng-if = "act14_view == \'act14_view_a\' "  class="white border padding-10 md-headline" style = "margin-top: 8px;"> \n    <div ng-repeat="sentence in sentence_list" class="white border padding-10 md-headline" style="margin-bottom: 16px;" ng-if = "!sentence.hide">\n        <p ng-if = "sentence.test_obj.message">{{sentence.test_obj.message}}</p>\n\n        <div>\n            <md-button style = "margin-left: 0;margin-right: 0;background: rgb(93, 0, 187);" class="md-raised md-primary" aria-label="types">\n                \n\n                <i ng-if = "sentence.get(\'written\')" class="fa fa-pencil-square-o"></i>\n                \n                <i ng-if = "sentence.get(\'spoken\')" class="fa fa-comments-o"></i>\n\n                <span class = "sentence-font "   ng-repeat="item in check_less track by $index" ng-if = "sentence.get(item)">{{check_simple[item]}}</span> \n            </md-button>\n\n\n            <md-button ng-click = "act6RemoveLemma(obj,sentence)" ng-disabled = "!obj.option_obj" ng-repeat="obj in sentence.act6_lemmar_anwser_objs track by $index" style = "margin-left: 0;" class="normal-text md-raised md-primary" palette-background="pink:400" aria-label="{{obj.lemma ? obj.lemma : $index + 1}}" ng-class = "act6Class($index,obj.lemma)">\n                {{obj.lemma ? obj.lemma : $index + 1}}\n            </md-button>\n        </div>\n        \n        <md-divider></md-divider>\n\n        <p ng-if = "sentence.act6_message" >{{sentence.act6_message}}</p>\n\n        <div>\n            <md-button ng-click = "act6AddLemma(obj,sentence)" ng-disabled = "obj.disable" ng-repeat="obj in sentence.act6_lemmar_objs" style = "margin-left: 0;" class="normal-text md-raised md-primary" palette-background="pink:400" aria-label="{{obj.lemma}}">\n                {{obj.lemma}}\n            </md-button>\n        </div>\n        \n    </div>\n</div>\n\n<div ng-if = "act14_view == \'act14_view_b\'">\n    <div ng-repeat="sentence in sentence_list">\n        <p><strong>What is the correct answer?</strong></p>\n        <h4><span  class = "sentence-font"  ng-class = "checkWordClass($index,sentence)"  ng-repeat="lemma in sentence.test_obj.lemma_arr track by $index">{{lemma}}</span></h4>\n        \n        <md-button style = "margin-left: 0;" ng-repeat="option in sentence.test_obj.options" ng-click="act3CheckForm(option,sentence)" class="md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{option}}">\n            {{option}}\n        </md-button>\n        <p ng-if="sentence.act2_message">{{sentence.act2_message}}</p>\n    </div>\n</div>\n\n<div ng-if = "act14_view == \'act14_view_c\'">\n    <p><strong>What are the mistakes?</strong></p>\n    <p><strong>Click on each mistake and correct!</strong></p>\n    <div class="white border padding-10 md-headline" style = "margin-top: 8px;"> \n        \n\n        <div ng-repeat="sentence in sentence_list" class="white border padding-10 md-headline" style="margin-bottom: 16px;">\n            <p ng-if = "sentence.test_obj.message">{{sentence.test_obj.message}}</p>\n\n            <div ng-if = "$index == 0" class = "hand" style="margin-top: 8px;background: rgb(93, 0, 187);color: #fff;margin-bottom: 8px;"   ng-repeat="obj in sentence.test_obj.act5_option_sentences track by $index">\n\n                <span class = "sentence-font"  ng-if = "sentence.get(\'written\')" style="color:#fff;padding-left:8px;font-size:20px;">\n                    <i  class="fa fa-pencil-square-o"></i>\n                </span>\n                \n                <span class = "sentence-font"  ng-if = "sentence.get(\'spoken\')" style="color:#fff;padding-left:8px;font-size:20px;">\n                    <i  class="fa fa-comments-o"></i>\n                </span>\n\n                <span style="color:#fff;font-size:20px;" ng-if = "sentence.get(\'plus\')">\n                    +\n                </span>\n\n                <span style="color:#fff;font-size:20px;" ng-if = "sentence.get(\'min\')">\n                    -\n                </span>\n\n                <span style="color:#fff;font-size:20px;" ng-if = "sentence.get(\'plus_ask\')">\n                    +?\n                </span>\n\n                <span style="color:#fff;font-size:20px;" ng-if = "sentence.get(\'min_ask\')">\n                    -?\n                </span>\n\n                <span ng-class = "checkWordClass($index,sentence)" ng-click = "act5SelectWord($index,lemma,sentence,obj)" class = "sentence-font"  ng-repeat="lemma in obj.lemma_arr track by $index">{{lemma}}</span>\n            </div>\n\n            \n\n            <div>\n                <span class = "sentence-font"  ng-repeat="lemma in sentence.act5_lemma_arr track by $index" style = "margin-left: 8px;">{{lemma}}</span>\n            </div>\n\n            <p ng-if = "sentence.act5_message">{{sentence.act5_message}}</p>\n            <md-input-container class="" ng-if = "sentence.act5_show">\n                <label>lemma</label>\n                <input ng-change="act5ChangeLemma(sentence)" ng-model-options=\'{ debounce: 500 }\' id="lemma" label="lemma" name="lemma" type="text" ng-model="sentence.act5_change_lemma" />\n            </md-input-container>\n\n        </div>\n    </div>\n</div>\n\n<div ng-if = "act14_view == \'act14_view_d\'">\n    <div ng-repeat="sentence in sentence_list">\n        <p><strong>What is the correct answer?</strong></p>\n        <h4><span  class = "sentence-font"  ng-class = "checkWordClass($index,sentence)"  ng-repeat="lemma in sentence.test_obj.lemma_arr track by $index">{{lemma}}</span></h4>\n\n        <md-input-container>\n            <label for="name">{{sentence.base_form}}</label>\n            <input ng-change="act14_3_CheckForm(sentence.act3_change_lemma,sentence)" ng-model-options=\'{ debounce: 500 }\' id="name" label="name" name="name" type="text" ng-model="sentence.act3_change_lemma"/>\n        </md-input-container>\n\n\n        <p ng-if="sentence.act2_message">{{sentence.act2_message}}</p>\n    </div>\n</div>\n\n<div ng-if = "act14_view == \'act14_view_f\'">\n    <p><strong>Complete the conversation.</strong></p>\n    <div class="white border padding-10 md-headline" style = "margin-top: 8px;"> \n        <div ng-repeat="sentence in dia_list track by $index">\n            <div ng-if = "sentence.act11_show && !sentence.act11_anwser_show">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span  class = "sentence-font"  ng-class = "checkWordClass($index,sentence)"  ng-repeat="obj in sentence.data_objs track by $index">{{lemma}}</span>\n    obj.        </div>\n\n            <div ng-if = "sentence.act11_show && sentence.act11_anwser_show">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                {{sentence.act14_f_anwser}}\n            </div>\n\n            <md-divider ng-if = "sentence.act11_divider_show" style = "margin-top: 16px;margin-bottom: 16px;"></md-divider>\n\n            <md-input-container ng-repeat="lemma in sentence.test_obj.lemma_arr track by $index" class="" ng-if = "sentence.test_obj.index == $index && sentence.act11_show && sentence.act11_anwser_show">\n                <label for="anwser1">anwser</label>\n                <input ng-change="act14ChangeLemma(sentence)" ng-model-options=\'{ debounce: 500 }\' id="anwser1" label="anwser1" name="anwser1" type="text" ng-model="sentence.act14_f_anwser"  />\n            </md-input-container>\n            <p ng-if="sentence.act14_f_message">{{sentence.act14_f_message}}</p>\n            \n        </div>\n    </div>\n</div>'),e.put("app/grammar-course/Directive/act2.tmpl.html",'<div>\n	<div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div>\n            <span style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;">Form</span>\n        </div>\n        <div>\n            <md-list class="search-list" >\n                <md-list-item class="hand word-break" ng-repeat="the_sentence in gb_data.tmp_sentences track by $index" ng-if = "!the_sentence.hide">\n                    <span class = "sentence-font"  ng-if = "the_sentence.get(\'written\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                        <i  class="fa fa-pencil-square-o"></i>\n                    </span>\n                    \n                    <span class = "sentence-font"  ng-if = "the_sentence.get(\'spoken\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                        <i  class="fa fa-comments-o"></i>\n                    </span>\n\n\n                    <span style="background: rgb(93, 0, 187);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                        \n                        <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "the_sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>  \n                    </span>\n                    <p><span class = "sentence-font"  ng-class = "checkWordClass($index,the_sentence)" ng-repeat="obj in the_sentence.data_objs track by $index">{{obj.lemma}}</span></p>\n                </md-list-item>\n            </md-list>\n        </div>\n    </div>\n\n    <p><strong>What do we use this for? Is it ..?</strong></p>\n    \n    <div ng-if = "grammar.tip" class="white border padding-10" style = "margin-top: 8px;margin-bottom: 8px;"> \n        {{grammar.tip}}\n    </div>\n    \n    <div ng-repeat="obj in anwser_list">\n\n        <md-button style = "margin-left: 0px;" ng-click="act2CheckGrammarTag(item, obj, anwser_list)" ng-repeat="item in obj.arr" class="md-raised md-primary" palette-background="pink:400" aria-label="{{item}}" ng-class = "act2Class(item, obj)">\n            \n            <md-tooltip ng-if = "item == \'present\' " >Now, not yesterday or tomorrow</md-tooltip>\n            <md-tooltip ng-if = "item == \'past\' " >Before now e.g. yesterday, last year</md-tooltip>\n            <md-tooltip ng-if = "item == \'future\' " >After now e.g. tomorrow, next year</md-tooltip>\n            <md-tooltip ng-if = "item == \'recent\' " >Close to now, but not yesterday or last year</md-tooltip>\n            <md-tooltip ng-if = "item == \'period\' " >Hours, days or years taken together e.g. Monday to Friday</md-tooltip>\n            <md-tooltip ng-if = "item == \'temporary\' " >Possible to change, opposite of permanent</md-tooltip>\n            <md-tooltip ng-if = "item == \'permanent\' " >No likely to change, opposite of temporary</md-tooltip>\n            <md-tooltip ng-if = "item == \'repeated\' " >Do again and again</md-tooltip>\n            <md-tooltip ng-if = "item == \'sequence\' " >First, second, third</md-tooltip>\n            <md-tooltip ng-if = "item == \'action\' " >Do something e.g. walk, swim, run\n            </md-tooltip>\n            <md-tooltip ng-if = "item == \'ability\' " >Skill or talent e.g. playing the piano</md-tooltip>\n            <md-tooltip ng-if = "item == \'activity\' " >Active and dynamic e.g. playing football</md-tooltip>\n            <md-tooltip ng-if = "item == \'fact\' " >True, opposite of false or incorrect e.g. The Earth goes round the Sun.</md-tooltip>\n            <md-tooltip ng-if = "item == \'definingclause\' " >Extra information about someone or something needed to understand it</md-tooltip>\n            <md-tooltip ng-if = "item == \'nondefiningclause\' " >Extra information about someone or something</md-tooltip>\n            <md-tooltip ng-if = "item == \'notreal\' " >Imaginary, but not true e.g. an idea, a dream</md-tooltip>\n            <md-tooltip ng-if = "item == \'plan\' " >Think about how to do something in the future e.g. a holiday</md-tooltip>\n            <md-tooltip ng-if = "item == \'prediction\' " >Seeing into the future i.e. what happens</md-tooltip>\n            <md-tooltip ng-if = "item == \'request\' " >Asking for something, opposite of offer</md-tooltip>\n            <md-tooltip ng-if = "item == \'offer\' " >Giving something, opposite of request</md-tooltip>\n            <md-tooltip ng-if = "item == \'order\' " >Command e.g. Come here!</md-tooltip>\n            <md-tooltip ng-if = "item == \'rulelaw\' " >No choice in doing something e.g. You have to pay for a taxi.</md-tooltip>\n            <md-tooltip ng-if = "item == \'opinion\' " >What you or others think i.e. your ideas on a subject</md-tooltip>\n            <md-tooltip ng-if = "item == \'advice\' " >Words of help for someone else</md-tooltip>\n            <md-tooltip ng-if = "item == \'experience\' " >Life and all your memories of it up until the present</md-tooltip>\n            <md-tooltip ng-if = "item == \'sure100\' " >Degree of certainly or possibility</md-tooltip>\n            <md-tooltip ng-if = "item == \'sure7080\' " >Degree of certainly or possibility</md-tooltip>\n            <md-tooltip ng-if = "item == \'sure6070\' " >Degree of certainly or possibility</md-tooltip>\n            <md-tooltip ng-if = "item == \'sure4050\' " >Degree of certainly or possibility</md-tooltip>\n            <md-tooltip ng-if = "item == \'sure2040\' " >Degree of certainly or possibility</md-tooltip>\n            <md-tooltip ng-if = "item == \'completed\' " >Finished action or state</md-tooltip>\n            <md-tooltip ng-if = "item == \'uncompleted\' " >An action or state not finished</md-tooltip>\n            <md-tooltip ng-if = "item == \'stresscontrast\' " >Emphasis, usually to make clearer or stronger</md-tooltip>\n            <md-tooltip ng-if = "item == \'positive\' " >+, opposite of negative (-)</md-tooltip>\n            <md-tooltip ng-if = "item == \'negative\' " >-, opposite of positive (+)</md-tooltip>\n            <md-tooltip ng-if = "item == \'countable\' " >One pen, two pens, three pens</md-tooltip>\n            <md-tooltip ng-if = "item == \'uncountable\' " >Some water, lots of water, loads of water</md-tooltip>\n            <md-tooltip ng-if = "item == \'possession\' " >Ownership e.g. His, her or mine</md-tooltip>\n            <md-tooltip ng-if = "item == \'general\' " >Trees, not the tree or a tree</md-tooltip>\n            <md-tooltip ng-if = "item == \'specific\' " >The tree or a tree, not trees in general</md-tooltip>\n\n            {{item_tags.data_check_name[item]}}\n\n        </md-button>\n\n        <p ng-if = "obj.message">{{obj.message}}</p>\n    </div>\n\n    <p ng-if="message">{{message}}</p>\n    <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n</div>'),e.put("app/grammar-course/Directive/act3.tmpl.html",'<div>\n	<p>{{show_index+1 > sentences.length ? sentences.length : show_index+1}}/{{sentences.length}}</p>\n	\n\n	<div ng-repeat="sentence in gb_data.sentences" ng-if = "$index == show_index">\n        <p><strong>What is the correct answer?</strong></p>\n        <h4 class = "word-break"><span  class = "sentence-font"  ng-class = "checkWordClass($index,sentence)"  ng-repeat="obj in sentence.data_objs track by $index">{{obj.is_option ? obj.input_space : obj.lemma}}</span></h4>\n        \n        <div ng-repeat="obj in sentence.data_objs track by $index" ng-if = "obj.is_option">\n	        \n	        \n            <md-button  ng-repeat="option in obj.false_arr track by $index" style = "margin-left: 0;"   ng-click="act3CheckForm(option,obj,sentence)" class="md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{option}}" ng-class = "act3Class(option,obj)">\n                {{option}}\n            </md-button>\n\n            <p ng-if="obj.act3_message">{{obj.act3_message}} <i ng-if="obj.act3_message == \'You are right!\'"  class="fa fa-check-circle"></i></p>\n        </div>\n\n        <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n\n        \n        \n    </div>\n</div>'),e.put("app/grammar-course/Directive/act3level.tmpl.html",'<div>\n	<p>{{show_index+1 > sentences.length ? sentences.length : show_index+1}}/{{sentences.length}}</p>\n	\n	<div ng-repeat="sentence in gb_data.sentences" ng-if = "$index == show_index">\n        <p><strong>What is the correct answer?</strong></p>\n        <h4 class = "word-break"><span  class = "sentence-font"  ng-class = "checkWordClass($index,sentence)"  ng-repeat="obj in sentence.data_objs track by $index">{{obj.is_option ? obj.input_space : obj.lemma}}</span></h4>\n        \n        <div ng-repeat="obj in sentence.data_objs track by $index" ng-if = "obj.is_option">\n	        \n            <md-button ng-repeat="option in obj.false_arr track by $index"  ng-disabled = "sentence.disable_btn" ng-click="act3CheckForm(option,obj,sentence)" class="mrgin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{option}}" ng-class = "act3Class(option,obj)">\n                {{option}}\n            </md-button>\n            \n            <p ng-if="obj.act3_message">{{obj.act3_message}} <i ng-if="obj.act3_message == \'You are right!\'"  class="fa fa-check-circle"></i></p>\n        </div>\n\n        <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n\n        \n        \n    </div>\n</div>'),e.put("app/grammar-course/Directive/act4.tmpl.html",'<div>\n    <p><strong>Which is correct?</strong></p>\n    <p><strong>Click on the correct one!</strong></p>\n\n    <p>{{show_index+1 > sentences.length ? sentences.length : show_index+1}}/{{sentences.length}}</p>\n	\n\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-if = "$index == show_index" ng-repeat="sentence in gb_data.sentences" class="white border padding-10 md-headline" style="margin-bottom: 16px;" >\n            \n            <div ng-class = "actClass(objs)" ng-click="checkAnwserAct4(objs,sentence)" class="hand word-break" style="padding:0 8px;margin-top: 8px;background: rgb(93, 0, 187);color: #fff;margin-bottom: 8px;" ng-repeat="objs in sentence.act4_options_data">\n                <span ng-class=\'marginRight(obj.lemma)\' class="sentence-font" ng-repeat="obj in objs">{{obj.lemma}}</span>\n\n                <i style = "color:#fff!important;" ng-if = "objs[0].show_act4_class && objs[0].is_right"  class="fa fa-check-circle"></i>\n\n            </div>\n\n            <p ng-if="sentence.message">{{sentence.message}}</p>\n            <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        </div>\n    </div>\n\n\n</div>\n'),e.put("app/grammar-course/Directive/act5.tmpl.html",'<div>\n    <p><strong>What are the mistakes?</strong></p>\n    <p><strong>Click on each mistake and correct!</strong></p>\n\n    <p>{{show_index+1 > sentences.length ? sentences.length : show_index+1}}/{{sentences.length}}</p>\n	\n\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-repeat="sentence in gb_data.sentences track by $index" ng-if="show_index == $index" class="white border padding-10 md-headline" style="margin-bottom: 16px;">\n            <div ng-class = "anwserClass(sentence.act5_message)" class="hand" style="margin-top: 8px;background: rgb(93, 0, 187);color: #fff;margin-bottom: 8px;">\n                <span class="sentence-font" ng-if="sentence.get(\'written\')" style="color:#fff;padding-left:8px;font-size:20px;">\n                            <i  class="fa fa-pencil-square-o"></i>\n                        </span>\n                <span class="sentence-font" ng-if="sentence.get(\'spoken\')" style="color:#fff;padding-left:8px;font-size:20px;">\n                            <i  class="fa fa-comments-o"></i>\n                        </span>\n                <span style="color:#fff;font-size:20px;" ng-if="sentence.get(\'plus\')">\n                            +\n                        </span>\n                <span style="color:#fff;font-size:20px;" ng-if="sentence.get(\'min\')">\n                            -\n                        </span>\n                <span style="color:#fff;font-size:20px;" ng-if="sentence.get(\'plus_ask\')">\n                            +?\n                        </span>\n                <span style="color:#fff;font-size:20px;" ng-if="sentence.get(\'min_ask\')">\n                            -?\n                        </span>\n                <span ng-class="checkWordClass($index,sentence)" ng-click="act5SelectWord(sentence,obj)" class="sentence-font" ng-repeat="obj in sentence.act5_options_data track by $index">{{obj.lemma}}</span>\n\n                <i style = "color:#fff!important;" ng-if = "sentence.act5_message == \'You are right!\' "  class="fa fa-check-circle"></i>\n            </div>\n            \n\n            <div ng-repeat="obj in sentence.act5_inputs track by $index">\n                <md-input-container  class="">\n                    <label>lemma</label>\n                    <input id="lemma" label="lemma" name="lemma" type="text" ng-model="obj.input" />\n                </md-input-container>\n                <md-button ng-disabled = "obj.check_time >= 3" ng-click="act5ChangeLemma(obj,sentence)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="check">\n                    check {{obj.check_time ? obj.check_time : 0}}\n                </md-button>\n            </div>\n            \n\n\n            <p ng-if="sentence.act5_message">{{sentence.act5_message}}</p>\n            <p ng-if = "sentence.act5_more_message && (sentence.act5_message == \'You are right!\' || check_three) ">{{sentence.act5_more_message}}</p>\n            <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        </div>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act6.tmpl.html",'<div>\n    <p><strong>Which is the correct order?</strong></p>\n    <p><strong>Click to move cards into the correct order!</strong></p>\n\n    <p>{{show_index+1 > sentences.length ? sentences.length : show_index+1}}/{{sentences.length}}</p>\n	\n\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div ng-repeat="sentence in gb_data.sentences" class="white border padding-10 md-headline" style="margin-bottom: 16px;" ng-if="show_index == $index">\n            <p ng-if="sentence.test_obj.message">{{sentence.test_obj.message}}</p>\n            <div>\n                <md-button style="margin-left: 0;margin-right: 0;background: rgb(93, 0, 187);" class="md-raised md-primary" aria-label="types">\n                    <i ng-if="sentence.get(\'written\')" class="fa fa-pencil-square-o"></i>\n                    <i ng-if="sentence.get(\'spoken\')" class="fa fa-comments-o"></i>\n                    <span class="sentence-font " ng-repeat="item in check_less track by $index" ng-if="sentence.get(item)">{{check_simple[item]}}</span>\n                </md-button>\n                <md-button ng-click="act6RemoveLemma(obj,sentence)" ng-disabled="!obj.option_obj" ng-repeat="obj in sentence.act6_anwser_objs track by $index" style="margin-left: 0;" class="normal-text md-raised md-primary" palette-background="pink:400" aria-label="{{obj.option_obj ? obj.option_obj.lemma : $index + 1}}" ng-class="act6Class($index,obj)">\n                    {{obj.option_obj ? obj.option_obj.lemma : $index + 1}}\n                </md-button>\n            </div>\n            <md-divider></md-divider>\n            \n            <div>\n                <md-button ng-if = "(click_index * space_limit <= obj.index) && (obj.index <  (click_index + 1 ) * space_limit)" ng-click="act6AddLemma(obj,sentence)" ng-disabled="obj.disable" ng-repeat="obj in sentence.act6_objs" style="margin-left: 0;" class="normal-text md-raised md-primary" palette-background="pink:400" aria-label="{{obj.lemma}}">\n                    {{obj.lemma}}\n                </md-button>\n            </div>\n\n            <p ng-if="sentence.act6_message">{{sentence.act6_message}} <i ng-if="sentence.act6_message == \'You are right!\'"  class="fa fa-check-circle"></i></p>\n            <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        </div>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/act7.tmpl.html",'<div>\n    <p><strong>Look at the questions.</strong></p>\n    <p><strong>Then click on the answers in the reading!</strong></p>\n\n    <div class="bg-tm hand border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n        {{ grammar.act7_obj.page}}. {{grammar.act7_obj.question}}\n    </div>\n    <div ng-class = "anwserClass(grammar.act7_message)" ng-if="grammar.act7_obj.click_lemmar" class="bg-tm hand border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n        {{grammar.act7_obj.click_lemmar}} <i ng-if = "grammar.act7_message == \'You are right!\' "  class="fa fa-check-circle" style = "color:#fff!important;"></i>\n    </div>\n    <p ng-if="grammar.act7_message">{{grammar.act7_message}}</p>\n\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;background: lightgrey;">\n        <div ng-if="!grammar.act7_show" class="white border padding-10 md-headline center">\n            <md-button ng-click="act7Speak(grammar.get(\'listen\'))" class="md-raised md-primary" palette-background="pink:400" aria-label=">">\n                <md-icon md-font-icon="fa fa-play"></md-icon>\n            </md-button>\n        </div>\n        <div ng-if="grammar.act7_show" class="white border padding-10 md-headline ">\n            <span class="hand" ng-click="act7Anwser(lemma, $index)" ng-repeat="lemma in grammar.act7_lemmas track by $index" >\n                <span ng-if = "lemma != \'-breakline-\' ">{{lemma}}</span>\n                <span ng-if = "lemma == \'-breakline-\' "></br></span>\n            </span>\n            <div class="clear"></div>\n        </div>\n    </div>\n    \n    <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n</div>\n'),e.put("app/grammar-course/Directive/act8.tmpl.html",'<div class ="act8_box" style = "position: relative;">\n\n\n    <p><strong>Read and complete the gaps!</strong></p>\n\n\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;background:lightgrey;">\n        <div class="white border padding-10 md-headline">\n            <span  ng-class="actExtraClass(obj)" class="sentence-font" ng-repeat="obj in data.listen_arr_objs track by $index">\n                <span ng-if = "obj.lemma != \'-breakline-\' && obj.lemma != \'\' && !obj.option_obj">{{obj.lemma}}</span>\n                <span class = "hand" ng-click = "showInputs(obj)" ng-if = "obj.option_obj">{{obj.option_obj.input_lemma ? obj.option_obj.input_lemma + obj.option_obj.fixed_leave: obj.option_obj.anwser_index + \' \' + obj.first + \'______\' + obj.option_obj.fixed_leave}}</span>\n                <span ng-if = "obj.lemma == \'-breakline-\' "></br></span>\n\n                <md-input-container ng-if = "obj.show" class="" >\n                    <label for="anwser{{obj.option_obj.anwser_index}}">{{obj.option_obj.anwser_index}}</label>\n                    <input ng-change="act8ChangeLemma(obj)" ng-model-options=\'{ debounce: 500 }\' id="anwser{{obj.option_obj.anwser_index}}" label="anwser{{obj.option_obj.anwser_index}}" name="anwser{{obj.option_obj.anwser_index}}" type="text" ng-model="obj.option_obj.input_lemma" />\n                </md-input-container>\n            </span>\n            <div class="clear"></div>\n        </div>\n        <p ng-if="grammar.act8_message">{{grammar.act8_message}}</p>\n    </div>    \n</div>\n'),e.put("app/grammar-course/Directive/act9.tmpl.html",'<div id = "act9">\n    <p><strong>Complete the conversation.</strong></p>\n\n    <p>{{show_index+1 > dia_max_page ? dia_max_page : show_index+1}}/{{dia_max_page}}</p>\n\n    <div style="margin-top: 8px;">\n        <div ng-repeat="sentence in dialogs track by $index" ng-if="sentence.act9_show">\n            <div class="white border padding-10 md-headline ">\n                <div>\n                    <md-icon md-font-icon="fa fa-user grammar-fixed-header"></md-icon>\n                    <span class="sentence-font" ng-class="checkWordClass($index,sentence)" ng-repeat="obj in sentence.data_objs track by $index">{{obj.lemma}} </span>\n                </div>\n                <md-divider ng-if="sentence.select_option && !sentence.a9_end"" style="margin-top: 16px;margin-bottom: 16px;"></md-divider>\n                <div ng-if = "!sentence.a9_end">\n                    <md-icon md-font-icon="fa fa-user"></md-icon>\n                    <span class="sentence-font">{{sentence.act9_anwser.get(\'sample\')}}</span>\n\n                    <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.next.get(\'written\')" >\n                        <i  class="fa fa-pencil-square-o"></i>\n                    </span>\n                    \n                    <span class = "sentence-font dialog-sw-icon"  ng-if = "sentence.next.get(\'spoken\')" >\n                        <i  class="fa fa-comments-o"></i>\n                    </span>\n\n\n                    <span class = "dialog-plus-icon">\n                        \n                        <span class = "sentence-font"  ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "sentence.next.get(item)">{{item_tags.stc_check_simple[item]}}</span>  \n                    </span>\n                </div>\n\n            </div>\n            <div ng-if = "!sentence.a9_end" ng-class = "anwserClass(option,sentence)" ng-click="act9AddAnwser(option,sentence)" ng-repeat="option in sentence.act9_options" class="bg-tm hand border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                {{option.get(\'sample\')}} <i style = "color:#fff!important;" ng-if = "option == sentence.act9_anwser && sentence.act9_message == \'You are right!\' "  class="fa fa-check-circle"></i>\n            </div>\n\n             <md-button ng-if = "sentence.a9_end" ng-disabled = "next_btn_disable" ng-click="act9Next()" style = "margin:10px auto;width:100%" class="md-raised md-primary" palette-background="pink:400" aria-label="Finish">\n                Finish\n            </md-button>\n\n\n            <div ng-if="sentence.act9_message">\n                <p>{{sentence.act9_message}}</p>\n            </div>\n            <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        </div>\n    </div>\n</div>\n'),e.put("app/grammar-course/Directive/summary.tmpl.html",'<div>\n    <div layout="row" layout-sm="column" layout-align="center center" style="margin-bottom: 8px;">\n        <div style="background: rgb(236, 64, 122);color:#fff;" flex-xs="100" flex-sm="100" flex="100" class="white border padding-10 center md-headline">\n            {{grammar.get(\'name\')}}\n        </div>\n    </div>\n    <div class="white border padding-10 md-headline">\n        <span style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;">Use</span>\n        <div ng-if = "grammar.get(\'description\')" style="display: inline;" class="font-purple">{{grammar.get(\'description\')}}</div>\n\n        <div ng-if = "!grammar.get(\'description\') && grammar.get(\'progress_name\')" style="display: inline;" class="font-purple">{{grammar.get(\'progress_name\')}}</div>\n    </div>\n    <div class="white border padding-10 md-headline" style="margin-top: 8px;">\n        <div>\n            <span style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;">Form</span>\n        </div>\n        <div class = "filter-option-btns" ng-if = "show_hide.show_btns">\n            <md-button ng-if = "item.show" ng-class="summaryClass(item)" ng-click="fliterShow(item,gb_data.sentences)" class="md-raised md-primary magin-left-0" aria-label="I" ng-repeat="item in show_hide.arr track by $index">\n                {{item.lemma}}\n            </md-button>\n        </div>\n        <div>\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-if="!the_sentence.hide" ng-repeat="the_sentence in gb_data.tmp_sentences track by $index">\n                    <span ng-click="speak(the_sentence.get(\'sample\'))" class="sentence-font" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                <i  class="hand fa fa-volume-off"></i>\n                            </span>\n                    <span class="sentence-font" ng-if="the_sentence.get(\'written\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                <i  class="fa fa-pencil-square-o"></i>\n                            </span>\n                    <span class="sentence-font" ng-if="the_sentence.get(\'spoken\')" style="background: rgb(236, 64, 122);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                <i  class="fa fa-comments-o"></i>\n                            </span>\n                    <span style="background: rgb(93, 0, 187);color:#fff;padding:0 8px;margin-right:8px;font-size:16px;">\n                                \n                        <span class = "sentence-font"   ng-repeat="item in item_tags.stc_check_less track by $index" ng-if = "the_sentence.get(item)">{{item_tags.stc_check_simple[item]}}</span>\n                    </span>\n                    <p><span class="sentence-font" ng-class="checkWordClass($index,the_sentence)" ng-repeat="obj in the_sentence.data_objs track by $index">{{obj.lemma}}</span></p>\n                </md-list-item>\n            </md-list>\n        </div>\n    </div>\n    <div class="white border padding-10 angular-with-newlines" style="margin-top: 8px;">{{grammar.get(\'summary\')}}\n    </div>\n\n    <p ng-if = "!show_hide.next_enable" clas = "font-red;">Click above to see all the forms!</p>\n    <md-button ng-disabled = "!show_hide.next_enable" style="margin-left:0;margin-right: 0;" ng-click="next()" class="glowing md-raised md-primary full-width margin-left-0" palette-background="pink:400" aria-label="Next">\n        Next\n    </md-button>\n</div>\n'),e.put("app/grammar-course/Directive/vocab1.tmpl.html",'<div>\n    <div ng-click="speak(vocas[voca_page].get(\'lemma\'))" flex-xs="100" flex-sm="100" flex="50" class="white border padding-10 center md-headline hand">\n        <span class="font-purple">UK <i  class="hand fa fa-volume-off"></i></span>\n    </div>\n    <div class="center" style="margin:16px 0;" ng-if = "vocas[voca_page].get(\'the_define_obj\').get(\'imagesmain\')">\n        <img style="width:300px;height: 300px; border: 2px solid rgb(93, 0, 187);" ng-src="{{vocas[voca_page].get(\'the_define_obj\').get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}" alt="image" class="make-round" />\n    </div>\n    \n    <div class="button-options center">\n        <p>{{vocas[voca_page].get(\'the_define_obj\').get(\'definition\')}}</p>\n\n\n        <p class="center" ng-if="vocas[voca_page]">{{vocas[voca_page].message}}</p>\n        <md-progress-linear  ng-if = "show_progress_bar" class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n        \n        <md-button ng-class = "anwserClass(lemma,vocas[voca_page].message)" ng-click="checkVocaAnwser(lemma)" ng-repeat="lemma in  vocas[voca_page].lemma_arr track by $index" style="width: 90%;" class="md-raised md-primary" palette-background="pink:400" aria-label="{{lemma}}">\n            {{lemma}}\n            <i style = "color:#fff!important;" ng-if = "vocas[voca_page].message == \'You are right!\' && lemma == vocas[voca_page].click_lemma "  class="fa fa-check-circle"></i>\n        </md-button>\n    </div>\n\n    \n</div>\n'),e.put("app/grammar-course/template/course-add-sentence-dialog.tmpl.html",'<md-dialog class="course-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Add sentence</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:20px;">\n        <md-content>\n            <p>Label model target language</p>\n            <div class="member-tables-types">\n                <md-checkbox ng-change = "selectModelChange(item,sentence.check_item,sentence.check_model)" ng-repeat="item in sentence.check_item track by $index" class="margin-left-0" ng-model="sentence.check_model[item]" aria-label="Model">\n                    {{sentence.check_name[item]}}\n                </md-checkbox>\n                <div class="clear"></div>\n            </div>\n\n            <div class="sample" ng-if = "!show_edit_sentence">\n                <span ng-class = "checkWordClass(obj)" class = "hand" ng-click = "addOption(obj,$index)" ng-repeat="obj in sample_obj track by $index" style = "font-size: 18px;">{{obj.is_option ? \'[*\' + obj.tag + \']\' : obj.lemma}}<span ng-if = "obj.lemma == \'?\' || obj.lemma == \'.\' || obj.lemma == \'!\'"></br></span></span>\n\n                <md-button palette-background="pink:400" ng-click = "editSentence()"  class="margin-left-0 md-raised md-primary" aria-label="Edit Sample">Edit Sample</md-button>\n            </div>\n\n            <div class="edit-sentence-box" ng-if = "show_edit_sentence">\n                <md-input-container>\n                    <label for="edit_sentence">edit sentence</label>\n                    <textarea id="edit_sentence" label="edit_sentence" name="edit_sentence" ng-model="sample" />\n                </md-input-container>\n\n                <md-button ng-disabled = "sample.length < 3 || save_edit_sentence_btn" palette-background="pink:400" ng-click = "saveEditSentence(sample)"  class="margin-left-0 md-raised md-primary" aria-label="Save Sample">Save Sample</md-button>\n            </div>\n\n            <p ng-if = "options_obj[0]">Add false answers e.g. for \'went\' use \'goed\' or \'wented\'</p>\n\n            <div class="forms" ng-if = "forms" style="margin-top: 16px;">\n                <span class = "hand" ng-click = "addForm(form)" ng-repeat="form in forms track by $index" style = "padding: :0 8px;" ng-if = "form != current_obj.lemma">\n                    {{form}}\n                </span>\n            </div>\n\n\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="obj in options_obj track by $index">\n                    \n                    <p>\n                        <span>{{obj.lemma}}</span>\n                    </p>\n                    \n\n                    <md-input-container class="" >\n                        <label>false anwser</label>\n                        <input ng-change="falseAnwser(obj)" ng-model-options=\'{ debounce: 500 }\' id="lemma" label="lemma" name="lemma" type="text" ng-model="obj.false_anwser" />\n                    </md-input-container>\n                    \n                </md-list-item>\n            </md-list>\n\n        <md-content>\n\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <md-button ng-disabled = "add_sentence_disable" palette-background="pink:400" ng-click = "addSentence()"  class="md-raised md-primary" aria-label="save">save</md-button>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>\n'),e.put("app/grammar-course/template/course-add-test-form-dialog.tmpl.html",'<md-dialog class="course-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Add test form</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:20px;">\n        <md-content>\n            <md-input-container>\n                <label for="sample">sample</label>\n                <textarea ng-change = "changeSample()" id="sample" label="sample" name="sample" ng-model="parent_scope.test_form" ng-model-options=\'{ debounce: 1000 }\' />\n            </md-input-container>\n\n            <div class="sample" ng-if = "!show_edit_sentence">\n                <span ng-class = "checkWordClass(obj)" class = "hand" ng-click = "addOption(obj,$index)" ng-repeat="obj in sample_obj track by $index" style = "font-size: 18px;">{{obj.is_option ? \'[*\' + obj.tag + \']\' : obj.lemma}}<span ng-if = "obj.lemma == \'?\' || obj.lemma == \'.\' || obj.lemma == \'!\'"></br></span></span>\n            </div>\n            <p ng-if  = "err_message" class = "font-red">{{err_message}}</p>\n            \n            <p ng-if = "options_obj[0]">\n                <span class = "hand" ng-repeat="obj in options_obj track by $index" style = "margin-right: 4px;">\n                    <strong ng-click = "selectTagTypeAuto(obj)" ng-if = "!obj.tag_lemma">[{{obj.show_tag}}]</strong>\n                    <strong ng-click = "selectTagTypeAuto(obj)" ng-if = "obj.tag_lemma">{{obj.show_tag}}</strong>\n                </span>\n            </p>\n\n            \n            <md-button ng-disabled = "!options_obj[0]" palette-background="pink:400" ng-click = "clear()"  class="md-raised md-primary margin-left-0" aria-label="Clear">Clear</md-button>\n\n            \n\n        <md-content>\n\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <md-button ng-disabled = "!options_obj[0]" palette-background="pink:400" ng-click = "addTestForm()"  class="md-raised md-primary" aria-label="save">save</md-button>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>\n'),e.put("app/grammar-course/template/course-progress.tmpl.html",'<md-content class="bg-tm padded-content-page review-page" style="background: rgba(255, 255, 255, 0)!important;">\n    \n\n    <div class="list" layout="row" layout-wrap layout-sm="column" layout-align="start start">\n        \n        <div class="user-list-intro">\n            <ul class=" pie-legend" style = "text-align:left;">\n                <li><span style="background-color:rgb(93,0,187)"></span>Understanding</li>\n                <li><span style="background-color:rgb(255,193,7)"></span>Form</li>\n                <li><span style="background-color:lightblue"></span>Further practice</li>\n                <li><span style="background-color:rgb(234,128,252)"></span>Active use</li>\n            </ul>\n            \n        </div>\n        <table class="md-table class-list fix-review">\n            <thead>\n                <tr hide-xs hide-sm hide-md>\n                    <th hide-xs hide-sm><span class="font-black"></span></th>\n                    <th hide-xs style="width:20%;"><span class="font-black">LAST TESTED</span></th>\n                    <th style="width:70%;"><span class="font-black">PROGRESS</span></th>\n                    <th ><span class="font-black">ACTIONS</span></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="word in records track by $index" ng-class="checkDoneClass(word)">\n                    <td hide-xs hide-sm hide-md style="width:5%;font-weight:bold;">\n\n                        <div><strong>{{$index + 1 +(page -1 )* 30 }}</strong></div>\n                        \n                    </td>\n                    <td hide-xs hide-sm hide-md style="width:20%;">\n                    \n                        <div><span class="font-purple" >{{word.get(\'grammar\').get(\'name\')}}</span></div>\n                        <div>{{word.updatedAt|date:\'dd/MM/yyyy\'}}</div>\n                    </td>\n                    \n                    <td hide-gt-md>\n                        <div><span class = "font-purple" style = "margin-right: 18px;">{{word.get(\'lemma\')}}</span> <span>{{word.updatedAt|date:\'dd/MM/yyyy\'}}</span></div>\n                        <md-button style = "margin-left: 0;" ng-if="!word.get(\'remove\')" palette-background="myPurple:900" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">Disable</md-button>\n                        <md-button  ng-if="word.get(\'remove\')" style="margin-left: 0;background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">Enable</md-button>\n                        <md-button palette-background="pink:400" ng-click=\'deleteRecoard(word)\' class="md-raised md-primary" aria-label="Delete">DELETE</md-button>\n                    </td>\n                    <td style="width:40%;padding-right:20px;">\n                        <div class="points" style = "overflow: auto;" layout="row" layout-xm="row" layout-sm="column"  >\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="icon-gps-fixed"></md-icon> Revised : {{word.get(\'total\') ?  word.get(\'total\')  : 0}}</span>\n\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-check"></md-icon> Correctly : {{word.get(\'right\') ? word.get(\'right\') : 0}}</span>\n\n                            <span flex><md-icon class="font-purple" class="font-size-5 opacity-50"  md-font-icon="fa fa-times"></md-icon> Incorrectly : {{word.get(\'total\') - word.get(\'right\')}}</span>\n                        </div>\n\n\n                        <ul class=" pie-legend revie-act">\n                            <li ng-if = "word.get(\'act1\')" ><span ng-class="setActClass(\'act1\',word)"></span></li>\n                            <li ng-if = "word.get(\'act2\')"><span ng-class="setActClass(\'act2\',word)"></span></li>\n                            <li ng-if = "word.get(\'act3\')"><span ng-class="setActClass(\'act3\',word)"></span></li>\n                            <li ng-if = "word.get(\'act4\')"><span ng-class="setActClass(\'act4\',word)"></span></li>\n                            <li ng-if = "word.get(\'act5\')"><span ng-class="setActClass(\'act5\',word)"></span></li>\n                            <li ng-if = "word.get(\'act6\')"><span ng-class="setActClass(\'act6\',word)"></span></li>\n                            <li ng-if = "word.get(\'act7\')"><span ng-class="setActClass(\'act7\',word)"></span></li>\n                            <li ng-if = "word.get(\'act8\')"><span ng-class="setActClass(\'act8\',word)"></span></li>\n                            <li ng-if = "word.get(\'act9\')"><span ng-class="setActClass(\'act9\',word)"></span></li>\n                            <li ng-if = "word.get(\'act10\')"><span ng-class="setActClass(\'act10\',word)"></span></li>\n                            <li ng-if = "word.get(\'act11\')"><span ng-class="setActClass(\'act11\',word)"></span></li>\n                            <li ng-if = "word.get(\'act12\')"><span ng-class="setActClass(\'act12\',word)"></span></li>\n                            <li ng-if = "word.get(\'act13\')"><span ng-class="setActClass(\'act13\',word)"></span></li>\n                            <li ng-if = "word.get(\'act14\')"><span ng-class="setActClass(\'act14\',word)"></span></li>\n                        </ul>\n                    </td>\n                    <td  hide-xs hide-sm hide-md>\n                        \n                        <md-button ng-if="!word.get(\'remove\')" palette-background="myPurple:900" ng-click=\'disableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">Disable</md-button>\n                        <md-button ng-if="word.get(\'remove\')" style="background-color:rgb(110,110,110);color:#fff" ng-click=\'enableRecoard(word)\' class="md-raised md-primary" aria-label="Delete">Enable</md-button>\n                        <md-button palette-background="pink:400" ng-click=\'deleteRecoard(word)\' class="md-raised md-primary" aria-label="Delete">DELETE</md-button>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</md-content>'),e.put("app/grammar-course/template/course-review-dialog.tmpl.html",'<md-dialog class="course-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span></span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:20px;">\n        <md-content>\n        <div id="score" class="row" ng-if = "!hide_bar">\n            <div class="data-point-outer">\n                <div layout="row" layout-align="space-between center" flex="100" palette-background="myPurple:300" class="points border padding-10 md-headline">\n                    <div class="data-point {{view}}">\n                        \n                    </div>\n                    <div class="data-point-number">\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div ng-if="view == \'summary\'">\n            <summarycourse>\n            </summarycourse>\n        </div>\n        <div ng-if="view == \'act1\'">\n            <act1course>\n            </act1course>\n        </div>\n\n        <div ng-if="view == \'act2\'">\n            <act2course>\n            </act2course>\n        </div>\n        \n        <div ng-if="view == \'act3\'">\n            <act3course>\n            </act3course>\n        </div>\n\n        <div ng-if="view == \'act4\'">\n            \n            <act4course>\n            </act4course>\n            \n        </div>\n\n        <div ng-if="view == \'act5\'">\n            <act5course>\n            </act5course>\n\n        </div>\n\n        <div ng-if="view == \'act6\'">\n            <act6course>\n            </act6course>\n        </div>\n\n        <div ng-if="view == \'act7\'" class = "act7"> \n            <act7course>\n            </act7course>\n        </div>\n\n\n        <div ng-if="view == \'act8\'">\n            <act8course>\n            </act8course>\n        </div>\n\n        <div ng-if="view == \'act9\'">\n            <act9course>\n            </act9course>\n        </div>\n\n\n        <div ng-if="view == \'act10\'">\n            <act10course>\n            </act10course>\n        </div>\n\n        <div ng-if="view == \'act11\'">\n            <act11course>\n            </act11course>\n        </div>\n\n        <div ng-if="view == \'act12\'">\n            <act12course>\n            </act12course>\n        </div>\n\n        <div ng-if="view == \'act13\'">\n            <act13course>\n            </act13course>\n        </div>\n\n        <div ng-if="view == \'vocab1\'">\n            <vocab1course>\n            </vocab1course>\n        </div>\n\n        <div ng-if="view == \'act14\'">\n            <act14course>\n            </act14course>\n        </div>\n\n        <div ng-if="view == \'show_point\'">\n            <h1 style = "text-align: center;"><md-icon style = "font-size: 30px;position: relative;bottom: 4px;" md-font-icon="fa fa-warning"></md-icon> Progress test finished!</h1>\n\n            <div class = "show_point" style = "background: lightgrey;padding:8px;">\n                <h3>Well done!</h3>\n                <div style="margin-bottom: 8px;">\n                    <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{progress_point}}" ></md-progress-linear>\n                </div>\n                <h3>Your score is : {{progress_point}}%</h3>\n            </div>\n            \n            \n        </div>\n\n        \n\n        <ad4game></ad4game>\n        \n\n        <md-content>\n\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>\n'),e.put("app/grammar-course/template/course-study-note-view.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Grammar exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n            <md-button ng-if = " (value.type == \'test_all\' || value.type == \'summary\' || value.type == \'normal\') && grammar.get(key) && grammar && ((grammar.get(\'summary\') && grammar.get(\'summary\')) || value.type != \'summary\')" ng-repeat="(key, value) in match_exercises" ng-click="test(grammar,value.action)" class="md-raised md-primary" palette-background="pink:400" aria-label="act1">\n                {{value.short_name}}\n            </md-button>\n            \n\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/grammar-course/template/dialogue-study-note-view.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Dialogue exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n\n            <md-button ng-click="test(grammar,\'act9\')" class="md-raised md-primary" palette-background="pink:400" aria-label="exercise 1">\n                exercise 1\n            </md-button>\n            <md-button ng-click="test(grammar,\'act10\')" class="md-raised md-primary" palette-background="pink:400" aria-label="exercise 2">\n                exercise 2\n            </md-button>\n            <md-button ng-click="test(grammar,\'act11\')" class="md-raised md-primary" palette-background="pink:400" aria-label="exercise 3">\n                exercise 3\n            </md-button>\n            <md-button ng-click="test(grammar,\'act12\')" class="md-raised md-primary" palette-background="pink:400" aria-label="exercise 4">\n                exercise 4\n            </md-button>\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/grammar-course/template/edit_grammar.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Edit course data</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <h4 class="font-purple strong">Structure (definition, function, summary)</h4>\n            <md-input-container class="">\n                <label>Add title</label>\n                <input ng-change="save()" ng-model-options=\'{ debounce: 1000 }\' id="id" label="id" name="id" type="text" ng-model="data.the_id" />\n            </md-input-container>\n           \n            <md-select ng-change="save()" placeholder="Select level" ng-model="data.level" flex-xs="100" flex-sm="100">\n                <md-option value="A1, Beginner">A1, Beginner</md-option>\n                <md-option value="A2, Elementary">A2, Elementary</md-option>\n                <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                <md-option value="C1, Low Advanced">C1, Low Advance</md-option>\n                <md-option value="C2, Advanced">C2, Advanced</md-option>\n            </md-select>\n            <md-input-container class="">\n                <label>Add title for target language</label>\n                <input ng-change="save()" ng-model-options=\'{ debounce: 1000 }\' id="name" label="name" name="name" type="text" ng-model="data.name" />\n            </md-input-container>\n\n            \n            \n\n            <md-input-container class="">\n                <label>Add description of use and function</label>\n                <input ng-change="save()" ng-model-options=\'{ debounce: 1000 }\' id="description" label="description" name="description" type="text" ng-model="data.description" />\n            </md-input-container>\n\n            <div class="member-tables-types">\n                <md-checkbox ng-change = "saveTags()" ng-repeat="item in data.check_item" class="margin-left-0" ng-model="data.check_model[item]" aria-label="{{item}}">\n                    {{data.check_name[item]}}\n                </md-checkbox>\n                <div class="clear"></div>\n            </div>\n\n            <md-input-container>\n                <label for="summary">Enter summary</label>\n                <textarea ng-change="save()" ng-model-options=\'{ debounce: 1000 }\' id="summary" label="summary" name="summary" ng-model="data.summary" />\n            </md-input-container>\n            \n            \n            \n\n            <h4 class="font-purple strong">Vocabulary</h4>\n\n            <md-input-container class="">\n                <label>Search category</label>\n                <input ng-change = "searchInputChange(search_category)" ng-model-options=\'{ debounce: 1000 }\' id="search_category" label="search_category" name="search_category" type="text" ng-model="search_category" />\n            </md-input-container>\n\n            \n            <md-list class="search-list" ng-if = "!view_words">\n                <md-list-item class="hand" ng-repeat="word in search_words track by $index">\n                    \n                    <p>\n                        {{word.get(\'name\')}}\n                    </p>\n\n                    <md-button ng-disabled = "word.disable" ng-click="addVocabCategory(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="add">\n                        add\n                    </md-button>\n\n                    <md-button  ng-click="useCategory(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                        View\n                    </md-button>\n\n\n                    <md-button ui-sref="admin-panel.default.notice-category({parent_cat:word.id,page:1})" class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                        Edit\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="voca in vocas track by $index">\n                    <md-select ng-change="saveOrder(voca)" layout-padding placeholder="Order" ng-model="voca.the_order">\n                        <md-option value=1>1</md-option>\n                        <md-option value=2>2</md-option>\n                        <md-option value=3>3</md-option>\n                        <md-option value=4>4</md-option>\n                        <md-option value=5>5</md-option>\n                        <md-option value=6>6</md-option>\n                        <md-option value=7>7</md-option>\n                        <md-option value=8>8</md-option>\n                        <md-option value=9>9</md-option>\n\n                        <md-option value=10>10</md-option>\n                        <md-option value=11>11</md-option>\n                        <md-option value=12>12</md-option>\n                        <md-option value=13>13</md-option>\n                        <md-option value=14>14</md-option>\n                        <md-option value=15>15</md-option>\n                        <md-option value=16>16</md-option>\n                        <md-option value=17>17</md-option>\n                        <md-option value=18>18</md-option>\n                        <md-option value=19>19</md-option>\n                        <md-option value=20>20</md-option>\n\n                        <md-option value=21>21</md-option>\n                        <md-option value=22>22</md-option>\n                        <md-option value=23>23</md-option>\n                        <md-option value=24>24</md-option>\n                        <md-option value=25>25</md-option>\n                        <md-option value=26>26</md-option>\n                        <md-option value=27>27</md-option>\n                        <md-option value=28>28</md-option>\n                        <md-option value=29>29</md-option>\n                        <md-option value=30>30</md-option>\n\n\n                        <md-option value=31>31</md-option>\n                        <md-option value=32>32</md-option>\n                        <md-option value=33>33</md-option>\n                        <md-option value=34>34</md-option>\n                        <md-option value=35>35</md-option>\n                        <md-option value=36>36</md-option>\n                        <md-option value=37>37</md-option>\n                        <md-option value=38>38</md-option>\n                        <md-option value=39>39</md-option>\n                        <md-option value=40>40</md-option>\n\n                        <md-option value=41>41</md-option>\n                        <md-option value=42>42</md-option>\n                        <md-option value=43>43</md-option>\n                        <md-option value=44>44</md-option>\n                        <md-option value=45>45</md-option>\n                        <md-option value=46>46</md-option>\n                        <md-option value=47>47</md-option>\n                        <md-option value=48>48</md-option>\n                        <md-option value=49>49</md-option>\n                        <md-option value=50>50</md-option>\n\n                    </md-select>\n                    <p>\n                        <span>{{voca.get(\'lemma\')}}</span>\n                    </p>\n                    <md-button ng-click="removeVoca(voca)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                        Delete\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            \n\n            \n            <h4 class="font-purple strong">Target language modelling</h4>\n            \n            <md-input-container>\n                <label for="stc_sentence_sample">Add sentence / question</label>\n                <textarea id="stc_sentence_sample" label="stc_sentence_sample" name="stc_sentence_sample" ng-model="sentence.sample" />\n            </md-input-container>\n\n\n            <md-button ng-disabled = "sentence.sample.length < 1|| !sentence.sample || use_sentence_disable" ng-click="useSentence()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="use">\n                Use\n            </md-button>\n\n\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="the_sentence in sentence_list track by $index">\n                    <p>\n                        <span ng-repeat="item in sentence.check_item track by $index" ng-if = "the_sentence.get(item)">{{sentence.check_simple[item]}}</span>  \n                        {{the_sentence.get(\'sample\')}}\n                    </p>\n                    <md-button ng-click=\'editSentence(the_sentence)\' class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                        Edit\n                    </md-button>\n                    <md-button ng-click="removeSentence(the_sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                        Delete\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            <h4 class="font-purple strong">Target language checking</h4>\n\n            <md-input-container class="">\n                <label>Add form or structure</label>\n                <input ng-change = "testFormChange(test_form)" ng-model-options=\'{ debounce: 200 }\' id="test_form" label="test_form" name="test_form" type="text" ng-model="test_form" />\n            </md-input-container>\n\n            <md-button ng-disabled = "test_form.length < 1|| !test_form || use_test_form_disable" ng-click="useTestForm()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="use">\n                Use\n            </md-button>\n\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="form in test_forms track by $index">\n                    <p>\n                        <span>{{form.get(\'tag_str\')}}</span>\n                    </p>\n                    <md-button ng-click=\'editTestForm(form)\' class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                        Edit\n                    </md-button>\n                    <md-button ng-click="removeTestForm(form)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                        Delete\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            <h4 class="font-purple strong">Dialogue</h4>\n\n            <md-input-container>\n                <label for="dia_sentence_sample">Add sentence / question</label>\n                <textarea id="dia_sentence_sample" label="dia_sentence_sample" name="dia_sentence_sample" ng-model="dia.sample" />\n            </md-input-container>\n\n\n            <md-button ng-disabled = "dia.sample.length < 1|| !dia.sample || use_dia_disable" ng-click="useDia()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="use">\n                Use\n            </md-button>\n            \n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="the_dia in dia_list track by $index">\n                    <md-select ng-change="saveOrder(the_dia)" layout-padding placeholder="Order" ng-model="the_dia.the_order">\n                        <md-option value=1>1</md-option>\n                        <md-option value=2>2</md-option>\n                        <md-option value=3>3</md-option>\n                        <md-option value=4>4</md-option>\n                        <md-option value=5>5</md-option>\n                        <md-option value=6>6</md-option>\n                        <md-option value=7>7</md-option>\n                        <md-option value=8>8</md-option>\n                        <md-option value=9>9</md-option>\n\n                        <md-option value=10>10</md-option>\n                        <md-option value=11>11</md-option>\n                        <md-option value=12>12</md-option>\n                        <md-option value=13>13</md-option>\n                        <md-option value=14>14</md-option>\n                        <md-option value=15>15</md-option>\n                        <md-option value=16>16</md-option>\n                        <md-option value=17>17</md-option>\n                        <md-option value=18>18</md-option>\n                        <md-option value=19>19</md-option>\n                        <md-option value=20>20</md-option>\n\n                        <md-option value=21>21</md-option>\n                        <md-option value=22>22</md-option>\n                        <md-option value=23>23</md-option>\n                        <md-option value=24>24</md-option>\n                        <md-option value=25>25</md-option>\n                        <md-option value=26>26</md-option>\n                        <md-option value=27>27</md-option>\n                        <md-option value=28>28</md-option>\n                        <md-option value=29>29</md-option>\n                        <md-option value=30>30</md-option>\n\n\n                        <md-option value=31>31</md-option>\n                        <md-option value=32>32</md-option>\n                        <md-option value=33>33</md-option>\n                        <md-option value=34>34</md-option>\n                        <md-option value=35>35</md-option>\n                        <md-option value=36>36</md-option>\n                        <md-option value=37>37</md-option>\n                        <md-option value=38>38</md-option>\n                        <md-option value=39>39</md-option>\n                        <md-option value=40>40</md-option>\n\n                        <md-option value=41>41</md-option>\n                        <md-option value=42>42</md-option>\n                        <md-option value=43>43</md-option>\n                        <md-option value=44>44</md-option>\n                        <md-option value=45>45</md-option>\n                        <md-option value=46>46</md-option>\n                        <md-option value=47>47</md-option>\n                        <md-option value=48>48</md-option>\n                        <md-option value=49>49</md-option>\n                        <md-option value=50>50</md-option>\n                    </md-select>\n                    <p> \n                        <span ng-repeat="item in dia.check_item track by $index" ng-if = "the_dia.get(item)">{{dia.check_simple[item]}}</span> \n\n                        {{the_dia.get(\'sample\')}}{{the_dia.get(\'tags\')}}\n                    </p>\n                    <md-button ng-click="editDia(the_dia)" class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                        Edit\n                    </md-button>\n                    <md-button ng-click="removeDia(the_dia)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                        Delete\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            <h4 class="font-purple strong">Reading</h4>\n\n            <md-input-container>\n                <label for="listen">Add a reading text</label>\n                <textarea ng-change = "updateListen()" ng-model-options=\'{ debounce: 1000 }\' id="listen" label="listen" name="listen" ng-model="data.listen" />\n            </md-input-container>\n\n            <h4 class="font-purple strong">Reading gap-fill</h4>\n\n\n            <div class="white border padding-10 md-headline" ng-if = "data.listen">\n                <p>Click the lemma to select or remove</p>\n                <span class="hand" ng-click="anwserGapFill(lemma, $index)" ng-repeat="lemma in listen_arr track by $index" >\n                    <span ng-if = "lemma != \'-breakline-\' && inGapFill($index)">______{{inGapFill($index).fixed_leave}}</span>\n\n                    <span ng-if = "lemma != \'-breakline-\' && !inGapFill($index)">{{lemma}}</span>\n\n                    <span ng-if = "lemma == \'-breakline-\' "></br></span>\n                </span>\n                <div class="clear"></div>\n            </div>\n\n\n            <md-list-item ng-if = "question.q" class="hand" ng-repeat="question in question_objs track by $index">\n                <p>{{question.q}} -- {{question.a}}</p>\n\n                <md-button ng-Click="readingUp(question,question_objs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                </md-button>\n\n                <md-button ng-Click="readingDown(question,question_objs)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                </md-button>\n                            \n                <md-button ng-click="editQuestion(question)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                    edit\n                </md-button>\n\n                <md-button ng-click="removeQuestion($index)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                    remove\n                </md-button>\n            </md-list-item>\n\n            \n\n            \n            <div>\n                <md-input-container>\n                    <label for="act7_q}}">Add a question</label>\n                    <textarea id="listen" label="act7_q" name="act7_q" ng-model="act7_obj.q" />\n                </md-input-container>\n\n\n                <p>Answer: <span>{{act7_obj.a}}</span></p>\n                \n                <div class="white border padding-10 md-headline" ng-if = "data.listen">\n                    <p class = "font-red" ng-if = "!act7_obj.a">Click to select answer!</p>\n                    <p class = "font-red" ng-if = "act7_obj.answer_message">{{act7_obj.answer_message}}</p>\n                    <span class="hand" ng-click="anwser(lemma, $index, act7_obj)" ng-repeat="lemma in listen_arr track by $index" >\n                        <span ng-if = "lemma != \'-breakline-\' ">{{lemma}}</span>\n\n                        <span ng-if = "lemma == \'-breakline-\' "></br></span>\n                    </span>\n                    <div class="clear"></div>\n                </div>\n\n                <md-button ng-disabled = "!act7_obj.a" ng-click="clear(act7_obj)" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="Clear">Clear</md-button>\n\n                <md-button ng-disabled = "!act7_obj.a || !act7_obj.q" ng-click="saveReadingQ()" palette-background="pink:400" class=" md-raised md-primary" aria-label="save">save</md-button>\n            </div>\n\n\n            <h4 class="font-purple strong">Writing</h4>\n\n            <md-list-item  class="hand" ng-repeat="obj in data.writing_objs track by $index">\n                <p>{{obj.writing_task}}</p>\n\n                <md-button ng-Click="writingUp(obj,data.writing_objs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                </md-button>\n\n                <md-button ng-Click="writingDown(obj,data.writing_objs)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                </md-button>\n                            \n                <md-button ng-click="editWriting(obj)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                    edit\n                </md-button>\n\n                <md-button ng-click="removeWriting($index)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                    remove\n                </md-button>\n            </md-list-item>\n\n            <md-input-container>\n                <label for="writing_task">Add writing task</label>\n                <textarea id="writing_task" label="writing_task" name="writing_task" ng-model="data.writing_task" />\n            </md-input-container>\n\n            <div class="test-forms" ng-if = "data.writing_task">\n                <div ng-repeat="form in test_forms track by $index" style = "display:inline-block" >\n                    <md-button  ng-if = "!inSelectForms(form) " ng-click="triggerTestForm(form)" palette-background="myPurple:A100" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{form.get(\'tag_str\')}}">\n                        {{form.get(\'tag_str\')}}\n                    </md-button>\n\n                    <md-button  ng-if = "inSelectForms(form)  " ng-click="triggerTestForm(form)" palette-background="myPurple:700" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{form.get(\'tag_str\')}}">\n                        {{form.get(\'tag_str\')}}\n                    </md-button>\n                    \n                </div>\n                \n                \n            </div>\n\n            <md-button ng-disabled = "data.writing_task.length < 1 || !data.writing_task" ng-click="saveWriting()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="save">save</md-button>\n\n            \n\n\n        </md-card-content>\n    </md-card>\n    </md-conten\n'),e.put("app/grammar-course/template/grammar_data.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Course data</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n            <div layout="row" >\n                <div flex = 30>\n                   <md-button ng-disabled = "view == \'course\' " style="margin-left: 0;" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="records" ng-click="record()">Records</md-button>\n\n                    <md-button ng-disabled = "view == \'outline\' " style="margin-left: 0;" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="outline" ng-click="outline()">Course outline</md-button>\n                </div>\n\n                <div flex = 40 class="member-tables-types" ng-if = "view == \'course\' ">\n                    <md-checkbox  ng-change = "saveTableSetting(table)"  class = "margin-left-0" ng-model="table.id" aria-label="Default Checkbox">\n                        ID\n                    </md-checkbox>\n\n                    <md-checkbox  ng-change = "saveTableSetting(table)"  class = "margin-left-0" ng-model="table.level" aria-label="Default Checkbox">\n                        LEVEL\n                    </md-checkbox>\n\n                    <md-checkbox  ng-change = "saveTableSetting(table)"  class = "margin-left-0" ng-model="table.structure" aria-label="Default Checkbox">\n                        STRUCTURE\n                    </md-checkbox>\n\n                    <md-checkbox  ng-change = "saveTableSetting(table)"  class = "margin-left-0" ng-model="table.action" aria-label="Default Checkbox">\n                        ACTIONS\n                    </md-checkbox>\n                </div>\n\n                <div flex = 30 class = "course-filter" ng-if = "view == \'course\' ">\n                    <md-select ng-change = "changeFilter(filter)" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                    </md-select>\n                    \n                </div>\n\n                \n            </div>\n\n\n            <!-- course data -->\n            <div ng-if = "view == \'course\' ">\n                <md-button style="margin-left: 0;" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add" ng-click="add()">Add</md-button>\n                <table class="md-table class-list course-table">\n                    <thead>\n                        <tr>\n                            <th ng-if = "table.id"><span class="font-black" >ID</span></th>\n                            <th ng-if = "table.outline"><span class="font-black" >COURSE</span></th>\n                            <th ng-if = "table.order"><span class="font-black" >ORDER</span></th>\n                            <th ng-if = "table.level"><span class="font-black" >LEVEL</span></th>\n                            <th ng-if = "table.structure"><span class="font-black">STRUCTURE</span></th>\n                            \n                            <th ng-if = "table.action"><span class="font-black">ACTIONS</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="item in items">\n                            <td ng-if = "table.id">{{item.get(\'the_id\')}}</td>\n\n                            <td ng-if = "table.outline">\n                                <md-select ng-change="saveItemOutline(item)" layout-padding placeholder="Outline" ng-model="item.outline">\n                                    <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                                </md-select>\n                            </td>\n\n                            <td ng-if = "table.order">\n                                <md-select ng-change="saveItemOrder(item)" layout-padding placeholder="Order" ng-model="item.outline_order">\n                                    <md-option value=1>1</md-option>\n                                    <md-option value=2>2</md-option>\n                                    <md-option value=3>3</md-option>\n                                    <md-option value=4>4</md-option>\n                                    <md-option value=5>5</md-option>\n                                    <md-option value=6>6</md-option>\n                                    <md-option value=7>7</md-option>\n                                    <md-option value=8>8</md-option>\n                                    <md-option value=9>9</md-option>\n\n                                    <md-option value=10>10</md-option>\n                                    <md-option value=11>11</md-option>\n                                    <md-option value=12>12</md-option>\n                                    <md-option value=13>13</md-option>\n                                    <md-option value=14>14</md-option>\n                                    <md-option value=15>15</md-option>\n                                    <md-option value=16>16</md-option>\n                                    <md-option value=17>17</md-option>\n                                    <md-option value=18>18</md-option>\n                                    <md-option value=19>19</md-option>\n                                    <md-option value=20>20</md-option>\n\n                                    <md-option value=21>21</md-option>\n                                    <md-option value=22>22</md-option>\n                                    <md-option value=23>23</md-option>\n                                    <md-option value=24>24</md-option>\n                                    <md-option value=25>25</md-option>\n                                    <md-option value=26>26</md-option>\n                                    <md-option value=27>27</md-option>\n                                    <md-option value=28>28</md-option>\n                                    <md-option value=29>29</md-option>\n                                    <md-option value=30>30</md-option>\n\n\n                                    <md-option value=31>31</md-option>\n                                    <md-option value=32>32</md-option>\n                                    <md-option value=33>33</md-option>\n                                    <md-option value=34>34</md-option>\n                                    <md-option value=35>35</md-option>\n                                    <md-option value=36>36</md-option>\n                                    <md-option value=37>37</md-option>\n                                    <md-option value=38>38</md-option>\n                                    <md-option value=39>39</md-option>\n                                    <md-option value=40>40</md-option>\n\n                                    <md-option value=41>41</md-option>\n                                    <md-option value=42>42</md-option>\n                                    <md-option value=43>43</md-option>\n                                    <md-option value=44>44</md-option>\n                                    <md-option value=45>45</md-option>\n                                    <md-option value=46>46</md-option>\n                                    <md-option value=47>47</md-option>\n                                    <md-option value=48>48</md-option>\n                                    <md-option value=49>49</md-option>\n                                    <md-option value=50>50</md-option>\n                                </md-select>\n                            </td>\n                            <td ng-if = "table.level">{{item.get(\'level\')}}</td>\n                            <td ng-if = "table.structure">{{item.get(\'name\')}}</td>\n                            <td ng-if = "table.action">\n                                <md-button ng-if = "value.type != \'old_summary\' " ng-repeat="(key, value) in match_exercises" ng-click="test(item,value.action)" class="md-raised md-primary" palette-background="pink:400" aria-label="{{value.name}}">\n                                    {{value.name}}\n                                </md-button>\n\n                                <md-button ng-click="edit(item)" class="md-raised md-primary" aria-label="Edit">\n                                    Edit\n                                </md-button>\n                                <md-button ng-click="delete(item)" class="md-raised md-primary" aria-label="Delete">\n                                    Delete\n                                </md-button>\n\n                                <md-button ng-if = "!item.get(\'hide_note\')" ng-click="hideNote(item)" class="md-raised md-primary" aria-label="hide note">\n                                    hide note \n                                </md-button>\n\n                                <md-button ng-class = "buttonClass(item)" ng-if = "item.get(\'hide_note\')" ng-click="showNote(item)" class="md-raised md-primary" aria-label="show note">\n                                    show note \n                                </md-button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                \n            </div>\n\n            <!-- outline -->\n            <div ng-if = "view == \'outline\' ">\n                <table class="md-table class-list">\n                    <thead>\n                        <tr>\n                            <th><span class="font-black">ID</span></th>\n                            <th><span class="font-black">LEVEL</span></th>\n                            <th><span class="font-black">COURSE</span></th>\n                            <th><span class="font-black">NAME</span></th>\n                            <th><span class="font-black">ACTIONS</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="item in outlines track by $index">\n                            <td>{{$index + 1}}</td>\n                            <td>{{item.get(\'level\')}}</td>\n                            <td>\n\n                                <span ng-if = "item.get(\'course\') == \'general\' ">GENERAL ENGLISH</span>\n                                <span ng-if = "item.get(\'pet\') == \'general\' ">PET (EXAM ENGLISH)</span>\n                                <span ng-if = "item.get(\'cect4\') == \'general\' ">CECT-4 (EXAM ENGLISH)</span>\n                                <span ng-if = "item.get(\'ielts\') == \'general\' ">IELTS (EXAM ENGLISH)</span>\n                            </td>\n                            <td>{{item.get(\'name\')}}</td>\n                            <td>\n                                <md-button ng-click="editOutline(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                                    Edit\n                                </md-button>\n                                <md-button ng-click="deleteOutline(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                                    Delete\n                                </md-button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n\n                <h4 class="font-purple strong">Outline</h4>\n\n                <md-input-container class="">\n                    <label for = "name">Name</label>\n                    <input id="name" label="name" name="name" type="text" ng-model="outline_data.name" />\n                </md-input-container>\n\n                <md-select placeholder="Select level" ng-model="outline_data.level" flex-xs="100" flex-sm="100">\n                    <md-option value="A1, Beginner">A1, Beginner</md-option>\n                    <md-option value="A2, Elementary">A2, Elementary</md-option>\n                    <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                    <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                    <md-option value="C1, Low Advanced">C1, Low Advance</md-option>\n                    <md-option value="C2, Advanced">C2, Advanced</md-option>\n                </md-select>\n\n                <md-select placeholder="Select course" ng-model="outline_data.course" flex-xs="100" flex-sm="100">  \n                    <md-option value="general">GENERAL ENGLISH</md-option>\n                    <md-option value="pet">PET (EXAM ENGLISH)</md-option>\n                    <md-option value="cect4">CECT-4 (EXAM ENGLISH)</md-option>\n                    <md-option value="ielts">IELTS (EXAM ENGLISH)</md-option>\n                </md-select>\n\n                \n\n                <md-button ng-if = "!edit_outline" ng-disabled = "outline_data.disable" style="margin-left: 0;" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add" ng-click="addOutline()">Add</md-button>\n\n                <md-button ng-if = "edit_outline" ng-disabled = "outline_data.disable" style="margin-left: 0;" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="save" ng-click="saveEditOutline()">Save</md-button>\n            </div>\n\n            \n        </md-card-content>\n    </md-card>\n    </md-conten\n'),e.put("app/grammar-course/template/leveltest.tmpl.html",'<md-content id="course-manage" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    \n    \n    <md-card layout-margin>\n    <md-card-title palette-background="myPurple:500" layout-padding>\n        <md-card-title-text>\n            <span class="md-headline">  \n            Level test for <strong>{{level}}</strong></span>\n        </md-card-title-text>\n    </md-card-title>\n    <md-card-content>\n        <div ng-if="view == \'show_anwser\'">\n            <h2 class = "font-purple">Thanking you for doing our test!</h2>\n\n            <h4>Your level is <strong>{{level}}</strong> <i class="fa fa-check-circle"></i></h4>\n\n            <md-button ng-click = "goToHome()" class = "glowing margin-left-0" palette-background="pink:400" class="md-raised md-primary" aria-label="go to home page" >{{\'ADMIN.go_to_home_page\' | translate}}</md-button>\n        </div>\n        <div ng-if="view == \'act3\'">\n\n            <div ng-if = "show_index == 0">\n                <h3>Complete by selecting the correct answer/s. You need at least 8/8 to finish!</h3>\n            </div>\n            \n            <act3level>\n            </act3level>\n        </div>\n\n            \n\n    </md-card-content>\n\n    \n</md-content>'),e.put("app/grammar-course/template/reading-study-note-view.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Grammar exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n            <md-button ng-click="test(grammar,\'act7\')" class="md-raised md-primary" palette-background="pink:400" aria-label="act1">\n                READING EXERCISE\n            </md-button>\n\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/grammar-course/template/view-category-words-dialog.tmpl.html",'<md-dialog class="course-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>View words</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:20px;">\n        <md-content>\n            \n\n\n            <div ng-if = "select_word">\n                <p> <span class = "font-purple">{{select_word.get(\'name\')}} </span></p>\n\n                <p>(Definition) {{select_word.get(\'definition\')}}</p>\n                <p>{{select_word.get(\'sample\')}}</p>\n                <div  class="center" style = "margin:16px 0;">\n                    <img style = "width:300px;height: 300px; border: 2px solid rgb(93, 0, 187);" ng-src="{{select_word.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}" alt="image" class="make-round"/>\n                </div>\n\n                <md-button ng-if  = "!edit_voca" style = "margin-left: 0" ng-click="addVoca()" class="md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                    Add\n                </md-button>\n\n                <md-button ng-if  = "edit_voca" style = "margin-left: 0" ng-click="saveEditVoca()" class="md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                    Save\n                </md-button>\n\n\n                <md-button ng-click="cancelSelectWord()" class="md-raised md-primary" palette-background="pink:400" aria-label="cancel">\n                    cancel\n                </md-button>\n            </div>\n\n\n            <md-list class="search-list" ng-if = "view_words && !select_word">\n                <md-list-item class="hand" ng-repeat="word in view_words track by $index">\n                    \n                    <p>\n                        {{word.get(\'name\')}}\n                    </p>\n\n                    <p>{{word.get(\'definition\')}}</p>\n\n                    <md-button ng-click="selectword(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="select">\n                        select\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n        <md-content>\n\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>\n'),e.put("app/grammar-course/template/vocab-study-note-view.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Vocabulary exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n            <md-button ng-click="test(grammar,\'vocab1\')" class="md-raised md-primary" palette-background="pink:400" aria-label="vocab1">\n                EXERCISE 1\n            </md-button>\n\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/grammar-course/template/writing-study-note-view.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Writting exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n            <md-button ng-click="test(grammar,\'act13\')" class="md-raised md-primary" palette-background="pink:400" aria-label="act1">\n                WRITTING EXERCISE\n            </md-button>\n\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/layouts/admin-panel/admin-panel.tmpl.html",'<!-- top toolbar -->\n<md-toolbar ng-attr-md-scroll-shrink="{{toolbarShrink}}" class="admin-toolbar" md-theme="{{triSkin.elements.toolbar}}" ui-view="toolbar" ng-class="toolbarTypeClass()"></md-toolbar>\n\n\n<div layout="row" ng-controller="AdminController" class="full-height no-bg">\n    <!-- left sidebar -->\n    <md-sidenav layout class="admin-sidebar-left md-sidenav-left md-whiteframe-z2" md-component-id="left" ui-view="sidebarLeft" ng-class="menuClass()" ng-mouseover="activateHover()" ng-mouseleave="removeHover()"></md-sidenav>\n\n    <!-- main content -->\n    <div id="admin-panel" layout="column" flex>\n        <!-- loading animation -->\n        <tri-loader></tri-loader>\n\n        <!-- scrollable content -->\n        <md-content flex layout="column" class = "tm">\n            <md-whiteframe class="md-whiteframe-z1 tutorial-frame" ng-if = "tutorial" style = "display: block">\n                <md-icon md-font-icon="icon-play-circle-outline"></md-icon>\n                <p  ng-bind-html="tutorial.get(\'text\')"></p>\n                <p>\n\n                \n\n\n                <md-button style = "float:right;" palette-background="pink:400"  class="md-raised md-primary" ng-click="closeTutorial()"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n\n                <md-button style = "float:right;" class="md-raised md-primary" ng-click="goToHelp()"><md-icon md-font-icon="fa fa-info-circle"></md-icon> {{\'ADMIN.HELP\' | translate}}</md-button>\n\n                \n                \n                </p>\n                \n            </md-whiteframe>\n            <!-- main view content  -->\n            <div admin-panel-content flex ui-view="content"></div>\n        </md-content>\n    </div>\n\n\n\n    <!-- right sidebar -->\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="notifications" ui-view="sidebarRight"></md-sidenav>\n\n    <!-- search sidebar -->\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="sidebar-search" ui-view="sidebarSearch"></md-sidenav>\n\n\n    <!-- search sidebar -->\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="sidebar-addword" ui-view="sidebarAddWord"></md-sidenav>\n\n\n    <!-- filter sidebar -->\n    <md-sidenav layout layout-fill class="md-sidenav-right md-whiteframe-z2" md-component-id="sidebar-filter" ui-view="sidebarFilter"></md-sidenav>\n\n    <md-button  id = "home-bottom-help" ui-sref="admin-panel.default.help-wordiser" class=" md-fab md-accent md-fab-bottom-right" palette-background="pink:400"  aria-label="help">\n\n    <md-icon md-font-icon="fa fa-info-circle"></md-icon>\n    <md-tooltip>\n        <div>{{\'ADMIN.HELP\' | translate}}</div>\n    </md-tooltip>\n    </md-button>\n    \n</div>\n\n'),e.put("app/review-module/Directive/a1.tmpl.html",'<div class="a1-aty">\n    <div class="row a1-type">\n            <div class="col-md-12">\n                <div layout="row"  layout-sm="column" layout-margin layout-align="center center">\n                    <div flex="50" flex-sm="100" flex="50"  class="white border padding-10 center md-headline">\n                        <span class="font-purple" ng-bind-html="rs.spword.get(\'lemma\')"></span>\n                    </div>\n                    \n\n                    <div  ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\') " ng-click = "speak(rs.lemma,\'UK English Male\')"   flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                        <span   >UK <i  class="hand fa fa-volume-off"></i></span>\n                    </div>\n\n                    <div ng-if="user.get(\'spelling\') == \'us\'  && !rs.spword.get(\'uk_pron_ext\') "  ng-click = "speak(rs.lemma,\'US English Female\')"  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                        <span  >US <i class="hand fa fa-volume-off"></i></span>\n                    </div>\n\n                    <div ng-if="rs.spword.get(\'us_pron_ext\') "  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                        <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'s\'">(Adj)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'a\'">(Adj)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span>\n                    </div>\n\n\n                </div>\n                <div ng-click="speak(\'How do you say name?\',\'UK English Male\')"  class="hand row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n\n                    How do you say \'<span class = "font-lightgrey">name</span>\'? This is : /<span class = "font-lightgrey">n A m</span>/.\n\n                </div>\n\n                <div ng-click= "speak(\'How do you say \' + rs.lemma,\'UK English Male\')" class="hand row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n\n                    How do you say \'<span class = "font-lightgrey">{{rs.lemma}}</span>\'?\n\n                </div>\n\n                <div ng-if="rs.spword.get(\'uk_pron_ext\') " class="row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                    {{rs.spword.get(\'sample\') }}\n\n                </div>\n\n                <div ng-if="prefixs">\n                    <div class="word-types">\n                        <span style="margin:5px;" ng-repeat="prefix in prefixs">{{rs.prefix.origin}}</span>\n                    </div>\n                </div>\n\n                <div class="test-align-right voice-help">\n                    <md-list-item>\n                        <md-select placeholder="Help" ng-model="l">\n\n                                <md-optgroup label="Symbols for long vowel sounds (Click and listen) :">\n                                    <md-option ng-click = "speak(\'able\',\'UK English Male\')">A [ eɪ ] a.ble</md-option>\n                                    <md-option ng-click = "speak(\'even\',\'UK English Male\')">E [ i: ] e.ven</md-option>\n                                    <md-option ng-click = "speak(\'ice\',\'UK English Male\')">I [ ʌɪ ] i.ce</md-option>\n                                    <md-option ng-click = "speak(\'open\',\'UK English Male\')">O [ əʊ ] o.pen</md-option>\n                                    <md-option ng-click = "speak(\'school\',\'UK English Male\')">uew [ u: ] sch.oo.l</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Symbols for very short vowel sounds:">\n                                    <md-option ng-click = "speak(\'at\',\'UK English Male\')">a [ a ] a.t</md-option>\n                                    <md-option ng-click = "speak(\'at\',\'US English Female\')">ae [ æ ] a.t (US)</md-option>\n                                    <md-option ng-click = "speak(\'egg\',\'UK English Male\')">e [ ɛ ] e.gg</md-option>\n                                    <md-option ng-click = "speak(\'it\',\'UK English Male\')">ih [ ɪ ] i.t</md-option>\n                                    <md-option ng-click = "speak(\'off\',\'UK English Male\')">o [ ɒ ] o.ff</md-option>\n                                    <md-option ng-click = "speak(\'ugly\',\'UK English Male\')">uh [ ʌ ] u.gly</md-option>\n                                </md-optgroup>\n                                <md-optgroup label="Symbols for longer, short vowel sounds:">\n                                    <md-option ng-click = "speak(\'ago\',\'UK English Male\')">aa [ ə ] a.go</md-option>\n                                    <md-option ng-click = "speak(\'help\',\'UK English Male\')">eh [ ɛ: ] h.e.lp</md-option>\n                                    <md-option ng-click = "speak(\'book\',\'UK English Male\')">ou [ ʊ ] b.oo.k</md-option>\n                                </md-optgroup>\n                                <md-optgroup label="Combined sounds:">\n                                    <md-option ng-click = "speak(\'how\',\'UK English Male\')">aw [ aʊ ] h.ow</md-option>\n                                    <md-option ng-click = "speak(\'car\',\'UK English Male\')">R [ a: ] c.ar</md-option>\n                                    <md-option ng-click = "speak(\'word\',\'UK English Male\')">er [ əː ] w.or.d</md-option>\n                                    <md-option ng-click = "speak(\'square\',\'UK English Male\')">eh-er [ eə ] squ.are</md-option>\n                                    <md-option ng-click = "speak(\'near\',\'UK English Male\')">ih-aa [ ɪə ] n.ear</md-option>\n                                    <md-option ng-click = "speak(\'for\',\'UK English Male\')">or [ ɔ: ] f.or</md-option>\n                                    <md-option ng-click = "speak(\'boy\',\'UK English Male\')">oy [ ɔɪ ] b.oy</md-option>\n                                    <md-option ng-click = "speak(\'poor\',\'UK English Male\')">ou-er [ ʊə ] p.oo.r</md-option>\n                                    <md-option ng-click = "speak(\'church\',\'UK English Male\')">ch [ tʃ ] ch.ur.ch</md-option>\n                                    <md-option ng-click = "speak(\'enjoy\',\'UK English Male\')">jh [ dʒ ] en.j.oy</md-option>\n                                    <md-option ng-click = "speak(\'shut\',\'UK English Male\')">sh [ ʃ ] sh.ut</md-option>\n                                    <md-option ng-click = "speak(\'pleasure\',\'UK English Male\')">zj [ ʒ ] plea.s.ure</md-option>\n                                    <md-option ng-click = "speak(\'thin\',\'UK English Male\')">th [ θ ] th.in</md-option>\n                                    <md-option ng-click = "speak(\'there\',\'UK English Male\')">dh [ ð ] th.ere</md-option>\n                                    <md-option ng-click = "speak(\'going\',\'UK English Male\')">ng [ ŋ ] goi.ng</md-option>\n                                    <md-option ng-click = "speak(\'fire\',\'UK English Male\')">I-er [ ʌɪə ] f.ire</md-option>\n                                    <md-option ng-click = "speak(\'sour\',\'UK English Male\')">aw-er [ aʊə ] s.our</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Symbols for syllables and stress:">\n                                    <md-option>. Syllable</md-option>\n                                    <md-option>* Main syllable stress</md-option>\n                                    <md-option>\' Secondary syllable stress</md-option>\n                                </md-optgroup>\n                                \n                            </md-select>\n                    </md-list-item>\n\n\n                    \n                </div>\n                <div class="border-wrap a1 results">\n                    <!-- BEGIN CHOICE -->\n                    <div class="row">\n                        <div class="options" ng-click="clickAnswer(0)" ng-class="anwserClass(rs.anwser[0] == \'right\',rs.highlight)" ng-disabled = "rs.disable_action">\n                            <div class="anwser">\n                                <div class="details md-headline hand">\n                                    <div>\n                                        <span style = "font-weight:bold;" ng-bind-html="rs.new_pron[0]"></span>\n                                        <span ng-bind-html="rs.change_pron[0]"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="options" ng-click="clickAnswer(1)"  ng-class="anwserClass(rs.anwser[1] == \'right\',rs.highlight)" ng-disabled = "rs.disable_action">\n                            <div class="anwser">\n                                <div class="details md-headline hand">\n                                    <div>\n                                        <span style = "font-weight:bold;" ng-bind-html="rs.new_pron[1]"></span>\n                                        <span ng-bind-html="rs.change_pron[1]"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="options" ng-click="clickAnswer(2)" ng-class="anwserClass(rs.anwser[2] == \'right\',rs.highlight)" ng-disabled = "rs.disable_action">\n                            <div class="anwser">\n                                <div class="details md-headline hand">\n                                    <div>\n                                        <span style = "font-weight:bold;" ng-bind-html="rs.new_pron[2]"></span>\n                                        <span ng-bind-html="rs.change_pron[2]"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- END CHOICE -->\n                </div>\n\n                <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n            </div>\n        </div>\n    \n</div>'),e.put("app/review-module/Directive/a10.tmpl.html",'<div class="a10-aty">\n\n    <div class="row a10-type">\n        <div class="col-md-12">\n            <div ng-bind-html="rs.sentence_no_first_letter" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n            <div ng-if = "show_anwser && anwser_wrong_icon == \'op\'" ng-bind-html="show_anwser" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n\n            <md-button ng-repeat="word in option_words track by $index" palette-background="pink:400" ng-click="checkAnwser(word)" class="hand md-raised md-primary margin-left-0" aria-label="{{word}}" ng-disabled = "rs.disable_action">{{word}}</md-button>\n\n        </div>\n    </div>\n\n    <p class="message" ng-show="rs.result_message">{{rs.result_message}}</p>\n</div>'),e.put("app/review-module/Directive/a2.tmpl.html",'<div class="a2-aty">\n    \n                        \n            <div class="row a2-type">\n                <div class="col-md-12">\n                    <div class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                        <span>(Definition)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                        <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span> {{rs.spword.get(\'define\')}}\n                    </div>\n\n                    <md-button ng-click="speak(rs.spword.get(\'define\'),\'UK English Female\')" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="Play"><md-icon md-font-icon="fa fa-play"></md-icon></md-button>\n\n                    <div ng-if = "rs.result_message != \'You are right!\'" ng-bind-html="rs.sentence_no_first_letter" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                    </div>\n\n                    <div ng-if = "rs.result_message == \'You are right!\'" ng-bind-html="rs.sample" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                    </div>\n\n\n\n                    <div class="border-wrap a2 results">\n                        <!-- BEGIN CHOICE -->\n                        <div class="row">\n                            <div ng-if="rs.choiceWords[0]" class="options" ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[0],rs.highlight)"  ng-click="a2answer(rs.choiceWords[0])">\n                                <div class="anwser">\n                                    <div class="details md-headline hand">\n                                        <div class="spell">\n                                            {{rs.choiceWords[0]}}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if="rs.choiceWords[1]" class="options"  ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[1],rs.highlight)"  ng-click="a2answer(rs.choiceWords[1])">\n                                <div class="anwser">\n                                    <div class="details md-headline hand">\n                                        <div class="spell">\n                                            {{rs.choiceWords[1]}}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-if="rs.choiceWords[2]" class="options"  ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[2],rs.highlight)"  ng-click="a2answer(rs.choiceWords[2])">\n                                <div class="anwser">\n                                    <div class="details md-headline hand">\n                                        <div class="spell">\n                                            {{rs.choiceWords[2]}}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div ng-if="rs.choiceWords[3]" class="options"  ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[3],rs.highlight)"  ng-click="a2answer(rs.choiceWords[3])">\n                                <div class="anwser">\n                                    <div class="details md-headline hand">\n                                        <div class="spell">\n                                            {{rs.choiceWords[3]}}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- END CHOICE -->\n                        \n                    </div>\n\n                    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n                </div>\n            </div>\n\n</div>'),e.put("app/review-module/Directive/a3.tmpl.html",'<div class="a3-aty">\n	\n            <div class="row a3-type">\n                <div class="col-md-12">\n                    <div layout="row" layout-sm="column" layout-margin layout-align="center center">\n                        <div  flex-xs = "100"  flex-sm="100" flex="50" class="white border padding-10 center md-headline">\n                            <span class="pron font-purple pron_font_size" ng-bind-html="rs.frek.get(\'the_uk_pron\')"></span>\n                        </div>\n                       <div  flex-xs = "100"  flex-sm="100" flex="50" class="white border padding-10 center md-headline">\n                            <span class="pron font-purple pron_font_size" ng-bind-html="rs.frek.get(\'the_uk_change_pron\')"></span>\n                        </div>\n\n\n                    </div>\n                    <div class="row-second" layout="row" layout-sm="column" layout-margin layout-align="center center">\n                        \n                         <div  ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\') "  ng-click = "speak(rs.lemma,\'UK English Male\')"   flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span   >UK <i  class="hand fa fa-volume-off"></i></span>\n                        </div>\n\n                        <div ng-if="user.get(\'spelling\') == \'us\' && !rs.spword.get(\'us_pron_ext\') "   ng-click = "speak(rs.lemma,\'US English Female\')"  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span  >US <i class="hand fa fa-volume-off"></i></span>\n                        </div>\n\n                        <div ng-if="rs.spword.get(\'uk_pron_ext\') " flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand" style = "height: 54px;border:none;">\n                        </div>\n\n\n                        <div  flex-xs = "100"  flex-sm="100" flex="50" class="white   center md-headline voice-help">\n                           \n                           <md-select placeholder="Help" ng-model="l">\n\n                                <md-optgroup label="Symbols for long vowel sounds (Click and listen) :">\n                                    <md-option ng-click = "speak(\'able\',\'UK English Male\')">A [ eɪ ] a.ble</md-option>\n                                    <md-option ng-click = "speak(\'even\',\'UK English Male\')">E [ i: ] e.ven</md-option>\n                                    <md-option ng-click = "speak(\'ice\',\'UK English Male\')">I [ ʌɪ ] i.ce</md-option>\n                                    <md-option ng-click = "speak(\'open\',\'UK English Male\')">O [ əʊ ] o.pen</md-option>\n                                    <md-option ng-click = "speak(\'school\',\'UK English Male\')">uew [ u: ] sch.oo.l</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Symbols for very short vowel sounds:">\n                                    <md-option ng-click = "speak(\'at\',\'UK English Male\')">a [ a ] a.t</md-option>\n                                    <md-option ng-click = "speak(\'at\',\'US English Female\')">ae [ æ ] a.t (US)</md-option>\n                                    <md-option ng-click = "speak(\'egg\',\'UK English Male\')">e [ ɛ ] e.gg</md-option>\n                                    <md-option ng-click = "speak(\'it\',\'UK English Male\')">ih [ ɪ ] i.t</md-option>\n                                    <md-option ng-click = "speak(\'off\',\'UK English Male\')">o [ ɒ ] o.ff</md-option>\n                                    <md-option ng-click = "speak(\'ugly\',\'UK English Male\')">uh [ ʌ ] u.gly</md-option>\n                                </md-optgroup>\n                                <md-optgroup label="Symbols for longer, short vowel sounds:">\n                                    <md-option ng-click = "speak(\'ago\',\'UK English Male\')">aa [ ə ] a.go</md-option>\n                                    <md-option ng-click = "speak(\'help\',\'UK English Male\')">eh [ ɛ: ] h.e.lp</md-option>\n                                    <md-option ng-click = "speak(\'book\',\'UK English Male\')">ou [ ʊ ] b.oo.k</md-option>\n                                </md-optgroup>\n                                <md-optgroup label="Combined sounds:">\n                                    <md-option ng-click = "speak(\'how\',\'UK English Male\')">aw [ aʊ ] h.ow</md-option>\n                                    <md-option ng-click = "speak(\'car\',\'UK English Male\')">R [ a: ] c.ar</md-option>\n                                    <md-option ng-click = "speak(\'word\',\'UK English Male\')">er [ əː ] w.or.d</md-option>\n                                    <md-option ng-click = "speak(\'square\',\'UK English Male\')">eh-er [ eə ] squ.are</md-option>\n                                    <md-option ng-click = "speak(\'near\',\'UK English Male\')">ih-aa [ ɪə ] n.ear</md-option>\n                                    <md-option ng-click = "speak(\'for\',\'UK English Male\')">or [ ɔ: ] f.or</md-option>\n                                    <md-option ng-click = "speak(\'boy\',\'UK English Male\')">oy [ ɔɪ ] b.oy</md-option>\n                                    <md-option ng-click = "speak(\'poor\',\'UK English Male\')">ou-er [ ʊə ] p.oo.r</md-option>\n                                    <md-option ng-click = "speak(\'church\',\'UK English Male\')">ch [ tʃ ] ch.ur.ch</md-option>\n                                    <md-option ng-click = "speak(\'enjoy\',\'UK English Male\')">jh [ dʒ ] en.j.oy</md-option>\n                                    <md-option ng-click = "speak(\'shut\',\'UK English Male\')">sh [ ʃ ] sh.ut</md-option>\n                                    <md-option ng-click = "speak(\'pleasure\',\'UK English Male\')">zj [ ʒ ] plea.s.ure</md-option>\n                                    <md-option ng-click = "speak(\'thin\',\'UK English Male\')">th [ θ ] th.in</md-option>\n                                    <md-option ng-click = "speak(\'there\',\'UK English Male\')">dh [ ð ] th.ere</md-option>\n                                    <md-option ng-click = "speak(\'going\',\'UK English Male\')">ng [ ŋ ] goi.ng</md-option>\n                                    <md-option ng-click = "speak(\'fire\',\'UK English Male\')">I-er [ ʌɪə ] f.ire</md-option>\n                                    <md-option ng-click = "speak(\'sour\',\'UK English Male\')">aw-er [ aʊə ] s.our</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Symbols for syllables and stress:">\n                                    <md-option>. Syllable</md-option>\n                                    <md-option>* Main syllable stress</md-option>\n                                    <md-option>\' Secondary syllable stress</md-option>\n                                </md-optgroup>\n                                \n                            </md-select>\n                        </div>\n                    </div>\n                    <div ng-bind-html="rs.sentence_with_first_letter" class="row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                    </div>\n\n                    <div ng-if = "show_anwser && anwser_wrong_icon == \'op\'" ng-bind-html="show_anwser" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                    </div>\n\n                    <div class="border-wrap a3 results">\n                        <div class="anwser-input-box" >\n                            <input ng-model="input.a3" type="text" ng-change="a3anwserChange()" placeholder="Enter answer" ng-class = "anwserBgClass(rs.result_message)">\n                        </div>\n                        \n                        <md-button ng-disabled = "rs.disable_action" class="margin-left-0" palette-background="pink:400" ng-click="addEnterAnwser()" class="md-raised md-primary" aria-label="{{\'REVIEWPAGE.Hint\' | translate}}">{{\'REVIEWPAGE.Hint\' | translate}}</md-button>\n                        <md-button ng-disabled = "rs.disable_action" palette-background="pink:400" ng-click="a3answer()" class="md-raised md-primary" aria-label="{{\'REVIEWPAGE.Done\' | translate}}">{{\'REVIEWPAGE.Done\' | translate}}</md-button>\n                    </div>\n                     <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n                </div>\n            </div>\n</div>'),e.put("app/review-module/Directive/a4.tmpl.html",'<div class="a4-aty">\n\n    <div class="row a4-type">\n        <div class="col-md-12">\n            <div ng-bind-html="rs.sentence_with_first_letter" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n            <div ng-if = "show_anwser && anwser_wrong_icon == \'op\'" ng-bind-html="show_anwser" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n            <div class="border-wrap a4 results">\n                <div class="anwser-input-box">\n                    <input type="text" ng-change="a4anwserChange()" ng-model=\'input.a4\' placeholder="Enter answer" ng-class = "anwserBgClass(rs.result_message)">\n                </div>\n            </div>\n\n            <div class="anwser-buttons">\n                <span class="lemma-anwser-2 hand" ng-repeat="word in lemma_arr track by $index" ng-click = "cleckLemma(word)" ng-class = "checkWordClass(word)">\n                    {{word.lemma}}\n                </span>\n            </div>\n\n\n            <md-button palette-background="pink:400" ng-click="clear()" class="md-raised md-primary margin-left-0" aria-label="Clear" ng-disabled = "rs.disable_action">{{\'REVIEWPAGE.Clear\' | translate}}</md-button>\n\n            <md-button palette-background="pink:400" ng-click="a4answer()" class="md-raised md-primary margin-left-0" aria-label="{{\'REVIEWPAGE.Done\' | translate}}" ng-disabled = "rs.disable_action">{{\'REVIEWPAGE.Done\' | translate}}</md-button>\n        </div>\n    </div>\n    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n</div>'),e.put("app/review-module/Directive/a5.tmpl.html",'<div class="a5-aty">\n    <div class="row a5-type">\n        <div class="col-md-12">\n            <div ng-bind-html="rs.sentence_with_first_letter" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n            <div ng-if="show_anwser && anwser_wrong_icon == \'op\'" ng-bind-html="show_anwser" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n            <div class="border-wrap a5 results">\n                <div class="anwser-input-box">\n                    <input type="text" ng-change="a5anwserChange()" ng-model=\'input.a5\' placeholder="Enter answer" ng-class="anwserBgClass(rs.result_message)">\n                </div>\n            </div>\n            <md-button palette-background="pink:400" ng-click="a5answer()" class="md-raised md-primary margin-left-0" aria-label="{{\'REVIEWPAGE.Done\' | translate}}" ng-disabled="rs.disable_action">{{\'REVIEWPAGE.Done\' | translate}}</md-button>\n        </div>\n    </div>\n    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n</div>\n'),e.put("app/review-module/Directive/a6.tmpl.html",'<div class="a6-aty">\n    <div class="row a6-type">\n        <div class="col-md-12">\n            <div class="a6">\n                <div>\n                    <div layout="row" layout-sm="column" layout-margin layout-align="center center">\n                        <div flex="50" flex-xs="100" flex-sm="100" class="white border padding-10 center md-headline">\n                            <span class="font-purple">{{rs.lemma}}</span>\n                            <span class="lemma-meta" ng-if="rs.lemma_pos">({{rs.lemma_pos}})</span>\n                        </div>\n                        <div ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\') "  ng-click="speak(rs.lemma,\'UK English Male\')" flex="50" flex-xs="100" flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span>UK <i  class="hand fa fa-volume-off"></i></span>\n                        </div>\n                        <div ng-if="user.get(\'spelling\') == \'us\' && !rs.spword.get(\'us_pron_ext\') "  ng-click="speak(rs.lemma,\'US English Female\')" flex="50" flex-xs="100" flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span>US <i class="hand fa fa-volume-off"></i></span>\n                        </div>\n\n                        <div ng-if="rs.spword.get(\'us_pron_ext\') "   flex="50" flex-xs="100" flex-sm="100" class="border padding-10 center font-purple md-headline hand" style = "height: 54px;border:none;">\n                           \n                        </div>\n\n\n                    </div>\n\n\n                    <div class = "bg-tm border font-white margin-top-10  margin-bottom-10 padding-10">\n                        <p class="md-title introduce-text" ng-if = "rs.pos == \'a\' || rs.pos == \'j\' || rs.pos == \'s\' " >\n                            London is a <strong class = "font-purple">big</strong> city and <strong class = "font-purple">bigger</strong> than other UK ones.\n                             It is the <strong class = "font-purple">biggest</strong>.\n                        </p>\n\n                        <p class="md-title introduce-text" ng-if = "rs.pos == \'r\' ">\n                            Sarah is a <strong class = "font-purple">beautiful</strong> singer and sings <strong class = "font-purple">beautifully</strong>.\n                        </p>\n\n                        <p class="md-title introduce-text" ng-if = "rs.pos == \'n\' ">\n                            There is a <strong class = "font-purple">chair</strong> here and two <strong class = "font-purple">chairs</strong> over there.\n                        </p>\n\n                        <p class = "introduce-text" ng-if = "rs.pos == \'v\' ">\n                            Mark wants to <strong class = "font-purple">study</strong> engineering. \n                            He <strong class = "font-purple">studies</strong> maths now. \n                            He likes <strong class = "font-purple">studying</strong> it. \n                            Yesterday he <strong class = "font-purple">studied</strong> for an exam. \n                            Unfortunately, he has already <strong class = "font-purple">studied</strong> for it twice and failed.\n                        </p>\n                    </div>\n\n                    <div class = "forms bg-tm border font-white margin-top-10  margin-bottom-10 padding-10" >\n                        <strong class = "font-purple">{{choiceFormsAnwser[0] ? choiceFormsAnwser[0] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos != \'r\'" >{{choiceFormsAnwser[1] ? choiceFormsAnwser[1] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos != \'n\' && rs.pos != \'r\'">{{choiceFormsAnwser[2] ? choiceFormsAnwser[2] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' ">{{choiceFormsAnwser[3] ? choiceFormsAnwser[3] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' ">{{choiceFormsAnwser[4] ? choiceFormsAnwser[4] : \'__?__\'}}</strong>\n\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' && rs.spword.get(\'form_ext_type\') == \'v\' ">{{choiceFormsAnwser[5] ? choiceFormsAnwser[5] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' && rs.spword.get(\'form_ext_type\') == \'v\' ">{{choiceFormsAnwser[6] ? choiceFormsAnwser[6] : \'__?__\'}}</strong>\n                    </div>\n\n                    <div  class = "forms bg-tm border font-white margin-top-10  margin-bottom-10 padding-10" ng-if = "anwser_wrong">\n                        <strong class = "font-purple">{{rs.choiceFormsAnwser[0] ? rs.choiceFormsAnwser[0] : \'__?__\'}}</strong>\n                        <strong class = "font-purple"  ng-if = "rs.pos != \'r\'" >{{rs.choiceFormsAnwser[1] ? rs.choiceFormsAnwser[1] : \'__?__\'}}</strong>\n                        <strong class = "font-purple"  ng-if = "rs.pos != \'n\' && rs.pos != \'r\'">{{rs.choiceFormsAnwser[2] ? rs.choiceFormsAnwser[2] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' ">{{rs.choiceFormsAnwser[3] ? rs.choiceFormsAnwser[3] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' ">{{rs.choiceFormsAnwser[4] ? rs.choiceFormsAnwser[4] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' && rs.spword.get(\'form_ext_type\') == \'v\' ">{{rs.choiceFormsAnwser[5] ? rs.choiceFormsAnwser[5] : \'__?__\'}}</strong>\n                        <strong class = "font-purple" ng-if = "rs.pos == \'v\' && rs.spword.get(\'form_ext_type\') == \'v\' ">{{rs.choiceFormsAnwser[6] ? rs.choiceFormsAnwser[6] : \'__?__\'}}</strong>\n                    </div>\n\n                    <div class="row" ng-if = "!anwser_wrong">\n                        <div class="one-option" ng-repeat="forms in rs.choiceForms track by $index" ng-if = "$index == option_index">\n                            <md-button ng-click = "addForm(form)" ng-repeat="form in forms track by $index" class="margin-left-0" palette-background="pink:400" class="md-raised md-primary" aria-label="{{form}}">{{form.trim()}}</md-button>\n                        </div>\n                    </div>\n\n\n\n                    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("app/review-module/Directive/a7.tmpl.html",'<div class="a7-aty">\n            <div class="row a7-type">\n                <div class="col-md-12">\n                    <div layout="row" layout-sm="column" layout-margin layout-align="center center">\n                        <div flex="50" flex-xs = "100"  flex-sm="100"  class="white border padding-10 center md-headline">\n                            <span class="pron font-purple" ng-bind-html="rs.lemma"></span>\n                        </div>\n                        \n\n                        <div  ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\')" ng-click = "speak(rs.lemma,\'UK English Male\')"   flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span   >UK <i  class="hand fa fa-volume-off"></i></span>\n                        </div>\n\n                        <div ng-if="user.get(\'spelling\') == \'us\' && !rs.spword.get(\'us_pron_ext\') "  ng-click = "speak(rs.lemma,\'US English Female\')"  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span  >US <i class="hand fa fa-volume-off"></i></span>\n                        </div>\n\n                        <div ng-if="rs.spword.get(\'us_pron_ext\') "  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                            <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                            <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                            <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                            <span ng-if="rs.spword.get(\'pos\') == \'s\'">(Adj)</span>\n                            <span ng-if="rs.spword.get(\'pos\') == \'a\'">(Adj)</span>\n                            <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span>\n                        </div>\n                \n                    </div>\n\n                    <div class="row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                        <div class = "md-title">Do you say \'<span class = "font-lightgrey">taBLE</span>\' or \'<span class = "font-lightgrey">TAble</span>\'? \n                        </div>\n                        <div>\n                            You say: \'<span class = "font-lightgrey">TAble</span>\' or \'<span class = "font-lightgrey">*t A . b l</span>\'.\n                        </div>\n                        <div><span style = "font-size:14px;font-weight: bold;">(\'*\' = strong sound, \'.\' = syllable)</span></div>\n                    </div>\n\n                    <div class="row-three bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                        \n                        <div class = "md-title" ng-if="rs.pron_resultes.star >= 2">\n                            Now for \'<span class = "font-purple">{{rs.lemma}}</span>\', click the strong sound \'*\'.\n                        </div>\n\n                        <div class = "md-title" ng-if="rs.pron_resultes.star == 1">\n                            Now for \'<span class = "font-purple">{{rs.lemma}}</span>\', click the strong sound \'*\'.\n                         </div>\n\n                        <div class = "md-title" ng-if="rs.pron_resultes.top_dot == 0 && rs.pron_resultes.star == 0 && rs.pron_resultes.dot >= 1">There is not a strong syllable stress here!</div>\n                        <div class = "md-title" ng-if="rs.pron_resultes.top_dot == 0 && rs.pron_resultes.star == 0 && rs.pron_resultes.dot == 0">There is not a strong syllable stress here!</div>\n\n                        <div class = "md-title" ng-if="rs.pron_resultes.top_dot > 0 && rs.pron_resultes.star == 0">Click on the secondary syllable stress  e.g. ɡr A . v <b>j \' R d</b> (graveyard)</div>\n\n\n\n                        <div ng-if = "rs.pron_resultes.hint_count > 0 && rs.pron_resultes.star == 0 && rs.pron_resultes.dot == 0" >\n                            <div class = "md-title"  ng-if = "rs.pron_resultes.star == 0 && rs.pron_resultes.dot == 0">Tips: there is no stress, click done to pass the word.</div>\n                        </div>\n                    </div>\n                    <div class="test-align-right voice-help">\n                        <md-list-item>\n                            <md-select placeholder="Help" ng-model="l">\n\n                                    <md-optgroup label="Symbols for long vowel sounds (Click and listen) :">\n                                        <md-option ng-click = "speak(\'able\',\'UK English Male\')">A [ eɪ ] a.ble</md-option>\n                                        <md-option ng-click = "speak(\'even\',\'UK English Male\')">E [ i: ] e.ven</md-option>\n                                        <md-option ng-click = "speak(\'ice\',\'UK English Male\')">I [ ʌɪ ] i.ce</md-option>\n                                        <md-option ng-click = "speak(\'open\',\'UK English Male\')">O [ əʊ ] o.pen</md-option>\n                                        <md-option ng-click = "speak(\'school\',\'UK English Male\')">uew [ u: ] sch.oo.l</md-option>\n                                    </md-optgroup>\n\n                                    <md-optgroup label="Symbols for very short vowel sounds:">\n                                        <md-option ng-click = "speak(\'at\',\'UK English Male\')">a [ a ] a.t</md-option>\n                                        <md-option ng-click = "speak(\'at\',\'US English Female\')">ae [ æ ] a.t (US)</md-option>\n                                        <md-option ng-click = "speak(\'egg\',\'UK English Male\')">e [ ɛ ] e.gg</md-option>\n                                        <md-option ng-click = "speak(\'it\',\'UK English Male\')">ih [ ɪ ] i.t</md-option>\n                                        <md-option ng-click = "speak(\'off\',\'UK English Male\')">o [ ɒ ] o.ff</md-option>\n                                        <md-option ng-click = "speak(\'ugly\',\'UK English Male\')">uh [ ʌ ] u.gly</md-option>\n                                    </md-optgroup>\n                                    <md-optgroup label="Symbols for longer, short vowel sounds:">\n                                        <md-option ng-click = "speak(\'ago\',\'UK English Male\')">aa [ ə ] a.go</md-option>\n                                        <md-option ng-click = "speak(\'help\',\'UK English Male\')">eh [ ɛ: ] h.e.lp</md-option>\n                                        <md-option ng-click = "speak(\'book\',\'UK English Male\')">ou [ ʊ ] b.oo.k</md-option>\n                                    </md-optgroup>\n                                    <md-optgroup label="Combined sounds:">\n                                        <md-option ng-click = "speak(\'how\',\'UK English Male\')">aw [ aʊ ] h.ow</md-option>\n                                        <md-option ng-click = "speak(\'car\',\'UK English Male\')">R [ a: ] c.ar</md-option>\n                                        <md-option ng-click = "speak(\'word\',\'UK English Male\')">er [ əː ] w.or.d</md-option>\n                                        <md-option ng-click = "speak(\'square\',\'UK English Male\')">eh-er [ eə ] squ.are</md-option>\n                                        <md-option ng-click = "speak(\'near\',\'UK English Male\')">ih-aa [ ɪə ] n.ear</md-option>\n                                        <md-option ng-click = "speak(\'for\',\'UK English Male\')">or [ ɔ: ] f.or</md-option>\n                                        <md-option ng-click = "speak(\'boy\',\'UK English Male\')">oy [ ɔɪ ] b.oy</md-option>\n                                        <md-option ng-click = "speak(\'poor\',\'UK English Male\')">ou-er [ ʊə ] p.oo.r</md-option>\n                                        <md-option ng-click = "speak(\'church\',\'UK English Male\')">ch [ tʃ ] ch.ur.ch</md-option>\n                                        <md-option ng-click = "speak(\'enjoy\',\'UK English Male\')">jh [ dʒ ] en.j.oy</md-option>\n                                        <md-option ng-click = "speak(\'shut\',\'UK English Male\')">sh [ ʃ ] sh.ut</md-option>\n                                        <md-option ng-click = "speak(\'pleasure\',\'UK English Male\')">zj [ ʒ ] plea.s.ure</md-option>\n                                        <md-option ng-click = "speak(\'thin\',\'UK English Male\')">th [ θ ] th.in</md-option>\n                                        <md-option ng-click = "speak(\'there\',\'UK English Male\')">dh [ ð ] th.ere</md-option>\n                                        <md-option ng-click = "speak(\'going\',\'UK English Male\')">ng [ ŋ ] goi.ng</md-option>\n                                        <md-option ng-click = "speak(\'fire\',\'UK English Male\')">I-er [ ʌɪə ] f.ire</md-option>\n                                        <md-option ng-click = "speak(\'sour\',\'UK English Male\')">aw-er [ aʊə ] s.our</md-option>\n                                    </md-optgroup>\n\n                                    <md-optgroup label="Symbols for syllables and stress:">\n                                        <md-option>. Syllable</md-option>\n                                        <md-option>* Main syllable stress</md-option>\n                                        <md-option>\' Secondary syllable stress</md-option>\n                                    </md-optgroup>\n                                    \n                                </md-select>\n                        </md-list-item>\n                    </div>\n                    <div class="border-wrap a7 results">\n                        <div class="tips" style = "text-align:center;overflow:hidden;">\n                            <span ng-click="a7AddAnwser(pron,$index)" ng-repeat="pron in rs.pron_resultes.split_pron_arr track by $index" ng-class = "pronClass(pron,$index)" class="item pro-uk">{{pron}}</span>\n                        </div>\n                        <div class="anwser-input-box" ng-class = "anwserBgClass(rs.result_message)">\n                            <div style = "font-size: 24px;    padding: 0 8px;" >{{rs.remove_stress_pron}}</div>\n                        </div>\n                    </div>\n                    \n                    <md-button class = "margin-left-0" palette-background="pink:400" ng-click = "a7Hint()"  class="md-raised md-primary" aria-label="{{\'REVIEWPAGE.Hint\' | translate}}"  ng-disabled = "rs.disable_action" >{{\'REVIEWPAGE.Hint\' | translate}}</md-button>\n\n                    <md-button class = "margin-left-0" palette-background="pink:400" ng-click = "a7CheckAnwser()"  class="md-raised md-primary" aria-label="{{\'REVIEWPAGE.Done\' | translate}}"  ng-disabled = "rs.disable_action">{{\'REVIEWPAGE.Done\' | translate}}</md-button>\n\n                    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n                </div>\n            </div>\n\n</div>'),e.put("app/review-module/Directive/a8.tmpl.html",'<div class="a8-aty">\n	\n            <div  layout="row" layout-sm="column" layout-align="center center">\n                \n                <div  ng-if="user.get(\'spelling\') == \'uk\'  && !rs.spword.get(\'uk_pron_ext\') " ng-click = "speak(rs.spword.get(\'define\'),\'UK English Male\')"   flex="100" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span   >UK <i  class="hand fa fa-volume-off"></i></span>\n                </div>\n\n                <div ng-if="user.get(\'spelling\') == \'us\'  && !rs.spword.get(\'us_pron_ext\') "  ng-click = "speak(rs.spword.get(\'define\'),\'US English Female\')"  flex="100" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span  >US <i class="hand fa fa-volume-off"></i></span>\n                </div>\n\n                <div ng-if="rs.spword.get(\'us_pron_ext\') "  flex="100" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'s\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'a\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span>\n                </div>\n                        \n            </div>\n\n            \n\n            <div class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n                {{rs.spword.get(\'define\')}}\n            </div>\n\n            <div ng-if = "rs.result_message != \'You are right!\'" ng-bind-html="rs.sentence_no_first_letter" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n            <div ng-if = "rs.result_message == \'You are right!\'" ng-bind-html="rs.sample" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n            <div class="border-wrap a8 results">\n                <!-- BEGIN CHOICE -->\n                <div class="row">\n                    <div  ng-if="rs.choiceWords[0]" class="options" ng-click="a8CheckAnwser(rs.choiceWords[0])" ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[0],rs.highlight)">\n                        <div class="anwser" >\n                            <div class="details md-headline hand">\n                                <div class="spell" >\n                                    {{rs.choiceWords[0]}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="options" ng-click="a8CheckAnwser(rs.choiceWords[1])" ng-if="rs.choiceWords[1]"  ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[1],rs.highlight)">\n                        <div class="anwser" >\n                            <div class="details md-headline hand">\n                                <div class="spell" >\n                                    {{rs.choiceWords[1]}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="options" ng-click="a8CheckAnwser(rs.choiceWords[2])" ng-if="rs.choiceWords[2]"  ng-class="anwserClass(rs.spword.get(\'lemma\') ==  rs.choiceWords[2],rs.highlight)">\n                        <div class="anwser" >\n                            <div class="details md-headline hand">\n                                <div class="spell" >\n                                    {{rs.choiceWords[2]}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!-- END CHOICE -->\n                \n            </div>\n\n            <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n\n</div>'),e.put("app/review-module/Directive/a9.tmpl.html",'<div class="a9-aty">\n\n    <div class="row a9-type">\n        <div class="col-md-12">\n            <div class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title" style = "overflow: auto;">\n                <div ng-repeat="word in sentence_arr track by $index" style = "float:left;margin-right:8px;" ng-bind-html="word">\n                </div>\n            </div>\n\n            <div ng-if = "show_anwser && anwser_wrong_icon == \'op\'" ng-bind-html="show_anwser" class="bg-tm border font-white margin-top-10  margin-bottom-10 padding-10 md-title">\n            </div>\n\n\n            <md-button palette-background="pink:400" ng-click="click(\'_\')" class="no-transform hand md-raised md-primary margin-left-0" aria-label="_" ng-disabled = "rs.disable_action">_</md-button>\n\n            <md-button palette-background="pink:400" ng-click="click(\'a\')" class="no-transform hand md-raised md-primary margin-left-0" aria-label="a" ng-disabled = "rs.disable_action">A/a</md-button>\n\n            <md-button palette-background="pink:400" ng-click="click(\'an\')" class="no-transform hand md-raised md-primary margin-left-0" aria-label="an" ng-disabled = "rs.disable_action">An/an</md-button>\n\n            <md-button palette-background="pink:400" ng-click="click(\'the\')" class="no-transform hand md-raised md-primary margin-left-0" aria-label="the" ng-disabled = "rs.disable_action">The/the</md-button>\n        </div>\n    </div>\n\n    <p class="message" ng-show="rs.result_message">{{rs.result_message}} <i ng-if = "rs.result_message == \'You are right!\' "  class="fa fa-check-circle"></i></p>\n</div>'),e.put("app/review-module/Directive/spelling.tmpl.html",'<div class="spelling-aty">\n    <div ng-if = "tutorial && tutorial == \'no_resulte\' ">\n            <p class="color-grey margin-bottom-20 margin-top-20 md-title"><md-icon style = "font-size: 20px;position: relative;bottom: 3px;" md-font-icon="fa fa-warning"></md-icon> Welcome to review!</p>\n        <p class="color-grey margin-0">Here you will be regularly tested. Tests are:</p>\n        <p class="margin-top-20 margin-bottom-0 color-grey">\n            <i class="fa fa-bar-chart-o" style = "margin-right: 8px;"></i> Graded from easy to hard</p>\n        <p class="margin-top-0 margin-bottom-20 color-grey">\n            <i class="fa fa-history" style = "margin-right: 8px;"></i> Repeated over time to help you remember better</p>\n        <p class="color-grey margin-0">Now, do you prefer studying?</p>\n    </div>\n\n    <div ng-if = "tutorial && tutorial != \'no_resulte\' ">\n        <div ng-bind-html="tutorial.get(\'text\')"></div>\n    </div>\n    \n    \n\n    <md-button palette-background="pink:400" ng-click="updateSpelling(\'uk\')" class="md-raised md-primary margin-left-0" aria-label="british english" ng-disabled = "rs.disable_action">british english</md-button>\n\n    <md-button palette-background="pink:400" ng-click="updateSpelling(\'us\')" class="md-raised md-primary margin-left-0" aria-label="american english" ng-disabled = "rs.disable_action">american english</md-button>\n\n    <p class="message" ng-show="rs.result_message">{{rs.result_message}}</p>\n\n</div>'),e.put("app/review-module/Directive/summary.tmpl.html",'<div class="summary">\n    \n            <div class="summay-study-tips center">\n                <md-icon md-font-icon="fa fa-warning" class = "margin-right-10"></md-icon><span>Study this and click NEXT!</span>\n            </div>\n\n            <div layout="row" layout-sm="column" layout-margin layout-align="center center">\n                <div flex="50" flex-xs = "100"  flex-sm="100" palette-background="myPurple:300" class="border padding-10 center font-white md-headline">\n                    {{rs.spword.get(\'lemma\')}}\n                </div>\n                <div  ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\')" ng-click = "speak(rs.lemma,\'UK English Male\')"   flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span   >UK <i  class="hand fa fa-volume-off"></i></span>\n                </div>\n\n                <div ng-if="user.get(\'spelling\') == \'us\' && !rs.spword.get(\'us_pron_ext\') "  ng-click = "speak(rs.lemma,\'US English Female\')"  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span  >US <i class="hand fa fa-volume-off"></i></span>\n                </div>\n\n                <div ng-if="rs.spword.get(\'us_pron_ext\') "  flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline hand">\n                    <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'s\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'a\'">(Adj)</span>\n                    <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span>\n                </div>\n\n\n            </div>\n\n\n            <div class = "center summay-main-image" style = "margin-top:16px;margin-bottom: 16px;" ng-if = "rs.spword.get(\'imagesmain\')">\n                <img ng-src="{{rs.spword.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n            </div>\n\n            <div ng-if="user.get(\'spelling\') == \'uk\' && !rs.spword.get(\'uk_pron_ext\') "  layout="row" layout-sm="column" layout-margin layout-align="center center">\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size"  ng-bind-html="rs.spword.get(\'the_uk_pron\')"></span>\n                </div>\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size" ng-bind-html="rs.spword.get(\'the_uk_change_pron\')"></span>\n                </div>\n            </div>\n\n            <div ng-if="user.get(\'spelling\') == \'us\' && !rs.spword.get(\'us_pron_ext\') "  layout="row" layout-sm="column" layout-margin layout-align="center center">\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size"  ng-bind-html="rs.spword.get(\'the_us_pron\')"></span>\n                </div>\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size" ng-bind-html="rs.spword.get(\'the_us_change_pron\')"></span>\n                </div>\n            </div>\n\n            <div ng-if="rs.spword.get(\'uk_pron_ext\') "  layout="row" layout-sm="column" layout-margin layout-align="center center">\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size"  ng-bind-html="rs.spword.get(\'uk_pron_ext\')"></span>\n                </div>\n                <div flex="50" flex-xs = "100"  flex-sm="100" class="border padding-10 center font-purple md-headline">\n                    <span class = "pron_font_size" ng-bind-html="rs.spword.get(\'uk_change_pron_ext\')"></span>\n                </div>\n            </div>\n\n            <div layout="column" class="bg-tm border font-white padding-10 margin-top-10">\n                <div class="word-form" ng-if="rs.pos == \'v\' ">\n                    <span>{{rs.spword.get(\'form_v_a\')}},</span>\n                    <span>{{rs.spword.get(\'form_v_b\')}},</span>\n                    <span>{{rs.spword.get(\'form_v_c\')}},</span>\n                    <span>{{rs.spword.get(\'form_v_d\')}},</span>\n                    <span>{{rs.spword.get(\'form_v_e\')}}</span>\n                </div>\n\n                <div class="word-form" ng-if="rs.pos == \'v\' && rs.spword.get(\'form_ext_type\')  == \'v\' ">\n                    <span class="word-type" style = "margin-right:8px;" palette-background="myPurple:500">\n                    Irreg. \n                    </span>\n                    <span>{{rs.spword.get(\'form_ext_a\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_b\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_c\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_d\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_e\')}}</span>\n\n                    \n                </div>\n\n                <div class="word-form" ng-if="rs.pos == \'n\' ">\n                    <span>{{rs.spword.get(\'form_n_a\')}}</span><span ng-if="rs.spword.get(\'form_n_a\') && rs.spword.get(\'form_n_b\')">, </span>\n                    <span>{{rs.spword.get(\'form_n_b\')}}</span>\n                </div>\n\n                <div class="word-form" ng-if="rs.pos == \'n\' && rs.spword.get(\'form_ext_type\') == \'n\' ">\n                    <span class="word-type" style = "margin-right:8px;" palette-background="myPurple:500">\n                    Irreg. \n                    </span>\n\n                    <span>{{rs.spword.get(\'form_ext_a\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_b\')}}</span>\n\n                </div>\n\n                <div class="word-form" ng-if="rs.pos == \'j\' || rs.pos == \'s\' || rs.pos == \'a\' ">\n                    <span>{{rs.spword.get(\'form_j_a\')}},</span>\n                    <span>{{rs.spword.get(\'form_j_b\')}},</span>\n                    <span>{{rs.spword.get(\'form_j_c\')}}</span>\n                </div>\n\n                <div class="word-form" ng-if="(rs.pos == \'j\' || rs.pos == \'s\' || rs.pos == \'a\') && rs.spword.get(\'form_ext_type\') == \'j\' ">\n                    <span class="word-type" style = "margin-right:8px;" palette-background="myPurple:500">\n                    Irreg. \n                    </span>\n\n                    <span>{{rs.spword.get(\'form_ext_a\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_b\')}},</span>\n                    <span>{{rs.spword.get(\'form_ext_c\')}}</span>\n\n                </div>\n\n                <div class="word-form" ng-if="rs.pos == \'r\' ">\n                    <div ng-if="rs.spword.get(\'form_abb_b\')">\n                        <span>{{rs.spword.get(\'form_r_a\')}},</span>\n                        <span>{{rs.spword.get(\'form_r_b\')}}</span>\n                    </div>\n                    <div ng-if="!rs.spword.get(\'form_abb_b\')">\n                        <span>{{rs.spword.get(\'form_r_a\')}}</span>\n                    </div>\n                </div>\n            </div>\n            <div class="bg-tm border font-white margin-top-10 padding-10">\n                <span ng-if="rs.spword.get(\'pos\') == \'v\'">(Verb)</span>\n                <span ng-if="rs.spword.get(\'pos\') == \'n\'">(Noun)</span>\n                <span ng-if="rs.spword.get(\'pos\') == \'j\'">(Adj)</span>\n                <span ng-if="rs.spword.get(\'pos\') == \'s\'">(Adj)</span>\n                <span ng-if="rs.spword.get(\'pos\') == \'a\'">(Adj)</span>\n                <span ng-if="rs.spword.get(\'pos\') == \'r\'">(Adv)</span> {{rs.spword.get(\'define\')}}\n            </div>\n            <div ng-if="rs.spword.get(\'sample\')" class="bg-tm border font-white margin-top-10 padding-10">\n                <span ng-bind-html="rs.spword.get(\'sample\')"></span>\n            </div>\n\n            \n            \n            <md-button class = "glowing margin-left-0 summay-yes-btn" palette-background="pink:400" ng-click = "summaryYes()"  class="md-raised md-primary" aria-label="Yes" ng-disabled = "rs.disable_action">Next</md-button>\n\n</div>'),e.put("app/study-notes/Directive/correction.tmpl.html",'<div>\n    <div ng-if="user.get(\'user_role\') == \'student\' ">\n        <h2>{{instructions}}</h2>\n        <div class="legend">\n            <span class="margin-left-0 correct legend-item">&nbsp;&nbsp;</span> Correct\n            <span class="wrong legend-item">&nbsp;&nbsp;</span> Incorrect\n            <span class="extra legend-item">&nbsp;&nbsp;</span> Missing\n            <span class="missing legend-item">&nbsp;&nbsp;</span> Not needed\n        </div>\n\n        <div ng-repeat="correction in corrections track by $index">\n            <h2 class="hand" ng-if="!correction.get(\'first_sentence_mark\')">{{correction.get(\'mistake_st\')}}</h2>\n            <h2 ng-if="correction.get(\'first_sentence\')">\n            <span ng-repeat = "chart  in correction.get(\'first_sentence\') track by $index" ng-class = "chartClass(correction.get(\'first_sentence_mark\'),$index)">{{chart}}</span>\n        </h2>\n        \n        <h2 ng-class="showAnwserClass(correction)" ng-if="correction.get(\'second_sentence\') && correction.checker != \'You are right!\' ">\n            <span ng-repeat = "chart  in correction.get(\'second_sentence\') track by $index" ng-class = "chartClass(correction.get(\'second_sentence_mark\'),$index)">{{chart}}</span>\n        </h2>\n\n        <h2 ng-class="showAnwserClass(correction)" ng-if="correction.get(\'second_sentence\') && correction.checker == \'You are right!\' ">\n            <span class = "correct" ng-repeat = "chart  in correction.get(\'second_sentence\') track by $index">{{chart}}</span>\n        </h2>\n\n            <h3 ng-if="correction.checker">{{correction.checker}} <i ng-if = "correction.checker == \'You are right!\'"  class="fa fa-check-circle"></i> </h3>\n            <md-button ng-if="correction.get(\'mistake_st\') && correction.get(\'right_st\') && correction.checker != \'You are right!\'" ng-click="showAnwser(correction)" palette-background="pink:400" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="show">\n                <md-icon md-font-icon="fa fa-eye"></md-icon> show</md-button>\n            <div class="teacher-added-correction">\n                <md-input-container>\n                    <label for="sentence need correction">Try and correct your writing</label>\n                    <textarea type="text" ng-change="changeMessage(correction)" label="Sentence need correction" name="sentence need correction" ng-model="correction.correction_st"></textarea>\n                </md-input-container>\n                <md-button palette-background="pink:400" ng-click="checkSentence(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Check">Check</md-button>\n            </div>\n        </div>\n        <ad4game></ad4game>\n    </div>\n    <div ng-if="user.get(\'user_role\') == \'teacher\' ">\n        <h3 ng-if="!instructions || instructions ==\'\' "></h3>\n        <md-input-container>\n            <label for="instructions-set-by-teacher">Instructions</label>\n            <input type="text" ng-change="saveInstructions(instructions)" ng-model-options=\'{ debounce: 1500 }\' label="Instructions set by teachre" name="instructions-set-by-teacher" ng-model="instructions">\n        </md-input-container>\n        <div class="legend">\n            <span class="margin-left-0 correct legend-item">&nbsp;&nbsp;</span> Correct\n            <span class="wrong legend-item">&nbsp;&nbsp;</span> Incorrect\n            <span class="extra legend-item">&nbsp;&nbsp;</span> Missing\n            <span class="missing legend-item">&nbsp;&nbsp;</span> Not needed\n        </div>\n        <div class="studentCorrections correction-div" ng-if="corrections" ng-repeat="correction  in corrections track by $index">\n            <span class="correction_number">{{$index + 1}}. </span>\n            <h2 ng-if="correction.get(\'first_sentence\')">\n                <span ng-repeat = "chart  in correction.get(\'first_sentence\') track by $index" ng-class = "chartClass(correction.get(\'first_sentence_mark\'),$index)">{{chart}}</span>\n            </h2>\n            <h2 ng-if="correction.get(\'second_sentence\')">\n                <span ng-repeat = "chart  in correction.get(\'second_sentence\') track by $index" ng-class = "chartClass(correction.get(\'second_sentence_mark\'),$index)">{{chart}}</span>\n            </h2>\n            <div class="edit-correction" ng-if="correction.editing">\n                <md-input-container>\n                    <label for="Add an incorrect student sentence">Add an incorrect student sentence</label>\n                    <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentenceChange(correction)" type="text" label="Add an incorrect student sentence" name="Add an incorrect student sentence" ng-model="correction.mistake_st"></textarea>\n                </md-input-container>\n                <md-input-container>\n                    <label for="Add corrected version of above sentence">Add corrected version of above sentence</label>\n                    <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentenceChange(correction)" type="text" label="Add corrected version of above sentence" name="Add corrected version of above sentence" ng-model="correction.right_st"></textarea>\n                </md-input-container>\n            </div>\n\n            <md-button ng-if="!correction.editing" palette-background="pink:400" ng-click="showEditCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit"></md-icon>Edit</md-button>\n            <md-button ng-if="correction.editing" palette-background="pink:400" ng-click="showEditCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Close"></md-icon>Close</md-button>\n            <md-button ng-if="!correction.editing" palette-background="pink:400" ng-click="deleteCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="remove"></md-icon>remove</md-button>\n            <md-divider ng-hide="$last"></md-divider>\n        </div>\n        <div class="add_sentences">\n            <md-input-container>\n                <label for="Add an incorrect student sentence">Add an incorrect student sentence</label>\n                <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentence()" type="text" label="Add an incorrect student sentence" name="Add an incorrect student sentence" ng-model="input_data.mistake_st"></textarea>\n            </md-input-container>\n            <md-input-container>\n                <label for="Add corrected version of above sentence">Add corrected version of above sentence</label>\n                <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentence()" type="text" label="Add corrected version of above sentence" name="Add corrected version of above sentence" ng-model="input_data.right_st"></textarea>\n            </md-input-container>\n            <md-button ng-disabled="!input_data.mistake_st || input_data.disable" palette-background="pink:400" ng-click="addSentence()" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save sentence"></md-icon>Add</md-button>\n            <div ng-if="input_data.right_st || input_data.mistake_st" class="correction-div">\n                <h2 class="hand" ng-if="!chart_corrections.first_sentence">{{input_data.mistake_st}}</h2>\n                <h2 ng-if="chart_corrections.first_sentence">\n                <span ng-repeat = "chart  in chart_corrections.first_sentence track by $index" ng-class = "chartClass(chart_corrections.first_sentence_mark,$index)">{{chart}}</span>\n            </h2>\n                <md-divider></md-divider>\n                <h2 ng-if="chart_corrections.second_sentence">\n                <span ng-repeat = "chart  in chart_corrections.second_sentence track by $index" ng-class = "chartClass(chart_corrections.second_sentence_mark,$index)">{{chart}}</span>\n            </h2>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("app/study-notes/Directive/game.tmpl.html",'<div>\n	<div class="top-infos" layout="row" layout-sm="column" content-layout-align="space-between center" >\n        <div class="Actions" flex>\n\n                <md-button palette-background="pink:400" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="tips"  ng-click = "tips()" >\n                     <span ng-if = "!showanwsers">See matches</span>\n                    <span ng-if = "showanwsers">See game</span>\n                </md-button>\n\n                 <md-button ng-if = "gameData.showStartButton && !showanwsers" palette-background="pink:400" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="startGame"  ng-click = "startGame()" >Start</md-button>\n\n                 \n        </div>\n        <div layout="row" layout-align="space-around center" hide-xs hide-sm class="hide-mobile bg-tm action-info font-purple text-right" flex >\n            <span style = "color:#fff" class = "title-name">YOU : {{gameData.personPoint}}/{{gameData.endPoint}}</span>\n            <span style = "color:#fff">LEVEL : {{gameData.level}} </span>\n            <span style = "color:#fff">Time : {{gameData.timeCount}} secs</span>\n        </div>\n\n        <div hide-gt-sm layout="column" layout-align="space-around start" class="hide-mobile bg-tm action-info font-purple text-right" >\n            <span style = "color:#fff"  class = "title-name">YOU : {{gameData.personPoint}}/{{gameData.endPoint}}</span>\n            <span style = "color:#fff" >LEVEL : {{gameData.level}} </span>\n            <span style = "color:#fff" >Time : {{gameData.timeCount}} secs</span>\n        </div>\n        \n    </div>\n\n    <div class="resutes-messages" ng-if = "gameData.results">\n        <h3 style= "margin-left:8px;"> {{gameData.results}}</h3>\n    </div>\n\n    <div class="point-to-win process" style="margin-bottom: 8px;">\n        <span class="process-tips">POINTS TO WIN</span>\n        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{(gameData.personPoint/gameData.endPoint) * 100}}" ></md-progress-linear>\n    </div>\n\n    <div class="game-process process" style="margin-bottom: 8px;">\n        <span class="process-tips">TIME LEFT</span>\n        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{(gameData.timeCount/gameData.countTimeEnd) * 100}}" ></md-progress-linear>\n    </div>\n\n    <div class="game-area" ng-if = "!showanwsers && !gameData.results" style="margin-top: 8px;">\n        <div class="gcell" ng-repeat="word in wordList track by $index" ng-class = "returnClass(word)" ng-click = "personOneStep(word)" ng-disabled = "word.clicked">\n            \n            <span ng-if = "!word.anwser_word">{{word.lemma}}</span>\n            <span ng-if = "word.anwser_word"  ng-bind-html = "word.anwser_word"></span>\n        </div>\n    </div>\n\n    \n\n    <div class="anwser-area" ng-if = "showanwsers">\n        <span ng-repeat="word in gameData.anwser_words track by $index" >{{word}}</span>      \n    </div>\n</div>'),e.put("app/study-notes/Directive/gapfill.tmpl.html",'<div class = "final-game">\n    <h2>{{quiz_cat_title}}</h2>\n\n    <div class = "border" style = "padding:8px;margin-bottom: 16px;" ng-if = "quizCat.get(\'show_answers\') && quizCat.get(\'option_arr\')[0]">\n        <span style = "margin-right:8px;" ng-repeat="lemma in quizCat.get(\'option_arr\') track by $index">{{lemma}}</span>\n    </div>\n\n    <div class="quizs-gap-fill student-side" ng-repeat="quiz in quizs track by $index" style = "margin-bottom: 20px;">\n\n\n        <div class = "gap-fill-sentences">\n            <span style = "margin-right: 5px;">{{$index + 1}}.</span>\n            <span ng-class = "optionClass(quiz,$index)" ng-repeat="word in quiz.lemma_arr track by $index" style = "margin-right:8px;" >\n                <span ng-if = "word != \'______\' ">{{word}}</span>\n                <span ng-if = "word == \'______\' "> <span style = "font-size: 14px;color:grey">({{optionIndex($index,quiz)}})</span> {{word}}</span>\n                <span style = "font-size: 14px;color:grey" ng-if = "quiz.get(\'gapfilltype\') == \'form\' && !$last">,</span>\n            </span>\n\n            <span style = "margin-right:8px;color:green;" ng-if = "quiz.correct">\n                <i class="fa fa-check-circle"></i>\n            </span>\n        </div>\n\n        <div ng-if = "quizCat.get(\'enable_dictation\') && quizCat.get(\'option_arr\')[0]">\n            <md-button ng-click="speak(quiz)" class="md-raised md-primary margin-left-0" palette-background="pink:400" aria-label=">">\n                <md-icon md-font-icon="fa fa-play"></md-icon>\n            </md-button>\n        </div>\n\n        <div class="options-gap-fill" layout = "column">\n            \n            \n            <div ng-repeat="option in quiz.options  track by $index" flex>\n                <md-input-container>\n                    <label for="subject">({{$index + 1}})</label>\n\n                    <input ng-change = "optionChange(quiz,option)" ng-model-options=\'{ debounce: 200 }\' type="text" label={{option.first_letter}}" name = "subject" ng-model="option.first_letter">\n                </md-input-container>\n                \n            </div>\n        </div>\n\n        <div class="edit-quiz" ng-if = "quiz.show_edit">\n            <md-input-container>\n                <label for="sentence">Enter text for exercise</label>\n                <textarea ng-change = "updateSentence(quiz)" id="sentence" label="sentence" name="sentence" ng-model="quiz.sentence" />\n            </md-input-container>\n\n            <div>\n                <span ng-repeat="word in quiz.words track by $index" style = "margin-right:8px;" >{{word.lemma}}</span>\n            </div>\n\n            <div class="options-gap-fill">\n                <div style = "display:inline-block;" ng-repeat="word in quiz.words track by $index">\n                    <md-checkbox ng-change = "changeOption(quiz,word)" ng-model="word.check" aria-label="{{word.bak_lemma}}">\n                        <span >{{word.bak_lemma}}</span>\n                    </md-checkbox>\n                </div>\n            </div>\n        </div>                \n\n        <p ng-if = "quiz.error_message">{{quiz.error_message}}</p>\n\n        <md-button style = "margin-left:0" ng-if = "quiz.show_edit" ng-click="close(quiz)" palette-background="pink:400" class="md-raised md-primary" aria-label="close">close</md-button>\n\n        <md-button ng-if = "quiz.show_edit" ng-click="save(quiz)" palette-background="pink:400" class="md-raised md-primary" aria-label="Edit">save</md-button>\n    </div>\n\n    <ad4game></ad4game>\n</div>'),e.put("app/study-notes/Directive/normalDialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>{{title}}</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <div style = "margin:0" ng-if = "data.type == \'quiz\' ">\n            <quiz></quiz>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'gapfill\' ">\n            <gapfill></gapfill>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'homework\' ">\n            <writing></writing>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'correction\' ">\n            <correction></correction>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'slideshow\' ">\n            <slideshow></slideshow>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'game\' ">\n            <game></game>\n        </div>\n        <div style = "margin:0" ng-if = "data.type == \'youtube\' ">\n            <youtube></youtube>\n        </div>\n        \n\n\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <span class="error-message" ng-if="error_message">\n            {{error_message}}\n        </span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/Directive/quiz.tmpl.html",'<div>\n    <div class="quiz-item" ng-repeat="quiz in quizs track by $index" ng-if="$index == show_index">\n        <h2>{{quiz_cat_title}}</h2>\n        <h3>({{show_index + 1}}/{{quizs.length}})  {{quiz.get(\'question\')}}</h3>\n        <div ng-class = "anwserClass(anwser_message, $index, quiz)" class="anwser hand" ng-repeat="anwser in quiz.get(\'answers\') track by $index" ng-click="checkAnwser(quiz,anwser,$index)" ng-if = "anwser && anwser != \'\' ">\n            {{anwser}} <i style = "color:#fff!important;" ng-if = "quiz.click_index  == $index && anwser_message == \'You are right!\' "  class="fa fa-check-circle"></i>\n        </div>\n        <p ng-if="anwser_message">{{anwser_message}}</p>\n    </div>\n    <div class = "pagging-nav">\n        <md-button style="color:#fff;margin-left:0" ng-click="preQuestion()" palette-background="pink:400" class="md-raised md-primary previous" aria-label="Pre question" ng-disabled="show_index == 0">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" style="color:#fff;"></md-icon>\n            Previous\n        </md-button>\n        <md-button style="color:#fff" ng-click="nextQuestion()" palette-background="pink:400" class="md-raised md-primary next" aria-label="Next question" ng-disabled="show_index == (quizs.length -1 )">\n            Next\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-right"></md-icon>\n        </md-button>\n    </div>\n\n    <ad4game></ad4game>\n    \n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button ng-if="user.get(\'user_role\') == \'teacher\'  && edit_quiz" style="color:#fff" ng-click="saveQuiz()" palette-background="pink:400" class="md-raised md-primary" aria-label="edit">save & back</md-button>\n    </div>\n</div>'),e.put("app/study-notes/Directive/slideshow.tmpl.html",'<div>\n	<div layout="row" >\n        <div class="pagging" flex = 70>\n            <md-icon ng-click = "changePage(page-1)" class="hand" md-font-icon="icon-chevron-left" ></md-icon>\n            <md-icon ng-click = "changePage(page+1)" class="hand" md-font-icon="icon-chevron-right" ></md-icon>\n            <strong style = "color:grey;position: relative;top: 2px;">{{page+1}}/{{slideshows.length}}</strong>\n        </div>\n\n        <div flex = 30 class = "slideshow-side">\n            <md-slider min="20" max="100" ng-model="size" ng-init="size = 70" aria-label="default value"></md-slider>\n            \n        </div>\n\n        \n    </div>\n    \n\n    <div ng-if = "slideshow" class = "center slide-image-box" style = "margin:16px 0;">\n        <img ng-src="{{slideshow.get(\'link\')}}" alt="image" style = "width : {{size}}%;"/>\n\n        <h3 class = "tm-bg" ng-if = "slideshow.get(\'summary\')">\n            {{slideshow.get(\'summary\')}} \n            <span style = "margin-left:8px;" ng-click="speak(slideshow.get(\'summary\'),\'UK English Male\')" class="hand">UK <i   class="hand fa fa-volume-off"></i></span>\n            <span ng-click="speak(slideshow.get(\'summary\'),\'US English Female\')" class="hand">US  <i  class="hand fa fa-volume-off"></i></span>\n        </h3>\n    </div>\n    \n\n    <p style = "white-space: pre-line" ng-if = "slideshow.get(\'content\')" ng-bind-html = slideshow.get(\'content\')></p>\n</div>'),e.put("app/study-notes/Directive/writing.tmpl.html",'<div class = "writing-dialog">\n    <div ng-if = "user.get(\'user_role\') == \'student\' && !show_sentence_grammar ">\n        <div class="instructions" >\n            <h3>Instructions</h3>\n            <p class = "border-purple"> {{input_data.instructions}}</p>\n        </div>\n\n        <div class="teacher-feedback"  ng-if = "feedback_sentences[0]">\n            <h3>Feedback</h3>\n            \n            <p >\n                {{grammar_obj.sentence_number}}/{{grammar_obj.limit}} (sentence total)\n            </p>\n            <div class = "border-purple">\n                <span class = "sentence-outer" ng-repeat="sentence in feedback_sentences track by $index">\n                    {{sentence}}\n                    <span class = "pop-click-here hand" ng-click = "show_grammar_check(sentence)">#Click</span>\n                </span>\n            </div>\n\n            \n        </div>\n        \n        <p ng-if = "send_email_message" class = "border-purple">{{send_email_message}}</p>\n\n        <h3>Your writing</h3>\n        <md-input-container>\n            <label for="title">Add a title</label>\n\n            <textarea ng-change = "stuWritingChangestuWritingChange()" ng-model-options=\'{ debounce: 1500 }\' label="Add a title" name="Title" ng-model="input_data.homework_title_student">\n                \n            </textarea>\n        </md-input-container>\n\n        <md-input-container flex class="study-note-text-area">\n            <text-angular ng-change = "stuWritingChangestuWritingChange()"  name="homework_student" ng-model-options=\'{ debounce: 1500 }\' ng-model="input_data.homework_student" ta-target-toolbars="editor-toolbar-student"></text-angular>\n        </md-input-container>\n        <text-angular-toolbar name="editor-toolbar-student" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n\n        <div class="pencent-total">\n            <span class="grade">GRADE</span> {{grammar_obj.total_percent}}\n        </div>\n    \n\n        <md-button style = "margin-left:0"  palette-background="pink:400" ng-if = "!studentHW.get(\'emails_send\')" ng-click = "sendToTeacher()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to teacher"></md-icon>Send to teacher</md-button>\n        \n\n        <ad4game></ad4game>\n    </div >\n\n    <div ng-if = "user.get(\'user_role\') == \'teacher\' && !show_sentence_grammar ">\n        \n\n\n        <div class = "cat-nav-wrap">\n            <md-button class="md-raised md-primary"  ng-class="[buttonClass, buttonHue]"  aria-label="refresh" ng-click = "refresh()" >refresh</md-button>\n\n            <md-button ng-disabled = "studentHW == studentHomework" ng-repeat="studentHW in studentHWs"  class="md-raised md-primary"  ng-class="[buttonClass, buttonHue]"  aria-label="{{studentHW.get(\'student_name\')}}" ng-click = "selectHomeWork(studentHW)" >{{studentHW.get(\'student_name\')}}</md-button>\n\n\n            <md-button  ng-if = "!studentHomework && !homework.get(\'emails_send\')" palette-background="pink:400" ng-click = "sendToStudentsPOP()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students"></md-icon>Send to students</md-button>\n\n        </div>\n\n        <h3 ng-if = "input_data.instructions == \'\' || !input_data.instructions">Add instructions for what students need to write, then click SEND TO STUDENTS button.</h3>\n\n        <md-input-container>\n            <label for="instructions-set-by-teacher">Instructions</label>\n            <input type="text" ng-change = "saveInstructions(instructions)" ng-model-options=\'{ debounce: 1500 }\' label="Instructions set by teachre" name="instructions-set-by-teacher" ng-model="input_data.instructions">\n        </md-input-container>\n\n        \n        <div class="give-feedback-for-homework" ng-if = "studentHomework">\n            <h3>Writing</h3>\n            <p class = "border-purple" ng-bind-html="studentHomework.get(\'homework_student\')" ></p>\n\n\n            <div class="pencent-total">\n                <span class="grade">GRADE</span> {{grammar_obj.total_percent}}\n            </div>\n\n\n                     \n            <!-- Spoken Informal Formal Academic Business Legal Scientific Journalistic Literary Poetic -->\n            <div class="grammar-check-box words popDefinesShow  search-selects" >\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.spoken"aria-label="Default Checkbox">\n                        Spoken\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox class = "margin-left-0" ng-model="types.informal"aria-label="Default Checkbox">\n                        Informal\n                    </md-checkbox>\n                </p>\n\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.formal"aria-label="Default Checkbox">\n                        Formal\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.academic"aria-label="Default Checkbox">\n                        Academic\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.business"aria-label="Default Checkbox">\n                        Business\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.legal"aria-label="Default Checkbox">\n                        Legal\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.scientific"aria-label="Default Checkbox">\n                        Scientific\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.journalistic"aria-label="Default Checkbox">\n                        Journalistic\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.literary"aria-label="Default Checkbox">\n                        Literary\n                    </md-checkbox>\n                </p>\n                <p class="one-check">\n                    <md-checkbox ng-change = "saveTypes()"  class = "margin-left-0" ng-model="types.poetic"aria-label="Default Checkbox">\n                        Poetic\n                    </md-checkbox>\n                </p>\n                \n            </div>\n            \n\n            \n\n\n            <div class="teacher-feedback">\n                <h3>Feedback</h3>\n                \n                <div class = "border-purple">\n                    <span class = "sentence-outer" ng-repeat="sentence in feedback_sentences">\n                        {{sentence}}\n                        <span class = "pop-click-here hand" ng-click = "show_grammar_check(sentence)">#Click here</span>\n                    </span>\n                </div>\n\n                \n            </div>\n\n            \n        </div>\n\n        \n        <p ng-if = "send_email_message && studentHomework" class = "border-purple">{{send_email_message}}</p>\n         <md-button ng-if = "studentHomework && !studentHomework.get(\'emails_send\')" palette-background="pink:400" ng-if = "!studentHW.get(\'emails_send\')" ng-click = "sendToStudent()" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="Send to teacher"></md-icon>Send to student</md-button>\n\n\n    </div>\n\n    <div ng-if = "show_sentence_grammar" >\n        <md-button style = "margin-left: 0;" ng-click="closeShowSentence()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n        <h3 class = "font-purple">By student</h3>\n        <p>{{grammar.get(\'sentence\')}}</p>\n\n        <h3 class = "font-purple">Teacher\'s correction</h3>\n\n\n        <p ng-if = "user.get(\'user_role\') == \'student\' ">{{grammar.get(\'teacher_correction\')}}</p>\n\n\n\n        <md-input-container ng-if = "user.get(\'user_role\') == \'teacher\' ">\n            <label for="teacherc_correction">Correction</label>\n\n            <textarea ng-change = "saveTeacherCorrection()" ng-model-options=\'{ debounce: 1500 }\' label="Teacher\'s correction" name="teacherc_correction" ng-model="grammar.teacher_correction">\n                \n            </textarea>\n        </md-input-container>\n\n\n        <h3 class = "font-purple">Auto suggestions</h3>\n        <div  class = "border-purple" style = "color:#000;overflow: auto;">\n            <p><span class = "font-purple">Errors : </span>{{grammar.get(\'error_grammar_percent\')}}</p>\n\n            <div style = "overflow: auto;"> \n                <md-radio-group class ="grammar-radio" ng-if = "user.get(\'user_role\') == \'teacher\' " ng-model="grammar.error_grammar_percent" ng-change = "changePercent()">\n                    <md-radio-button value="0%">0%</md-radio-button>\n                    <md-radio-button value="20%">20%</md-radio-button>\n                    <md-radio-button value="40%">40%</md-radio-button>\n                    <md-radio-button value="50%">60%</md-radio-button>\n                    <md-radio-button value="80%">80%</md-radio-button>\n                </md-radio-group>\n                \n            </div>\n\n            \n\n            <div class="repeat-grammar" ng-repeat="suggestion in grammar.get(\'feedback_grammar_suggestion\') track by $index">\n                    \n                <p><span class = "font-purple">Problem : </span>{{grammar.get(\'error_grammar\')[$index]}}</p>\n                <p ng-if = "user.get(\'user_role\') == \'student\' "><span class = "font-purple">Suggestion : </span>{{grammar.get(\'feedback_grammar\')[$index]}}</p>\n\n                <md-input-container ng-if = "user.get(\'user_role\') == \'teacher\' ">\n                    <label for="suggestion">Suggestion</label>\n                    <textarea type="text" ng-change = "saveTeacherSuggestion()" ng-model-options=\'{ debounce: 1500 }\' label="Teacher\'s Suggestion" name="suggestion" ng-model="grammar.feedback_grammar[$index]"></textarea> \n                </md-input-container>\n            </div>\n            \n        </div>\n\n\n        <h3 class = "font-purple">Teacher\'s notes</h3>\n        <p ng-if = "user.get(\'user_role\') == \'student\' ">{{grammar.note}}</p>\n        <md-input-container ng-if = "user.get(\'user_role\') == \'teacher\' ">\n            <textarea type="text" ng-change = "saveTeacherNote()" ng-model-options=\'{ debounce: 1500 }\' label="Teacher\'s note" name="note" ng-model="grammar.note"></textarea> \n        </md-input-container>\n\n        \n    </div>\n</div>'),e.put("app/study-notes/Directive/youtube.tmpl.html","<div>\n	<div class='embed-container'><iframe ng-src={{link}} frameborder='0' allowfullscreen></iframe></div>\n</div>"),e.put("app/study-notes/dialogs/add-cat-link-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Category link</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content>\n            <div class = "outer">\n                <div>\n                    <md-input-container>\n                        <label>Search by topic or subject</label>\n                        <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchInputChange()" ng-model = search_word type="text">\n                    </md-input-container>\n                </div>\n\n                <div ng-if = "search_word" >\n                    <md-list>\n                        <md-list-item class = "hand" ng-repeat="cat in searchWordList">\n                            <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                             <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n                             \n\n                            <md-button  ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "useLink(cat)"  class="md-raised md-primary" aria-label="use link">use link</md-button>\n\n\n\n                            <md-divider ng-hide="$last"></md-divider>\n                        </md-list-item>\n                    </md-list>\n                </div>\n            </div>\n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/add-correction-pop-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Error exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    <md-dialog-content ng-if = "show_create_correction">\n        <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n        \n\n         <md-input-container>\n            <label for="instructions-set-by-teacher">Error exercise title</label>\n\n            <textarea  ng-change = "saveInstructions(instructions)" ng-model-options=\'{ debounce: 500 }\' label="Instructions set by teachre" name="instructions-set-by-teacher" ng-model="instructions"></textarea>\n        </md-input-container>\n\n        <div class="add_sentences"> \n            <p class = "border-green" ng-if = "!data.mistake_st && !data.right_st && user.get(\'user_role\') == \'teacher\'">If you have examples of student errors then add them here. If not, add instructions above. This way you can test students on a short writing task then view and correct their work.You can also send them a notice with the SEND TO STUDENTS button.</p>\n\n            <md-input-container>\n                <label for="Add an incorrect student sentence">Add an incorrect student sentence</label>\n                \n\n                <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change = "setRightSentence()" type="text" label="Add an incorrect student sentence" name="Add an incorrect student sentence" ng-model="data.mistake_st"></textarea>\n            </md-input-container>\n\n            <md-button ng-disabled = "!data.mistake_st || data.mistake_st == data.right_st" palette-background="pink:400" ng-click="copyMistakeST()" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="copy"></md-icon>copy</md-button>\n\n            <md-input-container>\n                <label for="Add corrected version of above sentence">Add corrected version of above sentence</label>\n\n                <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change = "setRightSentence()" type="text" label="Add corrected version of above sentence" name="Add corrected version of above sentence" ng-model="data.right_st"></textarea>\n            </md-input-container>\n\n            <md-button ng-disabled = "!chart_corrections || !data.mistake_st || data.disable" palette-background="pink:400" ng-click="addSentence()" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save sentence"></md-icon>Add</md-button>\n\n            <div  ng-if = "data.right_st || data.mistake_st" class = "correction-div">\n                 <h2 class = "hand" ng-if = "!chart_corrections.first_sentence">{{data.mistake_st}}</h2>\n                <h2 ng-if = "chart_corrections.first_sentence">\n                    <span ng-repeat = "chart  in chart_corrections.first_sentence track by $index" ng-class = "chartClass(chart_corrections.first_sentence_mark,$index)">{{chart}}</span>\n                </h2>\n\n                <md-divider></md-divider>\n\n                <h2 ng-if = "chart_corrections.second_sentence">\n                    <span ng-repeat = "chart  in chart_corrections.second_sentence track by $index" ng-class = "chartClass(chart_corrections.second_sentence_mark,$index)">{{chart}}</span>\n                </h2>\n            </div>\n\n            \n            <div class = "studentCorrections"  ng-if = "studentCorrections" ng-repeat = "correction  in studentCorrections track by $index">\n                <span class = "correction_number">{{$index + 1}}. </span>\n                <h2 ng-if = "correction.get(\'first_sentence\')">\n                    <span ng-repeat = "chart  in correction.get(\'first_sentence\') track by $index" ng-class = "chartClass(correction.get(\'first_sentence_mark\'),$index)">{{chart}}</span>\n                </h2>\n\n\n                <h2 ng-if = "correction.get(\'second_sentence\')">\n                    <span ng-repeat = "chart  in correction.get(\'second_sentence\') track by $index" ng-class = "chartClass(correction.get(\'second_sentence_mark\'),$index)">{{chart}}</span>\n                </h2>\n\n\n                <div class="edit-correction" ng-if="correction.editing">\n                    <md-input-container>\n                        <label for="Add an incorrect student sentence">Add an incorrect student sentence</label>\n                        <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentenceChange(correction)" type="text" label="Add an incorrect student sentence" name="Add an incorrect student sentence" ng-model="correction.mistake_st"></textarea>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="Add corrected version of above sentence">Add corrected version of above sentence</label>\n                        <textarea ng-model-options=\'{ debounce: 1500 }\' ng-change="setRightSentenceChange(correction)" type="text" label="Add corrected version of above sentence" name="Add corrected version of above sentence" ng-model="correction.right_st"></textarea>\n                    </md-input-container>\n                </div>\n                \n\n                 <md-button ng-if="!correction.editing" palette-background="pink:400" ng-click="showEditCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit"></md-icon>Edit</md-button>\n                <md-button ng-if="correction.editing" palette-background="pink:400" ng-click="showEditCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Close"></md-icon>Close</md-button>\n                <md-button ng-if="!correction.editing" palette-background="pink:400" ng-click="deleteCorrection(correction)" class="margin-left-0 md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="remove"></md-icon>remove</md-button>\n\n\n                <md-button ng-Click="correctionDown(correction, studentCorrections)"palette-background="pink:400" class="md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                </md-button>\n\n                <md-button  ng-Click="correctionUp(correction, studentCorrections)"  palette-background="pink:400" class="md-primary" aria-label="delete">\n                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                </md-button>\n\n                <md-divider ng-hide="$last"></md-divider>\n            </div>\n        </div>\n\n\n        <div class = "cat-nav-wrap">\n            \n\n            <md-button  ng-disabled = "(instructions == \'\' || !instructions) && !correction.get(\'emails_send\')" ng-if = "user.get(\'user_role\') == \'teacher\' " palette-background="pink:400" ng-click = "showClassSelect()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students"></md-icon>Send to students</md-button>\n\n\n        </div>\n        \n\n        <div class="classes-wrap" ng-if = "myClasses">\n            <p>Select class students to send:</p>\n            <md-button style = "margin-left:0" ng-repeat="cls in myClasses" palette-background="pink:400" ng-click = "send(cls)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students" ng-disabled="cls.disable">send to {{cls.get(\'name\')}}</md-button>\n        </div>\n\n        <p ng-if = "send_email_message" class = "border-purple">{{send_email_message}}</p>\n        <p>To add the exercise, go back with < and select USE</p>\n    </md-dialog-content>\n\n    <md-dialog-content ng-if = "!show_create_correction">\n\n        <md-button palette-background="pink:400" ng-click = "creatCorrection()"  class="margin-left-0 md-raised md-primary" aria-label="Create quiz">Create error exercise</md-button>\n\n        <md-list>\n            <md-list-item ng-if = "correction.get(\'instructions\') && correction.get(\'instructions\') != \'\' " class = "margin-bottom-16 hand flex-wrap" ng-repeat="correction in corrections track by $index">\n                <p class = "text-ellipsis" style = "margin:0">{{correction.get(\'instructions\')}}</p>\n\n                <div flex = 100>\n                    <md-button palette-background="pink:400" ng-click = "userCorrection(correction)"  class="margin-left-0 md-raised md-primary" aria-label="use correction">use</md-button>\n                    <md-button palette-background="pink:400" ng-click = "editCorrection(correction)"  class="margin-left-0 md-raised md-primary" aria-label="edit correction">edit</md-button>\n                    <md-button palette-background="pink:400" ng-click = "removeASK(correction)"  class="margin-left-0 md-raised md-primary" aria-label="remove">remove</md-button>\n                </div>\n                \n\n\n                <div class="remove-ask" ng-if = "correction.remove_show" flex = 100>\n                    <p>Do you really want to delete this?</p>\n                    <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removecorrection()"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                    <md-button  palette-background="pink:400" ng-click = "removeASKHide(correction)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                </div>\n\n                <md-divider ng-hide="$last"></md-divider>\n            </md-list-item>\n        </md-list>\n\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <span class="error-message" ng-if="error_message">\n                {{error_message}}\n            </span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/add-homework-pop-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Writing task</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    <md-dialog-content ng-if = "show_create_homework">\n        <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n        \n\n        <md-input-container>\n            <label for="instructions-set-by-teacher">Instructions</label>\n            <textarea ng-change = "saveInstructions(instructions)" ng-model-options=\'{ debounce: 1500 }\' label="Instructions set by teachre" name="instructions-set-by-teacher" ng-model="instructions">\n                \n            </textarea>\n        </md-input-container>\n\n        <h3 class = "border-green" style = "font-size: 16px;" ng-if = "instructions.length < 5">Add writing instructions for students. You can also send them a notice with the SEND TO STUDENTS button.</h3>\n\n\n        <div class = "cat-nav-wrap">\n            <md-button  ng-disabled = "(instructions == \'\' || !instructions) && !homework.get(\'emails_send\')" palette-background="pink:400" ng-click = "showClassSelect()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students"></md-icon>Send to students</md-button>\n\n        </div>\n\n        <div class="classes-wrap" ng-if = "myClasses">\n            <p>Select class students to send:</p>\n            <md-button style = "margin-left:0" ng-repeat="cls in myClasses" palette-background="pink:400" ng-click = "send(cls)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students" ng-disabled="cls.disable">send to {{cls.get(\'name\')}}</md-button>\n        </div>\n\n        <p ng-if = "send_email_message" class = "border-purple">{{send_email_message}}</p>\n        <p>To add the exercise, go back with < and select USE</p>\n    </md-dialog-content>\n\n    <md-dialog-content ng-if = "!show_create_homework">\n        <md-button ng-if = "show_system_grammar" style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n        <md-button ng-if = "!show_system_grammar" palette-background="pink:400" ng-click = "creatWriting()"  class="margin-left-0 md-raised md-primary" aria-label="Create quiz">Create writing task</md-button>\n\n        <md-button ng-if = "!show_system_grammar && user.get(\'admin\')" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showSystemGrammar()" palette-background="pink:400" class="md-raised md-primary" aria-label="load preset exercise">load preset exercise</md-button>\n\n\n\n        <div ng-if = "show_system_grammar" >\n            <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                <md-option value=\'all\'>ALL</md-option>\n                <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n            </md-select>\n            \n        </div>\n\n        <md-list ng-if = "show_system_grammar">\n            <div ng-if = "!select_grammar">\n                <md-list-item style = "flex-wrap:wrap;" class = "relative hand flex-warp" ng-repeat="item in items track by $index" ng-if = "item.get(\'name\')">\n                \n                    <p>{{item.get(\'name\')}}</p>\n\n                    <p>{{item.get(\'level\')}}</p>\n                    \n                    <md-button ng-click="selectSystemGrammar(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                        select\n                    </md-button>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </div>\n            \n\n\n            <div ng-if = "select_grammar">\n                <md-input-container>\n                    <label>Exercise title</label>\n                    <input ng-model = select_grammar.name type="text">\n                </md-input-container>\n\n                 <md-button ng-click="useSystemGrammar(select_grammar)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                    Use\n                </md-button>\n            </div>\n        </md-list>\n\n        <md-list ng-if = "!show_system_grammar">\n            <md-list-item ng-if = "homework.get(\'instructions\') && homework.get(\'instructions\') != \'\' " class = "margin-bottom-16 hand flex-wrap" ng-repeat="homework in homeworks track by $index">\n                <p class = "text-ellipsis" style = "margin:0">{{homework.get(\'instructions\')}}</p>\n\n                <div flex = 100>\n                    <md-button palette-background="pink:400" ng-click = "userHomeWork(homework)"  class="margin-left-0 md-raised md-primary" aria-label="use homework">use</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "editHomeWork(homework)"  class="margin-left-0 md-raised md-primary" aria-label="edit homework">edit</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(homework)"  class="margin-left-0 md-raised md-primary" aria-label="remove">remove</md-button>\n                    \n                </div>\n                \n\n                <div flex = 100 class="remove-ask" ng-if = "homework.remove_show">\n                    <p>Do you really want to delete this?</p>\n                    <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeHomework()"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                    <md-button  palette-background="pink:400" ng-click = "removeASKHide(homework)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                </div>\n\n                <md-divider ng-hide="$last"></md-divider>\n            </md-list-item>\n        </md-list>\n\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <span class="error-message" ng-if="error_message">\n            {{error_message}}\n        </span>\n        \n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/add-quiz-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Quiz</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content ng-if = "creat_quiz || edit_quiz_cat" class="sticky-container" style="padding:16px;">\n        \n\n        <md-content>\n            <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n            <div>\n                <md-input-container>\n                    <label for="answer-one">Quiz title</label>\n                    <input ng-change = "saveQuizTitle()" ng-model-options=\'{ debounce: 500 }\' type="text" label="quiz-title" name="quiz-title" ng-model="cat.quiz_title">\n                </md-input-container>\n            </div>\n\n\n            <md-list class="search-list">\n                <md-list-item class="hand margin-bottom-16 relative" style = "margin-bottom: 16px;flex-wrap:wrap;" ng-repeat="quiz in sub_quizs track by $index">\n                    \n                    \n                    <p class = "text-ellipsis" style = "margin:0">{{quiz.get(\'question\')}}</p>\n\n                    <div flex = 100>\n                        <md-button ng-click="editSubQuiz(quiz)" class="margin-left-0  md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                            edit\n                        </md-button>\n\n                        <md-button ng-click="removeSubQuiz(quiz)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                            remove\n                        </md-button>\n\n                        <md-button ng-Click="quizUp(quiz,sub_quizs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="quizDown(quiz,sub_quizs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n\n                    </div>\n\n                    <md-divider ng-hide="$last"></md-divider>\n\n                    \n                </md-list-item>\n            </md-list>\n\n \n            <div ng-if = "edit_quiz_cat && sub_quizs.length >= 40">\n                Quizs limit is 40.\n            </div>\n\n        \n            <div ng-if = "edit_quiz_item || (edit_quiz_cat && sub_quizs.length < 40)">\n                <div>\n                    <md-input-container>\n                        <label for="answer-one">Enter question for quiz</label>\n                        <textarea  label="quiz-question-one" name="quiz-question-one" ng-model="question.question">\n                            \n                        </textarea>\n                    </md-input-container>\n                </div>\n                <div class="input-outer">\n                    <md-input-container>\n                        <label for="answer-one">Enter answer</label>\n                        <input type="text" label="quiz-answer-one" name="quiz-answer-one" ng-model="question.answers[0]" checked>\n                    </md-input-container>\n                    <span class="anwser_number">\n                            1\n                        </span>\n                    <p class="check-box">\n                        <md-checkbox ng-model="question.select[0]" ng-change="changeSelect(0)" aria-label="Default Checkbox">\n                            <span ng-if="!question.select[0]">Click if correct</span>\n                        </md-checkbox>\n                    </p>\n                </div>\n                <div class="input-outer">\n                    <md-input-container>\n                        <label for="answer-one">Enter answer</label>\n                        <input type="text" label="quiz-answer-one" name="quiz-answer-one" ng-model="question.answers[1]" checked>\n                    </md-input-container>\n                    <span class="anwser_number">\n                            2\n                        </span>\n                    <p class="check-box">\n                        <md-checkbox ng-model="question.select[1]" ng-change="changeSelect(1)" aria-label="Default Checkbox">\n                            <span ng-if="!question.select[1]">Click if correct</span>\n                        </md-checkbox>\n                    </p>\n                </div>\n                <div class="input-outer">\n                    <md-input-container>\n                        <label for="answer-one">Enter answer</label>\n                        <input type="text" label="quiz-answer-one" name="quiz-answer-one" ng-model="question.answers[2]" checked>\n                    </md-input-container>\n                    <span class="anwser_number">\n                            3\n                        </span>\n                    <p class="check-box">\n                        <md-checkbox ng-model="question.select[2]" ng-change="changeSelect(2)" aria-label="Default Checkbox">\n                            <span ng-if="!question.select[2]">Click if correct</span>\n                        </md-checkbox>\n                    </p>\n                </div>\n                <div class="input-outer">\n                    <md-input-container>\n                        <label for="answer-one">Enter answer</label>\n                        <input type="text" label="quiz-answer-one" name="quiz-answer-one" ng-model="question.answers[3]" checked>\n                    </md-input-container>\n                    <span class="anwser_number">\n                            4\n                        </span>\n                    <p class="check-box">\n                        <md-checkbox ng-model="question.select[3]" ng-change="changeSelect(3)" aria-label="Default Checkbox">\n                            <span ng-if="!question.select[3]">Click if correct</span>\n                        </md-checkbox>\n                    </p>\n                </div>\n            </div>\n\n            <md-button ng-if = "edit_quiz_cat" ng-click="addQuestion()" ng-disabled = \'!save_enable\' class="md-raised md-primary margin-left-0" palette-background="pink:400" aria-label="save">\n                save\n            </md-button>\n            <p>To add the exercise, go back with < and select USE</p>\n            \n        </md-content>\n    </md-dialog-content>\n\n    <md-dialog-content ng-if = "!creat_quiz && !edit_quiz_cat">\n\n        <div>\n            <md-input-container>\n                <label>Search by topic or subject for quizzes</label>\n                <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchInputChange(search_word)" ng-model = search_word type="text">\n            </md-input-container>\n        </div>\n\n\n        <div ng-if = "search_word && !select_words" >\n\n            <div ng-if = "searchWordList && !searchWordList[0] ">\n                <gotoaddcategory></gotoaddcategory>\n            </div>\n\n            <md-list>\n                <md-list-item class = "hand" ng-repeat="cat in searchWordList" ng-if = "cat.get(\'children_data_word\').length >=3">\n                    <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                     <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n                    \n\n\n                    <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "Select(cat)"  class="md-raised md-primary" aria-label="use link">Select</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n\n\n        <div ng-if = "search_word && select_words" style = "overflow:auto;">\n            <div>\n                <md-button ng-disabled = \'disable_create_btn\' ng-click="createCategoryQuiz()" palette-background="pink:400" class="md-raised md-primary" aria-label="edit">Create quiz</md-button>\n            </div>\n\n            <div style = "float:left;width:50%;" ng-repeat="word in select_words">\n                <md-checkbox ng-model="word.check"aria-label="Default Checkbox">\n                    <span >{{word.get(\'name\')}}</span>\n                </md-checkbox>\n            </div>\n        </div>\n\n        <div ng-if = "!search_word">\n            <md-button style = "margin-left:0;" palette-background="pink:400" ng-click = "showCreateQuiz()"  class="md-raised md-primary" aria-label="Create quiz">Create quiz</md-button>\n\n            <md-list>\n                <md-list-item style = "flex-wrap:wrap;" ng-if = "quiz.get(\'quiz_title\') && quiz.get(\'quiz_title\') != \'\'" class = "margin-bottom-16 relative hand" ng-repeat="quiz in quizs track by $index">\n                    \n\n                    <p class = "text-ellipsis" style = "margin:0">{{quiz.get(\'quiz_title\')}}</p>\n\n                    <div flex = 100>\n                        <md-button palette-background="pink:400" ng-click = "userQuiz(quiz)"  class="margin-left-0 md-raised md-primary" aria-label="use quiz">use</md-button>\n\n                        <md-button palette-background="pink:400" ng-click = "editQuiz(quiz)"  class="margin-left-0 md-raised md-primary" aria-label="edit">edit</md-button>\n\n                        <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="margin-left-0 md-raised md-primary" aria-label="remove">remove</md-button>\n                        \n                    </div>\n                    \n\n                    <div flex = 100 class="remove-ask absolute" ng-if = "quiz.remove_show" >\n                        <p>Do you really want to delete this?</p>\n                        <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeQuiz()"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                        <md-button  palette-background="pink:400" ng-click = "removeASKHide(quiz)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                    </div>\n\n\n                    <md-divider ng-hide="$last"></md-divider>\n\n                    \n                </md-list-item>\n            </md-list>\n\n        </div>\n\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <span class="error-message" ng-if="error_message">\n            {{error_message}}\n        </span>\n        \n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/add-writing-assignment-pop-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Written answer exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    \n\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content ng-if = "!grammar && !edit_form">\n\n        <div class="system-grammar" >\n                <md-button ng-if = "show_system_grammar" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showCreateCourse()" palette-background="pink:400" class="md-raised md-primary" aria-label="create written answer exercise">create written answer exercise</md-button>\n\n                <div ng-if = "show_system_grammar" >\n                    <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                    </md-select>\n                    \n                </div>\n                \n\n                \n                <md-list>\n                    <md-list-item ng-if = "item.get(\'name\')" style = "flex-wrap:wrap;" class = "margin-bottom-16 relative hand flex-wrap" ng-repeat="item in items track by $index" >\n                        \n                        <p class = "text-ellipsis"> \n                            {{item.get(\'name\')}} \n                            \n                        </p>\n\n                        <p ng-if = "show_system_grammar">{{item.get(\'level\')}}</p>\n\n                        <md-button  ng-disabled = "item.btn_disable" ng-if = "show_system_grammar" ng-click="createBySystemItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                            Use\n                        </md-button>\n                        \n                        <div flex = 100 ng-if = "!show_system_grammar">\n                            <md-button ng-disabled = "notSelectExercises(item)" ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n\n                            <md-button ng-click="editGrammar(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                edit\n                            </md-button>\n\n                            <md-button ng-click="showRemove(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n                            \n                        </div>\n                        \n                        <div class="remove-ask" flex = 100 ng-if = "item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteGrammar()"  class="md-raised md-primary margin-left-0 margin-left-0" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n\n                        <md-divider ng-hide="$last"></md-divider>\n\n                        \n                    </md-list-item>\n                </md-list>\n\n            </div>\n        </md-content>\n\n        <md-content ng-if = "grammar || edit_form">\n            \n            <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n            <div>\n                <md-input-container>\n                    <label>writing assignment title</label>\n                    <input ng-change = "createCourse()" ng-model = input.title type="text" ng-model-options=\'{ debounce: 1500 }\'>\n                </md-input-container>\n            </div>\n\n            <div>\n                <md-list-item  class="hand" ng-repeat="obj in data.writing_objs track by $index">\n                    <p>{{obj.writing_task}}</p>\n\n                    <md-button ng-Click="writingUp(obj,data.writing_objs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                        <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                    </md-button>\n\n                    <md-button ng-Click="writingDown(obj,data.writing_objs)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                        <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                    </md-button>\n                                \n                    <md-button ng-click="editWriting(obj)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                        edit\n                    </md-button>\n\n                    <md-button ng-click="removeWriting($index)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                        remove\n                    </md-button>\n                </md-list-item>\n\n                <md-input-container>\n                    <label for="writing_task">Add question or task e.g. I / man. What is the correct form?</label>\n                    <textarea id="writing_task" label="writing_task" name="writing_task" ng-model="data.writing_task" />\n                </md-input-container>\n\n                <div class="test-forms" ng-if = "data.writing_task">\n                    <div ng-repeat="form in test_forms track by $index" style = "display:inline-block" >\n                        <md-button  ng-if = "!inSelectForms(form) " ng-click="triggerTestForm(form)" palette-background="myPurple:A100" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{form.get(\'tag_str\')}}">\n                            {{form.get(\'tag_str\')}}\n                        </md-button>\n\n                        <md-button  ng-if = "inSelectForms(form)  " ng-click="triggerTestForm(form)" palette-background="myPurple:700" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{form.get(\'tag_str\')}}">\n                            {{form.get(\'tag_str\')}}\n                        </md-button>\n                        \n                    </div>\n                    \n                    \n                </div>\n\n                <md-button ng-disabled = "data.writing_task.length < 1 || !data.writing_task" ng-click="saveWriting()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="save">save</md-button>\n            </div>\n\n\n            <md-list class="search-list">\n                <md-list-item class="hand" ng-repeat="form in test_forms track by $index">\n                    <p>\n                        <span>{{form.get(\'tag_str\')}}</span>\n                    </p>\n                    <md-button ng-click="removeTestForm(form)" class="md-raised md-primary" palette-background="pink:400" aria-label="Delete">\n                        Delete\n                    </md-button>\n                </md-list-item>\n            </md-list>\n\n            \n\n            <md-input-container class="">\n                <label>Add model answer</label>\n                <input ng-change = "useTestForm(input.test_form)" ng-model-options=\'{ debounce: 200 }\' id="test_form" label="test_form" name="test_form" type="text" ng-model="input.test_form" />\n            </md-input-container>\n\n\n            <div ng-if = "sample_obj">\n\n                <div class="sample" ng-if = "!show_edit_sentence">\n                    <span ng-class = "checkWordClass(obj)" class = "hand" ng-click = "addTagOption(obj,$index)" ng-repeat="obj in sample_obj track by $index" style = "font-size: 18px;">{{obj.is_option ? \'[*\' + obj.tag + \']\' : obj.lemma}}<span ng-if = "obj.lemma == \'?\' || obj.lemma == \'.\' || obj.lemma == \'!\'"></br></span></span>\n                </div>\n                <p ng-if  = "err_message" class = "font-red">{{err_message}}</p>\n                \n                <p ng-if = "options_obj[0]">\n                    <span class = "hand" ng-repeat="obj in options_obj track by $index" style = "margin-right: 4px;">\n                        <strong ng-click = "selectTagTypeAuto(obj)" ng-if = "!obj.tag_lemma">[{{obj.show_tag}}]</strong>\n                        <strong ng-click = "selectTagTypeAuto(obj)" ng-if = "obj.tag_lemma">{{obj.show_tag}}</strong>\n                    </span>\n                </p>\n\n                    \n\n                <md-button ng-disabled = "!options_obj[0]" palette-background="pink:400" ng-click = "clear()"  class="md-raised md-primary margin-left-0" aria-label="Clear">Clear</md-button>\n\n                <md-button ng-disabled = "add_test_tag_disable || !options_obj[0]" ng-click="addTestTag()" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="usadde">\n                    add\n                </md-button>\n\n                <div ng-if = "!options_obj[0]">\n                    <p class = "font-red">Please click on each word you want to include in the model answer!\n                    </p>\n                    \n                    <p>Note: You can designate words as substitute-enabled [*] or select grammar patterns e.g. [*VB] for \'verb\', simply by clicking multiple times on the word under the original one.</p>\n                </div>\n                \n            </div>\n\n            <p>To add the exercise, go back with < and select USE</p>\n        </md-content>\n    </md-dialog-content>\n\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/dialogue-course-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Dialogue exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    \n\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content>\n\n            \n            <div ng-if = "edit_form || grammar">\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <div>\n                    <div>\n                        <md-input-container>\n                            <label>Grammar exercise title</label>\n                            <input ng-change = "createCourse()" ng-model = input.title type="text" ng-model-options=\'{ debounce: 1500 }\'>\n                        </md-input-container>\n                    </div>\n                </div>\n\n                <md-list class="search-list">\n                    <md-list-item class="hand flex-wrap" ng-repeat="the_sentence in sentence_list track by $index">\n                        <p>\n                            <span ng-repeat="item in sentence.check_item track by $index" ng-if = "the_sentence.get(item)">{{sentence.check_simple[item]}}</span>  \n                            {{the_sentence.get(\'sample\')}}\n                        </p>\n                        <md-button ng-click=\'editSentence(the_sentence)\' class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                            Edit\n                        </md-button>\n                        <md-button ng-click="removeSentence(the_sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                            Remove\n                        </md-button>\n\n                        <md-button ng-Click="sentenceUp(the_sentence,sentence_list)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="sentenceDown(the_sentence,sentence_list)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n                    </md-list-item>\n                </md-list>\n                \n                <div ng-if = "grammar">\n                    <div class="edit-sentence-box" >\n                        <md-input-container>\n                            <label for="sentence">Add example sentence</label>\n                            <textarea ng-change = "saveEditSentence()" ng-model-options=\'{ debounce: 1500 }\' id="sentence" label="sentence" name="sentence" ng-model="input.sample" />\n                        </md-input-container>\n                    </div>\n\n                    <div class="member-tables-types border grammar-teacher-checkbox">\n                        <p ng-if = "!select_label_obj.a"  style = "margin:0;color:red;">Please select one!</p>\n                        <md-checkbox ng-change = "selectModelChange(\'written\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'written\']" aria-label="Model">\n                            {{sentence.check_name[\'written\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'spoken\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'spoken\']" aria-label="Model">\n                            {{sentence.check_name[\'spoken\']}}\n                        </md-checkbox>\n                        <div class="clear"></div>\n                    </div>\n\n                    <div class="member-tables-types border grammar-teacher-checkbox">\n                        <p ng-if = "!select_label_obj.b" style = "margin:0;color:red;">Please select one!</p>\n                        <md-checkbox ng-change = "selectModelChange(\'i\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'i\']" aria-label="Model">\n                            {{sentence.check_name[\'i\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'you\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'you\']" aria-label="Model">\n                            {{sentence.check_name[\'you\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'we\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'we\']" aria-label="Model">\n                            {{sentence.check_name[\'we\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'they\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'they\']" aria-label="Model">\n                            {{sentence.check_name[\'they\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'he\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'he\']" aria-label="Model">\n                            {{sentence.check_name[\'he\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'she\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'she\']" aria-label="Model">\n                            {{sentence.check_name[\'she\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'it\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'it\']" aria-label="Model">\n                            {{sentence.check_name[\'it\']}}\n                        </md-checkbox>\n                        <div class="clear"></div>\n                    </div>\n\n                    <div class="member-tables-types border grammar-teacher-checkbox">\n                        <p ng-if = "!select_label_obj.c" style = "margin:0;color:red;">Please select one!</p>\n                        <md-checkbox ng-change = "selectModelChange(\'plus\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'plus\']" aria-label="Model">\n                            {{sentence.check_name[\'plus\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'min\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'min\']" aria-label="Model">\n                            {{sentence.check_name[\'min\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'plus_ask\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'plus_ask\']" aria-label="Model">\n                            {{sentence.check_name[\'plus_ask\']}}\n                        </md-checkbox>\n                        <md-checkbox ng-change = "selectModelChange(\'min_ask\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'min_ask\']" aria-label="Model">\n                            {{sentence.check_name[\'min_ask\']}}\n                        </md-checkbox>\n                        <div class="clear"></div>\n                    </div>\n                    \n                    <p ng-if = "input.sample">If you want your dialogue as a gap-fill as well as ordering, then click on word/s below and enter one or more false answers!</p>\n\n                    <div class="sample">\n                        <span ng-class = "checkWordClass(obj)" class = "hand" ng-click = "addOption(obj,$index)" ng-repeat="obj in sample_obj track by $index" style = "font-size: 18px;">\n                            <span ng-if = "obj.is_option" class = "font-purple">______</span>\n                            <span ng-if = "!obj.is_option" >{{obj.lemma}}</span>\n                            <span ng-if = "obj.lemma == \'?\' || obj.lemma == \'.\' || obj.lemma == \'!\'"></br></span>\n                        </span>\n                    </div>\n\n                    \n\n                    \n                    <div class="forms" ng-if = "forms" style="margin-top: 16px;">\n                        <span class = "hand" ng-click = "addForm(form)" ng-repeat="form in forms track by $index" style = "padding: :0 8px;" ng-if = "form != current_obj.lemma">\n                            {{form}}\n                        </span>\n                    </div>\n\n\n                    <md-list class="search-list border" ng-if = "options_obj[0]">\n                        <div style = "padding:0 8px;">\n                            <p>\n                                For each test word selected, add two false answers. </br>\n                                For example, for \'been\' you could add \'be, gone\' as false answers.\n                            </p>\n                        </div>\n\n                        <md-list-item class="hand" ng-repeat="obj in options_obj track by $index">\n                            \n                            <p>\n                                <span class = "font-purple">{{obj.lemma}}</span>\n                            </p>\n                            \n                            <md-input-container>\n                                <label for = "lemma{{$index}}">e.g. \'go, goes\'</label>\n                                <input ng-change="checkCanAdd()" ng-model-options=\'{ debounce: 500 }\' id="lemma" label="lemma" name="lemma{{$index}}" type="text" ng-model="obj.false_anwser"  />\n                            </md-input-container>\n                            \n                        </md-list-item>\n                    </md-list>\n\n                    <md-button ng-disabled = "!input.sample || add_sentence_disable" palette-background="pink:400" ng-click = "addSentence(sample)"  class="margin-left-0 md-raised md-primary" aria-label="Save">Save</md-button>\n\n\n                    \n                </div>\n\n                <p>To add the exercise, go back with < and select USE</p>\n            </div>\n\n\n            <div class="system-grammar" ng-if = "!grammar && !edit_form">\n\n                \n\n                <md-button ng-if = "show_system_grammar" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showCreateCourse()" palette-background="pink:400" class="md-raised md-primary" aria-label="create dialogue exercise">create dialogue exercise</md-button>\n\n                <md-button ng-if = "!show_system_grammar && user.get(\'admin\')" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showSystemGrammar()" palette-background="pink:400" class="md-raised md-primary" aria-label="load preset exercise">load preset exercise</md-button>\n\n                <div ng-if = "show_system_grammar" >\n                    <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                    </md-select>\n                    \n                </div>\n                \n\n                \n                <md-list>\n                    <md-list-item ng-if = "item.get(\'name\')" style = "flex-wrap:wrap;" class = "margin-bottom-16 relative hand flex-wrap" ng-repeat="item in items track by $index" >\n                        \n                        <p class = "text-ellipsis"> \n                            {{item.get(\'name\')}} \n                            \n                        </p>\n\n                        <p ng-if = "show_system_grammar">{{item.get(\'level\')}}</p>\n\n                        <md-button ng-disabled = "item.btn_disable" ng-if = "show_system_grammar" ng-click="createBySystemItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                            Use\n                        </md-button>\n                        \n                        <div flex = 100 ng-if = "!show_system_grammar">\n                            <md-button ng-disabled = "notSelectExercises(item)" ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n\n                            <md-button ng-click="editGrammar(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                edit\n                            </md-button>\n\n                            <md-button ng-click="editSelectExercise(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="select exercise/s">\n                                select exercise/s\n                            </md-button>\n\n                            <md-button ng-click="showRemove(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n                            \n                        </div>\n                        \n\n                        <div class="remove-ask" flex = 100 ng-if = "item.select_exercise_show">\n                            <div style = "display:inline-block" ng-if = "value.type == \'dialogue\'" ng-repeat="(key, value) in match_exercises">\n                                <md-button palette-background="myPurple:A100" ng-if = "!item.get(key)"  ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n\n                                <md-button  ng-if = "item.get(key)" palette-background="myPurple:700" ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n                            </div>\n                            \n                        </div>\n\n\n                        <div class="remove-ask" flex = 100 ng-if = "item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteGrammar()"  class="md-raised md-primary margin-left-0 margin-left-0" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n\n                        <md-divider ng-hide="$last"></md-divider>\n\n                        \n                    </md-list-item>\n                </md-list>\n\n            </div>\n            \n        </md-content>\n    </md-dialog-content>\n\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/edit-exericse_dialog.tmpl.html",'<md-dialog class="email-dialog study-note-dialog" flex="80" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container">\n        <md-content>\n            <md-input-container>\n                <label for="exercise_title">Exercise title</label>\n                <input type="text" label="exercise_title" name="exercise_title" ng-model="quiz.title">\n            </md-input-container>\n        </md-content>\n\n        <md-button ng-disabled = "btn_disable" ng-click = "saveExerciseTitle()"  palette-background="pink:400" class="md-raised md-primary" aria-label="save">save</md-button>\n        \n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/edit-note-dialog.tmpl.html",'<md-dialog class="email-dialog study-note-dialog" flex="80" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit notes</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container">\n        <md-content>\n            <md-input-container flex style = "padding-bottom:10px;">\n                <text-angular ng-model-options=\'{ debounce: 1500 }\' ng-change="changeSave(note)" name="noteBody-3" ng-model="note.content" ta-target-toolbars="editor-toolbar-3"></text-angular>\n            </md-input-container>\n        </md-content>\n        \n    </md-dialog-content>\n    <div class="md-actions" layout="column" style = "min-height: 150px;">\n        <div class="edit-study-note-actions" style  = "width:100%;">\n            <div class="new-actions" layout="row" style = "position: relative;">\n                <div class="high-light">\n                    <div ng-click="highLight(\'black\')" class="squre hand black">\n                    </div>\n                    <div ng-click="highLight(\'blue\')" class="squre hand blue">\n                    </div>\n                    <div ng-click="highLight(\'purple\')" class="squre hand purple">\n                    </div>\n                    <div ng-click="highLight(\'green\')" class="squre hand green">\n                    </div>\n                    <div ng-click="highLight(\'red\')" class="squre hand red">\n                    </div>\n                </div>\n                \n            </div>\n\n            <div style="position: relative;padding-left: 50px;margin-top: 10px;">\n                <div ng-click="addTitle()" class="item add-title hand" style = "position: absolute;left:2px;">\n                    TITLE\n                </div>\n                <text-angular-toolbar name="editor-toolbar-3" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n            </div>\n            \n            \n        </div>\n        <div style  = "text-align: right;width:100%;">\n            \n            <md-button style="color:#fff" ng-click="save(note)" palette-background="pink:400" class="md-raised md-primary" aria-label="Save">Save</md-button>\n            <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n                Close\n            </md-button>\n\n        </div>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/gap-fill-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Gap-fill</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    <md-dialog-content ng-if = "!creat_quiz && !edit_cat">\n\n        <div>\n            <md-input-container>\n                <label>Search by topic or subject for gap-fills</label>\n                <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchInputChange(search_word)" ng-model = search_word type="text">\n            </md-input-container>\n        </div>\n\n        <div ng-if = "search_word && !select_words" >\n\n            <div ng-if = "searchWordList && !searchWordList[0]">\n                <gotoaddcategory></gotoaddcategory>\n            </div>\n\n            <md-list>\n                <md-list-item class = "hand" ng-repeat="cat in searchWordList" ng-if = "cat.get(\'children_data_word\').length >=3">\n                    <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                     <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n                    \n\n\n                    <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "Select(cat)"  class="md-raised md-primary" aria-label="use link">Select</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n\n\n\n        <div ng-if = "select_words" style = "overflow:auto;">\n            <div layout="row" layout-align="start center">\n                <md-radio-group ng-model="obj.type" ng-init="obj.type = \'sentence\'">\n                    <md-radio-button style="float:left;" value="sentence">Sentence</md-radio-button>\n                    <md-radio-button style="float:left;" value="form">Form</md-radio-button>\n                </md-radio-group>\n            </div>\n\n            <div>\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="createCategoryGapFill()" palette-background="pink:400" class="md-raised md-primary" aria-label="Create ">Create gap-fill</md-button>\n            </div>\n\n            <div style = "float:left;width:50%;" ng-repeat="word in select_words">\n                <md-checkbox ng-model="word.check" aria-label="{{word.get(\'name\')}}">\n                    <span >{{word.get(\'name\')}}</span>\n                </md-checkbox>\n            </div>\n\n\n        </div>\n\n\n        <div ng-if = "!search_word || search_word == \'\' ">\n            <md-button style = "margin-left: 0; " palette-background="pink:400" ng-click = "showCreateQuiz()"  class="md-raised md-primary" aria-label="Create gap-fill" ng-disabled = "disable_create_btn">Create gap-fill</md-button>\n\n            <md-list>\n                <md-list-item  ng-if = "quiz.get(\'quiz_title\') && quiz.get(\'quiz_title\') != \'\'" class = "flex-wrap hand" ng-repeat="quiz in quizs track by $index" style = "margin-bottom: 16px;position: relative;">\n                    <p class = "text-ellipsis" style = "margin:0">{{quiz.get(\'quiz_title\')}}</p>\n\n                    <div flex = 100>\n                        <md-button palette-background="pink:400" ng-click = "userQuiz(quiz)"  class="md-raised md-primary margin-left-0" aria-label="use quiz">use</md-button>\n\n                        <md-button palette-background="pink:400" ng-click = "editGapfill(quiz)"  class="md-raised md-primary margin-left-0" aria-label="Edit">Edit</md-button>\n\n                        <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="md-raised md-primary margin-left-0" aria-label="remove">remove</md-button>\n                    </div>\n                    \n\n                    <div flex = 100 class="remove-ask" ng-if = "quiz.remove_show">\n                        <p>Do you really want to delete this?</p>\n                        <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeQuiz()"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                        <md-button  palette-background="pink:400" ng-click = "removeASKHide(quiz)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                    </div>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n\n    </md-dialog-content>\n\n    <md-dialog-content ng-if = "creat_quiz || edit_cat" class="sticky-container" style="padding:16px;">\n        <md-content>\n            <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n            \n            <md-input-container>\n                <label for="answer-one">Gap-fill title</label>\n                <input ng-change = "saveTitle()" ng-model-options=\'{ debounce: 500 }\' type="text" label="Gap-fill title" name="Gap-fill title" ng-model="obj.title">\n            </md-input-container>\n\n            <div  ng-if = "obj.show_answers && obj.option_arr[0]" class = "border" style = "padding:8px;margin-bottom: 16px;">\n                <span style = "margin-right:8px;" ng-repeat="lemma in obj.option_arr track by $index">{{lemma}}</span>\n            </div>\n\n            <div layout="row">\n                <md-switch class = "margin-left-0" ng-change = "showAnswers()" ng-model="obj.show_answers" aria-label="Show answers" >\n                    Show answers\n                </md-switch>\n\n                <md-switch class = "margin-left-0" ng-change = "changeDictation()" ng-model="obj.enable_dictation" aria-label="Enable dictation" >\n                    Enable dictation\n                </md-switch>\n                \n            </div>\n            \n\n            <div class="quizs-gap-fill flex-wrap" ng-repeat="quiz in quizs_gapfill track by $index">\n                <div class = "word-break">\n                    <span ng-repeat="word in quiz.words track by $index" style = "margin-right:8px;" >{{word.lemma}}\n\n                        <span style = "font-size: 14px;color:grey" ng-if = "quiz.get(\'gapfilltype\') == \'form\' && !$last">,</span>\n                    </span>\n                    \n                </div>\n\n                <div class="options-gap-fill">\n                    <div style = "display:inline-block;" ng-repeat="word in quiz.words track by $index">\n                        <md-checkbox ng-change = "changeOption(quiz,word)" ng-model="word.check" aria-label="{{word.bak_lemma}}">\n                            <span >{{word.bak_lemma}}</span>\n                        </md-checkbox>\n                    </div>\n                </div>\n\n                <div layout="row">\n                    <md-button palette-background="pink:400" ng-click = "editGapfillItem(quiz)"  class="md-raised md-primary margin-left-0" aria-label="edit">edit</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="md-raised md-primary margin-left-0" aria-label="remove">remove</md-button>\n\n                    <md-button ng-Click="quizUp(quiz,quizs_gapfill)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                        <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                    </md-button>\n\n                    <md-button ng-Click="quizDown(quiz,quizs_gapfill)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                        <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                    </md-button>\n\n                    <md-switch ng-change = "changeFirstLetter(quiz)" ng-model="quiz.show_first_letter" aria-label="Show first letter" >\n                        Show first letter\n                    </md-switch>\n                </div>\n\n                <div flex = 100 ng-if = "quiz.edit">\n                    <md-input-container>\n                        <label for="sentence">Enter text for exercise</label>\n                        <textarea id="sentence" label="sentence" name="sentence" ng-model="quiz.sentence" />\n                    </md-input-container>\n\n                    <md-button  ng-disabled = "!quiz.sentence || quiz.sentence.length < 11" ng-click="saveEditSentence(quiz)" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="save">\n                        save\n                    </md-button>\n                </div>\n\n                <div flex = 100 class="remove-ask" ng-if = "quiz.remove_show">\n                    <p>Do you really want to delete this?</p>\n                    <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeGapfill($index)"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                    <md-button  palette-background="pink:400" ng-click = "removeASKHide(quiz)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                </div>\n\n                <md-divider ng-hide="$last"></md-divider>\n            </div>\n\n            <div ng-if = "!obj.edit_quiz">\n                <md-input-container>\n                    <label for="sentence">Enter text for exercise</label>\n                    <textarea id="sentence" label="sentence" name="sentence" ng-model="obj.sentence" />\n                </md-input-container>\n\n                <md-button  ng-disabled = "!obj.sentence || obj.sentence.length < 11 || add_disable" ng-click="addSentence()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="Add">\n                    Add\n                </md-button>\n            </div>\n\n            \n            \n            <p ng-if = "quizs_gapfill[0] && !hide_message">Select at least one word to gap!</p>\n            <p>To add the exercise, go back with < and select USE</p>\n        </md-content>\n    </md-dialog-content>\n\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <span class="error-message" ng-if="error_message">\n            {{error_message}}\n        </span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/grammar-course-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Grammar exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    \n\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content>\n\n            \n            <div ng-if = "edit_form || grammar">\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <div>\n                    <div>\n                        <md-input-container>\n                            <label>Grammar exercise title</label>\n                            <input ng-change = "createCourse()" ng-model = input.title type="text" ng-model-options=\'{ debounce: 1500 }\'>\n                        </md-input-container>\n                    </div>\n                </div>\n\n                <div>\n                    <md-input-container class="">\n                        <label>Add title for target language</label>\n                        <input ng-change="createCourse()" ng-model-options=\'{ debounce: 1000 }\' id="name" label="name" name="name" type="text" ng-model="input.progress_name" />\n                    </md-input-container>\n                </div>\n\n                <div ng-if = "show_add_summary">\n                    <md-button palette-background="pink:400" ng-click = "hideAddSummary()"  class="margin-left-0 md-raised md-primary" aria-label="Go to target language">Go to target language</md-button>\n\n                    <div class="member-tables-types">\n                        <md-checkbox ng-change = "saveTags()" ng-repeat="item in data.check_item" class="margin-left-0" ng-model="data.check_model[item]" aria-label="{{item}}">\n                            {{data.check_name[item]}}\n                        </md-checkbox>\n                        <div class="clear"></div>\n                    </div>\n\n                    <md-input-container>\n                        <label for="summary">Enter summary</label>\n                        <textarea ng-change="saveSummary()" ng-model-options=\'{ debounce: 1000 }\' id="summary" label="summary" name="summary" ng-model="input.summary" />\n                    </md-input-container>\n                </div>\n\n                <div ng-if = "!show_add_summary" class="edit_sentence">\n                    <md-list class="search-list">\n                        <md-list-item class="hand flex-wrap" ng-repeat="the_sentence in sentence_list track by $index">\n                            <p>\n                                <span ng-repeat="item in sentence.check_item track by $index" ng-if = "the_sentence.get(item)">{{sentence.check_simple[item]}}</span>  \n                                {{the_sentence.get(\'sample\')}}\n                            </p>\n                            <md-button ng-click=\'editSentence(the_sentence)\' class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                                Edit\n                            </md-button>\n                            <md-button ng-click="removeSentence(the_sentence)" class="md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n\n                            <md-button ng-Click="sentenceUp(the_sentence,sentence_list)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                                <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                            </md-button>\n\n                            <md-button ng-Click="sentenceDown(the_sentence,sentence_list)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                                <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                            </md-button>\n                        </md-list-item>\n                    </md-list>\n                    \n                    <div ng-if = "grammar">\n                        <div class="edit-sentence-box" >\n                            <md-input-container>\n                                <label for="sentence">Add example sentence</label>\n                                <textarea ng-change = "saveEditSentence()" ng-model-options=\'{ debounce: 1500 }\' id="sentence" label="sentence" name="sentence" ng-model="input.sample" />\n                            </md-input-container>\n                        </div>\n\n                        <div class="member-tables-types border grammar-teacher-checkbox">\n                            <p ng-if = "!select_label_obj.a"  style = "margin:0;color:red;">Please select one!</p>\n                            <md-checkbox ng-change = "selectModelChange(\'written\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'written\']" aria-label="Model">\n                                {{sentence.check_name[\'written\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'spoken\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'spoken\']" aria-label="Model">\n                                {{sentence.check_name[\'spoken\']}}\n                            </md-checkbox>\n                            <div class="clear"></div>\n                        </div>\n\n                        <div class="member-tables-types border grammar-teacher-checkbox">\n                            <p ng-if = "!select_label_obj.b" style = "margin:0;color:red;">Please select one!</p>\n                            <md-checkbox ng-change = "selectModelChange(\'i\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'i\']" aria-label="Model">\n                                {{sentence.check_name[\'i\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'you\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'you\']" aria-label="Model">\n                                {{sentence.check_name[\'you\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'we\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'we\']" aria-label="Model">\n                                {{sentence.check_name[\'we\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'they\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'they\']" aria-label="Model">\n                                {{sentence.check_name[\'they\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'he\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'he\']" aria-label="Model">\n                                {{sentence.check_name[\'he\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'she\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'she\']" aria-label="Model">\n                                {{sentence.check_name[\'she\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'it\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'it\']" aria-label="Model">\n                                {{sentence.check_name[\'it\']}}\n                            </md-checkbox>\n                            <div class="clear"></div>\n                        </div>\n\n                        <div class="member-tables-types border grammar-teacher-checkbox">\n                            <p ng-if = "!select_label_obj.c" style = "margin:0;color:red;">Please select one!</p>\n                            <md-checkbox ng-change = "selectModelChange(\'plus\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'plus\']" aria-label="Model">\n                                {{sentence.check_name[\'plus\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'min\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'min\']" aria-label="Model">\n                                {{sentence.check_name[\'min\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'plus_ask\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'plus_ask\']" aria-label="Model">\n                                {{sentence.check_name[\'plus_ask\']}}\n                            </md-checkbox>\n                            <md-checkbox ng-change = "selectModelChange(\'min_ask\',sentence.check_item,sentence.check_model)" class="margin-left-0" ng-model="sentence.check_model[\'min_ask\']" aria-label="Model">\n                                {{sentence.check_name[\'min_ask\']}}\n                            </md-checkbox>\n                            <div class="clear"></div>\n                        </div>\n                        \n                        <md-button palette-background="pink:400" ng-click = "showAddSummary()"  class="margin-left-0 md-raised md-primary" aria-label="go to summary / function">go to summary / function</md-button>\n\n                        <p ng-if = "sample_obj">Click on word/s below and enter one or more false answers. If you want to give a summary of the language point and/or test function e.g. \'experience\' for Present Perfect, then click the above button.</p>\n\n                        <div class="sample">\n                            <span ng-class = "checkWordClass(obj)" class = "hand" ng-click = "addOption(obj,$index)" ng-repeat="obj in sample_obj track by $index" style = "font-size: 18px;">\n                                <span ng-if = "obj.is_option" class = "font-purple">______</span>\n                                <span ng-if = "!obj.is_option" >{{obj.lemma}}</span>\n                                <span ng-if = "obj.lemma == \'?\' || obj.lemma == \'.\' || obj.lemma == \'!\'"></br></span>\n                            </span>\n                        </div>\n\n                        \n\n                        \n                        <div class="forms" ng-if = "forms" style="margin-top: 16px;">\n                            <span class = "hand" ng-click = "addForm(form)" ng-repeat="form in forms track by $index" style = "padding: :0 8px;" ng-if = "form != current_obj.lemma">\n                                {{form}}\n                            </span>\n                        </div>\n\n\n                        <md-list class="search-list border" ng-if = "options_obj[0]">\n                            <div style = "padding:0 8px;">\n                                <p>\n                                    For each test word selected, add two false answers.\n                                </p>\n                                <p>For example, for \'been\' you could add \'be, gone\' as false answers.</p>\n                            </div>\n\n                            <md-list-item class="hand" ng-repeat="obj in options_obj track by $index">\n                                \n                                <p>\n                                    <span class = "font-purple">{{obj.lemma}}</span>\n                                </p>\n                                \n                                <md-input-container>\n                                    <label for = "lemma{{$index}}">e.g. \'go, goes\'</label>\n                                    <input ng-change="checkCanAdd()" ng-model-options=\'{ debounce: 500 }\' id="lemma" label="lemma" name="lemma{{$index}}" type="text" ng-model="obj.false_anwser"  />\n                                </md-input-container>\n                                \n                            </md-list-item>\n                        </md-list>\n\n\n                        <md-button ng-disabled = "!options_obj[0] || chekObjHaveAnwser(options_obj) || !input.sample || add_sentence_disable" palette-background="pink:400" ng-click = "addSentence(sample)"  class="margin-left-0 md-raised md-primary" aria-label="Save">Save</md-button>\n\n\n                        \n                    </div>\n\n                    <p>To add the exercise, go back with < and select USE</p>\n                </div>\n\n                \n            </div>\n\n\n            <div class="system-grammar" ng-if = "!grammar && !edit_form">\n\n                \n\n                <md-button ng-if = "show_system_grammar" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showCreateCourse()" palette-background="pink:400" class="md-raised md-primary" aria-label="create grammar exercise">create grammar exercise</md-button>\n\n                <md-button ng-if = "!show_system_grammar && user.get(\'admin\')" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showSystemGrammar()" palette-background="pink:400" class="md-raised md-primary" aria-label="load preset exercise">load preset exercise</md-button>\n\n\n                <div ng-if = "show_system_grammar" >\n                    <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                    </md-select>\n                    \n                </div>\n                \n\n                \n                <md-list>\n                    <md-list-item ng-if = "item.get(\'name\')" style = "flex-wrap:wrap;" class = "margin-bottom-16 relative hand flex-wrap" ng-repeat="item in items track by $index" >\n                        \n                        <p class = "text-ellipsis"> \n                            {{item.get(\'name\')}} \n                            \n                        </p>\n\n                        <p ng-if = "show_system_grammar">{{item.get(\'level\')}}</p>\n\n                        <md-button  ng-disabled = "item.btn_disable" ng-if = "show_system_grammar" ng-click="createBySystemItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                            Use\n                        </md-button>\n                        \n                        <div flex = 100 ng-if = "!show_system_grammar">\n                            <md-button ng-disabled = "notSelectExercises(item)" ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n\n                            <md-button ng-click="editGrammar(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                edit\n                            </md-button>\n\n                            <md-button ng-click="editSelectExercise(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="select exercise/s">\n                                select exercise/s\n                            </md-button>\n\n                            <md-button ng-click="showRemove(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n                            \n                        </div>\n                        \n\n                        <div class="remove-ask" flex = 100 ng-if = "item.select_exercise_show">\n                            <div style = "display:inline-block" ng-if = "  value.type == \'test_all\' || value.type == \'summary\' || value.type == \'normal\'" ng-repeat="(key, value) in match_exercises">\n                                <md-button palette-background="myPurple:A100" ng-if = "!item.get(key)"  ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n\n                                <md-button  ng-if = "item.get(key)" palette-background="myPurple:700" ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n                            </div>\n                            \n                        </div>\n\n\n                        <div class="remove-ask" flex = 100 ng-if = "item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteGrammar()"  class="md-raised md-primary margin-left-0 margin-left-0" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n\n                        <md-divider ng-hide="$last"></md-divider>\n\n                        \n                    </md-list-item>\n                </md-list>\n\n            </div>\n            \n        </md-content>\n    </md-dialog-content>\n\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/manage-note-role-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Manage roles</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <h3>Editors:</h3>\n           <md-button palette-background="myPurple:700" ng-repeat="stu_name in note_role_students"  class="md-raised md-primary"  ng-class="[buttonClass, buttonHue]"  aria-label="{{stu_name}}" ng-click = "removeStudentRight(stu_name)" >{{stu_name}}</md-button>\n\n            <md-divider></md-divider>\n            <h3>Members:</h3>\n\n            \n\n            <md-button ng-repeat="stu in class_students" palette-background="myPurple:A100"  class="md-raised md-primary"  ng-class="[buttonClass, buttonHue]"  aria-label="{{stu.get(\'name\')}}" ng-click = "addStudentRight(stu)" >{{stu.get(\'name\')}}</md-button>\n\n            <p>Click name to add/remove as editor. Go to Class Manager to add members not here.</p>\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/match-game-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Match game</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content >\n            <div class="buttons">\n                <md-button ng-if = "create_game"  ng-click="back()" palette-background="pink:400" class="md-raised md-primary margin-left-0" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n                \n                <md-button  ng-if = "!create_game"  ng-click="showCreateGame()" palette-background="pink:400" class="md-raised md-primary" aria-label="game">Create game</md-button>\n            </div>\n            \n\n            <div ng-if = "!create_game">\n                <md-list class="search-list">\n                    <md-list-item class="hand margin-bottom-16 relative" style = "margin-bottom: 16px;flex-wrap:wrap;" ng-repeat="game in games track by $index">\n                        \n                        \n                        <p class = "text-ellipsis" style = "margin:0">{{game.get(\'title\')}}({{game.get(\'match_words\').length}})</p>\n\n                        <div flex = 100>\n                            <md-button ng-disabled = "game.get(\'match_words\').length < 5" palette-background="pink:400" ng-click = "useGame(game)"  class="margin-left-0 md-raised md-primary" aria-label="use game">use</md-button>\n\n                            <md-button ng-click="editGame(game)" class="margin-left-0  md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                edit\n                            </md-button>\n\n                            <md-button ng-click="removeASK(game)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                remove\n                            </md-button>\n                        </div>\n\n                        <div flex = 100 class="remove-ask absolute" ng-if = "game.remove_show" >\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeGame()"  class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(game)"  class="md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n                        \n\n                        \n                    </md-list-item>\n                </md-list>\n            </div>\n\n\n\n            <div ng-if = "create_game">\n                <div class="title">\n                    <md-input-container flex>\n                        <label for="game-title">Game title</label>\n                        <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "saveGame()" ng-model = input.game_title name="game-title" type="text">\n                    </md-input-container>\n                </div>\n\n                <div ng-if = "input.game_title">\n                    <div class="words-list">\n                        <p ng-if = "match_words.length < 5">At least 5 words are recommended for a game. Current : {{words.length}}</p>\n                        <md-list>\n                            <md-list-item ng-repeat="word in match_words track by $index">\n                                <p class="text-ellipsis">{{word.lemma}}</p>\n\n                                <md-button palette-background="pink:400" ng-click = "removeWord($index)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n                            </md-list-item>\n                        </md-list>\n                    </div>\n\n                    <div class="add-words">\n                        <div>\n                            <div style = "overflow: auto;">\n                                <div style = "float:left;width:50%;" ng-repeat="word in words">\n                                    <md-checkbox ng-change = "selectWord()" ng-model="word.check" aria-label="{{word.lemma}}">\n                                        <span >{{word.lemma}}</span>\n                                    </md-checkbox>\n                                </div>\n                            </div>\n                            \n                            <md-input-container>\n                                <label for="answer-one">Enter words / phrases individually</label>\n                                <input type="text" label="Enter words / phrases individually" name="Enter words / phrases individually" ng-model="input.new_word">\n                            </md-input-container>\n                            \n                        </div>\n\n                        <p ng-if = "wordInList(input.new_word)">Word already in list</p>\n                        <div layout="row" layout-sm="column">\n                            \n                            <md-button flex  ng-disabled = \'!input.new_word || wordInList(input.new_word)\' ng-click="addNewWord(input.new_word)" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="edit">Add</md-button>\n\n                            <md-button flex ng-if = "!show_class_select && !option_words"  ng-click="showClassLoad()" palette-background="pink:400" class="md-raised md-primary" aria-label="Load class list">Load class list</md-button>\n\n                            <md-button flex ng-if = "show_class_select || option_words"  ng-click="closeClassLoad()" palette-background="pink:400" class="md-raised md-primary" aria-label="Close class list">Close list</md-button>\n                        </div>\n                        \n\n\n                        <md-list ng-if = "option_words">\n                            <md-list-item class = "hand" ng-repeat="word in option_words">\n                               \n                                <p class="text-ellipsis">{{word}}</p>\n                                <md-button  ng-disabled = \'wordInList(word)\' palette-background="pink:400"  ng-click="addNewWord(word)"  class="md-raised md-primary" aria-label="use link">Add</md-button>\n                                <md-divider ng-hide="$last"></md-divider>\n                            </md-list-item>\n                        </md-list>\n\n\n                        <md-list ng-if = "show_class_select && !option_words">\n                            <p>Select a class and this will load the class Study List</p>\n                            <md-list-item class = "hand" ng-repeat="cl in myClasses">\n                               \n                                 <p class="text-ellipsis">{{cl.get(\'name\')}}</p>\n                                 \n\n                                <md-button  ng-disabled = \'disable_load_class\' palette-background="pink:400" ng-click = "selectClass(cl)"  class="md-raised md-primary" aria-label="use link">Load list</md-button>\n                            </md-list-item>\n                        </md-list>\n                    </div>\n\n                    <div class="search-top" ng-if = "!input.new_word">\n                        <md-input-container flex>\n                            <label>Search by word / phrase or subject</label>\n                            <input ng-model-options=\'{ debounce: 1500 }\' ng-change = "searchInputChange()" ng-model = input.search_word type="text">\n                        </md-input-container>\n\n                        <div ng-if = "input.search_word && !option_words" >\n                            <md-list>\n                                <md-list-item class = "hand" ng-repeat="cat in searchWordList" ng-if = "cat.get(\'children_data_word\').length >=3">\n                                    <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                                     <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n\n                                    <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "Select(cat)"  class="md-raised md-primary" aria-label="use link">Select</md-button>\n\n                                    <md-divider ng-hide="$last"></md-divider>\n                                </md-list-item>\n                            </md-list>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/note-manage-pop-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Note manage</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            \n\n\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/study-notes/dialogs/pop-slideshow-image-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Slideshow</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="">\n        <div>\n            <div ng-if = "!category && !show_create_form">\n                <md-button palette-background="pink:400" ng-click="showCreateForm()" class="margin-left-0 md-raised md-primary" aria-label="create Slideshow">create Slideshow</md-button>\n\n                <md-list>\n                    <md-list-item class = "margin-bottom-16 hand" ng-repeat="cat in categorys" style = "flex-wrap:wrap;">\n                        \n\n                         <p class="text-ellipsis">{{cat.get(\'title\')}}</p>\n                        \n\n\n                        <div flex = 100>\n                            <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "Select(cat)"  class="margin-left-0 md-raised md-primary" aria-label="use">use</md-button>\n\n                            <md-button palette-background="pink:400" ng-click = "editCategory(cat)"  class="margin-left-0 md-raised md-primary" aria-label="Use it">edit</md-button>\n\n                            <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "showDeleteCategory(cat)"  class="margin-left-0 md-raised md-primary" aria-label="Remove">Remove</md-button>\n                        </div>\n\n                        <div flex = 100  class="remove-ask" ng-if = "cat.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteCategory(cat)"  class="margin-left-0 md-raised md-primary" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(cat)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n            </div>\n        </div>\n\n        <md-content ng-if = "category || show_create_form" style= "padding: 0 8px;">\n            <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n            <md-input-container>\n                <label for="title">Add a title for the slideshow</label>\n                <input ng-model-options=\'{ debounce: 500 }\'  ng-change = "createCategory()" id="title" label="title" name="title" type = "text" ng-model = "data.title" >\n            </md-input-container>\n            \n            <div class="search">\n\n                <h3 class = "md-title font-purple">Image</h3>\n                <md-input-container layout-padding ng-if = "!data.image_link">\n                    <label for="lemma_search">Enter words, phrases or title</label>\n                    <input id="lemma_search" label="lemma_search" name="lemma_search" type="text" ng-model="data.lemma_search"/>\n                </md-input-container>\n                \n                <md-button ng-if = "user.get(\'admin\')" palette-background="pink:400" ngf-select ng-model="data.file" ngf-multiple="false" ng-disabled = "uploading" class="margin-left-0 md-raised md-primary">Select file</md-button>\n\n                <md-button ng-if = "!data.image_link" ng-disabled = \'data.lemma_search == "x" || !data.lemma_search || data.disabled_search\' palette-background="pink:400" ng-click="searchImages()" class="md-raised md-primary margin-left-0" aria-label="Search">Search</md-button>\n\n                <md-button ng-if = "!data.image_link" ng-disabled = \'data.lemma_search == "x" || !data.lemma_search || data.disabled_search\' palette-background="pink:400" ng-click="searchCategoryImages()" class="md-raised md-primary margin-left-0" aria-label="Search category">Search category</md-button>\n\n                <p ng-if = "upload_obj.message">{{upload_obj.message}}</p>\n                \n\n                <p ng-if = "uploading">You can only upload copyright free images!</p>\n\n            </div>\n\n            <div ng-if = "searchWordList && !select_words" >\n\n                <div ng-if = "searchWordList && !searchWordList[0]">\n                    <gotoaddcategory></gotoaddcategory>\n                </div>\n\n                <md-list>\n                    <md-list-item class = "hand" ng-repeat="cat in searchWordList" ng-if = "cat.get(\'children_data_word\').length >= 1">\n                        <p ng-if = "cat.get(\'type\') == \'word\' " class="text-ellipsis" ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})">{{cat.get(\'name\')}}</p>\n\n                         <p ng-if = "cat.get(\'type\') == \'category\' " class="text-ellipsis"  ui-sref="admin-panel.default.notice-category({parent_cat:cat.id,page:1})" >{{cat.get(\'name\')}}</p>\n                        \n\n\n                        <md-button ng-disabled = \'cat.disable\' palette-background="pink:400" ng-click = "SelectAddCat(cat)"  class="md-raised md-primary" aria-label="use link">Select</md-button>\n\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n            </div>\n\n            <div ng-if = "select_words" style = "overflow:auto;">\n\n                <div>\n                    <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="createSlideShows(select_words)" palette-background="pink:400" class="md-raised md-primary" aria-label="add slide/s ">add slide/s</md-button>\n                </div>\n\n                <div style = "float:left;width:50%;" ng-repeat="word in select_words">\n                    <md-checkbox ng-model="word.check" aria-label="{{word.get(\'name\')}}">\n                        <span >{{word.get(\'name\')}}</span>\n                    </md-checkbox>\n                </div>\n\n\n            </div>\n\n            <div class="slideshow" ng-if = "link">\n                <div class="center">\n                    <img ng-src="{{link}}" alt="image" style = "height: 500px"/>\n                </div>\n                \n                <md-input-container>\n                    <label for="summary">Add text over the image</label>\n                    <textarea ng-change = "saveSummary(summary)" ng-model-options=\'{ debounce: 100 }\' label="Summary" name="summary" ng-model="summary">\n                        \n                    </textarea>\n                </md-input-container>\n\n                <md-input-container>\n                    <label for="content">Add text below the image</label>\n                    <textarea ng-change = "saveContent(content)" ng-model-options=\'{ debounce: 100 }\' label="Summary" name="content" ng-model="content">\n                        \n                    </textarea>\n                </md-input-container>\n\n                <md-button ng-disabled = "create_disable || !summary" ng-if = "!edit_slideshow" palette-background="pink:400" ng-click = "saveSlideShow()"  class="margin-left-0 md-raised md-primary" aria-label="Add slide">Add slide</md-button>\n\n                <md-button ng-disabled = "create_disable" ng-if = "edit_slideshow" palette-background="pink:400" ng-click = "saveEditSlideShow()"  class="margin-left-0 md-raised md-primary" aria-label="Save">Save</md-button>\n            </div>\n\n            <div class="images-list" ng-if = "imagesList[0]">\n                \n                <div>\n                    <div  ng-repeat="img in imagesList track by $index" class="hand avatar-images" ng-click = "useImage(img.replace(\'http://cdn\',\'//cdn\'))" ng-if = "img">\n                        <img ng-src="{{img.replace(\'http://cdn\',\'//cdn\')}}" alt="image" class="make-round" width="150"  height="150"/>\n                    </div>\n                </div>\n\n                <div class="clear"></div>\n                \n            </div>\n            \n            <div ng-if = "!search_word_list[0]">\n                <md-list class="search-list">\n                    <md-list-item class="hand" ng-repeat="slideshow in slideshows track by $index">\n                        <p>\n                            <img ng-src="{{slideshow.get(\'link\')}}" alt="image" class="make-round" width="150"  height="150"/>\n                        </p>\n                        <p>{{slideshow.get(\'summary\')}}</p>\n                        <md-button ng-click="editSlideShow(slideshow)" class="md-raised md-primary" palette-background="pink:400" aria-label="Edit">\n                            Edit\n                        </md-button>\n                        <md-button ng-click="removeSlideShow(slideshow)" class="md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                            Remove\n                        </md-button>\n\n                        <md-button ng-Click="slideUp(slideshow,slideshows)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="slideDown(slideshow,slideshows)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n                    </md-list-item>\n                </md-list>\n            </div>\n            \n            \n            <p>To add the exercise, go back with < and select USE</p>\n\n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        \n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/study-notes/dialogs/progress-course-dialog.tmpl.html",'<md-dialog class = "course-progress-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-gap-fill" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Progress test</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n\n    \n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content>\n            <div ng-if = "type != \'my_progress\' ">\n                <md-button style = "margin-left: 0;" ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n            </div>\n\n            <div ng-if = "type == \'my_progress\' " class="my-grammars">\n                <md-button style = "margin-left: 0;" ng-click="showCreateProgress()" palette-background="pink:400" class="md-raised md-primary" aria-label="create progress test">create progress test</md-button>\n\n                <md-list>\n                    <md-list-item style = "flex-wrap:wrap;" class = "margin-bottom-16 relative hand flex-warp" ng-repeat="item in grammars track by $index" ng-if = "item.get(\'name\')">\n                        \n                        <p class = "text-ellipsis">\n                            {{item.get(\'name\')}}\n                            \n                        </p>\n                        \n                        <div flex = 100>\n                            <md-button ng-if = "!item.retake"  ng-click = \'saveItemRetake(item)\' ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="myPurple:A100" aria-label="enable retakes">\n                                enable retakes\n                            </md-button>\n\n                            <md-button ng-if = "item.retake"  ng-click = \'saveItemRetake(item)\' ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="myPurple:700" aria-label="disable retakes">\n                                disable retakes\n                            </md-button>\n\n                            <md-button ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n\n                            <md-button ng-click="edit(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                edit\n                            </md-button>\n\n                            <md-button ng-click="removeASK(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                remove\n                            </md-button>\n                        </div>\n\n                        <div flex = 100  class="remove-ask" ng-if = "item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteGrammar(item)"  class="margin-left-0 md-raised md-primary" aria-item="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n\n                        <md-divider ng-hide="$last"></md-divider>\n\n                        \n                    </md-list-item>\n                </md-list>\n\n\n                \n                \n            </div>\n\n            <div ng-if = "type == \'create_progress\' " class="create_progress">\n                <md-input-container>\n                    <label for="answer-one">Title</label>\n                    <input ng-change = "save()" ng-model-options=\'{ debounce: 500 }\' type="text" label="title" name="title" ng-model="input.title">\n                </md-input-container>\n                \n\n                <div ng-if = "action == \'load_bottons\'  && input.title.length >3" class="load-bottoms">\n                    \n                    <div class="button">\n                        <md-button ng-click="load(\'target_language\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="load target language">\n                            load target language\n                        </md-button>\n\n                        <md-button ng-click="load(\'dialogue\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="load dialogue">\n                            load dialogue\n                        </md-button>\n\n                        <md-button ng-click="load(\'reading\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="load reading">\n                            load reading\n                        </md-button>\n\n                        <md-button ng-click="load(\'free_practice\')" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="load free practice">\n                            load free practice\n                        </md-button>\n                    </div>\n\n                    <div>\n                        <md-list >\n                            <md-list-item style = "flex-wrap:wrap;" class = "relative hand flex-warp" ng-repeat="item in progress_items track by $index">\n                                \n                                <p>\n                                    <span style = "margin-right:16px;">{{item.name}}</span>\n                                    <span style = "margin-right:8px;font-weight: bold" ng-repeat="(key, value) in match_exercises" ng-if = "item[key]">{{value.short_name}}</span>\n                                </p>\n\n                                <md-button ng-click="editItem(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                    edit\n                                </md-button>\n\n                                <md-button ng-click="removeASK(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                    remove\n                                </md-button>\n\n                                <div flex = 100  class="remove-ask" ng-if = "item.remove_show">\n                                    <p>Do you really want to delete this?</p>\n                                    <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteItem(item)"  class="margin-left-0 md-raised md-primary" aria-item="Yes">Yes</md-button>\n\n                                    <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                                </div>\n\n\n                                <md-divider ng-hide="$last"></md-divider>\n\n                                \n                            </md-list-item>\n                        </md-list>\n                    </div>\n                </div>\n\n                <div ng-if = "action == \'show_system_grammars\' ">\n                    <div>\n                        <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                            <md-option value=\'all\'>ALL</md-option>\n                            <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                        </md-select>\n                    </div>\n                    \n                    <div ng-if = "test_types.name">\n                        <p>{{test_types.name}}</p>\n\n                        <div class="check-box" ng-if = "test_types.grammar_type != \'free_practice\' ">\n\n                            <div style = "display:inline-block"  ng-if = "(test_types.grammar_type == \'target_language\' && value.type == \'normal\') || (test_types.grammar_type == \'dialogue\' && value.type == \'dialogue\' ) || (test_types.grammar_type == \'reading\' && value.type == \'reading\' ) || (test_types.grammar_type == \'free_practice\' && value.type == \'free_practice\' )" ng-repeat="(key, value) in match_exercises">\n                                <md-button palette-background="myPurple:A100" ng-if = "!test_types[key]"  ng-click = "triggerSelect(value,test_types)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n\n                                <md-button  ng-if = "test_types[key]" palette-background="myPurple:700" ng-click = "triggerSelect(value,test_types)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n                            </div>\n\n                        </div>\n\n                        <md-button ng-if = "!edit_item" ng-click="addProgressItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="add">\n                            add\n                        </md-button>\n\n                        <md-button ng-if = "edit_item" ng-click="saveEditProgressItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="save">\n                            save\n                        </md-button>\n                    </div>\n                    \n\n                    \n                    <div ng-if = "!test_types.name">\n                        <md-list >\n                            <md-list-item style = "flex-wrap:wrap;" class = "relative hand flex-warp" ng-repeat="item in items track by $index" ng-if = "item.get(\'name\') || item.get(\'title\')">\n                                \n                                <p ng-if = "item.get(\'name\')">{{item.get(\'name\')}}</p>\n                                <p ng-if = "!item.get(\'name\') && item.get(\'title\')">{{item.get(\'title\')}}</p>\n\n                                <p ng-if = "show_system_grammar">{{item.get(\'level\')}}</p>\n                                \n                                <md-button ng-click="selectItem(item)" class="md-raised md-primary" palette-background="pink:400" aria-label="selectItem">\n                                    select\n                                </md-button>\n\n\n                                <md-divider ng-hide="$last"></md-divider>\n\n                                \n                            </md-list-item>\n                        </md-list>\n                    </div>\n                    \n                </div>\n            </div>\n\n            \n\n            \n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row" style = "flex-wrap: wrap;">\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/reading-course-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="80" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Reading exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content>\n            <div ng-if="show_form || grammar">\n                <md-button style="margin-left: 0;" ng-disabled=\'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back ">\n                    <md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon>\n                </md-button>\n                <md-input-container>\n                    <label for="title">Title</label>\n                    <textarea ng-change="saveTitle()" ng-model-options=\'{ debounce: 500 }\' id="title" label="title" name="title" ng-model="data.title" />\n                </md-input-container>\n                <h4 class="font-purple strong">Reading</h4>\n\n                <md-input-container>\n                    <label for="listen">Add reading text</label>\n                    <textarea id="listen" label="listen" name="listen" ng-model="data.listen" ng-change="updateListen()" />\n                </md-input-container>\n\n                <h4 class="font-purple strong">Reading gap-fill</h4>\n\n\n                <div class="white border padding-10 md-headline" ng-if = "data.listen">\n                    <p>Click the lemma to select or remove</p>\n                    <span class="hand" ng-click="anwserGapFill(lemma, $index)" ng-repeat="lemma in listen_arr track by $index" >\n                        <span ng-if = "lemma != \'-breakline-\' && inGapFill($index)">______{{inGapFill($index).fixed_leave}}</span>\n\n                        <span ng-if = "lemma != \'-breakline-\' && !inGapFill($index)">{{lemma}}</span>\n\n                        <span ng-if = "lemma == \'-breakline-\' "></br></span>\n                    </span>\n                    <div class="clear"></div>\n                </div>\n                \n                <md-list class="search-list">\n                    <md-list-item layout-wrap ng-if="question.q" class="hand" ng-repeat="question in question_objs track by $index">\n                        <p flex=1 00>{{question.q}} -- {{question.a}}</p>\n                        <div flex=1 00>\n                            <md-button ng-Click="readingUp(question,question_objs)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                                <md-icon style="color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up"></md-icon>\n                            </md-button>\n                            <md-button ng-Click="readingDown(question,question_objs)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                                <md-icon style="color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down"></md-icon>\n                            </md-button>\n                            <md-button ng-click="editQuestion(question)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                edit\n                            </md-button>\n                            <md-button ng-click="removeQuestion($index)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                remove\n                            </md-button>\n                        </div>\n                    </md-list-item>\n                </md-list>\n                \n                <div>\n                    <md-input-container>\n                        <label for="act7_q_{{obj.id}}">Add a question</label>\n                        <textarea id="listen" label="act7_q" name="act7_q" ng-model="obj.q" />\n                    </md-input-container>\n                    <p>Answer: <span>{{obj.a}}</span></p>\n                    <div class="white border padding-10 md-headline" ng-if="data.listen">\n                        <p class="font-red" ng-if="!obj.a">Click to select answer!</p>\n                        <p class="font-red" ng-if="obj.answer_message">{{obj.answer_message}}</p>\n                        <span class="hand" ng-click="anwser(lemma, $index, obj)" ng-repeat="lemma in listen_arr track by $index">\n                            <span ng-if = "lemma != \'-breakline-\' ">{{lemma}}</span>\n\n                            <span ng-if = "lemma == \'-breakline-\' "></br></span>\n                        </span>\n                        <div class="clear"></div>\n                    </div>\n                    <md-button ng-disabled="!obj.a" ng-click="clear(obj)" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="Clear">Clear</md-button>\n                    <md-button ng-disabled="!obj.a || !obj.q" ng-click="saveQuestion(obj)" palette-background="pink:400" class=" md-raised md-primary" aria-label="save">save</md-button>\n                </div>\n                <p>To add the exercise, go back with\n                    < and select USE</p>\n            </div>\n\n            <div ng-if = "select_grammar">\n                <md-input-container>\n                    <label>Exercise title</label>\n                    <input ng-model = select_grammar.name type="text">\n                </md-input-container>\n\n                 <md-button ng-click="use(select_grammar)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                    Use\n                </md-button>\n            </div>\n\n            <div class="system-grammar" ng-if="!grammar && !show_form && !select_grammar">\n                <md-button ng-if="show_system_grammar" style="margin-left: 0;" ng-disabled=\'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back ">\n                    <md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon>\n                </md-button>\n                <md-button style="margin-left: 0;" ng-disabled=\'disable_create_btn\' ng-click="showCreateReading()" palette-background="pink:400" class="md-raised md-primary" aria-label="create reading">create reading</md-button>\n                <md-button ng-if="!show_system_grammar && user.get(\'admin\')" style="margin-left: 0;" ng-disabled=\'disable_create_btn\' ng-click="showSystemGrammar()" palette-background="pink:400" class="md-raised md-primary" aria-label="load preset exercise">load preset exercise</md-button>\n                <div ng-if="show_system_grammar">\n                    <md-select ng-change="changeFilter(filter)" style="margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{outline.id}} ng-repeat="outline in outlines">{{outline.get(\'name\')}}</md-option>\n                    </md-select>\n                </div>\n                <md-list>\n                    <md-list-item style="flex-wrap:wrap;" class="margin-bottom-16 relative hand" ng-repeat="item in items">\n                        <p class="text-ellipsis" ng-if="!show_system_grammar">{{item.get(\'title\')}}</p>\n                        <p ng-if="show_system_grammar">{{item.get(\'name\')}}</p>\n                        <p ng-if="show_system_grammar">{{item.get(\'level\')}}</p>\n                        <div flex="100">\n                            <md-button  ng-disabled = "notSelectExercises(item)" ng-if="!show_system_grammar" ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n                            <md-button ng-if="!show_system_grammar" ng-click="editGrammar(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                edit\n                            </md-button>\n\n                            <md-button ng-if="!show_system_grammar" ng-click="editSelectExercise(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="select exercise/s">\n                                select exercise/s\n                            </md-button>\n\n                            <md-button ng-if="!show_system_grammar" ng-click="showRemove(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n                            <md-button ng-disabled = "item.btn_disable" ng-if="show_system_grammar" ng-click="createBySystemItem(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                select\n                            </md-button>\n                        </div>\n\n                        <div class="remove-ask" flex = 100 ng-if = "item.select_exercise_show">\n                            <div style = "display:inline-block" ng-if = " value.type == \'reading\'" ng-repeat="(key, value) in match_exercises">\n                                <md-button palette-background="myPurple:A100" ng-if = "!item.get(key)"  ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n\n                                <md-button  ng-if = "item.get(key)" palette-background="myPurple:700" ng-click = "triggerSelect(value,item)"   class="margin-left-0 md-raised md-primary" aria-label="{{value.short_name}}">{{value.short_name}}</md-button>\n                            </div>\n                            \n                        </div>\n\n                        <div flex=1 00 class="remove-ask absolute" ng-if="item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style="background-color: #a0a0a0;border-color:#a0a0a0" ng-click="deleteGrammar(item)" class="md-raised md-primary margin-left-0" aria-label="Yes">Yes</md-button>\n                            <md-button palette-background="pink:400" ng-click="removeASKHide(item)" class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n            </div>\n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>\n'),e.put("app/study-notes/dialogs/select-study-note-folder-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Select study note folder</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <div class="classes-wrap">\n                <md-button  ng-repeat="cls in myClasses" palette-background="pink:400" ng-click = "copyNote(cls)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students" ng-disabled="cls.btn_disable">copy to {{cls.get(\'name\')}}</md-button>\n            </div>\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/send-to-students-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Select Class</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content >\n            <div class="classes-wrap">\n                <md-button  ng-repeat="cls in myClasses" palette-background="pink:400" ng-click = "send(cls)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Send to students" ng-disabled="cls.disable">send to {{cls.get(\'name\')}}</md-button>\n            </div>\n\n            <div class="border-purple" ng-if = "send_email_message" style = " margin-left: 8px; margin-top: 8px;">\n                {{send_email_message}}\n            </div>\n        </md-content>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/view-course-dialog.tmpl.html",'<md-dialog flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Course details</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container" style = "padding:20px;">\n        <md-content  ng-if = "course.get(\'is_course\')">\n            <div class="join-course" >\n                <p><span class = "span-text-padding green-bg">TITLE</span>{{course.get(\'name\')}}</p>\n                <p><span class = "span-text-padding grey-bg">ABOUT</span></br>{{course.get(\'dec\')}}</p>\n\n                <p ng-if = "course.get(\'level\')"><span class = "span-text-padding grey-bg">LEVEL</span>{{course.get(\'level\')}}</p>\n\n                <p ng-if = "course.get(\'payment_type\') == \'free\' "><span class = "span-text-padding grey-bg">FREE</span></p>\n                <p ng-if = "course.get(\'payment_type\') == \'paid\' "><span class = "span-text-padding grey-bg">PAID</span>{{course.get(\'cost\')}}</p>\n                \n                <p ng-if = "course.get(\'payment_type\') == \'paid\' "><span class = "span-text-padding grey-bg">FEE</span></p>\n\n                <p><span class = "span-text-padding purple-bg">AUTHOR</span>{{course.get(\'createdBy\').get(\'username\')}}</p>\n\n                <p ng-if = "course.get(\'access_code\')"><span class = "span-text-padding purple-bg">ACCESS CODE</span> {{course.click_access_code}}</p>\n\n                <div>\n                   <md-button ng-class = "accessCodeClass(obj)" ng-repeat="obj in course.access_code_objs" ng-click = "addAccessCode(obj)" palette-background="pink:400" style = "min-width: 80px;" class="margin-left-0 md-raised md-primary" aria-label="{{obj.lemma}}">{{obj.lemma}}</md-button>\n                </div>\n\n            </div>\n        </md-content>\n\n        <md-content  ng-if = "course.is_vocab">\n            <div class="join-course" >\n                <p><span class = "span-text-padding green-bg">TITLE</span>{{course.name}}</p>\n                <p><span class = "span-text-padding grey-bg">ABOUT</span></br>Study and revise vocabulary. You will be tested on words and phrases, as well as spelling, pronunciation, form, definition and use. Vocabulary exercises also test articles: \'a\', \'an\' and \'the\'. Everything you need to improve on your vocabulary!</p>\n\n                <p ng-if = "course.get(\'level\')"><span class = "span-text-padding grey-bg">LEVEL</span>{{user.get(\'level\')}}</p>\n\n                <p><span class = "span-text-padding grey-bg">FREE</span></p>\n\n                <p><span class = "span-text-padding purple-bg">AUTHOR</span>{{course.teacher_name}}</p>\n\n            </div>\n        </md-content>\n    </md-dialog-content>\n\n\n\n\n    <div class="md-actions" layout="row" style = "flex-wrap: wrap;">\n        <p flex = 100 ng-if = "user.get(\'user_role\') == \'teacher\' ">This course is not available for users with teacher accounts!</p>\n        <p flex = 100 ng-if = "user.get(\'user_role\') == \'student\' && user.get(\'course\') != \'\' && getVocabCourseName().name && course.is_vocab">{{\'COURRSEWPAGE.You_need_to_leave\' | translate}} "{{getVocabCourseName().name}}" {{\'COURRSEWPAGE.then_you_can\' | translate}}</p>\n\n\n        <md-button ng-disabled = "(course.get(\'access_code\') && course.click_access_code != course.get(\'access_code\')) || inCourse() || (course.is_vocab && user.get(\'course\')) || user.get(\'user_role\') == \'teacher\'" ng-click = "Join(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Add course">{{\'COURRSEWPAGE.Add_course\' | translate}}</md-button>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/view-notes-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="50" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Notes</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container">\n        <md-content>\n            <md-list>\n                <p ng-if="generals[0]" class="study-note-type-title light-grey" style="color:#5d00bb;font-size:24px;">General</p>\n                <md-list-item ng-repeat="note in generals track by $index">\n                    <div class="md-list-item-text" layout="column">\n                        <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        \n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n                <p ng-if="grammar[0]" class="study-note-type-title light-grey" style="color:#5d00bb;font-size:24px;">Grammar</p>\n                <md-list-item ng-repeat="note in grammar track by $index">\n                    <div class="md-list-item-text" layout="column">\n                        <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        \n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n                <p ng-if="vocabulary[0]" class="study-note-type-title light-grey" style="color:#5d00bb;font-size:24px;">Vocabulary</p>\n                <md-list-item ng-repeat="note in vocabulary track by $index">\n                    <div class="md-list-item-text" layout="column">\n                        <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        \n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n                <p ng-if="feedback[0]" class="study-note-type-title light-grey" style="color:#5d00bb;font-size:24px;">Feedback</p>\n                <md-list-item ng-repeat="note in feedback track by $index">\n                    <div class="md-list-item-text" layout="column">\n                        <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        \n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n                <p ng-if="homework[0]" class="study-note-type-title light-grey" style="color:#5d00bb;font-size:24px;">Homework</p>\n                <md-list-item ng-repeat="note in homework track by $index">\n                    <div class="md-list-item-text" layout="column">\n                        <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        \n                    </div>\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </md-content>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button ng-if="user.id == note.get(\'user\')" style="color:#fff" ng-click="edit()" palette-background="pink:400" class="md-raised md-primary" aria-label="Edit">Edit</md-button>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/vocab-course-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Vocabulary exercise</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n    \n\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <md-content>\n\n            \n            <div ng-if = "edit_form || grammar">\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <div>\n                    <div>\n                        <md-input-container>\n                            <label>Vocabulary exercise title</label>\n                            <input ng-change = "createCourse()" ng-model = input.title type="text" ng-model-options=\'{ debounce: 1500 }\'>\n                        </md-input-container>\n                    </div>\n                </div>\n                \n\n\n\n                <div ng-if = "grammar">\n                    <md-input-container class="">\n                        <label>Enter a word or phrase</label>\n                        <input ng-change = "searchInputChange(search_category)" ng-model-options=\'{ debounce: 1000 }\' id="search_category" label="search_category" name="search_category" type="text" ng-model="search_category" />\n                    </md-input-container>\n\n                    <div ng-if = "search_category && search_words && !search_words[0]">\n                        <gotoaddcategory></gotoaddcategory>\n                    </div>\n\n                    <md-list class="search-list" ng-if = "!view_words">\n                        <md-list-item class="hand" ng-repeat="word in search_words track by $index">\n                            \n                            <p>\n                                {{word.get(\'name\')}}\n                            </p>\n\n                            <md-button ng-disabled = "word.disable" ng-click="selectWord(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="view">\n                                view\n                            </md-button>\n                        </md-list-item>\n                    </md-list>\n\n                    <div ng-if = "view_words">\n                        <p>Select 1 at least!</p>\n                        <md-button ng-disabled = "word_add_disable" ng-click="addVocabCategoryWitchSelect()" class="md-raised md-primary margin-left-0" palette-background="pink:400" aria-label="add">\n                            add\n                        </md-button>\n                        \n                        <div layout="row" layout-wrap>\n                            <div flex = 50 ng-repeat="word in view_words track by $index" >\n                                 <md-checkbox class="margin-left-0" ng-model="word.checked" aria-label="Model">\n                                    {{word.get(\'name\')}}\n                                </md-checkbox>\n                            </div>\n                        </div>\n\n                        \n                    </div>\n\n\n                    <md-list class="search-list">\n                        <md-list-item  style = "flex-wrap:wrap;" class = "relative hand flex-warp" ng-repeat="voca in vocas track by $index">\n                            <p>\n                                <span>{{voca.get(\'lemma\')}}</span>\n                            </p>\n                            <md-button ng-click="showRemoveVocab(voca)" class="md-raised md-primary" palette-background="pink:400" aria-label="remove">\n                                remove\n                            </md-button>\n\n                            <md-button ng-Click="vocaUp(voca,vocas)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                                <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                            </md-button>\n\n                            <md-button ng-Click="vocaDown(voca,vocas)" palette-background="pink:400" class="margin-left-0 md-primary" aria-label="delete">\n                                <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                            </md-button>\n\n                            <div flex = 100 class="remove-ask" ng-if = "voca.remove_show">\n                                <p>Do you really want to delete this?</p>\n                                <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "removeVoca(voca)"  class="md-raised md-primary margin-left-0 margin-left-0" aria-label="Yes">Yes</md-button>\n\n                                <md-button  palette-background="pink:400" ng-click = "removeASKHide(voca)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                            </div>\n                        </md-list-item>\n                    </md-list>\n                </div>\n\n                <p>To add the exercise, go back with < and select USE</p>\n            </div>\n\n\n            <div class="system-grammar" ng-if = "!grammar && !edit_form">\n\n                \n\n                <md-button ng-if = "show_system_grammar" style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="back()" palette-background="pink:400" class="md-raised md-primary" aria-label="Back "><md-icon class=\'hand\' md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n\n                <md-button style = "margin-left: 0;" ng-disabled = \'disable_create_btn\' ng-click="showCreateCourse()" palette-background="pink:400" class="md-raised md-primary" aria-label="create vocabulary exercise">create vocabulary exercise</md-button>\n\n\n                <md-list>\n                    <md-list-item style = "flex-wrap:wrap;" class = "margin-bottom-16 relative hand flex-warp" ng-repeat="item in items track by $index" ng-if = "item.get(\'name\')">\n                        \n                        <p class = "text-ellipsis">{{item.get(\'name\')}}</p>\n                        \n                        <div flex = 100>\n                            <md-button ng-click="use(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                Use\n                            </md-button>\n\n                            <md-button ng-if = "!show_system_grammar" ng-click="editGrammar(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Use">\n                                edit\n                            </md-button>\n\n                            <md-button ng-if = "!show_system_grammar" ng-click="showRemove(item)" class="margin-left-0 md-raised md-primary" palette-background="pink:400" aria-label="Remove">\n                                Remove\n                            </md-button>\n                            \n                        </div>\n                        \n\n                        <div class="remove-ask" ng-if = "item.remove_show">\n                            <p>Do you really want to delete this?</p>\n                            <md-button style = "background-color: #a0a0a0;border-color:#a0a0a0" ng-click = "deleteGrammar()"  class="md-raised md-primary margin-left-0 margin-left-0" aria-label="Yes">Yes</md-button>\n\n                            <md-button  palette-background="pink:400" ng-click = "removeASKHide(item)"  class="margin-left-0 md-raised md-primary" aria-label="No">No</md-button>\n                        </div>\n\n\n                        <md-divider ng-hide="$last"></md-divider>\n\n                        \n                    </md-list-item>\n                </md-list>\n\n            </div>\n            \n        </md-content>\n    </md-dialog-content>\n\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/study-notes/dialogs/youtube-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>YouTube</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <md-input-container layout-padding>\n                    <label for="lemma_search">Enter words, phrases or title</label>\n                    <input id="lemma_search" label="lemma_search" name="lemma_search" type="text" ng-model="data.lemma_search"/>\n                </md-input-container>\n\n                \n                <md-button ng-disabled = "!data.lemma_search || data.lemma_search == \'x\' " palette-background="pink:400" ng-click="searchYoutube()" class="margin-left-0 md-raised md-primary" aria-label="Search">Search</md-button>\n\n                <md-button ng-disabled = "!data.lemma_search || data.lemma_search == \'x\' " palette-background="pink:400" ng-click="searchYoutubeId()" class="margin-left-0 md-raised md-primary" aria-label="Search">Search id</md-button>\n\n\n                <div ng-if = "youtubelink">\n                    <div class=\'embed-container\'><iframe ng-src={{youtubelink}} frameborder=\'0\' allowfullscreen></iframe></div>\n\n\n                    <md-input-container layout-padding>\n                        <label for="title">Enter title</label>\n                        <input id="title" label="title" name="title" type="text" ng-model="data.title"/>\n                    </md-input-container>\n\n                    <md-button ng-disabled = "!data.title" palette-background="pink:400" ng-click="userVideoLink(youtubelink)" class="margin-left-0 md-raised md-primary" aria-label="Use">Use</md-button>\n                </div>\n\n                <div ng-if = "videos[0]">\n                    <div  ng-repeat="video in videos track by $index" class="hand youtube-video" ng-click = "userVideo(video)">\n                        <img ng-src="{{video.snippet.thumbnails.medium.url}}" alt="image"  width="320"  height="180"/>\n                        <p class = "title">{{video.snippet.title}}</p>\n                    </div>\n                </div>\n\n\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/study-notes/template/correction.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Error correction</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n             <correction></correction>\n\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/course-home.tmpl.html",'<md-content  class="tm course-home" layout="column">\n    \n    \n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            \n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n\n\n\n    <div class="filter white-tm-bg" layout-margin>\n        <md-button style = "margin:8px;"  ng-click = "showAllCourses()" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Study">{{\'COURRSEWPAGE.show_all_courses\' | translate}}</md-button>\n\n\n    	<md-select layout-padding placeholder="Select level" ng-model="level" ng-change = "filterCourse()"> \n	        <md-option value="A1, Beginner">A1, Beginner Level</md-option>\n            <md-option value="A2, Elementary">A2, Elementary Level</md-option>\n            <md-option value="B1, Intermediate">B1, Intermediate Level</md-option>\n            <md-option value="B2, Upper Intermediate">B2, Upper Intermediate Level</md-option>\n            <md-option value="C1, Low Advanced">C1, Low Advance Level</md-option>\n            <md-option value="C2, Advanced">C2, Advanced Level</md-option>\n	    </md-select>\n    </div>\n\n    \n\n    <div layout = "row" class = "hand course-tile" layout-wrap layout-align="start start">\n        <div ng-if = "showVocabCourse(course) && !inCourse(course)" flex = \'50\' flex-sm = \'100\' layout-padding ng-repeat="course in vocab_courses track by $index">\n            <div class="home-frame center box-shadow" layout-padding >\n                <div ng-click = "viewCourse(course)" layout = "row" class = "hand" layout-wrap layout-align="start start">\n\n                    <div flex="20" flex-xs = 30 flex-sm = 30 class="avatar" layout-padding>\n                        <div class="name-wrap">\n                            <md-icon  class="font-size-5 course-vocab-avatar" md-font-icon="fa fa-history"></md-icon>\n                        </div>\n                        <div class="user-name" style = "min-height: 80px;">\n                            <span>{{course.teacher_name}}</span>\n                        </div>\n                    </div>\n\n                    <div flex="80" flex-xs = 70 flex-sm = 70 class="course-name relative" layout-align="start center" layout-padding>\n                        \n\n                        <h3 class = "text-align-left relative">\n                            {{course.name}}\n                            <i style = "font-size: 30px; right:0px;" ng-if = "inCourse(course)"  class="fa fa-check-circle absolute-right"></i>\n                        </h3>\n                    </div>\n                        \n\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id != user.id">\n                    \n                    <md-button ng-if = "inCourse(course)" ng-click = "leaveCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Leave">{{\'COURRSEWPAGE.Leave\' | translate}} </md-button>\n\n                   <md-button ng-if = "!inCourse(course)" ng-click = "viewCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Clear">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n\n                   <md-button ng-if = "inCourse(course)" ng-click = "viewCourse(course)" palette-background="myPurple:900"  class="md-raised md-primary"  aria-label="Clear">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id == user.id">\n                    <md-button ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Add content">{{\'COURRSEWPAGE.Add_content\' | translate}}</md-button>\n\n                    <md-button ui-sref="admin-panel.default.class" palette-background="pink:400"  class="right md-raised md-primary" aria-label="edit">{{\'COURRSEWPAGE.edit\' | translate}}</md-button>\n\n                    <md-button ng-click = "viewCourse(course)" palette-background="pink:400"  class="md-raised md-primary"  aria-label="Clear">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n            </div>\n        </div>\n\n\n        <div ng-if = "(!inCourse(course) && !course.hide) || user.get(\'admin\')" flex = \'50\' flex-sm = \'100\' layout-padding ng-repeat="course in courses track by $index">\n            <div class="home-frame center box-shadow" layout-padding >\n                <div ng-click = "viewCourse(course)" layout = "row" class = "hand" layout-wrap layout-align="start start">\n\n                    <div flex="20" flex-xs = 30 flex-sm = 30 class="avatar" layout-padding>\n                        <div class="name-wrap">\n                            <img style = "max-width: 100%;" ng-src="{{course.get(\'createdBy\').get(\'user_avatar\')}}">\n                        </div>\n                        <div class="user-name" style = "min-height: 80px;">\n                            <span>{{course.get(\'createdBy\').get(\'username\')}}</span>\n                        </div>\n                    </div>\n\n                    <div flex="80" flex-xs = 70 flex-sm = 70 class="course-name relative" layout-align="start center" layout-padding>\n                        \n\n                        <h3 class = "text-align-left relative">\n                            {{course.get(\'name\')}}\n                            <i style = "font-size: 30px; right:0px;" ng-if = "inCourse(course)"  class="fa fa-check-circle absolute-right"></i>\n                        </h3>\n                    </div>\n                        \n\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id != user.id">\n                    <md-button ng-if = "inCourse(course)" ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Study">{{\'COURRSEWPAGE.Study\' | translate}}</md-button>\n\n                    <md-button ng-if = "inCourse(course)" ng-click = "leaveCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Leave">{{\'COURRSEWPAGE.Leave\' | translate}}</md-button>\n\n                   <md-button ng-if = "!inCourse(course)" ng-click = "viewCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Clear">{{\'COURRSEWPAGE.View\' | translate}}</md-button>\n\n                   <md-button ng-if = "inCourse(course)" ng-click = "viewCourse(course)" palette-background="myPurple:900"  class="md-raised md-primary"  aria-label="Clear">{{\'COURRSEWPAGE.View\' | translate}}</md-button>\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id == user.id">\n                    <md-button ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Add content">{{\'COURRSEWPAGE.Add_content\' | translate}}</md-button>\n\n                    <md-button ui-sref="admin-panel.default.class" palette-background="pink:400"  class="right md-raised md-primary" aria-label="edit">{{\'COURRSEWPAGE.edit\' | translate}}</md-button>\n\n                    <md-button ng-click = "viewCourse(course)" palette-background="pink:400"  class="md-raised md-primary"  aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n            </div>\n        </div>\n\n\n\n        <div flex = \'50\' flex-sm = \'100\' layout-padding ng-repeat="course in vocab_list track by $index">\n            <div class="home-frame center box-shadow" layout-padding >\n                <div ng-click = "viewCourse(course)" layout = "row" class = "hand" layout-wrap layout-align="start start">\n\n                    <div flex="20" flex-xs = 30 flex-sm = 30 class="avatar" layout-padding>\n                        <div class="name-wrap">\n                            <img style = "max-width: 100%;" ng-src="{{course.teacher_avatar}}">\n                        </div>\n                        <div class="user-name" style = "min-height: 80px;">\n                            <span>{{course.teacher_name}}</span>\n                        </div>\n                    </div>\n\n                    <div flex="80" flex-xs = 70 flex-sm = 70 class="course-name relative" layout-align="start center" layout-padding>\n                        \n\n                        <h3 class = "text-align-left relative">\n                            {{course.name}}\n                            <i style = "font-size: 30px; right:0px;" ng-if = "inCourse(course)"  class="fa fa-check-circle absolute-right"></i>\n                        </h3>\n                    </div>\n                        \n\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id != user.id">\n                    \n                    <md-button ng-if = "inCourse(course)" ng-click = "leaveCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Leave">{{\'COURRSEWPAGE.Leave\' | translate}}</md-button>\n\n                   <md-button ng-if = "!inCourse(course)" ng-click = "viewCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n\n                   <md-button ng-if = "inCourse(course)" ng-click = "viewCourse(course)" palette-background="myPurple:900"  class="md-raised md-primary"  aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id == user.id">\n                    <md-button ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Add content">{{\'COURRSEWPAGE.Add_content\' | translate}}</md-button>\n\n                    <md-button ui-sref="admin-panel.default.class" palette-background="pink:400"  class="right md-raised md-primary" aria-label="edit">{{\'COURRSEWPAGE.edit\' | translate}}</md-button>\n\n                    <md-button ng-click = "viewCourse(course)" palette-background="pink:400"  class="md-raised md-primary"  aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n            </div>\n        </div>\n\n        <div flex = \'50\' flex-sm = \'100\' layout-padding ng-repeat="course in course_list track by $index">\n            <div class="home-frame center box-shadow" layout-padding >\n                <div ng-click = "viewCourse(course)" layout = "row" class = "hand" layout-wrap layout-align="start start">\n\n                    <div flex="20" flex-xs = 30 flex-sm = 30 class="avatar" layout-padding>\n                        <div class="name-wrap">\n                            <img style = "max-width: 100%;" ng-src="{{course.get(\'createdBy\').get(\'user_avatar\')}}">\n                        </div>\n                        <div class="user-name" style = "min-height: 80px;">\n                            <span>{{course.get(\'createdBy\').get(\'username\')}}</span>\n                        </div>\n                    </div>\n\n                    <div flex="80" flex-xs = 70 flex-sm = 70 class="course-name relative" layout-align="start center" layout-padding>\n                        \n\n                        <h3 class = "text-align-left relative">\n                            {{course.get(\'name\')}}\n                            <i style = "font-size: 30px; right:0px;" ng-if = "inCourse(course)"  class="fa fa-check-circle absolute-right"></i>\n                        </h3>\n                    </div>\n                        \n\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id != user.id">\n                    <md-button ng-if = "inCourse(course)" ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Study">{{\'COURRSEWPAGE.Study\' | translate}}</md-button>\n\n                    <md-button ng-if = "inCourse(course)" ng-click = "leaveCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Leave">{{\'COURRSEWPAGE.Leave\' | translate}}</md-button>\n\n                   <md-button ng-if = "!inCourse(course)" ng-click = "viewCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n\n                   <md-button ng-if = "inCourse(course)" ng-click = "viewCourse(course)" palette-background="myPurple:900"  class="md-raised md-primary"  aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n\n                <div class="" layout="row" layout-align="end center" ng-if = "course.get(\'createdBy\').id == user.id">\n                    <md-button ng-click = "goCourse(course)" palette-background="pink:400"  class="right md-raised md-primary" aria-label="Add content">{{\'COURRSEWPAGE.Add_content\' | translate}}</md-button>\n\n                    <md-button ui-sref="admin-panel.default.class" palette-background="pink:400"  class="right md-raised md-primary" aria-label="edit">{{\'COURRSEWPAGE.edit\' | translate}}</md-button>\n\n                    <md-button ng-click = "viewCourse(course)" palette-background="pink:400"  class="md-raised md-primary"  aria-label="VIEW DETAILS">{{\'COURRSEWPAGE.VIEW_DETAILS\' | translate}}</md-button>\n                </div>\n            </div>\n        </div>\n\n    </div>\n\n    \n</<md-content>\n\n'),e.put("app/study-notes/template/gap-fill-quiz.tmpl.html",'<md-content id="gap-fill-quiz" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">Gap-fill</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <gapfill></gapfill>\n        </md-card-content>\n    </md-card>\n    </md-conten>'),e.put("app/study-notes/template/homework.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Writing task</span>\n            </md-card-title-text>\n        </md-card-title>\n\n        <md-card-content>\n            <writing></writing>\n        </md-card-content>\n    </md-card>\n    </md-conten>'),e.put("app/study-notes/template/my-correction.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                My errors</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button  style="margin-left:0"  class="md-raised md-primary" aria-label="My Progress"><span ui-sref = "admin-panel.default.review">My Progress</span> </md-button>\n\n            <md-button palette-background="pink:400" class="md-raised md-primary" aria-label="Clear"><span ui-sref = "admin-panel.default.study-notes-my-quiz">My quizzes</span> </md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My gap-fills"><span ui-sref = " admin-panel.default.study-notes-my-gap-fill">My gap-fills</span></md-button>\n            \n            <md-button disabled = "disabled" palette-background="pink:400"  class="md-raised md-primary" aria-label="Clear"><span ui-sref = " admin-panel.default.study-notes-my-correction">My errors</span></md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My writting"><span ui-sref = " admin-panel.default.study-notes-my-writting">My writing</span></md-button>\n\n            <md-list>\n                <md-list-item ng-repeat="correction in corrections track by $index" >\n                    <p  class = "hand">{{$index + 1}}. {{correction.get(\'mistake_st\')}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = "openLink(correction)" class="md-raised md-primary" aria-label="view">view</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(correction)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n\n             <ad4game></ad4game>\n            \n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/my-gap-fill.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                My gap-fills</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button  style="margin-left:0"  class="md-raised md-primary" aria-label="My Progress"><span ui-sref = "admin-panel.default.review">My Progress</span> </md-button>\n\n            <md-button palette-background="pink:400" class="md-raised md-primary" aria-label="Clear"><span ui-sref = "admin-panel.default.study-notes-my-quiz">My quizzes</span> </md-button>\n\n            <md-button  disabled = "disabled"  palette-background="pink:400"  class="md-raised md-primary" aria-label="My gap-fills"><span ui-sref = " admin-panel.default.study-notes-my-gap-fill">My gap-fills</span></md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="Clear"><span ui-sref = " admin-panel.default.study-notes-my-correction">My errors</span></md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My writting"><span ui-sref = " admin-panel.default.study-notes-my-writting">My writing</span></md-button>\n\n\n            <md-list>\n                <md-list-item ng-repeat="quiz in quizs track by $index">\n                    <p  class = "hand">{{$index + 1}}. {{quiz.get(\'quiz_title\')}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = "openLink(quiz)" class="md-raised md-primary" aria-label="view">view</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n\n             <ad4game></ad4game>\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/my-quiz.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                My exercises</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button  style="margin-left:0"  class="md-raised md-primary" aria-label="My Progress"><span ui-sref = "admin-panel.default.review">My Progress</span> </md-button>\n\n            <md-button disabled = "disabled"  palette-background="pink:400" class="md-raised md-primary" aria-label="Clear"><span ui-sref = "admin-panel.default.study-notes-my-quiz">My quizzes</span> </md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My gap-fills"><span ui-sref = " admin-panel.default.study-notes-my-gap-fill">My gap-fills</span></md-button>\n\n            <md-button palette-background="pink:400"  class="md-raised md-primary" aria-label="Clear"><span ui-sref = " admin-panel.default.study-notes-my-correction">My errors</span></md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My writting"><span ui-sref = " admin-panel.default.study-notes-my-writting">My writing</span></md-button>\n\n\n            <md-list>\n                <md-list-item ng-repeat="quiz in quizs track by $index">\n                    <p  class = "hand">{{$index + 1}}. {{quiz.get(\'quiz_title\')}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = "openLink(quiz)" class="md-raised md-primary" aria-label="view">view</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(quiz)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n\n             <ad4game></ad4game>\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/my-writting.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                My writing</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-button  style="margin-left:0"  class="md-raised md-primary" aria-label="My Progress"><span ui-sref = "admin-panel.default.review">My Progress</span> </md-button>\n\n            <md-button  palette-background="pink:400" class="md-raised md-primary" aria-label="Clear"><span ui-sref = "admin-panel.default.study-notes-my-quiz">My quizzes</span> </md-button>\n\n            <md-button  palette-background="pink:400"  class="md-raised md-primary" aria-label="My gap-fills"><span ui-sref = " admin-panel.default.study-notes-my-gap-fill">My gap-fills</span></md-button>\n\n            <md-button palette-background="pink:400"  class="md-raised md-primary" aria-label="Clear"><span ui-sref = " admin-panel.default.study-notes-my-correction">My errors</span></md-button>\n\n            <md-button disabled = "disabled" palette-background="pink:400"  class="md-raised md-primary" aria-label="My writting"><span ui-sref = " admin-panel.default.study-notes-my-writting">My writing</span></md-button>\n\n            <md-list>\n                <md-list-item ng-repeat="writting in writtings track by $index" >\n                    <p  class = "hand">{{$index + 1}}. {{writting.get(\'instructions\')}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = "openLink(writting)" class="md-raised md-primary" aria-label="view">view</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeASK(writting)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n\n\n            <ad4game></ad4game>\n\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/quiz.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Quiz</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <quiz></quiz>\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/study-notes/template/save-note-toast-template.tmpl.html",'<md-toast>\n  <span class="md-toast-text" flex ng-if = "user.get(\'user_role\') == \'teacher\' ">Study Lists  generate worksheets and student revision exercises.</span>\n\n  <span class="md-toast-text" flex ng-if = "user.get(\'user_role\') == \'student\' ">You can add more to study! If not...</span>\n\n  <span style = "margin-left: 8px;">Click</span> <md-icon md-font-icon="fa fa-list-alt" style = "margin-left: 8px;color:#fff;"></md-icon>\n</md-toast>'),e.put("app/study-notes/template/slideshow.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Slideshow</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <slideshow></slideshow>\n\n            \n        </md-card-content>\n        \n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/study-notes-edit.tmpl.html",' <md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail">\n     <md-whiteframe ng-if = "cat.get(\'is_course\') && cat.exercise_ids && !cat.exercise_ids[0] && !hide_msg" class="md-whiteframe-z1 tutorial-frame"  style = "display: block;margin:8px;">\n        <md-icon md-font-icon="icon-play-circle-outline"></md-icon>\n        <p style = "font-weight: bold;">You need to add exercises! Without exercises, progression will not be recorded and users will not be able to open the next card in your course.</p>\n\n        <p>You need to add a progress test, if you want detailed progression statistics recorded and made available to users. Not all exercises need or should be test ones.</p>\n        \n        <div layout = "row" layout-align="end center">\n             <md-button class="md-raised md-primary" ng-click="goToHelp()"><md-icon md-font-icon="fa fa-info-circle"></md-icon> help</md-button>\n             \n            <md-button palette-background="pink:400"  class="md-raised md-primary" ng-click="closeNeedExerciseMsg()"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n        </div>\n            \n    </md-whiteframe>\n\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline" ng-if = "!cat.get(\'is_course\')">Edit study note</span>\n                <span class="md-headline" ng-if = "cat.get(\'is_course\')">Edit course</span>\n\n                <span class="md-headline help hand" ng-click = "goToStudyNoteHelp()"><md-icon  style = "color: #fff;font-size: 24px;position: relative;right: 5px;top: -1px;"  md-font-icon="icon-play-circle-outline"></md-icon>HELP</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n\n            <form name="editNote" novalidate>\n                <md-input-container class="" style="padding-bottom:0;">\n                    <label>Title</label>\n                    <input ng-change = "updateCatTitle(cat_title)" ng-model-options=\'{ debounce: 1500 }\' id="Title" label="Title" name="Title" type="text" ng-model="cat_title" />\n                </md-input-container>\n\n                <div id="search-wrod-area" ng-if="!hide_search_area && user.get(\'user_role\') == \'teacher\' ">\n                    \n                    <div class="grey-border">\n                        <md-input-container class="" style="padding-bottom:0;">\n                            <label>Add a base word or phrase e.g. \'school\' not \'schools\'</label>\n                            <input id="word" label="word" name="word" type="text" ng-model="search_word" />\n                        </md-input-container>\n\n                        <div class="hint" style="padding-left:3px;font-size:10px;">\n                            <strong>Note: </strong>\n                            <span ng-if = "cat.get(\'is_course\')">Only summaries will be added. To add words / phrases for automated revision testing use the VOCABULARY button.</span>\n                            <span ng-if = "!cat.get(\'is_course\')">Any saved words are available for use in worksheets and sent as student revision</span>\n                        </div>\n\n\n\n                        \n                        <div class="words popDefinesShow  search-selects" ng-if="search_word" layout="row" layout-sm="column">\n                            <p class="md-headline">\n                                <md-checkbox  class = "margin-left-0" ng-model="type.all" ng-change="changeTypeSelect(\'all\')" aria-label="Default Checkbox">\n                                    All\n                                </md-checkbox>\n                            </p>\n                            <p class="md-headline">\n                                <md-checkbox ng-model="type.v" ng-change="changeTypeSelect(\'v\')" aria-label="Default Checkbox">\n                                    Verb\n                                </md-checkbox>\n                            </p>\n                            <p class="md-headline">\n                                <md-checkbox ng-model="type.n" ng-change="changeTypeSelect(\'n\')" aria-label="Default Checkbox">\n                                    Noun\n                                </md-checkbox>\n                            </p>\n                            <p class="md-headline">\n                                <md-checkbox ng-model="type.j" ng-change="changeTypeSelect(\'j\')" aria-label="Default Checkbox">\n                                    Adjective\n                                </md-checkbox>\n                            </p>\n                            <p class="md-headline">\n                                <md-checkbox ng-model="type.r" ng-change="changeTypeSelect(\'r\')" aria-label="Default Checkbox">\n                                    Adverb\n                                </md-checkbox>\n                            </p>\n                        </div>\n                        <md-button style="margin-left:0" palette-background="pink:400" ng-click="search(search_word)" class="md-raised md-primary" aria-label="Clear" ng-disabled="!search_word">Search</md-button>\n                    </div>\n                    \n                </div>\n                <div id="edit-data-area" ng-if=\'editDataArea\'>\n                    <md-input-container>\n                        <label for="lemma">lemma</label>\n                        <input id="lemma" label="lemma" name="lemma" type="text" ng-model="define_data.lemma" disabled="disabled" />\n                    </md-input-container>\n\n                    <div ng-if = "define.get(\'imagesmain\')">\n                        <img ng-if = "!user.get(\'admin\') && !user.get(\'author\')"  ng-src="{{define.get(\'imagesmain\')}}">\n\n                        <img class = "hand" ng-click="popImageEdit(define)" ng-if = "user.get(\'admin\') || user.get(\'author\')"  ng-src="{{define.get(\'imagesmain\')}}">\n                    </div>\n\n\n                    \n                    <div class="spelling">\n                        <div class="overflow">\n                            <md-radio-group ng-model="define_data.spelling">\n                                <md-radio-button disabled=d isabled value="UK & US spelling">UK & US spelling</md-radio-button>\n                                <md-radio-button disabled=d isabled value="US spelling">US spelling</md-radio-button>\n                                <md-radio-button disabled=d isabled value="UK spelling">UK spelling</md-radio-button>\n                            </md-radio-group>\n                            <md-button ng-if = "user.get(\'admin\') || user.get(\'author\')" style="margin-left:0;margin-right:0;float:right;" palette-background="pink:400" ng-click="popVotePronEdit()" class="md-raised md-primary" aria-label="Clear">Edit</md-button>\n\n                            <md-button ng-if = "!user.get(\'admin\') && !user.get(\'author\')" style="margin-left:0;margin-right:0;float:right;" palette-background="pink:400"class="md-raised md-primary" aria-label="Clear" ng-click = "inCorrectSpelling(\'vote_spelling_rate\')"  ng-disabled = "cookies.get(\'vote_spelling_rate\' + define_data.lemma)" >Mistake</md-button>\n                        </div>\n                    </div>\n                    <div class="prounctions">\n                        <div class="pron-span md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span ng-if = "define.get(\'uk_pron_ext\')">{{define.get(\'uk_pron_ext\')}} [{{define.get(\'uk_change_pron_ext\')}}] UK</span>\n                            <span ng-if = "!define.get(\'uk_pron_ext\')">{{all_word_data.get(\'uk_pron\')}} [{{all_word_data.get(\'uk_change_pron\')}}] UK</span>\n\n\n                            <span ng-if = "define.get(\'us_pron_ext\')">{{define.get(\'us_pron_ext\')}} [{{define.get(\'us_change_pron_ext\')}}] US</span>\n                            <span ng-if = "!define.get(\'us_pron_ext\')">{{all_word_data.get(\'us_pron\')}} [{{all_word_data.get(\'us_change_pron\')}}] US</span>\n                        </div>\n\n\n                        <md-button ng-if = "!user.get(\'admin\') && !user.get(\'author\')" palette-background="pink:400" class="md-raised md-primary pron-mistake" aria-label="Clear" ng-click = "inCorrectPron(\'vote_pron_rate\')"  ng-disabled = "cookies.get(\'vote_pron_rate\' + define_data.lemma)" >Mistake</md-button>\n                    </div>\n                    <div class="word-type">\n                        <md-button  ng-if="(user.get(\'admin\') || user.get(\'author\')) && (type.v || type.n || type.j || type.r)"  palette-background="pink:400" ng-click="popVoteFormEdit()" class="md-raised md-primary" aria-label="Clear">Edit</md-button>\n\n                        <md-button ng-if = "!user.get(\'author\') && !user.get(\'admin\') && (type.v || type.n || type.j || type.r)"  palette-background="pink:400"class="md-raised md-primary" aria-label="Clear" ng-click = "inCorrectForm(\'vote_form_type_rate\')"  ng-disabled = "cookies.get(\'vote_form_type_rate\' + define_data.lemma)" >Mistake</md-button>\n\n                        <div ng-if="type.v && all_word_data.get(\'form_v\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Verb)</span>\n                            <span>{{all_word_data.get(\'form_v_a\')}},</span>\n                            <span>{{all_word_data.get(\'form_v_b\')}},</span>\n                            <span>{{all_word_data.get(\'form_v_c\')}},</span>\n                            <span>{{all_word_data.get(\'form_v_d\')}},</span>\n                            <span>{{all_word_data.get(\'form_v_e\')}}</span>\n                        </div>\n                        <div ng-if="type.v && all_word_data.get(\'form_ext_type\') == \'v\' " class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Irreg.)</span>\n                            <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_b\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_c\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_d\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_e\')}}</span>\n                        </div>\n\n                        <div ng-if="type.r && all_word_data.get(\'form_r\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Adv)</span>\n                            <span>{{all_word_data.get(\'form_r_a\')}},</span>\n                        </div>\n                        <div ng-if="type.n && all_word_data.get(\'form_n\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Noun)</span>\n                            <span>{{all_word_data.get(\'form_n_a\')}}</span><span ng-if="all_word_data.get(\'form_n_a\') && all_word_data.get(\'form_n_b\')">, </span>\n                            <span>{{all_word_data.get(\'form_n_b\')}}</span>\n                        </div>\n\n                        <div ng-if="type.n && all_word_data.get(\'form_ext_type\') == \'n\' " class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Irreg.)</span>\n                            <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_b\')}}</span>\n                        </div>\n\n                        <div ng-if="type.j && all_word_data.get(\'form_j\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Adj.)</span>\n                            <span>{{all_word_data.get(\'form_j_a\')}},</span>\n                            <span>{{all_word_data.get(\'form_j_b\')}},</span>\n                            <span>{{all_word_data.get(\'form_j_c\')}}</span>\n                            <span ng-if="all_word_data.get(\'end_str\')"> + {{all_word_data.get(\'end_str\')}}</span>\n                        </div>\n                        <div ng-if="type.j && all_word_data.get(\'form_ext_type\') == \'j\' " class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Irreg.)</span>\n                            <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_b\')}},</span>\n                            <span>{{all_word_data.get(\'form_ext_c\')}}</span>\n                        </div>\n\n                        <div ng-if="type.ph && all_word_data.get(\'form_ph\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Phrase)</span>\n                            <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                            <div ng-if="form_ph_b">\n                                <span>{{all_word_data.get(\'form_ph_a\')}},</span>\n                                <span>{{all_word_data.get(\'form_ph_b\')}}</span>\n                            </div>\n                            <div ng-if="!form_ph_b">\n                                <span>{{all_word_data.get(\'form_ph_a\')}}</span>\n                            </div>\n                        </div>\n                        <div ng-if="type.tit && all_word_data.get(\'form_tit\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Title)</span>\n                            <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                            <div ng-if="all_word_data.get(\'form_abb_b\')">\n                                <span>{{all_word_data.get(\'form_tit_a\')}},</span>\n                                <span>{{all_word_data.get(\'form_tit_b\')}}</span>\n                            </div>\n                            <div ng-if="!all_word_data.get(\'form_abb_b\')">\n                                <span>{{all_word_data.get(\'form_tit_a\')}}</span>\n                            </div>\n                        </div>\n                        <div ng-if="type.abb && all_word_data.get(\'form_abb\')" class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                            <span>(Abbreviation)</span>\n                            <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                            <div ng-if="all_word_data.get(\'form_abb_b\')">\n                                <span>{{all_word_data.get(\'form_abb_a\')}},</span>\n                                <span>{{all_word_data.get(\'form_abb_b\')}}</span>\n                            </div>\n                            <div ng-if="!all_word_data.get(\'form_abb_b\')">\n                                <span>{{all_word_data.get(\'form_abb_a\')}}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="syns" >\n                        <md-button palette-background="pink:400" ng-click="popSynEdit(define)" class="md-raised md-primary" aria-label="Clear">Edit</md-button>\n                        <div class="md-subhead bg-tm border font-white margin-top-10 padding-10" style = "min-height: 26px;">\n                            <span ng-repeat="value in define_data.synsetlemma track by $index" ng-if = "define_data.synsetlemma_status[$index] != \'disable\' && value != lemma">{{value}}<span ng-hide="$last">, </span></span>\n                        </div>\n                    </div>\n                    <div class="sentences-wrap grey-bg">\n                        <div ng-if = "hide_edit_define">\n                            <p>{{define_data.definition}}</p>\n                        </div>\n                        <div ng-if = "!hide_edit_define">\n                            <md-select ng-change="changeDefineLabel()" placeholder="Select" ng-model="define_data.label">\n                                <md-optgroup label="general description">\n                                <md-option value="(state)">(state)</md-option>\n                                <md-option value="(action)">(action)</md-option>\n                                <md-option value="(activity)">(activity)</md-option>\n                                <md-option value="(object)">(object)</md-option>\n                                <md-option value="(concept)">(concept)</md-option>\n                                <md-option value="(process)">(process)</md-option>\n                                <md-option value="(feeling)">(feeling)</md-option>\n                                <md-option value="(description)">(description)</md-option>\n                                <md-option value="(phrase)">(phrase)</md-option>\n                                <md-option value="(person)">(person)</md-option>\n                                <md-option value="(time)">(time)</md-option>\n                                <md-option value="(grammar)">(grammar)</md-option>\n                            </md-optgroup>\n                            <md-optgroup label="specific description">\n                                <md-option value="(abbreviation)">(abbreviation)</md-option>\n                                <md-option value="(animal)">(animal)</md-option>\n                                <md-option value="(appliance)">(appliance)</md-option>\n                                <md-option value="(archaeology)">(archaeology)</md-option>\n                                <md-option value="(astronomy)">(astronomy)</md-option>\n                                <md-option value="(appearance)">(appearance)</md-option>\n                                <md-option value="(art)">(art)</md-option>\n                                <md-option value="(belief)">(belief)</md-option>\n                                <md-option value="(body)">(body)</md-option>\n                                <md-option value="(books)">(books)</md-option>\n                                <md-option value="(building)">(building)</md-option>\n                                <md-option value="(business)">(business)</md-option>\n                                <md-option value="(characteristic)">(characteristic)</md-option>\n                                <md-option value="(chore)">(chore)</md-option>\n                                <md-option value="(clothes)">(clothes)</md-option>\n                                <md-option value="(code)">(code)</md-option>\n                                <md-option value="(colour)">(colour)</md-option>\n                                <md-option value="(communication)">(communication)</md-option>\n                                <md-option value="(component)">(component)</md-option>\n                                <md-option value="(condition)">(condition)</md-option>\n                                <md-option value="(cooking)">(cooking)</md-option>\n                                <md-option value="(country)">(country)</md-option>\n                                <md-option value="(culture)">(culture)</md-option>\n                                <md-option value="(custom)">(custom)</md-option>\n                                <md-option value="(device)">(device)</md-option>\n                                <md-option value="(direction)">(direction)</md-option>\n                                <md-option value="(document)">(document)</md-option>\n                                <md-option value="(drama)">(drama)</md-option>\n                                <md-option value="(drink)">(drink)</md-option>\n                                <md-option value="(education)">(education)</md-option>\n                                <md-option value="(electronics)">(electronics)</md-option>\n                                <md-option value="(entertainment)">(entertainment)</md-option>\n                                <md-option value="(food)">(food)</md-option>\n                                <md-option value="(furniture)">(furniture)</md-option>\n                                <md-option value="(geography)">(geography)</md-option>\n                                <md-option value="(geology)">(geology)</md-option>\n                                <md-option value="(health)">(health)</md-option>\n                                <md-option value="(history)">(history)</md-option>\n                                <md-option value="(infrastructure)">(infrastructure)</md-option>\n                                <md-option value="(instrument)">(instrument)</md-option>\n                                <md-option value="(item)">(item)</md-option>\n                                <md-option value="(job)">(job)</md-option>\n                                <md-option value="(language)">(language)</md-option>\n                                <md-option value="(law)">(law)</md-option>\n                                <md-option value="(life)">(life)</md-option>\n                                <md-option value="(liquid)">(liquid)</md-option>\n                                <md-option value="(material)">(material)</md-option>\n                                <md-option value="(maths)">(maths)</md-option>\n                                <md-option value="(medicine)">(medicine)</md-option>\n                                <md-option value="(mind)">(mind)</md-option>\n                                <md-option value="(money)">(money)</md-option>\n                                <md-option value="(music)">(music)</md-option>\n                                <md-option value="(nature)">(nature)</md-option>\n                                <md-option value="(nation)">(nation)</md-option>\n                                <md-option value="(nationality)">(nationality)</md-option>\n                                <md-option value="(number)">(number)</md-option>\n                                <md-option value="(organ)">(organ)</md-option>\n                                <md-option value="(organisation)">(organisation)</md-option>\n                                <md-option value="(phenomena)">(phenomena)</md-option>\n                                <md-option value="(place)">(place)</md-option>\n                                <md-option value="(plant)">(plant)</md-option>\n                                <md-option value="(politics)">(politics)</md-option>\n                                <md-option value="(product)">(product)</md-option>\n                                <md-option value="(relationship)">(relationship)</md-option>\n                                <md-option value="(religion)">(religion)</md-option>\n                                <md-option value="(resource)">(resource)</md-option>\n                                <md-option value="(responsibility)">(responsibility)</md-option>\n                                <md-option value="(rules)">(rules)</md-option>\n                                <md-option value="(saying)">(saying)</md-option>\n                                <md-option value="(science)">(science)</md-option>\n                                <md-option value="(social issue)">(social issue)</md-option>\n                                <md-option value="(society)">(society)</md-option>\n                                <md-option value="(sound)">(sound)</md-option>\n                                <md-option value="(subject)">(subject)</md-option>\n                                <md-option value="(supernatural)">(supernatural)</md-option>\n                                <md-option value="(superstition)">(superstition)</md-option>\n                                <md-option value="(sport)">(sport)</md-option>\n                                <md-option value="(terminology)">(terminology)</md-option>\n                                <md-option value="(theory)">(theory)</md-option>\n                                <md-option value="(title)">(title)</md-option>\n                                <md-option value="(transport)">(transport)</md-option>\n                                <md-option value="(travel)">(travel)</md-option>\n                                <md-option value="(utensil)">(utensil)</md-option>\n                                <md-option value="(vegetable)">(vegetable)</md-option>\n                                <md-option value="(weather)">(weather)</md-option>\n                                <md-option value="(work place)">(work place)</md-option>\n                            </md-optgroup>\n                            </md-select>\n                            <md-input-container class="">\n                                <label>Definition</label>\n                                <input ng-change="enableUpdateDefine(define)" ng-model-options=\'{ debounce: 2000 }\' id="definition" label="definition" name="definition" type="text" ng-model="define_data.definition" />\n                            </md-input-container>\n\n                            \n                            <md-button ng-if="define.update_define_btn" palette-background="pink:400" ng-click="changeDefine()" palette-background="myPurple:900" class="md-raised md-primary">add</md-button>\n                            </md-list-item>\n                        </div>\n\n                        <div ng-if = "user.get(\'admin\') || !hide_add_for_normal_teacher">\n                            <md-input-container class="">\n                                <label>Add example sentence</label>\n                                <input ng-change = "sentence_change(define_data.add_sentence)" id="word" label="word" name="word" type="text" ng-model="define_data.add_sentence" ng-model-options=\'{ debounce: 1500 }\'/>\n                            </md-input-container>\n\n                            <p style=" color:red;font-size:12px;margin-top:-20px;" ng-if="define_data.add_sentence && lemma_missing">Please add an example for students with the test word or phrase!</p>\n\n                            <md-button ng-disabled = "!sentence_can_add || define_data.add_sentence.length <= 3" palette-background="pink:400" ng-click="addSentence(define_data.add_sentence)" class="md-raised md-primary" aria-label="Clear">Add</md-button>\n                        </div>\n\n\n                        <md-list>\n                            <md-list-item class="hand" ng-repeat="sentence in define_data.sentence_list track by $index" ng-if = "$index < 5">\n                                <p class="text-ellipsis">{{sentence}}</p>\n                                <md-button ng-if="define_data.sentence_approve_list[$index] == user.id || user.get(\'admin\')" palette-background="pink:400" ng-click="deleteST($index)" class="md-raised md-primary" aria-label="Clear">Delete</md-button>\n                                <md-button ng-if="!sentence_admin_list[$index] && define_data.sentence_approve_list[$index] != user.id && (define_data.sentence_list_status[$index] != \'disable\' || !define_data.sentence_list_status[$index]) "   palette-background="pink:400" ng-click="disableST($index)" class="md-raised md-primary" aria-label="Clear">Disable</md-button>\n                                <md-button ng-if="!sentence_admin_list[$index] && define_data.sentence_approve_list[$index] != user.id && define_data.sentence_list_status[$index] == \'disable\' " ng-click="enableST($index)" palette-background="myPurple:900" class="md-raised md-primary">Enable</md-button>\n                            </md-list-item>\n                        </md-list>\n                        <!-- <md-button palette-background="pink:400" ng-click = "save()"  class="md-raised md-primary" aria-label="Clear">Update</md-button> -->\n                    </div>\n                    <p ng-if = "check_obj.disable" class = \'font-red\' style = "margin:0;">{{check_obj.text}}</p>\n                    <div style = "overflow:auto;">\n                        <md-button ng-disabled = "check_obj.disable" style="margin-left:0;width:48%;float:left;" palette-background="pink:400" ng-click="useData()" class="md-raised md-primary" aria-label="Click to save revision list">ADD to study note</md-button>\n\n                        <md-button style="margin-right:0;width:48%;float:right;" palette-background="pink:400" ng-click="CancelUseData()" class="md-raised md-primary" aria-label="Cancel">Cancel</md-button>\n                    </div>\n                </div>\n                <div class="quiz-add-btn">\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="addVocabPoP()" class="md-raised md-primary" aria-label="Vocabulary">Vocabulary</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="addQuizPoP()" class="md-raised md-primary" aria-label="QUIZ">QUIZ</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="gapFillPoP()" class="md-raised md-primary" aria-label="Gap-fill">Gap-fill</md-button>\n                    \n                    <md-button ng-if = "user.get(\'user_role\') == \'teacher\' " style="margin-left:0" palette-background="pink:400" ng-click="addHomeworkLink()" class="md-raised md-primary" aria-label="writing task">writing task</md-button>\n\n                    <md-button ng-if = "user.get(\'admin\') || user.get(\'author\')" style="margin-left:0" palette-background="pink:400" ng-click="addWritingAssignment()" class="md-raised md-primary" aria-label="written answer exercise">written answer exercise</md-button>\n                    \n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="addCorrectionLink()" class="md-raised md-primary" aria-label="ERROR EXERCISE">ERROR EXERCISE</md-button>\n\n                    <md-button ng-if = "user.get(\'user_role\') == \'teacher\' "  style="margin-left:0" palette-background="pink:400" ng-click="grammarCoursePoP()" class="md-raised md-primary" aria-label="grammar course">Grammar EXERCISE</md-button>\n\n                    <md-button ng-if = "user.get(\'user_role\') == \'teacher\' "  style="margin-left:0" palette-background="pink:400" ng-click="readingCoursePoP()" class="md-raised md-primary" aria-label="reading course">Reading EXERCISE</md-button>\n\n                    <md-button ng-if = "user.get(\'admin\') || user.get(\'author\')"  style="margin-left:0" palette-background="pink:400" ng-click="dialogueCoursePoP()" class="md-raised md-primary" aria-label="reading course">dialogue EXERCISE</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="addImagesPop()" class="md-raised md-primary" aria-label="Image">Image</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="youtubePoP()" class="md-raised md-primary" aria-label="youtube">youtube</md-button>\n\n                    <md-button ng-if = "user.get(\'user_role\') == \'teacher\' " style="margin-left:0" palette-background="pink:400" ng-click="addSlideShowPop()" class="md-raised md-primary" aria-label="SlideShow">SlideShow</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="addCatLinkPoP()" class="md-raised md-primary" aria-label="category link">category link</md-button>\n\n                    <md-button style="margin-left:0" palette-background="pink:400" ng-click="matchGamePoP()" class="md-raised md-primary" aria-label="match game">match game</md-button>\n\n                    <md-button ng-if = "user.get(\'admin\') || user.get(\'author\')"  style="margin-left:0" palette-background="pink:400" ng-click="addProgressPoP()" class="md-raised md-primary" aria-label="Progress test">Progress test</md-button>\n\n                    \n                </div>\n                <md-input-container id = "study-note-text-area" flex class="study-note-text-area">\n                    <text-angular name="noteBody" ng-model="note.content" ta-target-toolbars="editor-toolbar"></text-angular>\n                </md-input-container>\n            </form>\n\n        <!-- exercise -->\n        <div class="quizs" ng-if = "note.test_objs[0] && cat.get(\'is_course\')">\n            <md-list>\n                <md-list-item class = "lightgrey-bg padding-4" ng-repeat="quiz in note.test_objs track by $index">\n                    <p  class = "hand">{{$index + 1}}. {{quiz.title}}</p>\n\n                    <md-button palette-background="pink:400" ng-click = "openLink(quiz)" class="md-raised md-primary" aria-label="view"><md-icon md-font-icon="fa fa-play"></md-icon></md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "editExercise(quiz,note)"  class="md-raised md-primary" aria-label="edit">edit</md-button>\n\n                    <md-button palette-background="pink:400" ng-click = "removeExercise(quiz,note)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                    <md-divider ng-hide="$last"></md-divider>\n                </md-list-item>\n            </md-list>\n        </div>\n\n\n        <p style = "font-size:10px;padding-left:16px;">Text and images can be highlighted, dragged and dropped into place</p>\n\n\n\n        <div class="md-actions study-note-bottoms">\n            <div class="high-light">\n                <div ng-click="highLight(\'black\')" class="squre hand black">\n                </div>\n                <div ng-click="highLight(\'blue\')" class="squre hand blue">\n                </div>\n                <div ng-click="highLight(\'purple\')" class="squre hand purple">\n                </div>\n                <div ng-click="highLight(\'green\')" class="squre hand green">\n                </div>\n                <div ng-click="highLight(\'red\')" class="squre hand red">\n                </div>\n                \n            </div>\n            <div ng-click="addTitle()"  class="item add-title hand">\n                    TITLE\n            </div>\n\n            <text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n            <div class="study-note-type " ng-if = "!cat.get(\'is_course\')">\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.general" ng-change="changeNoteTypeSelect(\'general\')" aria-label="Default Checkbox">\n                        General\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.homework" ng-change="changeNoteTypeSelect(\'homework\')" aria-label="Default Checkbox">\n                        Homework\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.listening" ng-change="changeNoteTypeSelect(\'listening\')" aria-label="Listening">\n                        Listening\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.speaking" ng-change="changeNoteTypeSelect(\'speaking\')" aria-label="Speaking">\n                        Speaking\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.reading" ng-change="changeNoteTypeSelect(\'reading\')" aria-label="Reading">\n                        Reading\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.writing" ng-change="changeNoteTypeSelect(\'writing\')" aria-label="Writing">\n                        Writing\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.grammar" ng-change="changeNoteTypeSelect(\'grammar\')" aria-label="Grammar">\n                        Grammar\n                    </md-checkbox>\n                </p>\n\n                <p class="check-box">\n                    <md-checkbox ng-model="note_type.vocabulary" ng-change="changeNoteTypeSelect(\'vocabulary\')" aria-label="Vocabulary">\n                        Vocabulary\n                    </md-checkbox>\n                </p>\n\n\n                \n            </div>\n            <md-button style="position:relative;top:-5px;margin-right:16px;margin-left:16px;" ng-click="save(note)" ng-disabled="!note.content && !question_ids" palette-background="pink:400" class="md-primary" aria-label="Save">\n                Save\n            </md-button>\n        </div>\n        \n        </div>\n\n        \n\n        <div ng-if="notes[0] && !cat.get(\'is_course\')">\n            <md-divider></md-divider>\n            <h3>NOTES</h3>\n            <md-divider></md-divider>\n        </div>\n        <md-list ng-if="notes[0]" class="" layout-padding>\n            <md-list-item ng-repeat="note in notes track by $index">\n                <div class="md-list-item-text" layout="column" style = "width: 100%;">\n                    <p>\n                        <span ng-if = "!cat.get(\'is_course\')" class = "note-type-title" style = "text-transform: uppercase;font-size: 14px;">{{note.get(\'cat_type\')}}</span>\n                        <span ng-if = "cat.get(\'is_course\')" class = "note-type-title" style = "text-transform: uppercase;font-size: 14px;padding:4px 8px;">{{$index + 1}}</span>\n                    </p>\n                    <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n\n                    <div class="quizs" ng-if = "note.test_objs[0] && cat.get(\'is_course\')">\n\n                        <md-list class = "lightgrey-bg padding-4">\n                            <md-list-item ng-repeat="quiz in note.test_objs track by $index">\n                                <p  class = "hand">{{$index + 1}}. {{quiz.title}}</p>\n\n                                <md-button ng-disabled = "cat.disable_move" ng-Click="exerciseUp(quiz,note)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                                </md-button>\n\n                                <md-button ng-disabled = "cat.disable_move" ng-Click="exerciseDown(quiz,note)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                                    <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                                </md-button>\n\n                                <md-button  palette-background="pink:400" ng-click = "openLink(quiz)" class="md-raised md-primary" aria-label="view"><md-icon md-font-icon="fa fa-play"></md-icon></md-button>\n\n                                <md-button palette-background="pink:400" ng-click = "removeExercise(quiz,note)"  class="md-raised md-primary" aria-label="remove">remove</md-button>\n\n                                <md-divider ng-hide="$last"></md-divider>\n                            </md-list-item>\n                        </md-list>\n                    </div>\n                    \n                    <div>\n                        <md-button palette-background="myPurple:900" ng-click="popEdit(note)" class="md-raised md-primary margin-left-0" ng-class="[buttonClass, buttonHue]" aria-label="Edit">Edit</md-button>\n                        <md-button ng-click="remove(note)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            delete\n                        </md-button>\n\n\n                        <md-button ng-Click="noteUp(note,notes)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="noteDown(note,notes)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n\n                    </div>\n                </div>\n                <md-divider ng-hide="$last"></md-divider>\n            </md-list-item>\n\n        </md-list>\n        </md-card-content>\n        \n    </md-card>\n</md-conten>'),e.put("app/study-notes/template/study-notes-page.tmpl.html",'<md-content class="padded-content-page notic-category tm">\n    \n    <!-- others category -->\n    \n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div class="pagging">\n            \n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n            <span ng-if = "parent_cat_name" style  = "font-size:20px;"> {{parent_cat_name}}</span>\n        </div>\n    </div>\n\n    \n\n    <div class = "study-note-btns">\n\n         <md-button ng-if = "((user.get(\'user_role\') == \'teacher\' && parent_cat != \'root\') || stcat.get(\'user\') == user.id ) && !stcat.subcat && parent_cat != \'root\' && parent_cat_name != \'MY NOTES\' " palette-background="pink:400" ng-click = "fixedOrder(studyNotes)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="fixed order">{{\'STUDYNOTEPAGE.Fixed_order\' | translate}}</md-button>\n\n        <md-button ng-if = "((user.get(\'user_role\') == \'teacher\' && parent_cat != \'root\') || stcat.get(\'user\') == user.id || user_have_edit_right) && parent_cat != \'root\'" palette-background="pink:400" ng-click = "addStudyNotes()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add word/phrases">{{\'STUDYNOTEPAGE.Add_study_note\' | translate}}</md-button>\n\n        <md-button ng-if = "((user.get(\'user_role\') == \'teacher\' && parent_cat != \'root\') || stcat.get(\'user\') == user.id || user_have_edit_right) && !stcat.subcat && parent_cat != \'root\' && parent_cat_name != \'MY NOTES\' " palette-background="pink:400" ng-click = "showAddCategory()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Add shared folder">{{\'STUDYNOTEPAGE.Add_shared_folder\' | translate}}</md-button>\n\n        <md-button ng-if = "((user.get(\'user_role\') == \'teacher\' && parent_cat != \'root\') || stcat.get(\'user\') == user.id) && stcat.subcat && !stcat.get(\'is_course\')" palette-background="pink:400" ng-click = "popMangeRole()" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Manage role">{{\'STUDYNOTEPAGE.Manage_roles\' | translate}}</md-button>\n\n        <md-button ng-if = "!cls.hide_for_class && !stcat.get(\'is_course\')" ng-repeat="cls in myClasses" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]"  aria-label="{{cls.get(\'name\')}}" ng-click = "openLink(\'admin-panel.default.study-notes\',{parent_cat_name:cls.get(\'name\'),parent_cat:cls.id,page:1})">{{cls.get(\'name\')}}</md-button>\n    </div>\n\n    <div id="add-tile" layout = "row" layout-wrap layout-align="start start">\n        <div flex = 50 class="tile add-course" ng-if = "showAddCourseForm || edit_course">\n            <div  class = "white-bg" layout-margin palette-background="myPurple:500" >\n                <md-input-container layout-padding>\n                    <label for="course_title">{{\'STUDYNOTEPAGE.Add_title_for_course\' | translate}}</label>\n                    <input id="course_title" label="course_title" name="course_title" type="text" ng-model="course.name"/>\n                </md-input-container>\n\n                <md-input-container layout-padding>\n                    <label for="course_dec">{{\'STUDYNOTEPAGE.Add_description_for_course\' | translate}}</label>\n                    <textarea id="course_dec" label="course_dec" name="course_dec" type="text" ng-model="course.dec"></textarea>\n                </md-input-container>\n\n                <md-input-container layout-padding>\n                    <label>Course level</label>\n                    <md-select placeholder="Pick" ng-model="course.level">\n                        <md-option value="Any level">Any level</md-option>\n                        <md-option value="A1, Beginner">A1, Beginner</md-option>\n                        <md-option value="A2, Elementary">A2, Elementary</md-option>\n                        <md-option value="B1, Intermediate">B1, Intermediate</md-option>\n                        <md-option value="B2, Upper Intermediate">B2, Upper Intermediate</md-option>\n                        <md-option value="C1, Low Advanced">C1, Low Advanced</md-option>\n                        <md-option value="C2, Advanced">C2, Advanced</md-option>\n                    </md-select>\n                    \n                </md-input-container>\n\n                <md-radio-group ng-model="course.payment_type">\n                    <md-radio-button value="free">{{\'STUDYNOTEPAGE.Free\' | translate}}</md-radio-button>\n                    <md-radio-button value="paid">{{\'STUDYNOTEPAGE.Paid\' | translate}}</md-radio-button>\n                </md-radio-group>\n\n                <md-input-container layout-padding ng-if = "course.payment_type == \'paid\' ">\n                    <label for="course_cost">{{\'STUDYNOTEPAGE.Add_fee_and_payment\' | translate}}</label>\n                    <input id="course_cost" label="course_cost" name="course_cost" type="text" ng-model="course.cost"/>\n                </md-input-container>\n\n            \n\n                <p ng-if = "!new_course.live" style = "padding:8px;color:red;">\n                    {{\'STUDYNOTEPAGE.Your_course_can_not\' | translate}}\n                </p>\n\n                <div class = "margin-top-90"></div>\n\n                <div palette-background="myPurple:700" class = "tile-buttons">\n                    <md-button palette-background="pink:400" ng-click = "addCourse(course)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">{{\'STUDYNOTEPAGE.Save\' | translate}}</md-button>\n                    \n                    <md-button palette-background="myPurple:900"  ng-click = "showAddCourse()"  class="md-raised md-primary" aria-label="Close">{{\'STUDYNOTEPAGE.Close\' | translate}}</md-button>\n                    \n                </div>\n            </div>\n        </div>\n\n\n        <div flex = 50 class="tile add-course" ng-if = "showAddCategoryForm || edit_cat">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" >\n                <md-input-container layout-padding>\n                    <label for="category_title">{{\'STUDYNOTEPAGE.Add_title_for_category\' | translate}}</label>\n                    <input id="category_title" label="category_title" name="category_title" type="text" ng-model="addCat.name"/>\n                </md-input-container>\n                <div class = "margin-top-90"></div>\n\n                <div palette-background="myPurple:700" class = "tile-buttons">\n                    <md-button palette-background="myPurple:900"  ng-click = "showAddCategory()"  class="md-raised md-primary" aria-label="Close">{{\'STUDYNOTEPAGE.Close\' | translate}}</md-button>\n                    <md-button palette-background="pink:400" ng-click = "addCategory(addCat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">{{\'STUDYNOTEPAGE.Save\' | translate}}</md-button>\n\n                    \n                </div>\n\n            </div>\n        </div>\n\n        <div flex = 50 flex class="tile" ng-if = "showAddWordForm">\n            <div class = "white-bg" layout-margin palette-background="myPurple:500" >\n                \n\n                <md-select layout-padding placeholder="---SELECT CLASS---" ng-model="select_class">\n                    <md-option value="">---SELECT CLASS---</md-option>\n                    <md-option ng-repeat="class in myClasses" value="{{class.get(\'name\')}}">{{class.get(\'name\')}}</md-option>\n                </md-select>\n\n                <div class = "margin-top-90"></div>\n\n                <div palette-background="myPurple:700" class = "tile-buttons">\n                    <md-button palette-background="myPurple:900"  ng-click = "showAddWord()" class="md-raised md-primary" aria-label="Close">{{\'STUDYNOTEPAGE.Close\' | translate}}</md-button>\n                    <md-button palette-background="pink:400" ng-click = "addStudyNotes(select_class)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Save">{{\'STUDYNOTEPAGE.Save\' | translate}}</md-button>\n                </div>\n\n            </div>\n        </div>\n        \n    </div>\n\n    <!-- if root  -->\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start" ng-if = "parent_cat == \'root\'">\n        <div ui-sref="admin-panel.default.study-notes({parent_cat_name:\'MY NOTES\',parent_cat:user.id,page:1})" class = "tile hand " layout-fill>\n            \n            <div class = "white-bg" layout-margin palette-background="myPurple:500" >\n               \n               <h3  class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1" md-font-icon=" text-shadow fa fa-folder"></md-icon><span class = "text-shadow">{{\'STUDYNOTEPAGE.MY_NOTES\' | translate}}</span></h3>\n\n\n                <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                    \n                </div>\n                \n            </div>\n            \n        </div>\n\n        <div class = "tile hand" layout-fill ng-repeat="cls in myClasses" ng-if = "!cls.hide_for_note" >\n            \n            <div  ng-class = "catTypeClass(cls)" class = "white-bg"  layout-margin palette-background="myPurple:500" >\n               \n\n               <h3 ui-sref="admin-panel.default.study-notes({parent_cat_name:cls.get(\'name\'),parent_cat:cls.id,page:1})" class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1 text-shadow" md-font-icon=" text-shadow fa fa-folder"></md-icon><span class = "text-shadow">{{cls.get(\'name\')}}</span></h3>\n\n                <div class = "md-toolbar-tools spelling font-purple" layout = "row" layout-padding layout-align="space-between center"">\n                    <span >{{cls.get(\'level\')}}</span>\n\n\n                    <md-button style="z-index:99;" ng-click = "leaveClass(cls)" ng-if = "cls.get(\'createdBy\').id != user.id && cls.get(\'user_id\') != user.id" palette-background="pink:400"  class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Leave">{{\'STUDYNOTEPAGE.Leave\' | translate}}</md-button>\n                </div>\n            </div>\n\n\n        </div>\n\n    </div>\n    <!-- end root -->\n\n    \n    \n    <div class="process course-progress" ng-if = "pass_course && user.get(\'user_role\') == \'student\' && stcat.get(\'is_course\')">\n        <span style = "position: absolute;top:11px;left:15px;z-index:9;color:#fff;">{{progress}}%</span>\n        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value ="{{progress}}" ></md-progress-linear>\n    </div>\n\n    <div layout = "row" layout-wrap layout-sm = "column" layout-align="start start" ng-if = "parent_cat != \'root\'">\n\n        <div class = "tile hand" ng-if = "user.id == cat.get(\'user\') || !cat.hide " layout-fill ng-repeat="cat in studyNotesCat.slice().reverse()" >\n            <div  class = "white-bg" layout-margin palette-background="myPurple:500" ng-if = "cat.get(\'type\') == \'category\'">\n                <div ui-sref="admin-panel.default.study-notes({parent_cat_name:cat.get(\'name\'),parent_cat:cat.get(\'cat_id\'),page:1})">\n                    <h3  ng-class = "catTypeClass(cat)" class = "md-display-1" layout-padding layout-align="start start" ><md-icon class = "md-display-1" md-font-icon="text-shadow fa fa-folder"></md-icon><span class = "text-shadow">{{cat.get(\'name\')}}</span></h3>\n\n\n                    <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                        \n                    </div>\n                    \n                    <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                        \n                    </div>\n                    \n                </div>\n                \n\n                <div style = "padding:0 8px;" layout="row" layout-align="space-between center" ng-if = "user.id == cat.get(\'user\')  || \'userId\' == cat.get(\'user\') "  palette-background="myPurple:700" class = "tile-buttons">\n\n                    <div flex-sm=100>\n                        <md-button palette-background="pink:400" ng-click = "editCateogry(cat)" class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit">{{\'STUDYNOTEPAGE.Edit\' | translate}}</md-button>\n\n                        <md-button palette-background="myPurple:900"   ng-click = \'deleteCategory(cat)\' class="md-raised md-primary" aria-label="Delete">{{\'STUDYNOTEPAGE.Delete\' | translate}}</md-button>\n\n                        <md-button ng-Click="noteUp(cat,studyNotesCat)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="noteDown(cat,studyNotesCat)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n\n                    </div>\n                    \n\n                    <div class="study-note-switch" ng-if = "user.get(\'user_role\' == \'teacher\' )">\n                        <md-switch ng-model="cat.hide" ng-true-value="true" ng-false-value="false"  ng-click="toggleStudyNoteHide(cat)" aria-label="Hide" >\n                            {{\'STUDYNOTEPAGE.Hide\' | translate}}\n                        </md-switch>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n        <div ng-if = "user.id == note.get(\'user\') || !note.hide "  class = "tile hand" layout-fill ng-repeat="note in studyNotes.slice().reverse()"   >\n            <div class="lock" layout="row" ng-if = "lockCourse(note)">\n                <div class = "inside">\n                    <i class="fa fa-lock" style = "color:red;margin-right:16px"></i>\n                    <strong>{{\'STUDYNOTEPAGE.Locked\' | translate}}</strong>\n                </div>\n            </div>\n\n            <div  class = "white-bg" layout-margin palette-background="myPurple:500" ng-if = "note.get(\'type\') == \'note\'">\n                \n\n                <div ui-sref="admin-panel.default.study-notes-view({note_id:note.id})">\n                   <h3   class = "md-display-1" layout-padding layout-align="start start"   >\n                     <i ng-if = "ifPassCourse(note)"  class="fa fa-check-circle absolute-right"></i>\n\n                    <md-icon class = "md-display-1" md-font-icon="text-shadow fa fa-pencil"></md-icon>\n\n                    <span class = "text-shadow">{{note.get(\'cat_title\')}}</span></h3>\n\n                    <div class = "md-subhead" layout = "column" layout-padding layout-align="start start">\n                        \n                    </div>\n                    \n                    <div class = "md-toolbar-tools spelling" layout = "column" layout-padding layout-align="start start">\n                        {{note.get(\'class_name\')}}\n                    </div>\n                </div>\n                \n                \n                <div style = "padding:0 8px;" layout="row" layout-align="space-between center" ng-if = "user.id == note.get(\'user\') || stcat.get(\'user\') == user.id " palette-background="myPurple:700" class = "tile-buttons study-note" layout-wrap>\n                    <div flex-sm=100>\n                        <md-button  palette-background="pink:400"  class="md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Edit"><span ui-sref="admin-panel.default.study-notes-edit({note_id:note.id})">{{\'STUDYNOTEPAGE.Edit\' | translate}}</span></md-button>\n\n                        <md-button ng-disabled = "btn_disable"   palette-background="myPurple:900" ng-click = \'copyNotePoP(note)\' class="md-raised md-primary" aria-label="copy">{{\'STUDYNOTEPAGE.copy\' | translate}}</md-button>\n\n                        <md-button   palette-background="myPurple:900" ng-click = \'deleteNote(note)\' class="md-raised md-primary" aria-label="Delete">{{\'STUDYNOTEPAGE.Delete\' | translate}}</md-button>\n\n                        <md-button ng-Click="noteUp(note,studyNotes)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up" ></md-icon>\n                        </md-button>\n\n                        <md-button ng-Click="noteDown(note,studyNotes)" palette-background="pink:400" class="md-primary" aria-label="delete">\n                            <md-icon style = "color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-down" ></md-icon>\n                        </md-button>\n                    </div>\n\n\n                    <div class="study-note-switch">\n                        <md-switch ng-if = "user.get(\'user_role\' == \'teacher\' )" ng-model="note.hide" ng-true-value="true" ng-false-value="false"  ng-click="toggleStudyNoteHide(note)" aria-label="Hide" >\n                            {{\'STUDYNOTEPAGE.Hide\' | translate}}\n                        </md-switch>\n                    </div>\n                </div>\n\n            </div>\n            \n\n        </div>\n    </div>\n\n</md-content>   '),e.put("app/study-notes/template/study-notes-view-page.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div layout="row" layout-align="space-between center" layout-margin class="category-nav">\n        <div id = "top" class="pagging">\n            \n            <md-icon class = \'hand\' md-font-icon="icon-chevron-left"  onClick="history.go(-1);return true;"></md-icon>\n            <span ng-if = "parent_cat && parent_cat.get(\'name\')" style  = "font-size:20px;"> {{parent_cat.get(\'name\')}}</span>\n        </div>\n    </div>\n    \n    <div ng-if = "tutorial && progress >= 99 && !loader_show">\n        <md-whiteframe class="md-whiteframe-z1 tutorial-frame" style = "margin:8px;display: block" >\n            <p  ng-bind-html="tutorial.get(\'text\')"></p>\n            <p style = "overflow: auto;">\n                <md-button style = "float:right;" palette-background="pink:400" ng-click = "socialShare(tutorial.get(\'text\'),\'linkedin\')" class="normal-text md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="linkedin"><md-icon md-font-icon="fa fa-linkedin"></md-icon> LinkedIn</md-button>\n\n                \n                <md-button style = "float:right;" palette-background="pink:400" ng-click = "socialShare(tutorial.get(\'text\'),\'twitter\')" class="normal-text md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="twitter"><md-icon md-font-icon="fa fa-twitter"></md-icon> Twitter</md-button>\n                <md-button style = "float:right;" palette-background="pink:400" ng-click = "socialShare(tutorial.get(\'text\'),\'facebook\')" class="normal-text md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="facebook"><md-icon md-font-icon="fa fa-facebook"></md-icon> Facebook</md-button>\n            </p>\n        </md-whiteframe>\n    </div>\n\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline" ng-if="cat && !cat.get(\'is_course\') && !cat.get(\'is_help\')">Study note</span>\n                <span class="md-headline" ng-if="!cat.get(\'is_help\') && cat.get(\'is_course\') && cat_title">{{cat_title}}</span>\n                <span class="md-headline" ng-if="cat.get(\'is_help\')">HELP</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <div class="the_loader" ng-if = "loader_show">\n                <md-progress-linear class="margin-bottom-20" md-mode="indeterminate"></md-progress-linear>\n            </div>\n\n            <div ng-if = "!loader_show">\n\n\n\n                <div class="quizs" ng-if="cat.exercise_ids[0] && cat.get(\'is_course\') && user.get(\'user_role\') == \'student\' ">\n                    <div class="process course-progress" style="padding:0">\n                        <span class="value">{{progress}}%</span>\n                        <md-progress-linear class="md-accent  md-hue-3 " md-mode="determinate" value="{{progress}}"></md-progress-linear>\n                    </div>\n\n                    <div style = "text-align: right;margin-top: 8px;">\n                        <span ng-if = "!progress || progress < 100" style = "color:red;">{{\'ADMIN.Next_unit\' | translate}} {{100 - progress}}% {{\'ADMIN.to_unlock\' | translate}} <i class="fa fa-lock" style = "color:red;margin-left:8px"></i></span>\n                        \n                        <span ng-if = "progress == \'100\'" style = "color:green;">{{\'ADMIN.Next_unit_unlocked\' | translate}}<i class="fa fa-unlock" style = "color:green;margin-left:8px"></i></span>\n\n                        \n                    </div>\n                </div>\n                <div>\n                    <div ng-repeat="note in notes track by $index">\n                        <div class="md-list-item-text" layout="column">\n                            <p>\n                                <span ng-if="!cat.get(\'is_course\') && !cat.get(\'is_help\')" class="note-type-title" style="text-transform: uppercase;font-size: 14px;">{{note.get(\'cat_type\')}}</span>\n                                <span ng-if="cat.get(\'is_course\')" class="note-type-title" style="text-transform: uppercase;font-size: 14px;padding:4px 8px;">{{$index + 1}}</span>\n                            </p>\n                            <p layout-padding ng-bind-html="note.get(\'content\')"></p>\n                        </div>\n                        <div class="quizs" ng-if="cat.exercise_ids[0] && cat.get(\'is_course\')">\n                            <md-list class="lightgrey-bg padding-4">\n                                <md-list-item ng-repeat="quiz in note.test_objs track by $index">\n                                    <p class="hand" ng-class="passClass(quiz)">{{$index + 1}}. {{quiz.title}}</p>\n                                    <md-button ng-disabled = "passClass(quiz) && quiz.no_retake" palette-background="pink:400" ng-click="testExercise(quiz)" class="md-raised md-primary" aria-label="view">\n                                        <md-icon md-font-icon="fa fa-play"></md-icon>\n                                    </md-button>\n                                    <md-divider ng-hide="$last"></md-divider>\n                                </md-list-item>\n                            </md-list>\n                        </div>\n                        <md-divider ng-hide="$last"></md-divider>\n                    </div>\n                </div>\n\n\n                <ad4game></ad4game>\n            </div>\n        </md-card-content>\n        <md-icon id="go-to-top-btn" ng-click="goToTop()" style="color:#fff;" class=\'hand\' md-font-icon="fa fa-arrow-up"></md-icon>\n    </md-card>\n</md-conten>\n'),e.put("app/study-notes/template/youtubeview.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                YouTube</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <div class=\'embed-container\'><iframe ng-src={{link}} frameborder=\'0\' allowfullscreen></iframe></div>\n\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/word-module/template/add-new-define-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Add new define</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                 <div>\n                        <md-input-container>\n                            <input  label="lemma" name="lemma" type="text" ng-model="lemma"/>\n                        </md-input-container>\n                        <h3 class="sum-header">Definition</h3>\n\n                        \n\n\n                        <md-input-container>\n                            <input  label="definition" name="definition" type="text" ng-model="definition" />\n                        </md-input-container>\n\n                        <p class = "md-headline" >\n                            \n                            <md-checkbox ng-model="newDefineType.v" aria-label="Default Checkbox">\n                               Verb\n                            </md-checkbox>\n                        </p>\n                        <p class = "md-headline" >\n                             <md-checkbox ng-model="newDefineType.n" aria-label="Default Checkbox">\n                               Noun\n                            </md-checkbox>\n                        </p>\n\n                        <p class = "md-headline" >\n                            <md-checkbox ng-model="newDefineType.j" aria-label="Default Checkbox">\n                            Adjective\n                            </md-checkbox>\n                        </p>\n                        <p class = "md-headline" >\n                            <md-checkbox ng-model="newDefineType.r" aria-label="Default Checkbox">\n                                Adverb\n                            </md-checkbox>\n                        </p>\n\n                        <p class = "md-headline" >\n                            <md-checkbox ng-model="newDefineType.phr" aria-label="Default Checkbox">\n                                Preposition/Phrase\n                            </md-checkbox>\n                        </p>\n\n                        <md-button   ng-click="saveNewDefine()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Save</md-button>\n                    </div>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/word-module/template/add-new-word-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Add new word</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                 <div>\n                        <h3 class="sum-header">Lemma</h3>\n\n                        \n\n\n                        <md-input-container>\n                            <input  label="lemma" name="lemma" type="text" ng-model="lemma" />\n                        </md-input-container>\n\n\n                        <md-button   ng-click="saveNewWord()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Save</md-button>\n\n                        <div ng-if = "show_edit_lemma_page_link">\n                            <p>Base lemma add , please close dialog and  finish adding data!</p>\n\n                        </div>\n\n                        <div ng-if = "word_exits">\n                            <p>Word already in db, would you like to go to details page to check it ?</p>\n                             <md-button   ng-click="goToDetailPage()" class="pink md-raised md-primary" ng-class="[buttonClass, buttonHue]" aria-label="Select definition">Go to detail page</md-button>\n\n                        </div>\n                    </div>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/word-module/template/image-upload.tmpl.html",'<div style = "background:#fff;padding:20px;">\n    Username\n    <input type="text" ng-model="username"><br/><br/>\n    watching model:\n    <div class="button" ngf-select ng-model="file" ngf-multiple="false">Select File</div>\n    on file change multiple:\n    <div class="button" ngf-select="upload($files)" ngf-multiple="true">Select File</div>\n    Drop File:\n    <div ngf-drop ngf-select ng-model="files" class="drop-box" \n        ngf-drag-over-class="\'dragover\'" ngf-multiple="true" ngf-allow-dir="true"\n        accept="image/*,application/pdf" \n        ngf-pattern="\'image/*,application/pdf\'">Drop pdfs or images here or click to upload</div>\n    <div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div>\n    Files:\n    <ul>\n        <li ng-repeat="f in files" style="font:smaller">{{f.name}} {{f.$error}} {{f.$errorParam}}</li>\n    </ul>\n    Upload Log:\n    <pre>{{log}}</pre>\n</div>\n</div>\n\n\n<style type="text/css">\n    .button {\n    -moz-appearance: button;\n    /* Firefox */\n    -webkit-appearance: button;\n    /* Safari and Chrome */\n    padding: 10px;\n    margin: 10px;\n    width: 70px;\n}\n.drop-box {\n    background: #F8F8F8;\n    border: 5px dashed #DDD;\n    width: 200px;\n    height: 65px;\n    text-align: center;\n    padding-top: 25px;\n    margin: 10px;\n}\n.dragover {\n    border: 5px dashed blue;\n}\n</style>'),e.put("app/word-module/template/p2p_vote.tmpl.html",'<md-content id="grammar-data" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    \n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Community checking of dictionary entries</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <div>\n                <md-whiteframe class="md-whiteframe-z1" style = "display: block; background: lightgrey;color:#000;padding:8px;" >\n                    <md-icon md-font-icon="icon-play-circle-outline"></md-icon>\n                    <p>Please check the dictionary entries below. Remember, what you see will appear in worksheets and student exercises.</p>\n                </md-whiteframe>\n            </div>\n\n            <div class="define-data" ng-if = "define">\n                <widget class="relative margin-bottom-20" flex content-layout="column" content-layout-align="start start" content-padding layout-padding style = "margin-top: 16px;">\n                    \n\n                    <div class="oval-wrap clearfix define md-subhead" style="font-weight:bold">\n                        <span ng-if="define.get(\'pos\') == \'v\'">(Verb)</span>\n                        <span ng-if="define.get(\'pos\') == \'n\'">(Noun)</span>\n                        <span ng-if="define.get(\'pos\') == \'j\'">(Adjective)</span>\n                        <span ng-if="define.get(\'pos\') == \'r\'">(Adverb)</span>\n                        <span ng-if="define.get(\'pos\') == \'s\'">(Adjective)</span>\n                        <span ng-if="define.get(\'pos\') == \'a\'">(Adjective)</span> {{define.get(\'definition\')}}\n                    </div>\n                    <div ng-if=" define.get(\'sentence_type\') &&  define.get(\'sentence_type\')[0]" class="oval-wrap grey clearfix margin-bottom-10 md-subhead hand">\n                        <span style="cursor: hand;cursor: pointer" class="synsetlemma" ng-repeat="value in define.get(\'sentence_type\') track by $index">{{value}}<span ng-hide="$last">, </span></span>\n                    </div>\n                    <div class="oval-wrap grey clearfix margin-bottom-10 md-subhead hand" ng-if="define.get(\'synsetlemma\')[0]">\n                        <span style="cursor: hand;cursor: pointer" ui-sref="admin-panel.default.word-page({lemma:syn,originlemma:syn})" class="synsetlemma" ng-repeat="syn in define.get(\'synsetlemma\') track by $index" ng-if="define.get(\'synsetlemma_status\')[$index] != \'disable\' ">\n\n                            <span style = "margin-right:16px;">{{syn}} </span>\n                        </span>\n                    </div>\n                    <div ng-if="define.get(\'sentence_main\') && !define.details_show" class="md-subhead sentence margin-bottom-10"><i class="fa fa-quote-left"></i><span style="font-size:20px" class="firt-upper">{{define.get(\'sentence_main\')}}</span><span ng-if="define.get(\'sentence_approve_list\')[0]" class="approve">APPROVED</span></div>\n\n                    <div class="vote-action clearfix" style = "background: lightgrey; width:100%; display: block;border-radius: 4px;">\n                        <div style = "margin:8px;">\n                            Is this well written for students with everything correct? \n                            <md-button ng-disabled = "vote.get(\'no_user_list\').length >= 20" ng-click="yes(vote)" class="md-raised md-primary" aria-label="Yes">\n                                Yes\n                            </md-button>\n\n                            <md-button ng-disabled = "vote.get(\'no_user_list\').length >= 20" ng-click="no(vote)" class="md-raised md-primary" aria-label="Note">\n                                Note\n                            </md-button>\n                        </div>\n                        \n                        \n                    </div>\n                    \n                </widget>\n            </div>\n\n        </md-card-content>\n    </md-card>\n</md-conten>\n'),e.put("app/word-module/template/vote-edit-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n\n    <md-divider></md-divider>\n\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content >\n	            <md-input-container>\n					<label for="lemma">lemma</label>\n					<input id="lemma" label="lemma" name="lemma" type="text" ng-model="vote_data.lemma" disabled="disabled"/>\n				</md-input-container>\n\n\n                <md-button palette-background="pink:400" ng-click = "Save()"  class="md-raised md-primary" aria-label="Clear">Update</md-button>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        \n        <span flex></span>\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/word-module/template/vote-edit-form-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit word/phrase form</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <div class="word-type">\n                    <h3 class="sum-header">Word type</h3>\n                    <div class="selects">\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_n" aria-label="Noun Checkbox">\n                                    Noun/Phrase\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_n">\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input aria-label="{{form_data.form_n_a}}" type="text" ng-model="form_data.form_n_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_n_b}}"  ng-model="form_data.form_n_b" />\n                                            <md-input-container>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_v" aria-label="Verb Checkbox">\n                                    Verb/Phrase\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_v">\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_v_a}}"  ng-model="form_data.form_v_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_v_b}}"  ng-model="form_data.form_v_b" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_v_c}}"  ng-model="form_data.form_v_c" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_v_d}}"  ng-model="form_data.form_v_d" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_v_e}}"  ng-model="form_data.form_v_e" />\n                                            <md-input-container>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_j" aria-label="Adjective Checkbox">\n                                    Adjective/Phrase\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_j">\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_j_a}}"  ng-model="form_data.form_j_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_j_b}}"  ng-model="form_data.form_j_b" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_j_c}}"  ng-model="form_data.form_j_c" />\n                                            <md-input-container>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_r" aria-label="Adverb Checkbox">\n                                    Adverb/Phrase\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_r">\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_r_a}}"  ng-model="form_data.form_r_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_pre" aria-label="Adverb Checkbox">\n                                    Preposition/Phrase\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_pre">\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_pre_a}}"  ng-model="form_data.form_pre_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_pre_b}}"  ng-model="form_data.form_pre_b" />\n                                            <md-input-container>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <div>\n                            <div>\n                                <md-checkbox ng-change="formTypeChange()" ng-model="form_data.form_ext" aria-label="Verb Checkbox">\n                                    Irregular\n                                </md-checkbox>\n                            </div>\n                            <div class="inputs" ng-if="form_data.form_ext">\n                                <div>\n                                    <md-select placeholder="Type" ng-model="form_data.form_ext_type" required>\n\n                                        <md-option value="n">Noun</md-option>\n                                        <md-option value="v">Verb</md-option>\n                                        <md-option value="j">Adjective</md-option>\n                                        <md-option value="r">Adverb</md-option>\n                                        <md-option value="no">Disable</md-option>\n                                    </md-select>\n                                </div>\n\n                                <div layout="row" layout-wrap>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_ext_a}}"  ng-model="form_data.form_ext_a" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_ext_b}}"  ng-model="form_data.form_ext_b" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_ext_c}}"  ng-model="form_data.form_ext_c" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_ext_d}}"  ng-model="form_data.form_ext_d" />\n                                            <md-input-container>\n                                    </div>\n                                    <div flex=50>\n                                        <md-input-container>\n                                            <input type="text" aria-label="{{form_data.form_ext_e}}"  ng-model="form_data.form_ext_e" />\n                                            <md-input-container>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <md-button palette-background="pink:400" ng-click="save()" class="md-raised md-primary" aria-label="Clear">Update</md-button>\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/word-module/template/vote-edit-image-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Image</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content ng-if = "!view">\n                <md-input-container layout-padding>\n                    <label for="lemma_search">Enter words, phrases or title</label>\n                    <input id="lemma_search" label="lemma_search" name="lemma_search" type="text" ng-model="lemma_search"/>\n                </md-input-container>\n\n                <md-button palette-background="pink:400" ngf-select ng-model="data.file" ngf-multiple="false" ng-disabled = "uploading" class="margin-left-0 md-raised md-primary">Select file</md-button>\n\n                <md-button ng-disabled = "!word.get(\'imagesmain\')" ng-if = "!note" palette-background="myPurple:700" ng-click="hideImages()" class="md-raised md-primary" aria-label="Hide image">Hide image</md-button>\n                \n                <md-button ng-disabled = \'!lemma_search || disable_search_lemma == lemma_search || lemma_search == "" \' palette-background="pink:400" ng-click="searchImages(lemma_search)" class="md-raised md-primary" aria-label="Search">Search</md-button>\n\n                <p ng-if = "upload_obj.message">{{upload_obj.message}}</p>\n\n                <p ng-if = "uploading">You can only upload copyright free images!</p>\n\n                <div ng-if = "search_word_list[0] && user.get(\'admin\')">\n                    <h4>You can add images form a web link</h4>\n                    <p>Link example : </p>\n                    <p>https://cdn.morguefile.com/file000875426915.jpg</p>\n                    <md-input-container layout-padding>\n                        <label for="image_link">Enter image link</label>\n                        <input id="image_link" label="image_link" name="image_link" type="text" ng-model="data.image_link"/>\n                    </md-input-container>\n\n\n                    <md-button palette-background="pink:400" ng-click="saveImageLink()" class="md-raised md-primary" aria-label="Use image">Save image link</md-button>\n\n                </div>\n\n                <div class="my-avatar" style = "overflow:auto;">\n                    <div class="hand avatar-images">\n                        <img ng-if = "imagesmain" ng-src="{{imagesmain.replace(\'http://cdn\',\'//cdn\')}}" alt="image" class="make-round" width="150" height="150"/>\n                    </div>\n                </div>\n\n                <div class="line"></div>\n\n                <div >\n                    \n\n                    <div>\n                        <div  ng-repeat="img in imagesList track by $index" class="hand avatar-images" ng-click = "changeImage(img.replace(\'http://cdn\',\'//cdn\'))" ng-if = "img">\n                            <img ng-src="{{img.replace(\'http://cdn\',\'//cdn\')}}" alt="image" class="make-round" width="150"  height="150"/>\n                        </div>\n                    </div>\n\n\n                    <div class="clear"></div>\n                </div>\n\n            </md-content>\n\n\n            <md-content ng-if = "view">\n                <div lass = "slideshow-side center">\n                    <md-slider style = "width:50%;margin:0 auto;" min="20" max="100" ng-model="size" ng-init="size = 70" aria-label="default value"></md-slider>\n                </div>\n\n                <div class = "center slide-image-box" style = "margin:16px 0;">\n                    <img ng-src="{{imagesmain.replace(\'http://cdn\',\'//cdn\')}}" alt="image" style = "width : {{size > 20 ? size : 20}}%;"/>\n                </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/word-module/template/vote-edit-phrase-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit related words/phrases</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <div class="syns">\n                    <md-input-container>\n                        <!--<label for="lemma">lemma</label>-->\n                        <input id="lemma" label="lemma" name="lemma" type="text" ng-model="lemma" disabled="disabled" />\n                    </md-input-container>\n                    <md-input-container class="margin-top-20">\n                        <label>Add new related words/phrases</label>\n                        <input id="word" label="word" name="word" type="text" ng-model="add_word" />\n                    </md-input-container>\n                    <md-button style = "position:relative"   palette-background="pink:400" ng-click="addPh(add_word)" class="md-raised md-primary margin-left-0" aria-label="Clear">Add</md-button>\n                    <md-list>\n                        <md-list-item class="hand" ng-repeat="word in relate_words track by $index">\n                            <p class="text-ellipsis">{{word}}</p>\n                            <md-button style = "position:relative" ng-if="relate_words_approve_list[$index] == user.id" palette-background="pink:400" ng-click="DeletePhrase($index)" class="md-raised md-primary" aria-label="Clear">Delete</md-button>\n                            <md-button style = "position:relative" ng-if="relate_words_status[$index] != \'disable\'" palette-background="pink:400" ng-click="disablePhrase($index)" class="md-raised md-primary" aria-label="Clear">Disable</md-button>\n                            <md-button style = "position:relative" ng-if="relate_words_status[$index] == \'disable\'" ng-click="enablePhrase($index)" palette-background="myPurple:900" class="md-raised md-primary">Enable</md-button>\n                        </md-list-item>\n                    </md-list>\n                </div>\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/word-module/template/vote-edit-pron-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit pronunciation and spelling</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <div  ng-if = "user.get(\'admin\') ">\n                <md-input-container>\n                    <label for="lemma">lemma</label>\n                    <input id="lemma" ng-change = "lemmaChange(lemma)" label="lemma" name="lemma" type="text" ng-model="lemma" />\n\n                    \n                </md-input-container>\n                <div   ng-if = "show_save_lemma_btn" >\n                    <md-button  style = "margin-left:0;" palette-background="pink:400" ng-click="updateLemma(lemma)" class="md-raised md-primary" aria-label="Clear">Save Change lemma</md-button>\n                    <p> Remember to change word forms and sentences in details page!</p>\n                </div>\n                \n                </div>\n                <md-input-container ng-if = "user.get(\'username\') != \'Rob\' ">\n                    <label for="lemma">lemma</label>\n                    <input id="lemma" label="lemma" name="lemma" type="text" ng-model="lemma" disabled="disabled" />\n                </md-input-container>\n                <div class="spelling">\n                    <h3 class="sum-header">Spelling</h3>\n                    <div class="overflow">\n                        <md-radio-group ng-model="spelling">\n                            <md-radio-button value="UK & US spelling">UK & US spelling</md-radio-button>\n                            <md-radio-button value="US spelling">US spelling</md-radio-button>\n                            <md-radio-button value="UK spelling">UK spelling</md-radio-button>\n                        </md-radio-group>\n                    </div>\n                </div>\n                <div class="prounctions">\n                    <h3 class="sum-header">Pronunciation</h3>\n                    <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                        [{{uk_pron}}][{{uk_change_pron}}] UK\n                    </div>\n                    <div layout="row" class="wrap">\n                        <div flex>\n                            <md-select placeholder="Pick consonant" ng-model="uk_pron_con">\n                                <md-option value="b">b</md-option>\n                                <md-option value="c">c</md-option>\n                                <md-option value="d">d</md-option>\n                                <md-option value="f">f</md-option>\n                                <md-option value="g">g</md-option>\n                                <md-option value="h">h</md-option>\n                                <md-option value="j">j</md-option>\n                                <md-option value="k">k</md-option>\n                                <md-option value="l">l</md-option>\n                                <md-option value="m">m</md-option>\n                                <md-option value="n">n</md-option>\n                                <md-option value="p">p</md-option>\n                                <md-option value="q">q</md-option>\n                                <md-option value="r">r</md-option>\n                                <md-option value="s">s</md-option>\n                                <md-option value="t">t</md-option>\n                                <md-option value="v">v</md-option>\n                                <md-option value="w">w</md-option>\n                                <md-option value="x">x</md-option>\n                                <md-option value="y">y</md-option>\n                                <md-option value="z">z</md-option>\n                                </md-select>\n                        </div>\n                        <div flex>\n                            <md-select placeholder="Pick vowel" ng-model="uk_pron_con">\n\n                                <md-optgroup label="Long vowel sounds:">\n                                    <md-option>A [eɪ] a.ble</md-option>\n                                    <md-option>E [i:] e.ven</md-option>\n                                    <md-option>I [ʌɪ] i.ce</md-option>\n                                    <md-option>O [əʊ] o.pen</md-option>\n                                    <md-option>uew [u:] sch.oo.l</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Very short vowel sounds:">\n                                    <md-option>a [a] a.t</md-option>\n                                    <md-option>e [ɛ] e.gg</md-option>\n                                    <md-option>ih [ɪ] i.t</md-option>\n                                    <md-option>o [ɒ] o.ff</md-option>\n                                    <md-option>uh [ʌ] u.gly</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Longer, short vowel sounds:">\n                                    \n                                    <md-option>aa [ə] a.go</md-option>\n                                    <md-option>eh [ɛ:] h.e.lp</md-option>\n                                    <md-option>ou [ʊ] b.oo.k</md-option>\n                                </md-optgroup>\n                                </md-select>\n                        </div>\n                        <div flex>\n                            <md-select placeholder="Pick combined sound" ng-model="uk_pron_con">\n                            <md-option>aw [aʊ] h.ow</md-option>\n                            <md-option>R [a:] c.ar</md-option>\n                            <md-option>er [əː] w.or.d</md-option>\n                            <md-option>eh-er [eə] squ.are</md-option>\n                            <md-option>ih-aa [ɪə] n.ear</md-option>\n                            <md-option>or [ɔ:] f.or</md-option>\n                            <md-option>oy [ɔɪ] b.oy</md-option>\n                            <md-option>ou-er [ʊə] p.oo.r</md-option>\n                            <md-option>ch [tʃ] ch.ur.ch</md-option>\n                            <md-option>jh [dʒ] en.j.oy</md-option>\n                            <md-option>sh [ʃ] sh.ut</md-option>\n                            <md-option>zj [ʒ] plea.s.ure</md-option>\n                            <md-option>th [θ] th.in</md-option>\n                            <md-option>dh [ð] th.ere</md-option>\n                            <md-option>ng [ŋ] goi.ng</md-option>\n                            <md-option>I-er [ʌɪə] f.ire</md-option>\n                            <md-option>aw-er [aʊə] s.our</md-option>\n                            </md-select>\n                            </div>\n                            <div flex>\n                            <md-select placeholder="Mark syllables & stress" ng-model="uk_pron_con">\n                            <md-option value=".">. Syllable marker</md-option>\n                            <md-option value="*">* Main syllable stress</md-option>\n                            <md-option value="\'">\' Secondary syllable stress</md-option>\n                            </md-select>\n                        </div>\n                        \n                    </div>\n\n                    <div >\n\n                        <md-button ng-disabled = "!uk_pron_con" ng-click="addUK()" palette-background="pink:400" class="md-primary" aria-label="Enter sound / marker">\n                            Enter sound / marker\n                        </md-button>\n\n                        <md-button palette-background="pink:400" ng-click="clearUK()" class="md-raised md-primary" aria-label="Clear">Clear</md-button>\n                    </div>\n                    <hr>\n                    <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                        [{{us_pron}}][{{us_change_pron}}] US\n                    </div>\n                    <div layout="row" class="wrap">\n                        <div flex>\n                            <md-select placeholder="Pick consonant" ng-model="us_pron_con">\n                                <md-option value="b">b</md-option>\n                                <md-option value="c">c</md-option>\n                                <md-option value="d">d</md-option>\n                                <md-option value="f">f</md-option>\n                                <md-option value="g">g</md-option>\n                                <md-option value="h">h</md-option>\n                                <md-option value="j">j</md-option>\n                                <md-option value="k">k</md-option>\n                                <md-option value="l">l</md-option>\n                                <md-option value="m">m</md-option>\n                                <md-option value="n">n</md-option>\n                                <md-option value="p">p</md-option>\n                                <md-option value="q">q</md-option>\n                                <md-option value="r">r</md-option>\n                                <md-option value="s">s</md-option>\n                                <md-option value="t">t</md-option>\n                                <md-option value="v">v</md-option>\n                                <md-option value="w">w</md-option>\n                                <md-option value="x">x</md-option>\n                                <md-option value="y">y</md-option>\n                                <md-option value="z">z</md-option>\n                                </md-select>\n                        </div>\n                        <div flex>\n                            <md-select placeholder="Pick vowel" ng-model="us_pron_con">\n\n                                <md-optgroup label="Long vowel sounds:">\n                                    <md-option>A [eɪ] a.ble</md-option>\n                                    <md-option>E [i:] e.ven</md-option>\n                                    <md-option>I [ʌɪ] i.ce</md-option>\n                                    <md-option>O [əʊ] o.pen</md-option>\n                                    <md-option>uew [u:] sch.oo.l</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Very short vowel sounds:">\n\n                                    <md-option>ae [æ] a.t </md-option>\n                                    <md-option>e [ɛ] e.gg</md-option>\n                                    <md-option>ih [ɪ] i.t</md-option>\n                                    <md-option>o [ɒ] o.ff</md-option>\n                                    <md-option>uh [ʌ] u.gly</md-option>\n                                </md-optgroup>\n\n                                <md-optgroup label="Longer, short vowel sounds:">\n\n                                    <md-option>aa [ə] a.go</md-option>\n                                    <md-option>eh [ɛ:] h.e.lp</md-option>\n                                    <md-option>ou [ʊ] b.oo.k</md-option>\n                                </md-optgroup>\n\n\n                                </md-select>\n                        </div>\n                        <div flex>\n                            <md-select placeholder="Pick combined sounds" ng-model="us_pron_con">\n                            <md-option>aw [aʊ] h.ow</md-option>\n                            <md-option>R [a:] c.ar</md-option>\n                            <md-option>er [əː] w.or.d</md-option>\n                            <md-option>eh-er [eə] squ.are</md-option>\n                            <md-option>ih-aa [ɪə] n.ear</md-option>\n                            <md-option>or [ɔ:] f.or</md-option>\n                            <md-option>oy [ɔɪ] b.oy</md-option>\n                            <md-option>ou-er [ʊə] p.oo.r</md-option>\n                            <md-option>ch [tʃ] ch.ur.ch</md-option>\n                            <md-option>jh [dʒ] en.j.oy</md-option>\n                            <md-option>sh [ʃ] sh.ut</md-option>\n                            <md-option>zj [ʒ] plea.s.ure</md-option>\n                            <md-option>th [θ] th.in</md-option>\n                            <md-option>dh [ð] th.ere</md-option>\n                            <md-option>ng [ŋ] goi.ng</md-option>\n                            <md-option>I-er [ʌɪə] f.ire</md-option>\n                            <md-option>aw-er [aʊə] s.our</md-option>\n                            </md-select>\n                            </div>\n                            <div flex>\n                            <md-select placeholder="Mark syllables & stress" ng-model="us_pron_con">\n                            <md-option value=".">. Syllable marker</md-option>\n                            <md-option value="*">* Main syllable stress</md-option>\n                            <md-option value="\'">\' Secondary syllable stress</md-option>\n                            </md-select>\n                        </div>\n                        \n                    </div>\n\n                    <div>\n                         <md-button ng-disabled = "!us_pron_con" ng-click="addUS()" palette-background="pink:400" class="md-primary" aria-label="Enter sound / marker">\n                            Enter sound / marker\n                        </md-button>\n                        <md-button palette-background="pink:400" ng-click="clearUS()" class="md-raised md-primary" aria-label="Clear">Clear</md-button>\n                    </div>\n                </div>\n                <md-button palette-background="pink:400" ng-click="save()" class="md-raised md-primary" aria-label="Clear">Update</md-button>\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog'),e.put("app/word-module/template/vote-sentence-edit-dialog.tmpl.html",'<md-dialog class="email-dialog review-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit definition, synonyms and sentences</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container vote-edit">\n        <div>\n            <md-content>\n                <md-input-container>\n                    <!--<label for="lemma">lemma</label>-->\n                    <input id="lemma" label="lemma" name="lemma" type="text" ng-model="lemma" />\n                </md-input-container>\n                <div class="definition grey-bg" ng-if = "!define.only_syn">\n                    <h3 class="sum-header">Definition</h3>\n\n                    <div ng-if = "hide_edit_define">\n                        <p>{{definition}}</p>\n                    </div>\n                    <div ng-if = "!hide_edit_define">\n                        <md-select ng-change="changeDefineLabel()" placeholder="Select" ng-model="define_data.label">\n                            <md-optgroup label="general description">\n                                <md-option value="(state)">(state)</md-option>\n                                <md-option value="(action)">(action)</md-option>\n                                <md-option value="(activity)">(activity)</md-option>\n                                <md-option value="(object)">(object)</md-option>\n                                <md-option value="(concept)">(concept)</md-option>\n                                <md-option value="(process)">(process)</md-option>\n                                <md-option value="(feeling)">(feeling)</md-option>\n                                <md-option value="(description)">(description)</md-option>\n                                <md-option value="(phrase)">(phrase)</md-option>\n                                <md-option value="(person)">(person)</md-option>\n                                <md-option value="(time)">(time)</md-option>\n                                <md-option value="(grammar)">(grammar)</md-option>\n                            </md-optgroup>\n                            <md-optgroup label="specific description">\n                                <md-option value="(abbreviation)">(abbreviation)</md-option>\n                                <md-option value="(animal)">(animal)</md-option>\n                                <md-option value="(appliance)">(appliance)</md-option>\n                                <md-option value="(archaeology)">(archaeology)</md-option>\n                                <md-option value="(astronomy)">(astronomy)</md-option>\n                                <md-option value="(appearance)">(appearance)</md-option>\n                                <md-option value="(art)">(art)</md-option>\n                                <md-option value="(belief)">(belief)</md-option>\n                                <md-option value="(body)">(body)</md-option>\n                                <md-option value="(books)">(books)</md-option>\n                                <md-option value="(building)">(building)</md-option>\n                                <md-option value="(business)">(business)</md-option>\n                                <md-option value="(characteristic)">(characteristic)</md-option>\n                                <md-option value="(chore)">(chore)</md-option>\n                                <md-option value="(clothes)">(clothes)</md-option>\n                                <md-option value="(code)">(code)</md-option>\n                                <md-option value="(colour)">(colour)</md-option>\n                                <md-option value="(communication)">(communication)</md-option>\n                                <md-option value="(component)">(component)</md-option>\n                                <md-option value="(condition)">(condition)</md-option>\n                                <md-option value="(cooking)">(cooking)</md-option>\n                                <md-option value="(country)">(country)</md-option>\n                                <md-option value="(culture)">(culture)</md-option>\n                                <md-option value="(custom)">(custom)</md-option>\n                                <md-option value="(device)">(device)</md-option>\n                                <md-option value="(direction)">(direction)</md-option>\n                                <md-option value="(document)">(document)</md-option>\n                                <md-option value="(drama)">(drama)</md-option>\n                                <md-option value="(drink)">(drink)</md-option>\n                                <md-option value="(education)">(education)</md-option>\n                                <md-option value="(electronics)">(electronics)</md-option>\n                                <md-option value="(entertainment)">(entertainment)</md-option>\n                                <md-option value="(food)">(food)</md-option>\n                                <md-option value="(furniture)">(furniture)</md-option>\n                                <md-option value="(geography)">(geography)</md-option>\n                                <md-option value="(geology)">(geology)</md-option>\n                                <md-option value="(health)">(health)</md-option>\n                                <md-option value="(history)">(history)</md-option>\n                                <md-option value="(infrastructure)">(infrastructure)</md-option>\n                                <md-option value="(instrument)">(instrument)</md-option>\n                                <md-option value="(item)">(item)</md-option>\n                                <md-option value="(job)">(job)</md-option>\n                                <md-option value="(language)">(language)</md-option>\n                                <md-option value="(law)">(law)</md-option>\n                                <md-option value="(life)">(life)</md-option>\n                                <md-option value="(liquid)">(liquid)</md-option>\n                                <md-option value="(material)">(material)</md-option>\n                                <md-option value="(maths)">(maths)</md-option>\n                                <md-option value="(medicine)">(medicine)</md-option>\n                                <md-option value="(mind)">(mind)</md-option>\n                                <md-option value="(money)">(money)</md-option>\n                                <md-option value="(music)">(music)</md-option>\n                                <md-option value="(nature)">(nature)</md-option>\n                                <md-option value="(nation)">(nation)</md-option>\n                                <md-option value="(nationality)">(nationality)</md-option>\n                                <md-option value="(number)">(number)</md-option>\n                                <md-option value="(organ)">(organ)</md-option>\n                                <md-option value="(organisation)">(organisation)</md-option>\n                                <md-option value="(phenomena)">(phenomena)</md-option>\n                                <md-option value="(place)">(place)</md-option>\n                                <md-option value="(plant)">(plant)</md-option>\n                                <md-option value="(politics)">(politics)</md-option>\n                                <md-option value="(product)">(product)</md-option>\n                                <md-option value="(relationship)">(relationship)</md-option>\n                                <md-option value="(religion)">(religion)</md-option>\n                                <md-option value="(resource)">(resource)</md-option>\n                                <md-option value="(responsibility)">(responsibility)</md-option>\n                                <md-option value="(rules)">(rules)</md-option>\n                                <md-option value="(saying)">(saying)</md-option>\n                                <md-option value="(science)">(science)</md-option>\n                                <md-option value="(social issue)">(social issue)</md-option>\n                                <md-option value="(society)">(society)</md-option>\n                                <md-option value="(sound)">(sound)</md-option>\n                                <md-option value="(subject)">(subject)</md-option>\n                                <md-option value="(supernatural)">(supernatural)</md-option>\n                                <md-option value="(superstition)">(superstition)</md-option>\n                                <md-option value="(sport)">(sport)</md-option>\n                                <md-option value="(terminology)">(terminology)</md-option>\n                                <md-option value="(theory)">(theory)</md-option>\n                                <md-option value="(title)">(title)</md-option>\n                                <md-option value="(transport)">(transport)</md-option>\n                                <md-option value="(travel)">(travel)</md-option>\n                                <md-option value="(utensil)">(utensil)</md-option>\n                                <md-option value="(vegetable)">(vegetable)</md-option>\n                                <md-option value="(weather)">(weather)</md-option>\n                                <md-option value="(work place)">(work place)</md-option>\n                            </md-optgroup>\n                        </md-select>\n                        \n                        <md-input-container>\n                            <input ng-change="defineChange()" label="lemma" name="lemma" type="text" ng-model="define_data.definition" />\n                        </md-input-container>\n\n                        <p ng-if = "!define_data.label">Please select label!</p>\n                        <md-button ng-disabled = "!define_data.label" ng-if="define_change" palette-background="pink:400" ng-click="saveDefine()" class="md-raised md-primary" aria-label="SAVE DEFINITION">SAVE DEFINITION</md-button>\n                    </div>\n\n                    <p style = "margin:0">Note: If there is an absolute synonym for this, then include it in the definition so it is eliminated from possible answers.</p>\n                    \n                </div>\n                <div class = "grey-bg" ng-if = "!define.only_syn">\n                    <h3 class="sum-header">Use and  dialect</h3>\n                    <div>\n                        <label ng-repeat="type in sentence_type">\n                            <input type="checkbox" name="selectedSentenceType[]" value="{{type}}" ng-checked="selection.indexOf(type) > -1" ng-click="toggleSelection(type)"> {{type}}\n                        </label>\n                    </div>\n                </div>\n                <div class="synonyms grey-bg">\n                    <h3 class="sum-header">Related words (non-direct synonyms)</h3>\n                    <p class = "font-red">Note: These are used as false answers in auto revision exercises</p>\n                    <md-input-container class="margin-top-20">\n                        <label>Add new related word/s</label>\n                        <input id="word" label="word" name="word" type="text" ng-model="add_word" />\n                    </md-input-container>\n                    <md-button palette-background="pink:400" ng-click="addSyn(add_word)" class="md-raised md-primary" aria-label="Clear">Add</md-button>\n                    <md-list>\n                        <md-list-item class="hand" ng-repeat="syn in synsetlemma track by $index" ng-if = "$index < 5 || synsetlemma_admin_list[$index]">\n                            <p class="text-ellipsis">{{syn}}</p>\n                            <md-button ng-if="user.get(\'admin\') || synsetlemma_approve_list[$index] == user.id " palette-background="pink:400" ng-click="deleteSyn($index)" class="md-raised md-primary" aria-label="Clear">Delete</md-button>\n\n\n                            <md-button ng-disabled = "synsetlemma_disable[$index]"  ng-if="!user.get(\'admin\')" palette-background="pink:400" ng-click="mistakeRelativeWord($index)" class="md-raised md-primary" aria-label="Mistake">Mistake</md-button>\n\n                            <md-button ng-if="!synsetlemma_admin_list[$index] && synsetlemma_approve_list[$index] != user.id && (synsetlemma_status[$index] != \'disable\' || !synsetlemma_status[$index])" palette-background="pink:400" ng-click="disableSyn($index)" class="md-raised md-primary" aria-label="Clear">Disable</md-button>\n                            <md-button ng-if="!synsetlemma_admin_list[$index] && synsetlemma_approve_list[$index] != user.id && synsetlemma_status[$index] == \'disable\' " ng-click="enableSyn($index)" palette-background="myPurple:900" class="md-raised md-primary">Enable</md-button>\n                        </md-list-item>\n                    </md-list>\n                </div>\n                <div class="sentences-wrap grey-bg" ng-if = "!define.only_syn">\n                    <h3 class="sum-header">Sentences</h3>\n\n                    <div ng-if = "user.get(\'admin\') || !hide_add_for_normal_teacher">\n                        <md-input-container class="margin-top-20">\n                            <label>Add new example sentence</label>\n                            <input ng-change = "sentence_change()" id="word" label="word" name="word" type="text" ng-model="add_sentence" />\n                        </md-input-container>\n                        <p style = " color:grey;font-size:12px;margin-top:-20px;" ng-if = "sentence_change_message" >{{sentence_change_message}}</p>\n                        \n                        <md-button palette-background="pink:400" ng-click="addSentence(add_sentence)" class="md-raised md-primary" aria-label="Clear">Add</md-button>\n                    </div>\n                    \n                    <md-list>\n                        <md-list-item class="hand" ng-repeat="sentence in sentence_list track by $index" ng-if = "$index < 5 || sentence_admin_list[$index]">\n                            <p class="text-ellipsis">{{sentence}}</p>\n                            <md-button ng-if="sentence_approve_list[$index] == user.id || user.get(\'admin\')" palette-background="pink:400" ng-click="deleteST($index)" class="md-raised md-primary" aria-label="Clear">Delete</md-button>\n                            <md-button ng-if="!sentence_admin_list[$index] && sentence_approve_list[$index] != user.id && (sentence_list_status[$index] != \'disable\' || !sentence_list_status[$index]) " palette-background="pink:400" ng-click="disableST($index)" class="md-raised md-primary" aria-label="Clear">Disable</md-button>\n                            <md-button ng-if="!sentence_admin_list[$index] && sentence_approve_list[$index] != user.id && sentence_list_status[$index] == \'disable\' " ng-click="enableST($index)" palette-background="myPurple:900" class="md-raised md-primary">Enable</md-button>\n                        </md-list-item>\n                    </md-list>\n                    <!-- <md-button palette-background="pink:400" ng-click = "save()"  class="md-raised md-primary" aria-label="Clear">Update</md-button> -->\n                </div>\n\n            </md-content>\n        </div>\n    </md-dialog-content>\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        <md-button palette-background="pink:400" ng-if = "define.get(\'user_id\') == user.get(\'admin\')"   ng-click="deleteDefine()" class="md-raised md-primary" aria-label="Clear">Delete definition</md-button>\n        <md-button palette-background="myPurple:900" class="md-raised md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/word-module/template/word-empty.tmpl.html",'<md-content class="tm word-detail-page wp-detail" >\n    <h1>Sorry, we are adding the word data.</h1>\n\n</md-content>'),e.put("app/word-module/template/word-page.tmpl.html",'<md-content class="tm word-detail-page wp-detail">\n    <div layout-margin class="category-nav">\n        <div class="pagging" style="padding-left:20px;">\n            <md-icon class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <div class="top-word-details" layout="row" layout-sm="column" layout-md="column" layout-margin style="padding: 0 8px;">\n        <div class="lemmt-tile" flex-sm="100" flex-md="100" flex="40" layout="column" layout-align="space-between start">\n            <div layout="row" ng-if="user.get(\'user_role\') == \'teacher\' " class="vote-form bg-tm">\n                <md-radio-group ng-if="!user.get(\'admin\')" ng-model="data.default" ng-init="data.default = \'Red\'">\n                    <md-radio-button value="Mistake" ng-disabled="cookies.get(\'vote_pron_rate\' + lemma)" ng-click="inCorrect(\'vote_pron_rate\')">Mistake</md-radio-button>\n                </md-radio-group>\n                <md-button ng-if="user.get(\'admin\') || user.get(\'author\')" aria-label="Edit" style="background: rgba(0, 0, 0, 0.5)" ng-click="popVotePronEdit()" class="md-raised md-primary edit-pop" aria-label="Edit">Edit</md-button>\n            </div>\n            <h3 class="md-display-1 lemma-word" layout="column" layout-padding layout-align="start start">\n                <span>{{lemma}} <i ng-if = "inStudyList(lemma)"  class="fa fa-check-circle"></i></span>\n               <div class="exam-labels">\n                    <span ng-if="all_word_data.get(\'pet\')" >PET</span>\n                    <span ng-if="all_word_data.get(\'cect4\')" >CECT4</span>\n                    <span ng-if="all_word_data.get(\'ielts\')" >IELTS</span>\n\n\n               </div>\n            </h3>\n            <div layout="column" class="pron-wrapper" layout-padding layout-align="center start">\n                <p class="text-ellipsis spelling">{{all_word_data.get(\'spelling\')}}\n                    <span ng-click="speak(lemma,\'UK English Male\')" class="hand">UK <i   class="hand fa fa-volume-off"></i></span>\n                    <span ng-click="speak(lemma,\'US English Female\')" class="hand">US  <i  class="hand fa fa-volume-off"></i></span>\n                </p>\n                <p  ng-if="phrases[\'dt\'].hide_uk != \'true\' " class="pron-p">\n                    <span ng-class = "checkDataClass(all_word_data.get(\'uk_pron\'),\'*\')" class="pro-uk">{{all_word_data.get(\'uk_pron\')}}</span>\n                    <span ng-class = "checkDataClass(all_word_data.get(\'uk_change_pron\'),\'*\')" class="pro-uk">{{all_word_data.get(\'uk_change_pron\')}}</span>\n                </p>\n                <p ng-if="phrases[\'dt\'].hide_us != \'true\' " class="pron-p">\n                    <span ng-class = "checkDataClass(all_word_data.get(\'us_pron\'),\'*\')" class="pro-uk">{{all_word_data.get(\'us_pron\')}}</span>\n                    <span ng-class = "checkDataClass(all_word_data.get(\'us_change_pron\'),\'*\')" class="pro-uk">{{all_word_data.get(\'us_change_pron\')}}</span>\n                </p>\n            </div>\n        </div>\n        <div flex-sm="100" flex-md="100" flex class="relative map-and-form-outer">\n            <div layout="row" ng-if="user.get(\'user_role\') == \'teacher\' " class="vote-form bg-tm">\n                <md-radio-group ng-if="!user.get(\'admin\')" ng-model="data.default">\n                    <md-radio-button value="Mistake" ng-disabled="cookies.get(\'vote_form_type_rate\' + lemma)" ng-click="inCorrect(\'vote_form_type_rate\')">Mistake</md-radio-button>\n                </md-radio-group>\n                <md-button ng-if="user.get(\'admin\') || user.get(\'author\')" style="background: rgba(0, 0, 0, 0.5)" ng-click="popVoteFormEdit()" class="md-raised md-primary edit-pop" aria-label="Edit">Edit</md-button>\n            </div>\n            <div layout="row" layout-sm="column" layout-md="column" layout-wrap class="map-and-form-type">\n                <div flex="45" flex-md="100" flex-sm="100" class="middle" style="min-height:247px">\n                    <div palette-background="white:100" class="word-types padding" flex layout="column" layout-align="center start">\n                        <md-list>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_v\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Verb \n                            </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_v_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_v_b\')}},</span>\n                                    <span>{{all_word_data.get(\'form_v_c\')}},</span>\n                                    <span>{{all_word_data.get(\'form_v_d\')}},</span>\n                                    <span>{{all_word_data.get(\'form_v_e\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_ext\') && all_word_data.get(\'form_ext_type\') == \'v\' ">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Irreg. \n                                </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_b\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_c\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_d\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_e\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_n\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Noun \n                            </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_n_a\')}}</span><span ng-if="all_word_data.get(\'form_n_a\') && all_word_data.get(\'form_n_b\')">, </span><span>{{all_word_data.get(\'form_n_b\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_ext\') && all_word_data.get(\'form_ext_type\') == \'n\' ">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Irreg. \n                                </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_b\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_j\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Adj \n                            </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_j_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_j_b\')}},</span>\n                                    <span>{{all_word_data.get(\'form_j_c\')}}</span>\n                                </div>\n                            </md-list-item>\n\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_pre\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Preposition\n                            </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_pre_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_pre_b\')}}</span>\n                                </div>\n                            </md-list-item>\n\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_ext\') && all_word_data.get(\'form_ext_type\') == \'j\' ">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Irreg. \n                                </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_b\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_c\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_r\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Adv \n                            </span>\n                                <div class="word-form">\n                                    <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                                    <div ng-if="all_word_data.get(\'form_abb_b\')">\n                                        <span>{{all_word_data.get(\'form_r_a\')}},</span>\n                                        <span>{{all_word_data.get(\'form_r_b\')}}</span>\n                                    </div>\n                                    <div ng-if="!all_word_data.get(\'form_abb_b\')">\n                                        <span>{{all_word_data.get(\'form_r_a\')}}</span>\n                                    </div>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_ext\') && all_word_data.get(\'form_ext_type\') == \'r\' ">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Irreg. \n                                </span>\n                                <div class="word-form">\n                                    <span>{{all_word_data.get(\'form_ext_a\')}},</span>\n                                    <span>{{all_word_data.get(\'form_ext_b\')}}</span>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_ph\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Phrase \n                            </span>\n                                <div class="word-form">\n                                    <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                                    <div ng-if="form_ph_b">\n                                        <span>{{all_word_data.get(\'form_ph_a\')}},</span>\n                                        <span>{{all_word_data.get(\'form_ph_b\')}}</span>\n                                    </div>\n                                    <div ng-if="!form_ph_b">\n                                        <span>{{all_word_data.get(\'form_ph_a\')}}</span>\n                                    </div>\n                                </div>\n                            </md-list-item>\n                            <md-list-item class="md-3-line padding-left-0" ng-if="all_word_data.get(\'form_tit\')">\n                                <span class="word-type" palette-background="myPurple:500">\n                                Title \n                            </span>\n                                <div class="word-form">\n                                    <span ng-if="all_word_data.get(\'start_str\')">{{all_word_data.get(\'start_str\')}} + </span>\n                                    <div ng-if="all_word_data.get(\'form_abb_b\')">\n                                        <span>{{all_word_data.get(\'form_tit_a\')}},</span>\n                                        <span>{{all_word_data.get(\'form_tit_b\')}}</span>\n                                    </div>\n                                    <div ng-if="!all_word_data.get(\'form_abb_b\')">\n                                        <span>{{all_word_data.get(\'form_tit_a\')}}</span>\n                                    </div>\n                                </div>\n                            </md-list-item>\n                        </md-list>\n                    </div>\n                    <div class="word-types ">\n                        <div class="wrap prefix">\n                            <span ng-repeat="prefix in prefixs">{{prefix.origin}} </span>\n                        </div>\n                    </div>\n                </div>\n                <!-- end middle -->\n                <div flex="55" flex-md="100" flex-sm="100" layout-align="center center" class="left-block" layout-padding>\n                    <div layout="column" layout-padding class="map " palette-background="white:100">\n                        <canvas class="chart-doughnut" colours="wordChart.colours" data="wordChart.data" legend="true" labels="wordChart.labels"></canvas>\n                    </div>\n                    <div class="chart-copy-right base_wrap_text">\n                        Based on large UK & US corpora | <span class="hand" ng-click="showDisclaimer()">Wordnet</span>\n                    </div>\n                </div>\n                <!-- end left block -->\n            </div>\n        </div>\n    </div>\n    <div layout="column" layout-sm="column" layout-margin style="margin-left: 16px;" class="define-widget-outer">\n        <div layout="column" layout-sm="column" flex class=" defines-wrap">\n            <div ng-repeat="define in worddefines" ng-class="highLightClass(define) " ng-if="define.get(\'definition\')">\n                <div ng-if="user.get(\'user_role\') != \'student\' || !define.get(\'disable\') ">\n                    <div layout="row" class="vote-form bg-tm" layout-sm="column" layout-wrap>\n                        <span flex class="vote-rate">{{define.get(\'vote_sentence_rate\')}}%</span>\n                        <md-radio-group ng-if="user.get(\'user_role\') == \'teacher\' " ng-model="data.default" ng-init="data.default = \'Red\'">\n                            <md-radio-button value="Mistake" ng-disabled="cookies.get(define.get(\'sentence_main\') + define.get(\'definition\') + \'vote_sentence_rate\')" ng-click="setInCorrect(define)">Mistake</md-radio-button>\n                        </md-radio-group>\n                        <md-button ng-if="user.get(\'admin\') || user.get(\'author\')" style="background: rgba(0, 0, 0, 0.5)" ng-click="popVoteSentenceEdit(define)" class="md-raised md-primary edit-pop" aria-label="Edit">Edit</md-button>\n                        <md-button aria-label="Edit" ng-if="user.get(\'admin\') || user.get(\'author\')" style="background: rgba(0, 0, 0, 0.5)" ng-click="popImageEdit(define)" class="md-raised md-primary edit-pop" aria-label="Edit">Edit image</md-button>\n                        <md-button ng-if="user.get(\'admin\') && !define.get(\'disable\')" style="background: rgba(0, 0, 0, 0.5)" ng-click="changeDefineStatus(define)" class="md-raised md-primary edit-pop" aria-label="Disable">Disable</md-button>\n                        <md-button ng-if="user.get(\'admin\') && define.get(\'disable\')" style="background: rgba(0, 0, 0, 0.5)" ng-click="changeDefineStatus(define)" class="md-raised md-primary edit-pop" aria-label="Enable">Enable</md-button>\n                        <md-button aria-label="Edit" style="background: rgba(0, 0, 0, 0.5)" ng-if="!define.details_show" ng-click="expand(define)" class="md-raised md-primary edit-pop">\n                            <md-icon style="color:#fff" md-font-icon="fa fa-expand"></md-icon>\n                        </md-button>\n                        <md-button aria-label="Edit" style="background: rgba(0, 0, 0, 0.5)" ng-if="define.details_show" ng-click="expand(define)" class="md-raised md-primary edit-pop">\n                            <md-icon style="color:#fff" md-font-icon="fa fa-compress"></md-icon>\n                        </md-button>\n                        <md-button ng-if = "user.get(\'user_role\') ==  \'student\' " ng-disabled="define.diabled_add_word" ng-click="addWordByDefine(define)" class="md-raised md-primary edit-pop glowing" palette-background="pink:400" aria-label="fab button">\n                            <md-icon md-font-icon="icon-add"></md-icon>\n                            study\n                        </md-button>\n                    </div>\n                    <widget class="define-item relative margin-bottom-20" flex content-layout="column" content-layout-align="start start" content-padding layout-padding>\n                        <div class="imagesmain">\n                            <img ng-if="define.get(\'imagesmain\')" ng-src="{{define.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                            <img ng-if="!define.get(\'imagesmain\')" ng-src="assets/images/default-img.png">\n                        </div>\n                        \n                        <div class="oval-wrap clearfix define md-subhead" style="font-weight:bold">\n                            <span ng-if="define.get(\'pos\') == \'v\'">(Verb)</span>\n                            <span ng-if="define.get(\'pos\') == \'n\'">(Noun)</span>\n                            <span ng-if="define.get(\'pos\') == \'j\'">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'r\'">(Adverb)</span>\n                            <span ng-if="define.get(\'pos\') == \'s\'">(Adjective)</span>\n                            <span ng-if="define.get(\'pos\') == \'a\'">(Adjective)</span> {{define.get(\'definition\')}}\n                        </div>\n                        <div ng-if=" define.get(\'sentence_type\') &&  define.get(\'sentence_type\')[0]" class="oval-wrap grey clearfix margin-bottom-10 md-subhead hand">\n                            <span style="cursor: hand;cursor: pointer" class="synsetlemma" ng-repeat="value in define.get(\'sentence_type\') track by $index">{{value}}<span ng-hide="$last">, </span></span>\n                        </div>\n                        <div class="oval-wrap grey clearfix margin-bottom-10 md-subhead hand" ng-if="define.get(\'synsetlemma\')[0]">\n                            <span style="cursor: hand;cursor: pointer" ui-sref="admin-panel.default.word-page({lemma:syn,originlemma:syn})" class="synsetlemma" ng-repeat="syn in define.get(\'synsetlemma\') track by $index" ng-if="define.get(\'synsetlemma_status\')[$index] != \'disable\' ">\n\n                                <span style = "margin-right:16px;">{{syn}} </span>\n                            </span>\n                        </div>\n                        <div ng-if="define.get(\'sentence_main\') && !define.details_show" class="md-subhead sentence margin-bottom-10"><i class="fa fa-quote-left"></i><span style="font-size:20px" class="firt-upper">{{define.get(\'sentence_main\')}}</span><span ng-if="define.get(\'sentence_approve_list\')[0]" class="approve">APPROVED</span></div>\n                        <div ng-if="define.get(\'sentence_main\') && define.details_show" class="md-subhead sentence margin-bottom-10">\n                            <p ng-repeat="sentence in define.get(\'sentence_list\') track by $index" ng-if="define.get(\'sentence_list_status\')[$index] != \'disable\' "><i class="fa fa-quote-left"></i><span class="firt-upper">{{sentence}}</span><span ng-if="define.get(\'sentence_approve_list\')[$index]" class="approve">APPROVED</span></p>\n                        </div>\n                    </widget>\n                </div>\n            </div>\n            <div class="add-new-phrase" ng-if="user.get(\'admin\')">\n                <md-button ng-click="popAddNewDefine()" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                    Add new definition\n                </md-button>\n                <md-button ng-if="user.get(\'admin\')" ng-click="popAddNewWord()" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                    Add new word\n                </md-button>\n                <md-button ng-click="deleteWord()" ng-if="user.get(\'admin\')" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                    Delete word\n                </md-button>\n            </div>\n        </div>\n        <div layout="column" layout-sm="column" flex class="phrases-of-lemma">\n            <div layout="row" ng-if="user.get(\'user_role\') == \'teacher\' " class="vote-form bg-tm">\n                <span flex class="vote-rate">{{all_word_data.get(\'vote_phrase_rate\')}}%</span>\n                <md-radio-group ng-model="data.default" ng-init="data.default = \'Red\'">\n                    <md-radio-button value="Mistake" ng-disabled="cookies.get(\'vote_phrase_rate\' + lemma)" ng-click="inCorrect(\'vote_phrase_rate\')">Mistake</md-radio-button>\n                </md-radio-group>\n                <md-button style="background: rgba(0, 0, 0, 0.5)" ng-click="popVotePhraseEdit()" class="md-raised md-primary edit-pop" aria-label="Edit">Edit</md-button>\n            </div>\n            <widget ng-if="all_word_data.get(\'relate_words\') || user.get(\'user_role\') == \'teacher\'" flex content-layout="column" content-layout-align="start" content-padding layout-padding>\n                <div class="inner" style="min-height:100px">\n                    <div ng-if = "all_word_data.get(\'relate_words_status\')[$index] != \'disable\' " class="text-ellipsis phrase-line" ng-repeat="lemma in all_word_data.get(\'relate_words\') track by $index">\n                        {{lemma}}\n                    </div>\n                </div>\n            </widget>\n        </div>\n    </div>\n</md-content>\n'),e.put("app/authentication/admin/template/category-data.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Category data</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            \n\n            <div class="course-buttons">\n\n                <div ng-repeat="course in vocab_courses" style = "display:inline-block" >\n                    <md-button  ng-if = "select_course != course " ng-click="triggerCourse(course)" palette-background="myPurple:A100" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{course.name}}">\n                        {{course.name}}\n                    </md-button>\n\n                    <md-button  ng-if = "select_course == course " ng-click="triggerCourse(course)" palette-background="myPurple:700" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{course.name}}">\n                        {{course.name}}\n                    </md-button>\n                    \n                </div>\n            </div>\n\n            <div layout="row" layout-sm="column"  layout-align="space-between start">\n                <div flex = 20>\n                    <md-select ng-change = "changeFilter(filter)" style = "margin-left:0;max-width: 200px;" layout-padding placeholder="Filter" ng-model="filter">\n                        <md-option value=\'all\'>ALL</md-option>\n                        <md-option value={{level.name}} ng-repeat="level in levels">{{level.name}}</md-option>\n                    </md-select>\n                </div>\n\n                <div style = "margin-bottom: 8px;margin-top: 15px;" flex = 30>\n                    <md-button ng-disabled = "page <= 1" ng-click = "prePage()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="pre"><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                    <md-button ng-disabled = "words.length < limit" ng-click = "nextPage()" palette-background="pink:400" class="md-raised md-primary" aria-label="next"><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n                    {{page}}\n                </div>\n\n                <div flex = 10>\n                    <md-input-container style = "padding:0" >\n                        <label for="jump_page">Jump page</label>\n                        <input ng-model-options=\'{ debounce: 500 }\'  ng-change = "jumpPage()" id="jump_page" label="jump_page" name="jump_page" type = "text" ng-model = "page" >\n                    </md-input-container>\n                </div>\n\n                <div flex = 10>\n                    <md-input-container style = "padding:0" >\n                        <label for="limit_page">Limit page</label>\n                        <input ng-model-options=\'{ debounce: 500 }\'  ng-change = "jumpPage()" id="limit_page" label="limit_page" name="limit_page" type = "text" ng-model = "limit" >\n                    </md-input-container>\n                </div>\n\n                <div flex = 10>\n                    <md-input-container style = "padding:0" >\n                        <label for="search">Search</label>\n                        <input ng-model-options=\'{ debounce: 500 }\'  ng-change = "search()" id="search" label="search" name="search" type = "text" ng-model = "search_str" >\n                    </md-input-container>\n                </div>\n            </div>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">ID</span></th>\n                        <th style = "width:20%;"><span class = "font-black">WORD/PHRASE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">LEVEL</span></th>\n                        <th style = "width:20%;"><span class = "font-black">CATEGORY</span></th>\n                        <th >ACTIONS</th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-class = "checkWordClass(word)" ng-repeat="word in words track by $index" ng-if = "word.get(select_course.id) || select_course.id == \'general\' ">\n                        <td >{{limit*(page-1) + $index + 1}}</td>\n                        <td >{{word.get(\'name\')}}</td>\n                        <td >{{word.get(\'level\')}}</td>\n                        <td >{{select_course.name}}</td>\n                        <td>\n                            <md-button ng-disabled = "word.disable" ng-click="popEdit(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="edit">\n                                edit\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n            \n\n\n            \n\n        </md-card-content>\n    </md-card>\n</md-conten>'),e.put("app/authentication/admin/template/contact-to-user-dialog.tmpl.html",'<md-dialog class="email-dialog" flex="60" flex-sm="100">\n    <md-toolbar  palette-background="myPurple:500" class="toolbar-default">\n        <div class="md-toolbar-tools">\n            <h2>\n                <span>Notices</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n\n<md-dialog-content class="sticky-container">\n    <div>\n        <md-content>\n            <form name="emailForm" novalidate>\n                \n\n                <md-input-container>\n                    <label for="subject">Subject</label>\n                    <input ng-model="email.subject" name="subject" required>\n                    <div ng-messages="emailForm.subject.$error">\n                        <div ng-message when="required">\n                            Please enter a subject for the message.\n                        </div>\n                    </div>\n                </md-input-container>\n\n                <md-input-container flex>\n                    <text-angular name="emailBody" ng-model="email.content" ta-target-toolbars="editor-toolbar"></text-angular>\n                </md-input-container>\n            </form>\n        </md-content>\n    </div>\n\n</md-dialog-content>\n\n<div class="md-actions" layout="row">\n    <text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n    <span flex></span>\n    <md-button ng-click="send()" palette-background="myPurple:400" class="md-primary"  ng-disabled="\n    !email.subject || !email.content || email.disable" aria-label="send">\n    {{\'EMAIL.COMPOSE.SEND\' | translate}}\n    </md-button>\n</div>'),e.put("app/authentication/admin/template/contactemails.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Messages</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <h2>Messages</h2>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">NAME</span></th>\n                        <th style = "width:20%;"><span class = "font-black">EMAIL</span></th>\n                        <th ><span class = "font-black">MESSAGE</span></th>\n                        <th >ACTIONS</th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="ct in contacts" >\n                        <td >{{ct.createdAt | date:\'dd-MM-yyyy\'}}</td>\n                        <td >{{ct.get(\'name\')}}</td>\n                        <td >{{ct.get(\'email\')}}</td>\n                        <td >\n                        {{ct.get(\'message\')}}\n                        </td>\n                        <td>\n                            <md-button ng-click="deleteMessage(ct)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Delete\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n\n            <h2>Subscribe</h2>\n\n            <table class="md-table class-list">\n                        <thead>\n                            <tr>\n                                <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                                <th style = "width:20%;"><span class = "font-black">Email</span></th>\n                                <th >ACTIONS</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                           <tr ng-repeat="sb in subscribe" >\n                                <td >{{sb.createdAt | date:\'dd-MM-yyyy\'}}</td>\n                                <td >{{sb.get(\'email\')}}</td>\n                                <td>\n                                <md-button ng-click="deleteSb(sb)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                    Delete\n                                </md-button>\n                            </td>\n                            </tr>\n                            \n                        </tbody>\n                    </table>\n\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/authentication/admin/template/course-manage.tmpl.html",'<md-content id="course-manage" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Course manager</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n\n            <md-button ng-disabled = "view == \'users\' " palette-background="pink:400" ng-click="changeView(\'users\')" class="md-raised md-primary" aria-label="Authors">Authors</md-button>\n\n            <md-button  ng-disabled = "view == \'courses\' " palette-background="pink:400" ng-click="changeView(\'courses\')" class="md-raised md-primary" aria-label="courses">courses</md-button>\n\n            <div ng-if = "view == \'users\' ">\n                <table class="md-table class-list">\n                    <thead>\n                        <tr>\n                            <th style= "width:30px;"><span class = "font-black">ID</span></th>\n                            \n                            <th><span class = "font-black">NAME</span></th>\n                            <th><span class = "font-black">EMAIL</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="user in users track by $index" >\n                            <td>{{$index + 1}}</td>\n                            <td>{{user.get(\'username\')}}</td>\n                            <td>{{user.get(\'email\')}}</td>\n                            \n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <div ng-if = "view == \'courses\' ">\n                <table class="md-table class-list">\n                    <thead>\n                        <tr>\n                            <th style= "width:30px;"><span class = "font-black">ID</span></th>\n                            \n                            <th><span class = "font-black">NAME</span></th>\n                            <th><span class = "font-black">LEVEL</span></th>\n                            <th><span class = "font-black">PAYMENT TYPE</span></th>\n                            <th><span class = "font-black">IS LIVE</span></th>\n                            <th><span class = "font-black">TEACHER</span></th>\n                            <th><span class = "font-black">ACTIONS</span></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="course in courses track by $index" >\n                            <td>{{$index + 1}}</td>\n                            <td>{{course.get(\'name\')}}</td>\n                            <td>{{course.get(\'level\')}}</td>\n                            <td>{{course.get(\'payment_type\')}}</td>\n                            <td>\n                                <span style = "color:green" ng-if = "course.get(\'live\')">LIVE</span>\n                                <span style = "color:red" ng-if = "!course.get(\'live\')">OFF LIVE</span>\n                            </td>\n                            <td>\n                                {{course.get(\'createdBy\').get(\'username\')}}\n                            </td>\n\n                            <td>\n                                <md-button ng-if = "course.get(\'live\')" palette-background="myPurple:900" ng-click="disableCourse(course)" class="md-raised md-primary" aria-label="Disable">Disable</md-button>\n\n                                <md-button ng-if = "!course.get(\'live\')" palette-background="pink:400" ng-click="enableCourse(course)" class="md-raised md-primary" aria-label="enable">enable</md-button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                \n            </div>\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/authentication/admin/template/irregular.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Irregular data</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <md-input-container class="" style="padding-bottom:0;">\n                <label>Search lemma</label>\n                <input id="word" label="word" name="word" type="text" ng-model="search_word" />\n            </md-input-container>\n            \n            <md-button style="margin-left:0" palette-background="pink:400" ng-click="search(search_word)" class="md-raised md-primary" aria-label="Clear" ng-disabled="!search_word">Search</md-button>\n\n\n            <div class="prounctions">\n                <div class="prounctions">\n                    <div class="pron-span md-subhead bg-tm border font-white margin-top-10 padding-10">\n                        <span>{{word.get(\'uk_pron\')}} [{{word.get(\'uk_change_pron\')}}] UK</span>\n                        <span>{{word.get(\'us_pron\')}} [{{word.get(\'us_change_pron\')}}] US</span>\n                    </div>\n                </div>\n\n                <h3 class="sum-header">Irregular pronunciation</h3>\n                <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                    [{{uk_pron}}][{{uk_change_pron}}] UK\n                </div>\n                <div layout="row" class="wrap">\n                    <div flex>\n                        <md-select placeholder="Pick consonant" ng-model="uk_pron_con">\n                            <md-option value="b">b</md-option>\n                            <md-option value="c">c</md-option>\n                            <md-option value="d">d</md-option>\n                            <md-option value="f">f</md-option>\n                            <md-option value="g">g</md-option>\n                            <md-option value="h">h</md-option>\n                            <md-option value="j">j</md-option>\n                            <md-option value="k">k</md-option>\n                            <md-option value="l">l</md-option>\n                            <md-option value="m">m</md-option>\n                            <md-option value="n">n</md-option>\n                            <md-option value="p">p</md-option>\n                            <md-option value="q">q</md-option>\n                            <md-option value="r">r</md-option>\n                            <md-option value="s">s</md-option>\n                            <md-option value="t">t</md-option>\n                            <md-option value="v">v</md-option>\n                            <md-option value="w">w</md-option>\n                            <md-option value="x">x</md-option>\n                            <md-option value="y">y</md-option>\n                            <md-option value="z">z</md-option>\n                            </md-select>\n                    </div>\n                    <div flex>\n                        <md-select placeholder="Pick vowel" ng-model="uk_pron_con">\n\n                            <md-optgroup label="Long vowel sounds:">\n                                <md-option>A [eɪ] a.ble</md-option>\n                                <md-option>E [i:] e.ven</md-option>\n                                <md-option>I [ʌɪ] i.ce</md-option>\n                                <md-option>O [əʊ] o.pen</md-option>\n                                <md-option>uew [u:] sch.oo.l</md-option>\n                            </md-optgroup>\n\n                            <md-optgroup label="Very short vowel sounds:">\n                                <md-option>a [a] a.t</md-option>\n                                <md-option>e [ɛ] e.gg</md-option>\n                                <md-option>ih [ɪ] i.t</md-option>\n                                <md-option>o [ɒ] o.ff</md-option>\n                                <md-option>uh [ʌ] u.gly</md-option>\n                            </md-optgroup>\n\n                            <md-optgroup label="Longer, short vowel sounds:">\n                                \n                                <md-option>aa [ə] a.go</md-option>\n                                <md-option>eh [ɛ:] h.e.lp</md-option>\n                                <md-option>ou [ʊ] b.oo.k</md-option>\n                            </md-optgroup>\n                            </md-select>\n                    </div>\n                    <div flex>\n                        <md-select placeholder="Pick combined sound" ng-model="uk_pron_con">\n                        <md-option>aw [aʊ] h.ow</md-option>\n                        <md-option>R [a:] c.ar</md-option>\n                        <md-option>er [əː] w.or.d</md-option>\n                        <md-option>eh-er [eə] squ.are</md-option>\n                        <md-option>ih-aa [ɪə] n.ear</md-option>\n                        <md-option>or [ɔ:] f.or</md-option>\n                        <md-option>oy [ɔɪ] b.oy</md-option>\n                        <md-option>ou-er [ʊə] p.oo.r</md-option>\n                        <md-option>ch [tʃ] ch.ur.ch</md-option>\n                        <md-option>jh [dʒ] en.j.oy</md-option>\n                        <md-option>sh [ʃ] sh.ut</md-option>\n                        <md-option>zj [ʒ] plea.s.ure</md-option>\n                        <md-option>th [θ] th.in</md-option>\n                        <md-option>dh [ð] th.ere</md-option>\n                        <md-option>ng [ŋ] goi.ng</md-option>\n                        <md-option>I-er [ʌɪə] f.ire</md-option>\n                        <md-option>aw-er [aʊə] s.our</md-option>\n                        </md-select>\n                        </div>\n                        <div flex>\n                        <md-select placeholder="Mark syllables & stress" ng-model="uk_pron_con">\n                        <md-option value=".">. Syllable marker</md-option>\n                        <md-option value="*">* Main syllable stress</md-option>\n                        <md-option value="\'">\' Secondary syllable stress</md-option>\n                        </md-select>\n                    </div>\n                    \n                </div>\n\n                <div >\n                    <md-button ng-click="addUK()" palette-background="myPurple:900" class="md-primary" aria-label="Enter">\n                        Enter\n                    </md-button>\n                    <md-button palette-background="pink:400" ng-click="clearUK()" class="md-raised md-primary" aria-label="Clear">Clear</md-button>\n\n                </div>\n                <hr>\n                <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                    [{{us_pron}}][{{us_change_pron}}] US\n                </div>\n                <div layout="row" class="wrap">\n                    <div flex>\n                        <md-select placeholder="Pick consonant" ng-model="us_pron_con">\n                            <md-option value="b">b</md-option>\n                            <md-option value="c">c</md-option>\n                            <md-option value="d">d</md-option>\n                            <md-option value="f">f</md-option>\n                            <md-option value="g">g</md-option>\n                            <md-option value="h">h</md-option>\n                            <md-option value="j">j</md-option>\n                            <md-option value="k">k</md-option>\n                            <md-option value="l">l</md-option>\n                            <md-option value="m">m</md-option>\n                            <md-option value="n">n</md-option>\n                            <md-option value="p">p</md-option>\n                            <md-option value="q">q</md-option>\n                            <md-option value="r">r</md-option>\n                            <md-option value="s">s</md-option>\n                            <md-option value="t">t</md-option>\n                            <md-option value="v">v</md-option>\n                            <md-option value="w">w</md-option>\n                            <md-option value="x">x</md-option>\n                            <md-option value="y">y</md-option>\n                            <md-option value="z">z</md-option>\n                            </md-select>\n                    </div>\n                    <div flex>\n                        <md-select placeholder="Pick vowel" ng-model="us_pron_con">\n\n                            <md-optgroup label="Long vowel sounds:">\n                                <md-option>A [eɪ] a.ble</md-option>\n                                <md-option>E [i:] e.ven</md-option>\n                                <md-option>I [ʌɪ] i.ce</md-option>\n                                <md-option>O [əʊ] o.pen</md-option>\n                                <md-option>uew [u:] sch.oo.l</md-option>\n                            </md-optgroup>\n\n                            <md-optgroup label="Very short vowel sounds:">\n\n                                <md-option>ae [æ] a.t </md-option>\n                                <md-option>e [ɛ] e.gg</md-option>\n                                <md-option>ih [ɪ] i.t</md-option>\n                                <md-option>o [ɒ] o.ff</md-option>\n                                <md-option>uh [ʌ] u.gly</md-option>\n                            </md-optgroup>\n\n                            <md-optgroup label="Longer, short vowel sounds:">\n\n                                <md-option>aa [ə] a.go</md-option>\n                                <md-option>eh [ɛ:] h.e.lp</md-option>\n                                <md-option>ou [ʊ] b.oo.k</md-option>\n                            </md-optgroup>\n\n\n                            </md-select>\n                    </div>\n                    <div flex>\n                        <md-select placeholder="Pick combined sounds" ng-model="us_pron_con">\n                        <md-option>aw [aʊ] h.ow</md-option>\n                        <md-option>R [a:] c.ar</md-option>\n                        <md-option>er [əː] w.or.d</md-option>\n                        <md-option>eh-er [eə] squ.are</md-option>\n                        <md-option>ih-aa [ɪə] n.ear</md-option>\n                        <md-option>or [ɔ:] f.or</md-option>\n                        <md-option>oy [ɔɪ] b.oy</md-option>\n                        <md-option>ou-er [ʊə] p.oo.r</md-option>\n                        <md-option>ch [tʃ] ch.ur.ch</md-option>\n                        <md-option>jh [dʒ] en.j.oy</md-option>\n                        <md-option>sh [ʃ] sh.ut</md-option>\n                        <md-option>zj [ʒ] plea.s.ure</md-option>\n                        <md-option>th [θ] th.in</md-option>\n                        <md-option>dh [ð] th.ere</md-option>\n                        <md-option>ng [ŋ] goi.ng</md-option>\n                        <md-option>I-er [ʌɪə] f.ire</md-option>\n                        <md-option>aw-er [aʊə] s.our</md-option>\n                        </md-select>\n                        </div>\n                        <div flex>\n                        <md-select placeholder="Mark syllables & stress" ng-model="us_pron_con">\n                        <md-option value=".">. Syllable marker</md-option>\n                        <md-option value="*">* Main syllable stress</md-option>\n                        <md-option value="\'">\' Secondary syllable stress</md-option>\n                        </md-select>\n                    </div>\n                    \n                </div>\n\n                <div>\n                     <md-button ng-click="addUS()" palette-background="myPurple:900" class="md-primary" aria-label="Enter">\n                            Enter\n                    </md-button>\n                    <md-button palette-background="pink:400" ng-click="clearUS()" class="md-raised md-primary" aria-label="Clear">Clear</md-button>\n                </div>\n\n                <h3 class="sum-header">Apply to</h3>\n\n                <md-list>\n                    <md-list-item ng-repeat="define in defines">\n                        <md-checkbox ng-model="define.check" aria-label = "{{define.get(\'definition\')}}"></md-checkbox>\n\n\n                        <div class="md-list-item-text" >\n                            {{define.get(\'definition\')}}\n                        </div>\n\n                        <md-divider ng-hide="$last"></md-divider>\n                    </md-list-item>\n                </md-list>\n                \n                <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                    [{{uk_pron}}][{{uk_change_pron}}] UK\n                </div>\n                <div class=" md-subhead bg-tm border font-white margin-top-10 padding-10">\n                    [{{us_pron}}][{{us_change_pron}}] US\n                </div>\n\n                <p ng-if = "!uk_pron || !us_pron">Irregular pron not add yet!</p>\n                <md-button style = "margin-left:0" ng-disabled = "!uk_pron || !us_pron" palette-background="pink:400" ng-click="updatePron()" class="md-raised md-primary" aria-label="Update">Update</md-button>\n\n                <md-button style = "margin-left:0" palette-background="pink:400" ng-click="clearIrregularPron()" class="md-raised md-primary" aria-label="Clear irregular pronunciation">Clear irregular pronunciation</md-button>\n\n            </div>\n\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/authentication/admin/template/members.tmpl.html",'<md-content id="members" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Members</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n            <div class="pagging">\n                <md-icon class="hand" md-font-icon="icon-chevron-left" ui-sref="admin-panel.default.members({page:pre})"></md-icon>\n                <md-icon class="hand" md-font-icon="icon-chevron-right" ui-sref="admin-panel.default.members({page:nex})" ></md-icon>\n            </div>\n                            \n            <h2>Members : {{num}}</h2>\n\n            <md-input-container>\n                <label>Enter name or email</label>\n                <input ng-change=\'searchStudentByEmail()\' ng-model-options=\'{ debounce: 1500 }\' ng-model="student.email" type="text">\n            </md-input-container>\n\n\n            <div  class="member-tables-types" >\n                    <md-checkbox   class = "margin-left-0" ng-model="table.id" aria-label="Default Checkbox">\n                        ID\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.name" aria-label="Default Checkbox">\n                        NAME\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.email" aria-label="Default Checkbox">\n                        EMAIL\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.login" aria-label="Default Checkbox">\n                        LOGIN\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.role" aria-label="Default Checkbox">\n                        ROLE\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.school" aria-label="Default Checkbox">\n                        SCHOOL\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.native" aria-label="Default Checkbox">\n                        1ST LANG\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.date" aria-label="Default Checkbox">\n                        DATE\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.actions" aria-label="Default Checkbox">\n                        ACTIONS\n                    </md-checkbox>\n\n                    <md-checkbox   class = "margin-left-0" ng-model="table.leave_time" aria-label="Default Checkbox">\n                        INACTIVE(DAYS)\n                    </md-checkbox>\n\n\n                \n            </div>\n\n            <table class="md-table class-list">\n                <thead style = "display:none;">\n                    <tr>\n                        <th style= "width:30px;" ng-if = "table.id"><span class = "font-black">ID</span></th>\n                        \n                        <th  ng-if = "table.name" ><span class = "font-black">NAME</span></th>\n                        <th  ng-if = "table.email" ><span class = "font-black">EMAIL</span></th>\n                        <th  ng-if = "table.login" ><span class = "font-black">LOGIN</span></th>\n                        <th  ng-if = "table.role" ><span class = "font-black">ROLE</span></th>\n                        <th  ng-if = "table.school" ><span class = "font-black">SCHOOL</span></th>\n                        <th  ng-if = "table.native" ><span class = "font-black">NATIVE</span></th>\n                        <th  ng-if = "table.date" ><span class = "font-black">DATE</span></th>\n                        <th  ng-if = "table.actions" >ACTIONS</th>\n                        <td  ng-if = "table.leave_time">LEAVE TIME</td>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="user in users track by $index" >\n                        <td ng-if = "table.id" > {{1 + $index + (page-1)*20}}</td>\n                        \n                        <td ng-if = "table.name" >{{user.get(\'username\')}}</td>\n                        <td ng-if = "table.email" >{{user.get(\'email\')}}</td>\n                        <td ng-if = "table.login" >{{user.get(\'login_time\') ? user.get(\'login_time\') : 0}}</td>\n                        <td ng-if = "table.role" >{{user.get(\'user_role\')}}</td>\n                        <td ng-if = "table.school" >{{user.get(\'school\')}}</td>\n                        <td ng-if = "table.native" >{{user.get(\'native\')}}</td>\n                        <td ng-if = "table.date" >{{user.createdAt | date:\'dd-MM-yyyy\'}}</td>\n                        <td ng-if = "table.actions" >\n                            <md-button ng-click="deleteUser(user)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Delete\n                            </md-button>\n\n\n                            <md-button ng-click="contact(user)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Contact\n                            </md-button>\n                        </td>\n                        <td ng-if = "table.leave_time">{{user.leave_time}}\n\n                            <md-button ng-disabled = "user.send_leave_time_email_disabe || user.leave_time < 5 || user.last_email_time_leave_time < 5"  ng-click="sendLeaveTimeEmail(user)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Send email\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/authentication/admin/template/pop-edit-word-dialog.tmpl.html",'<md-dialog class="add-quiz-dialog email-dialog" flex="70" flex-sm="100">\n    <md-toolbar class="toolbar-default" md-theme="{{triSkin.elements.toolbar}}" palette-background="myPurple:500">\n        <div class="md-toolbar-tools">\n            <h2>\n              <span>Edit word</span>\n            </h2>\n            <span flex></span>\n            <md-button class="md-icon-button" ng-click="cancel()" aria-label="cancel">\n                <md-icon md-font-icon="icon-close"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <md-divider></md-divider>\n    <md-dialog-content class="sticky-container" style="padding:16px;">\n        <p><span class = "font-purple">Parent cat</span> {{cat.get(\'name\')}}</p>\n        <p><span class = "font-purple">Lemma</span> {{word.get(\'name\')}}</p>\n        <p><span class = "font-purple">Define</span> {{word.get(\'define_obj\').get(\'definition\')}}</p>\n        \n\n        <h4 class="font-purple strong">Category</h4>\n        <div>\n            <div ng-repeat="course in vocab_courses" style = "display:inline-block" >\n                <md-button  ng-if = "!word.get(course.id)" ng-click="triggerCourse(course)" palette-background="myPurple:A100" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{course.name}}">\n                    {{course.name}}\n                </md-button>\n\n                <md-button  ng-if = "word.get(course.id)" ng-click="triggerCourse(course)" palette-background="myPurple:700" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{course.name}}">\n                    {{course.name}}\n                </md-button>\n                \n            </div>\n        </div>\n\n        <h4 class="font-purple strong">Level</h4>\n        <div>\n            <div ng-repeat="level in levels" style = "display:inline-block" >\n                <md-button  ng-if = "word.get(\'level\') != level.name " ng-click="triggerLevel(level)" palette-background="myPurple:A100" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{level.name}}">\n                    {{level.name}}\n                </md-button>\n\n                <md-button  ng-if = "word.get(\'level\') == level.name "  ng-click="triggerLevel(level)" palette-background="myPurple:700" class="margin-left-0 md-raised md-primary normal-text" palette-background="pink:400" aria-label="{{level.name}}">\n                    {{level.name}}\n                </md-button>\n                \n            </div>\n        </div>\n\n\n\n    </md-dialog-content>\n\n    <div class="md-actions" layout="row">\n        <span flex></span>\n        \n\n        <md-button class="md-primary" aria-label="Close" ng-click="cancel()">\n            Close\n        </md-button>\n    </div>\n</md-dialog>'),e.put("app/authentication/admin/template/tutorial.tmpl.html",'<div ng-if = "tutorial">\n    <div style = "margin-left: 30px;">\n        <p>Title : {{tutorial.get(\'title\')}} </p>\n        <p>Page : {{tutorial.get(\'page\')}} </p>\n        <p>Role : {{tutorial.get(\'role\')}}  </p>\n        <p>Order : {{tutorial.get(\'order\')}} </p>\n        <p>State : {{tutorial.get(\'state\')}} </p>\n        <p>Language : {{tutorial.get(\'language\')}} </p>\n\n    </div>\n    <md-whiteframe class="md-whiteframe-z1 tutorial-frame" style = "display: block" >\n        <md-icon md-font-icon="icon-play-circle-outline"></md-icon>\n        <p  ng-bind-html="tutorial.get(\'text\')"></p>\n        <p style = "overflow: auto;">\n        <md-button style = "float:right;" class="md-raised md-primary" ng-click="closeTutorial()"><md-icon md-font-icon="fa fa-times"></md-icon></md-button>\n        </p>\n    </md-whiteframe>\n</div>\n\n<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n\n\n\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Tutorial</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n\n           \n            \n\n            <h2>Tutorials</h2>\n            <div flex = 30  >\n                <md-select style = "max-width: 200px;" ng-change = "changeFilter(filter)" layout-padding placeholder="Filter" ng-model="filter">\n                    <md-option value="all">All</md-option>\n                    <md-option value={{language.key}} ng-repeat="language in languages">{{language.name}}</md-option>\n                </md-select>\n                \n            </div>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th ><span class = "font-black">TITLE</span></th>\n                        <th ><span class = "font-black">ROLE</span></th>\n                        <th style = "width:85px;text-align:center;"><span class = "font-black">LANGUAGE</span></th>\n                        <th ><span class = "font-black">PAGE</span></th>\n                        <th ><span class = "font-black">ORDER</span></th>\n                        <th style = "width:50px;text-align:center;"><span class = "font-black">VIEW</span></th>\n                        <th ><span class = "font-black">TEXT</span></th>\n                        <th ><span class = "font-black">ACTIONS</span></th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="tutorial in tutorials" >\n                        <td >{{tutorial.get(\'title\')}}</td>\n                        <td >{{tutorial.get(\'role\')}}</td>\n                        <td style = "text-align:center;" >{{languages[tutorial.get(\'language\')].name}}</td>\n                        <td >{{tutorial.get(\'page\')}}   ({{tutorial.get(\'state\')}})</td>\n                        <td >{{tutorial.get(\'order\')}}</td>\n                        <td style = "text-align:center;"  ng-bind-html="tutorial.get(\'viewed\')"></td>\n                        <td ng-bind-html="tutorial.get(\'text\')"></td>\n                        <td>\n                            <md-button ng-click="view(tutorial)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                View\n                            </md-button>\n\n                            <md-button ng-click="edit(tutorial)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Edit\n                            </md-button>\n\n                            <md-button ng-click="copy(tutorial)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Copy\n                            </md-button>\n\n                            <md-button ng-click="delete(tutorial)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Delete\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n            <div class="add-tutorial">\n\n\n                <md-input-container class="">\n                    <label>Title</label>\n                    <input id="Title" label="Title" name="Title" type="text" ng-model="data.title" />\n                </md-input-container>\n\n                <md-select placeholder="Pick" ng-model="data.role">\n                    <md-option value="teacher">Teacher</md-option>\n                    <md-option value="student">Student</md-option>\n                </md-select>\n\n                <label>Language</label>\n                <md-select placeholder="Pick" ng-model="data.language">\n                    <md-option value={{language.key}} ng-repeat="language in languages">{{language.name}}</md-option>\n                    <md-option value="Other">Other</md-option>\n                </md-select>\n\n                <label>Page</label>\n                <md-select placeholder="Pick" ng-model="data.page">\n                    <md-option value="HOMEPAGE">HOMEPAGE</md-option>\n                    <md-option value="REFERENCE">REFERENCE</md-option>\n                    <md-option value="STUDY NOTES">STUDY NOTES</md-option>\n                    <md-option value="LEVEL TEST">LEVEL TEST</md-option>\n                    <md-option value="TUTORIAL">TUTORIAL</md-option>\n                    <md-option ng-if = "data.role == \'teacher\' " value="PROGRESS TEACHER">PROGRESS TEACHER</md-option>\n                    <md-option ng-if = "data.role == \'student\' " value="PROGRESS STUDENT">PROGRESS STUDENT</md-option>\n                    <md-option ng-if = "data.role == \'teacher\' " value="ClASS MANAGE">ClASS MANAGE</md-option>\n                    <md-option ng-if = "data.role == \'teacher\' " value="PRINTABLE WORKSHEETS">PRINTABLE WORKSHEETS</md-option>\n\n                    <md-option ng-if = "data.role == \'student\' " value="PRON SELECTION">PRON SELECTION</md-option>\n                    <md-option ng-if = "data.role == \'student\' " value="COURSE 100% SHARE">COURSE 100% SHARE</md-option>\n                </md-select>\n\n                <label>Order</label>\n                <md-select placeholder="Pick" ng-model="data.order">\n                    <md-option value=1>1</md-option>\n                    <md-option value=2>2</md-option>\n                    <md-option value=3>3</md-option>\n                    <md-option value=4>4</md-option>\n                    <md-option value=5>5</md-option>\n                    <md-option value=6>6</md-option>\n                    <md-option value=7>7</md-option>\n                    <md-option value=8>8</md-option>\n                    <md-option value=9>9</md-option>\n                    <md-option value=10>10</md-option>\n                    <md-option value=11>11</md-option>\n                    <md-option value=12>12</md-option>\n                    <md-option value=13>13</md-option>\n                    \n                </md-select>\n\n                <md-input-container flex class="study-note-text-area">\n                    <text-angular name="tutorialBody" ng-model="data.text" ta-target-toolbars="editor-toolbar"></text-angular>\n                </md-input-container>\n\n\n                <text-angular-toolbar name="editor-toolbar" class="email-dialog-editor-toolbar" ta-toolbar-active-button-class="active"></text-angular-toolbar>\n\n                \n\n                <label>Viewed</label>\n                \n                <md-switch ng-model="data.viewed" ng-true-value="true" ng-false-value="false" aria-label="Enable viewed" >\n                    Enable viewed\n                </md-switch>\n\n                <md-button style="margin-left:0" palette-background="pink:400" ng-click="save()" class="md-raised md-primary" aria-label="Clear" ng-disabled="!data.title || !data.role || !data.language || !data.page || !data.order || !data.text || data.disable">Save</md-button>\n\n                <md-button ng-click="clearTags()" class="md-raised md-primary" palette-background="pink:400" aria-label="clear tags">\n                    clear tags\n                </md-button>\n                \n            </div>\n\n            \n\n        </md-card-content>\n    </md-card>\n    </md-conten'),e.put("app/authentication/admin/template/updatedefine.tmpl.html",'<md-content id="notes-edit" class="study-edit tm word-detail-page wp-detail add-quiz-dialog">\n    <div class="category-nav">\n        <div class="pagging">\n            <md-icon style="margin-left:3px!important;" class=\'hand\' md-font-icon="icon-chevron-left" onClick="history.go(-1);return true;"></md-icon>\n        </div>\n    </div>\n    <md-card layout-margin>\n        <md-card-title palette-background="myPurple:500" layout-padding>\n            <md-card-title-text>\n                <span class="md-headline">  \n                Cache data</span>\n            </md-card-title-text>\n        </md-card-title>\n        <md-card-content>\n\n            <h2>Update category</h2>\n\n             <div style = "margin-bottom: 8px;">\n                <md-button ng-disabled = "category_page <= 1" ng-click = "prePageCat()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="pre"><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <md-button ng-disabled = "add_words.length < limit" ng-click = "nextPageCat()" palette-background="pink:400" class="md-raised md-primary" aria-label="next"><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n                {{category_page}}\n            </div>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">CATEGORY</span></th>\n                        <th style = "width:20%;"><span class = "font-black">DETAILS</span></th>\n                        <th >ACTIONS</th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="add_word in add_words" >\n                        <td >{{add_word.updatedAt | date:\'dd-MM-yyyy\'}}</td>\n                        <td >{{add_word.get(\'name\')}}</td>\n                        <td >\n                        {{add_word.get(\'change_data\')}}\n                        </td>\n                        <td>\n                            <md-button ng-disabled = "add_word.disable" ng-click="updateCategory(add_word)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Update\n                            </md-button>\n\n                            <md-button ng-disabled = "add_word.disable" ng-click="deleteCategory(add_word)" class="md-raised md-primary" aria-label="fab button">\n                                Delete\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n\n            <h2>Update form & pronunciation</h2>\n\n            <div style = "margin-bottom: 8px;">\n                <md-button ng-disabled = "word_page <= 1" ng-click = "prePageWord()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="pre"><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <md-button ng-disabled = "words.length < limit" ng-click = "nextPageWord()" palette-background="pink:400" class="md-raised md-primary" aria-label="next"><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n                {{word_page}}\n            </div>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">TARGET LANGUAGE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">PRONUNCIATION</span></th>\n                        <th style = "width:20%;"><span class = "font-black">FORM</span></th>\n                        <th >ACTIONS</th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="word in words" >\n                        <td >{{word.updatedAt | date:\'dd-MM-yyyy\'}}</td>\n                        <td >{{word.get(\'lemma\')}}</td>\n                        <td>\n                        <span style = "display: block;">UK ({{word.get(\'uk_pron\')}} - {{word.get(\'uk_change_pron\')}})</span>\n                        <span style = "display: block;">US ({{word.get(\'us_pron\')}} - {{word.get(\'us_change_pron\')}})</span>\n                        </td>\n                        <td>\n                            <span style = "display: block;" ng-if = "word.get(\'form_v\')">\n                                V (\n                                {{word.get(\'form_v_a\')}},\n                                {{word.get(\'form_v_b\')}},\n                                {{word.get(\'form_v_c\')}},\n                                {{word.get(\'form_v_d\')}},\n                                {{word.get(\'form_v_e\')}}\n                                )\n                                \n                            </span>\n\n                            <span style = "display: block;" ng-if = "word.get(\'form_n\')">\n                                N (\n                                {{word.get(\'form_n_a\')}},\n                                {{word.get(\'form_n_b\')}}\n                                )\n                                \n                            </span>\n\n                            <span style = "display: block;" ng-if = "word.get(\'form_j\')">\n                                Adj (\n                                {{word.get(\'form_j_a\')}},\n                                {{word.get(\'form_j_b\')}},\n                                {{word.get(\'form_j_c\')}}\n                                )\n                                \n                            </span>\n\n                            <span style = "display: block;" ng-if = "word.get(\'form_r\')">\n                                Adverb (\n                                {{word.get(\'form_r_a\')}},\n                                {{word.get(\'form_r_b\')}}\n                                )\n                            </span>\n\n                            \n                        </td>\n                        <td>\n                            <md-button ui-sref="admin-panel.default.word-page({lemma:word.get(\'lemma\'),originlemma:word.get(\'lemma\')})" class="md-raised md-primary"  aria-label="fab button">\n                                Edit\n                            </md-button>\n\n                            <md-button ng-disabled = "word.disable" ng-click="updateWordData(word)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Check\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n            \n\n            <h2>Update definitions & sentences</h2>\n\n            <div style = "margin-bottom: 8px;">\n                <md-button ng-disabled = "dict_page <= 1" ng-click = "prePageDict()" palette-background="pink:400" class="margin-left-0 md-raised md-primary" aria-label="pre"><md-icon  class="hand" md-font-icon="icon-chevron-left"></md-icon></md-button>\n\n                <md-button ng-disabled = "defines.length < limit" ng-click = "nextPageDict()" palette-background="pink:400" class="md-raised md-primary" aria-label="next"><md-icon class="hand" md-font-icon="icon-chevron-right"></md-icon></md-button>\n                {{dict_page}}\n            </div>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">LEMMA</span></th>\n                        <th style = "width:20%;"><span class = "font-black">DEFINITION</span></th>\n                        <th ><span class = "font-black">SENTENCE</span></th>\n                        <th >ACTIONS</th>\n\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="define in defines" >\n                        <td >{{define.updatedAt | date:\'dd-MM-yyyy\'}} \n                            <span ng-if = "define.get(\'update_user\')">({{define.get(\'update_user\')}})</span>\n                            <span ng-if = "define.get(\'vote_number\')">({{define.get(\'vote_number\')}})</span>\n                        </td>\n                        <td >{{define.get(\'lemma\')}}</td>\n                        <td >{{define.get(\'definition\')}}</td>\n                        <td >\n                        {{define.get(\'sentence_main\')}}\n                        </td>\n                        <td>\n                            <md-button ui-sref="admin-panel.default.word-page({lemma:define.get(\'lemma\'),originlemma:define.get(\'lemma\')})" class="md-raised md-primary"  aria-label="fab button">\n                                Edit\n                            </md-button>\n                            \n                            <md-button ng-disabled = "define.disable || define.get(\'update_data_cache\')" ng-click="updateDefineData(define)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                Check\n                            </md-button>\n\n                            <md-button ng-disabled = "define.disable" ng-click="removeDefineCheck(define)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                remove\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n            <h2>Update word image</h2>\n\n            <table class="md-table class-list">\n                <thead>\n                    <tr>\n                        <th style = "width:20%;"><span class = "font-black">DATE</span></th>\n                        <th style = "width:20%;"><span class = "font-black">LEMMA</span></th>\n                        <th style = "width:20%;"><span class = "font-black">IMAGE</span></th>\n                        <th >ACTIONS</th>\n                    </tr>\n                </thead>\n                <tbody>\n                   <tr ng-repeat="fixed_word in fixed_words track by $index" >\n                        <td >{{fixed_word.updatedAt | date:\'dd-MM-yyyy\'}}</td>\n                        <td >{{fixed_word.get(\'lemma\')}}</td>\n                        <td >\n                            <img width=100 height=100  ng-src="{{fixed_word.get(\'imagesmain\').replace(\'http://cdn\',\'//cdn\')}}">\n                        </td>\n                        <td>\n                            <md-button ng-disabled = "fixed_word.disable" ng-click="editImage(fixed_word)" class="md-raised md-primary" palette-background="pink:400" aria-label="fab button">\n                                edit image\n                            </md-button>\n\n                            <md-button ng-disabled = "fixed_word.disable" ng-click="deleteFixdWord($index)" class="md-raised md-primary" aria-label="fab button">\n                                Delete\n                            </md-button>\n                        </td>\n                    </tr>\n                    \n                </tbody>\n            </table>\n\n            \n\n        </md-card-content>\n    </md-card>\n    </md-conten')
}]);